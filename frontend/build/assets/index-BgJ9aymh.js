var h3=Object.defineProperty;var _1=e=>{throw TypeError(e)};var m3=(e,t,n)=>t in e?h3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ji=(e,t,n)=>m3(e,typeof t!="symbol"?t+"":t,n),tb=(e,t,n)=>t.has(e)||_1("Cannot "+n);var pe=(e,t,n)=>(tb(e,t,"read from private field"),n?n.call(e):t.get(e)),Kt=(e,t,n)=>t.has(e)?_1("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),vt=(e,t,n,r)=>(tb(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),on=(e,t,n)=>(tb(e,t,"access private method"),n);var ch=(e,t,n,r)=>({set _(o){vt(e,t,o,n)},get _(){return pe(e,t,r)}});function KW(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function p3(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var LW={exports:{}},Sp={},EW={exports:{}},tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C=Symbol.for("react.element"),f3=Symbol.for("react.portal"),b3=Symbol.for("react.fragment"),y3=Symbol.for("react.strict_mode"),Z3=Symbol.for("react.profiler"),v3=Symbol.for("react.provider"),G3=Symbol.for("react.context"),S3=Symbol.for("react.forward_ref"),B3=Symbol.for("react.suspense"),w3=Symbol.for("react.memo"),W3=Symbol.for("react.lazy"),q1=Symbol.iterator;function R3(e){return e===null||typeof e!="object"?null:(e=q1&&e[q1]||e["@@iterator"],typeof e=="function"?e:null)}var MW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DW=Object.assign,zW={};function hd(e,t,n){this.props=e,this.context=t,this.refs=zW,this.updater=n||MW}hd.prototype.isReactComponent={};hd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function TW(){}TW.prototype=hd.prototype;function TZ(e,t,n){this.props=e,this.context=t,this.refs=zW,this.updater=n||MW}var UZ=TZ.prototype=new TW;UZ.constructor=TZ;DW(UZ,hd.prototype);UZ.isPureReactComponent=!0;var $1=Array.isArray,UW=Object.prototype.hasOwnProperty,jZ={current:null},jW={key:!0,ref:!0,__self:!0,__source:!0};function QW(e,t,n){var r,o={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)UW.call(t,r)&&!jW.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)o[r]===void 0&&(o[r]=s[r]);return{$$typeof:$C,type:e,key:i,ref:a,props:o,_owner:jZ.current}}function k3(e,t){return{$$typeof:$C,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function QZ(e){return typeof e=="object"&&e!==null&&e.$$typeof===$C}function V3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var eS=/\/+/g;function nb(e,t){return typeof e=="object"&&e!==null&&e.key!=null?V3(""+e.key):t.toString(36)}function Qh(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case $C:case f3:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+nb(a,0):r,$1(o)?(n="",e!=null&&(n=e.replace(eS,"$&/")+"/"),Qh(o,t,n,"",function(c){return c})):o!=null&&(QZ(o)&&(o=k3(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(eS,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",$1(e))for(var s=0;s<e.length;s++){i=e[s];var l=r+nb(i,s);a+=Qh(i,t,n,l,o)}else if(l=R3(e),typeof l=="function")for(e=l.call(e),s=0;!(i=e.next()).done;)i=i.value,l=r+nb(i,s++),a+=Qh(i,t,n,l,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ih(e,t,n){if(e==null)return e;var r=[],o=0;return Qh(e,r,"","",function(i){return t.call(n,i,o++)}),r}function X3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Lo={current:null},Ph={transition:null},J3={ReactCurrentDispatcher:Lo,ReactCurrentBatchConfig:Ph,ReactCurrentOwner:jZ};function PW(){throw Error("act(...) is not supported in production builds of React.")}tn.Children={map:Ih,forEach:function(e,t,n){Ih(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ih(e,function(){t++}),t},toArray:function(e){return Ih(e,function(t){return t})||[]},only:function(e){if(!QZ(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tn.Component=hd;tn.Fragment=b3;tn.Profiler=Z3;tn.PureComponent=TZ;tn.StrictMode=y3;tn.Suspense=B3;tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J3;tn.act=PW;tn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=DW({},e.props),o=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=jZ.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)UW.call(t,l)&&!jW.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:$C,type:e.type,key:o,ref:i,props:r,_owner:a}};tn.createContext=function(e){return e={$$typeof:G3,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:v3,_context:e},e.Consumer=e};tn.createElement=QW;tn.createFactory=function(e){var t=QW.bind(null,e);return t.type=e,t};tn.createRef=function(){return{current:null}};tn.forwardRef=function(e){return{$$typeof:S3,render:e}};tn.isValidElement=QZ;tn.lazy=function(e){return{$$typeof:W3,_payload:{_status:-1,_result:e},_init:X3}};tn.memo=function(e,t){return{$$typeof:w3,type:e,compare:t===void 0?null:t}};tn.startTransition=function(e){var t=Ph.transition;Ph.transition={};try{e()}finally{Ph.transition=t}};tn.unstable_act=PW;tn.useCallback=function(e,t){return Lo.current.useCallback(e,t)};tn.useContext=function(e){return Lo.current.useContext(e)};tn.useDebugValue=function(){};tn.useDeferredValue=function(e){return Lo.current.useDeferredValue(e)};tn.useEffect=function(e,t){return Lo.current.useEffect(e,t)};tn.useId=function(){return Lo.current.useId()};tn.useImperativeHandle=function(e,t,n){return Lo.current.useImperativeHandle(e,t,n)};tn.useInsertionEffect=function(e,t){return Lo.current.useInsertionEffect(e,t)};tn.useLayoutEffect=function(e,t){return Lo.current.useLayoutEffect(e,t)};tn.useMemo=function(e,t){return Lo.current.useMemo(e,t)};tn.useReducer=function(e,t,n){return Lo.current.useReducer(e,t,n)};tn.useRef=function(e){return Lo.current.useRef(e)};tn.useState=function(e){return Lo.current.useState(e)};tn.useSyncExternalStore=function(e,t,n){return Lo.current.useSyncExternalStore(e,t,n)};tn.useTransition=function(){return Lo.current.useTransition()};tn.version="18.3.1";EW.exports=tn;var F=EW.exports;const qe=qC(F),cC=KW({__proto__:null,default:qe},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x3=F,Y3=Symbol.for("react.element"),N3=Symbol.for("react.fragment"),H3=Object.prototype.hasOwnProperty,F3=x3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K3={key:!0,ref:!0,__self:!0,__source:!0};function OW(e,t,n){var r,o={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)H3.call(t,r)&&!K3.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Y3,type:e,key:i,ref:a,props:o,_owner:F3.current}}Sp.Fragment=N3;Sp.jsx=OW;Sp.jsxs=OW;LW.exports=Sp;var w=LW.exports,_W={exports:{}},Xi={},qW={exports:{}},$W={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,E){var O=K.length;K.push(E);e:for(;0<O;){var re=O-1>>>1,H=K[re];if(0<o(H,E))K[re]=E,K[O]=H,O=re;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var E=K[0],O=K.pop();if(O!==E){K[0]=O;e:for(var re=0,H=K.length,z=H>>>1;re<z;){var j=2*(re+1)-1,$=K[j],ee=j+1,le=K[ee];if(0>o($,O))ee<H&&0>o(le,$)?(K[re]=le,K[ee]=O,re=ee):(K[re]=$,K[j]=O,re=j);else if(ee<H&&0>o(le,O))K[re]=le,K[ee]=O,re=ee;else break e}}return E}function o(K,E){var O=K.sortIndex-E.sortIndex;return O!==0?O:K.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,g=null,d=3,I=!1,C=!1,h=!1,f=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(K){for(var E=n(c);E!==null;){if(E.callback===null)r(c);else if(E.startTime<=K)r(c),E.sortIndex=E.expirationTime,t(l,E);else break;E=n(c)}}function Z(K){if(h=!1,p(K),!C)if(n(l)!==null)C=!0,L(v);else{var E=n(c);E!==null&&M(Z,E.startTime-K)}}function v(K,E){C=!1,h&&(h=!1,A(y),y=-1),I=!0;var O=d;try{for(p(E),g=n(l);g!==null&&(!(g.expirationTime>E)||K&&!R());){var re=g.callback;if(typeof re=="function"){g.callback=null,d=g.priorityLevel;var H=re(g.expirationTime<=E);E=e.unstable_now(),typeof H=="function"?g.callback=H:g===n(l)&&r(l),p(E)}else r(l);g=n(l)}if(g!==null)var z=!0;else{var j=n(c);j!==null&&M(Z,j.startTime-E),z=!1}return z}finally{g=null,d=O,I=!1}}var k=!1,B=null,y=-1,W=5,G=-1;function R(){return!(e.unstable_now()-G<W)}function X(){if(B!==null){var K=e.unstable_now();G=K;var E=!0;try{E=B(!0,K)}finally{E?Y():(k=!1,B=null)}}else k=!1}var Y;if(typeof m=="function")Y=function(){m(X)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,D=x.port2;x.port1.onmessage=X,Y=function(){D.postMessage(null)}}else Y=function(){f(X,0)};function L(K){B=K,k||(k=!0,Y())}function M(K,E){y=f(function(){K(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){C||I||(C=!0,L(v))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(K){switch(d){case 1:case 2:case 3:var E=3;break;default:E=d}var O=d;d=E;try{return K()}finally{d=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,E){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var O=d;d=K;try{return E()}finally{d=O}},e.unstable_scheduleCallback=function(K,E,O){var re=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?re+O:re):O=re,K){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=O+H,K={id:u++,callback:E,priorityLevel:K,startTime:O,expirationTime:H,sortIndex:-1},O>re?(K.sortIndex=O,t(c,K),n(l)===null&&K===n(c)&&(h?(A(y),y=-1):h=!0,M(Z,O-re))):(K.sortIndex=H,t(l,K),C||I||(C=!0,L(v))),K},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(K){var E=d;return function(){var O=d;d=E;try{return K.apply(this,arguments)}finally{d=O}}}})($W);qW.exports=$W;var L3=qW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E3=F,ki=L3;function Oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eR=new Set,IC={};function Ac(e,t){$I(e,t),$I(e+"Capture",t)}function $I(e,t){for(IC[e]=t,e=0;e<t.length;e++)eR.add(t[e])}var zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ny=Object.prototype.hasOwnProperty,M3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tS={},nS={};function D3(e){return Ny.call(nS,e)?!0:Ny.call(tS,e)?!1:M3.test(e)?nS[e]=!0:(tS[e]=!0,!1)}function z3(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function T3(e,t,n,r){if(t===null||typeof t>"u"||z3(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Eo(e,t,n,r,o,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var co={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){co[e]=new Eo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];co[t]=new Eo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){co[e]=new Eo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){co[e]=new Eo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){co[e]=new Eo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){co[e]=new Eo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){co[e]=new Eo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){co[e]=new Eo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){co[e]=new Eo(e,5,!1,e.toLowerCase(),null,!1,!1)});var PZ=/[\-:]([a-z])/g;function OZ(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(PZ,OZ);co[t]=new Eo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(PZ,OZ);co[t]=new Eo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(PZ,OZ);co[t]=new Eo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){co[e]=new Eo(e,1,!1,e.toLowerCase(),null,!1,!1)});co.xlinkHref=new Eo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){co[e]=new Eo(e,1,!1,e.toLowerCase(),null,!0,!0)});function _Z(e,t,n,r){var o=co.hasOwnProperty(t)?co[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(T3(t,n,o,r)&&(n=null),r||o===null?D3(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Os=E3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dh=Symbol.for("react.element"),II=Symbol.for("react.portal"),dI=Symbol.for("react.fragment"),qZ=Symbol.for("react.strict_mode"),Hy=Symbol.for("react.profiler"),tR=Symbol.for("react.provider"),nR=Symbol.for("react.context"),$Z=Symbol.for("react.forward_ref"),Fy=Symbol.for("react.suspense"),Ky=Symbol.for("react.suspense_list"),ev=Symbol.for("react.memo"),vl=Symbol.for("react.lazy"),rR=Symbol.for("react.offscreen"),rS=Symbol.iterator;function iu(e){return e===null||typeof e!="object"?null:(e=rS&&e[rS]||e["@@iterator"],typeof e=="function"?e:null)}var ar=Object.assign,rb;function Xu(e){if(rb===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);rb=t&&t[1]||""}return`
`+rb+e}var ob=!1;function ib(e,t){if(!e||ob)return"";ob=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),i=r.stack.split(`
`),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(a!==1||s!==1)do if(a--,s--,0>s||o[a]!==i[s]){var l=`
`+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{ob=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Xu(e):""}function U3(e){switch(e.tag){case 5:return Xu(e.type);case 16:return Xu("Lazy");case 13:return Xu("Suspense");case 19:return Xu("SuspenseList");case 0:case 2:case 15:return e=ib(e.type,!1),e;case 11:return e=ib(e.type.render,!1),e;case 1:return e=ib(e.type,!0),e;default:return""}}function Ly(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case dI:return"Fragment";case II:return"Portal";case Hy:return"Profiler";case qZ:return"StrictMode";case Fy:return"Suspense";case Ky:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nR:return(e.displayName||"Context")+".Consumer";case tR:return(e._context.displayName||"Context")+".Provider";case $Z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ev:return t=e.displayName||null,t!==null?t:Ly(e.type)||"Memo";case vl:t=e._payload,e=e._init;try{return Ly(e(t))}catch{}}return null}function j3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ly(t);case 8:return t===qZ?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _l(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Q3(e){var t=oR(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function uh(e){e._valueTracker||(e._valueTracker=Q3(e))}function iR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=oR(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function mm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ey(e,t){var n=t.checked;return ar({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function oS(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=_l(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function aR(e,t){t=t.checked,t!=null&&_Z(e,"checked",t,!1)}function My(e,t){aR(e,t);var n=_l(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dy(e,t.type,n):t.hasOwnProperty("defaultValue")&&Dy(e,t.type,_l(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function iS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Dy(e,t,n){(t!=="number"||mm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ju=Array.isArray;function WI(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_l(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function zy(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return ar({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function aS(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Oe(92));if(Ju(n)){if(1<n.length)throw Error(Oe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_l(n)}}function sR(e,t){var n=_l(t.value),r=_l(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ty(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ch,gR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ch=Ch||document.createElement("div"),Ch.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ch.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function dC(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Tu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P3=["Webkit","ms","Moz","O"];Object.keys(Tu).forEach(function(e){P3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tu[t]=Tu[e]})});function cR(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Tu.hasOwnProperty(e)&&Tu[e]?(""+t).trim():t+"px"}function IR(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=cR(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var O3=ar({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uy(e,t){if(t){if(O3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Oe(62))}}function jy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qy=null;function tv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Py=null,RI=null,kI=null;function lS(e){if(e=nA(e)){if(typeof Py!="function")throw Error(Oe(280));var t=e.stateNode;t&&(t=kp(t),Py(e.stateNode,e.type,t))}}function dR(e){RI?kI?kI.push(e):kI=[e]:RI=e}function uR(){if(RI){var e=RI,t=kI;if(kI=RI=null,lS(e),t)for(e=0;e<t.length;e++)lS(t[e])}}function CR(e,t){return e(t)}function AR(){}var ab=!1;function hR(e,t,n){if(ab)return e(t,n);ab=!0;try{return CR(e,t,n)}finally{ab=!1,(RI!==null||kI!==null)&&(AR(),uR())}}function uC(e,t){var n=e.stateNode;if(n===null)return null;var r=kp(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Oe(231,t,typeof n));return n}var Oy=!1;if(zs)try{var au={};Object.defineProperty(au,"passive",{get:function(){Oy=!0}}),window.addEventListener("test",au,au),window.removeEventListener("test",au,au)}catch{Oy=!1}function _3(e,t,n,r,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Uu=!1,pm=null,fm=!1,_y=null,q3={onError:function(e){Uu=!0,pm=e}};function $3(e,t,n,r,o,i,a,s,l){Uu=!1,pm=null,_3.apply(q3,arguments)}function eN(e,t,n,r,o,i,a,s,l){if($3.apply(this,arguments),Uu){if(Uu){var c=pm;Uu=!1,pm=null}else throw Error(Oe(198));fm||(fm=!0,_y=c)}}function hc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function mR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gS(e){if(hc(e)!==e)throw Error(Oe(188))}function tN(e){var t=e.alternate;if(!t){if(t=hc(e),t===null)throw Error(Oe(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return gS(o),e;if(i===r)return gS(o),t;i=i.sibling}throw Error(Oe(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a)throw Error(Oe(189))}}if(n.alternate!==r)throw Error(Oe(190))}if(n.tag!==3)throw Error(Oe(188));return n.stateNode.current===n?e:t}function pR(e){return e=tN(e),e!==null?fR(e):null}function fR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fR(e);if(t!==null)return t;e=e.sibling}return null}var bR=ki.unstable_scheduleCallback,cS=ki.unstable_cancelCallback,nN=ki.unstable_shouldYield,rN=ki.unstable_requestPaint,fr=ki.unstable_now,oN=ki.unstable_getCurrentPriorityLevel,nv=ki.unstable_ImmediatePriority,yR=ki.unstable_UserBlockingPriority,bm=ki.unstable_NormalPriority,iN=ki.unstable_LowPriority,ZR=ki.unstable_IdlePriority,Bp=null,ls=null;function aN(e){if(ls&&typeof ls.onCommitFiberRoot=="function")try{ls.onCommitFiberRoot(Bp,e,void 0,(e.current.flags&128)===128)}catch{}}var Ra=Math.clz32?Math.clz32:gN,sN=Math.log,lN=Math.LN2;function gN(e){return e>>>=0,e===0?32:31-(sN(e)/lN|0)|0}var Ah=64,hh=4194304;function xu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ym(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~o;s!==0?r=xu(s):(i&=a,i!==0&&(r=xu(i)))}else a=n&~o,a!==0?r=xu(a):i!==0&&(r=xu(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ra(t),o=1<<n,r|=e[n],t&=~o;return r}function cN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IN(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Ra(i),s=1<<a,l=o[a];l===-1?(!(s&n)||s&r)&&(o[a]=cN(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}function qy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vR(){var e=Ah;return Ah<<=1,!(Ah&4194240)&&(Ah=64),e}function sb(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function eA(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ra(t),e[t]=n}function dN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Ra(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function rv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ra(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Bn=0;function GR(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var SR,ov,BR,wR,WR,$y=!1,mh=[],Ml=null,Dl=null,zl=null,CC=new Map,AC=new Map,Sl=[],uN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function IS(e,t){switch(e){case"focusin":case"focusout":Ml=null;break;case"dragenter":case"dragleave":Dl=null;break;case"mouseover":case"mouseout":zl=null;break;case"pointerover":case"pointerout":CC.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":AC.delete(t.pointerId)}}function su(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=nA(t),t!==null&&ov(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function CN(e,t,n,r,o){switch(t){case"focusin":return Ml=su(Ml,e,t,n,r,o),!0;case"dragenter":return Dl=su(Dl,e,t,n,r,o),!0;case"mouseover":return zl=su(zl,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return CC.set(i,su(CC.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,AC.set(i,su(AC.get(i)||null,e,t,n,r,o)),!0}return!1}function RR(e){var t=Yg(e.target);if(t!==null){var n=hc(t);if(n!==null){if(t=n.tag,t===13){if(t=mR(n),t!==null){e.blockedOn=t,WR(e.priority,function(){BR(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Oh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=e2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Qy=r,n.target.dispatchEvent(r),Qy=null}else return t=nA(n),t!==null&&ov(t),e.blockedOn=n,!1;t.shift()}return!0}function dS(e,t,n){Oh(e)&&n.delete(t)}function AN(){$y=!1,Ml!==null&&Oh(Ml)&&(Ml=null),Dl!==null&&Oh(Dl)&&(Dl=null),zl!==null&&Oh(zl)&&(zl=null),CC.forEach(dS),AC.forEach(dS)}function lu(e,t){e.blockedOn===t&&(e.blockedOn=null,$y||($y=!0,ki.unstable_scheduleCallback(ki.unstable_NormalPriority,AN)))}function hC(e){function t(o){return lu(o,e)}if(0<mh.length){lu(mh[0],e);for(var n=1;n<mh.length;n++){var r=mh[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ml!==null&&lu(Ml,e),Dl!==null&&lu(Dl,e),zl!==null&&lu(zl,e),CC.forEach(t),AC.forEach(t),n=0;n<Sl.length;n++)r=Sl[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sl.length&&(n=Sl[0],n.blockedOn===null);)RR(n),n.blockedOn===null&&Sl.shift()}var VI=Os.ReactCurrentBatchConfig,Zm=!0;function hN(e,t,n,r){var o=Bn,i=VI.transition;VI.transition=null;try{Bn=1,iv(e,t,n,r)}finally{Bn=o,VI.transition=i}}function mN(e,t,n,r){var o=Bn,i=VI.transition;VI.transition=null;try{Bn=4,iv(e,t,n,r)}finally{Bn=o,VI.transition=i}}function iv(e,t,n,r){if(Zm){var o=e2(e,t,n,r);if(o===null)mb(e,t,r,vm,n),IS(e,r);else if(CN(o,e,t,n,r))r.stopPropagation();else if(IS(e,r),t&4&&-1<uN.indexOf(e)){for(;o!==null;){var i=nA(o);if(i!==null&&SR(i),i=e2(e,t,n,r),i===null&&mb(e,t,r,vm,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else mb(e,t,r,null,n)}}var vm=null;function e2(e,t,n,r){if(vm=null,e=tv(r),e=Yg(e),e!==null)if(t=hc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=mR(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vm=e,null}function kR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oN()){case nv:return 1;case yR:return 4;case bm:case iN:return 16;case ZR:return 536870912;default:return 16}default:return 16}}var Nl=null,av=null,_h=null;function VR(){if(_h)return _h;var e,t=av,n=t.length,r,o="value"in Nl?Nl.value:Nl.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[i-r];r++);return _h=o.slice(e,1<r?1-r:void 0)}function qh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ph(){return!0}function uS(){return!1}function Ji(e){function t(n,r,o,i,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ph:uS,this.isPropagationStopped=uS,this}return ar(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ph)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ph)},persist:function(){},isPersistent:ph}),t}var md={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sv=Ji(md),tA=ar({},md,{view:0,detail:0}),pN=Ji(tA),lb,gb,gu,wp=ar({},tA,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gu&&(gu&&e.type==="mousemove"?(lb=e.screenX-gu.screenX,gb=e.screenY-gu.screenY):gb=lb=0,gu=e),lb)},movementY:function(e){return"movementY"in e?e.movementY:gb}}),CS=Ji(wp),fN=ar({},wp,{dataTransfer:0}),bN=Ji(fN),yN=ar({},tA,{relatedTarget:0}),cb=Ji(yN),ZN=ar({},md,{animationName:0,elapsedTime:0,pseudoElement:0}),vN=Ji(ZN),GN=ar({},md,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),SN=Ji(GN),BN=ar({},md,{data:0}),AS=Ji(BN),wN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RN[e])?!!t[e]:!1}function lv(){return kN}var VN=ar({},tA,{key:function(e){if(e.key){var t=wN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?WN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lv,charCode:function(e){return e.type==="keypress"?qh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),XN=Ji(VN),JN=ar({},wp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hS=Ji(JN),xN=ar({},tA,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lv}),YN=Ji(xN),NN=ar({},md,{propertyName:0,elapsedTime:0,pseudoElement:0}),HN=Ji(NN),FN=ar({},wp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),KN=Ji(FN),LN=[9,13,27,32],gv=zs&&"CompositionEvent"in window,ju=null;zs&&"documentMode"in document&&(ju=document.documentMode);var EN=zs&&"TextEvent"in window&&!ju,XR=zs&&(!gv||ju&&8<ju&&11>=ju),mS=" ",pS=!1;function JR(e,t){switch(e){case"keyup":return LN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xR(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var uI=!1;function MN(e,t){switch(e){case"compositionend":return xR(t);case"keypress":return t.which!==32?null:(pS=!0,mS);case"textInput":return e=t.data,e===mS&&pS?null:e;default:return null}}function DN(e,t){if(uI)return e==="compositionend"||!gv&&JR(e,t)?(e=VR(),_h=av=Nl=null,uI=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return XR&&t.locale!=="ko"?null:t.data;default:return null}}var zN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zN[e.type]:t==="textarea"}function YR(e,t,n,r){dR(r),t=Gm(t,"onChange"),0<t.length&&(n=new sv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qu=null,mC=null;function TN(e){UR(e,0)}function Wp(e){var t=hI(e);if(iR(t))return e}function UN(e,t){if(e==="change")return t}var NR=!1;if(zs){var Ib;if(zs){var db="oninput"in document;if(!db){var bS=document.createElement("div");bS.setAttribute("oninput","return;"),db=typeof bS.oninput=="function"}Ib=db}else Ib=!1;NR=Ib&&(!document.documentMode||9<document.documentMode)}function yS(){Qu&&(Qu.detachEvent("onpropertychange",HR),mC=Qu=null)}function HR(e){if(e.propertyName==="value"&&Wp(mC)){var t=[];YR(t,mC,e,tv(e)),hR(TN,t)}}function jN(e,t,n){e==="focusin"?(yS(),Qu=t,mC=n,Qu.attachEvent("onpropertychange",HR)):e==="focusout"&&yS()}function QN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wp(mC)}function PN(e,t){if(e==="click")return Wp(t)}function ON(e,t){if(e==="input"||e==="change")return Wp(t)}function _N(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xa=typeof Object.is=="function"?Object.is:_N;function pC(e,t){if(Xa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Ny.call(t,o)||!Xa(e[o],t[o]))return!1}return!0}function ZS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vS(e,t){var n=ZS(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ZS(n)}}function FR(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?FR(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function KR(){for(var e=window,t=mm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=mm(e.document)}return t}function cv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qN(e){var t=KR(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&FR(n.ownerDocument.documentElement,n)){if(r!==null&&cv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=vS(n,i);var a=vS(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $N=zs&&"documentMode"in document&&11>=document.documentMode,CI=null,t2=null,Pu=null,n2=!1;function GS(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;n2||CI==null||CI!==mm(r)||(r=CI,"selectionStart"in r&&cv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pu&&pC(Pu,r)||(Pu=r,r=Gm(t2,"onSelect"),0<r.length&&(t=new sv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=CI)))}function fh(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var AI={animationend:fh("Animation","AnimationEnd"),animationiteration:fh("Animation","AnimationIteration"),animationstart:fh("Animation","AnimationStart"),transitionend:fh("Transition","TransitionEnd")},ub={},LR={};zs&&(LR=document.createElement("div").style,"AnimationEvent"in window||(delete AI.animationend.animation,delete AI.animationiteration.animation,delete AI.animationstart.animation),"TransitionEvent"in window||delete AI.transitionend.transition);function Rp(e){if(ub[e])return ub[e];if(!AI[e])return e;var t=AI[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in LR)return ub[e]=t[n];return e}var ER=Rp("animationend"),MR=Rp("animationiteration"),DR=Rp("animationstart"),zR=Rp("transitionend"),TR=new Map,SS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ag(e,t){TR.set(e,t),Ac(t,[e])}for(var Cb=0;Cb<SS.length;Cb++){var Ab=SS[Cb],eH=Ab.toLowerCase(),tH=Ab[0].toUpperCase()+Ab.slice(1);ag(eH,"on"+tH)}ag(ER,"onAnimationEnd");ag(MR,"onAnimationIteration");ag(DR,"onAnimationStart");ag("dblclick","onDoubleClick");ag("focusin","onFocus");ag("focusout","onBlur");ag(zR,"onTransitionEnd");$I("onMouseEnter",["mouseout","mouseover"]);$I("onMouseLeave",["mouseout","mouseover"]);$I("onPointerEnter",["pointerout","pointerover"]);$I("onPointerLeave",["pointerout","pointerover"]);Ac("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ac("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ac("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ac("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ac("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ac("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function BS(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,eN(r,t,void 0,e),e.currentTarget=null}function UR(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;BS(o,s,c),i=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;BS(o,s,c),i=l}}}if(fm)throw e=_y,fm=!1,_y=null,e}function jn(e,t){var n=t[s2];n===void 0&&(n=t[s2]=new Set);var r=e+"__bubble";n.has(r)||(jR(t,e,2,!1),n.add(r))}function hb(e,t,n){var r=0;t&&(r|=4),jR(n,e,r,t)}var bh="_reactListening"+Math.random().toString(36).slice(2);function fC(e){if(!e[bh]){e[bh]=!0,eR.forEach(function(n){n!=="selectionchange"&&(nH.has(n)||hb(n,!1,e),hb(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bh]||(t[bh]=!0,hb("selectionchange",!1,t))}}function jR(e,t,n,r){switch(kR(t)){case 1:var o=hN;break;case 4:o=mN;break;default:o=iv}n=o.bind(null,t,n,e),o=void 0,!Oy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function mb(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;a=a.return}for(;s!==null;){if(a=Yg(s),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}s=s.parentNode}}r=r.return}hR(function(){var c=i,u=tv(n),g=[];e:{var d=TR.get(e);if(d!==void 0){var I=sv,C=e;switch(e){case"keypress":if(qh(n)===0)break e;case"keydown":case"keyup":I=XN;break;case"focusin":C="focus",I=cb;break;case"focusout":C="blur",I=cb;break;case"beforeblur":case"afterblur":I=cb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=CS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=bN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=YN;break;case ER:case MR:case DR:I=vN;break;case zR:I=HN;break;case"scroll":I=pN;break;case"wheel":I=KN;break;case"copy":case"cut":case"paste":I=SN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=hS}var h=(t&4)!==0,f=!h&&e==="scroll",A=h?d!==null?d+"Capture":null:d;h=[];for(var m=c,p;m!==null;){p=m;var Z=p.stateNode;if(p.tag===5&&Z!==null&&(p=Z,A!==null&&(Z=uC(m,A),Z!=null&&h.push(bC(m,Z,p)))),f)break;m=m.return}0<h.length&&(d=new I(d,C,null,n,u),g.push({event:d,listeners:h}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",d&&n!==Qy&&(C=n.relatedTarget||n.fromElement)&&(Yg(C)||C[Ts]))break e;if((I||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,I?(C=n.relatedTarget||n.toElement,I=c,C=C?Yg(C):null,C!==null&&(f=hc(C),C!==f||C.tag!==5&&C.tag!==6)&&(C=null)):(I=null,C=c),I!==C)){if(h=CS,Z="onMouseLeave",A="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(h=hS,Z="onPointerLeave",A="onPointerEnter",m="pointer"),f=I==null?d:hI(I),p=C==null?d:hI(C),d=new h(Z,m+"leave",I,n,u),d.target=f,d.relatedTarget=p,Z=null,Yg(u)===c&&(h=new h(A,m+"enter",C,n,u),h.target=p,h.relatedTarget=f,Z=h),f=Z,I&&C)t:{for(h=I,A=C,m=0,p=h;p;p=Qc(p))m++;for(p=0,Z=A;Z;Z=Qc(Z))p++;for(;0<m-p;)h=Qc(h),m--;for(;0<p-m;)A=Qc(A),p--;for(;m--;){if(h===A||A!==null&&h===A.alternate)break t;h=Qc(h),A=Qc(A)}h=null}else h=null;I!==null&&wS(g,d,I,h,!1),C!==null&&f!==null&&wS(g,f,C,h,!0)}}e:{if(d=c?hI(c):window,I=d.nodeName&&d.nodeName.toLowerCase(),I==="select"||I==="input"&&d.type==="file")var v=UN;else if(fS(d))if(NR)v=ON;else{v=QN;var k=jN}else(I=d.nodeName)&&I.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(v=PN);if(v&&(v=v(e,c))){YR(g,v,n,u);break e}k&&k(e,d,c),e==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&Dy(d,"number",d.value)}switch(k=c?hI(c):window,e){case"focusin":(fS(k)||k.contentEditable==="true")&&(CI=k,t2=c,Pu=null);break;case"focusout":Pu=t2=CI=null;break;case"mousedown":n2=!0;break;case"contextmenu":case"mouseup":case"dragend":n2=!1,GS(g,n,u);break;case"selectionchange":if($N)break;case"keydown":case"keyup":GS(g,n,u)}var B;if(gv)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else uI?JR(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(XR&&n.locale!=="ko"&&(uI||y!=="onCompositionStart"?y==="onCompositionEnd"&&uI&&(B=VR()):(Nl=u,av="value"in Nl?Nl.value:Nl.textContent,uI=!0)),k=Gm(c,y),0<k.length&&(y=new AS(y,e,null,n,u),g.push({event:y,listeners:k}),B?y.data=B:(B=xR(n),B!==null&&(y.data=B)))),(B=EN?MN(e,n):DN(e,n))&&(c=Gm(c,"onBeforeInput"),0<c.length&&(u=new AS("onBeforeInput","beforeinput",null,n,u),g.push({event:u,listeners:c}),u.data=B))}UR(g,t)})}function bC(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gm(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=uC(e,n),i!=null&&r.unshift(bC(e,i,o)),i=uC(e,t),i!=null&&r.push(bC(e,i,o))),e=e.return}return r}function Qc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wS(e,t,n,r,o){for(var i=t._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,o?(l=uC(n,i),l!=null&&a.unshift(bC(n,l,s))):o||(l=uC(n,i),l!=null&&a.push(bC(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var rH=/\r\n?/g,oH=/\u0000|\uFFFD/g;function WS(e){return(typeof e=="string"?e:""+e).replace(rH,`
`).replace(oH,"")}function yh(e,t,n){if(t=WS(t),WS(e)!==t&&n)throw Error(Oe(425))}function Sm(){}var r2=null,o2=null;function i2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var a2=typeof setTimeout=="function"?setTimeout:void 0,iH=typeof clearTimeout=="function"?clearTimeout:void 0,RS=typeof Promise=="function"?Promise:void 0,aH=typeof queueMicrotask=="function"?queueMicrotask:typeof RS<"u"?function(e){return RS.resolve(null).then(e).catch(sH)}:a2;function sH(e){setTimeout(function(){throw e})}function pb(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),hC(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);hC(t)}function Tl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pd=Math.random().toString(36).slice(2),rs="__reactFiber$"+pd,yC="__reactProps$"+pd,Ts="__reactContainer$"+pd,s2="__reactEvents$"+pd,lH="__reactListeners$"+pd,gH="__reactHandles$"+pd;function Yg(e){var t=e[rs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ts]||n[rs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=kS(e);e!==null;){if(n=e[rs])return n;e=kS(e)}return t}e=n,n=e.parentNode}return null}function nA(e){return e=e[rs]||e[Ts],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hI(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Oe(33))}function kp(e){return e[yC]||null}var l2=[],mI=-1;function sg(e){return{current:e}}function Pn(e){0>mI||(e.current=l2[mI],l2[mI]=null,mI--)}function zn(e,t){mI++,l2[mI]=e.current,e.current=t}var ql={},Bo=sg(ql),ti=sg(!1),ac=ql;function ed(e,t){var n=e.type.contextTypes;if(!n)return ql;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ni(e){return e=e.childContextTypes,e!=null}function Bm(){Pn(ti),Pn(Bo)}function VS(e,t,n){if(Bo.current!==ql)throw Error(Oe(168));zn(Bo,t),zn(ti,n)}function QR(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(Oe(108,j3(e)||"Unknown",o));return ar({},n,r)}function wm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ql,ac=Bo.current,zn(Bo,e),zn(ti,ti.current),!0}function XS(e,t,n){var r=e.stateNode;if(!r)throw Error(Oe(169));n?(e=QR(e,t,ac),r.__reactInternalMemoizedMergedChildContext=e,Pn(ti),Pn(Bo),zn(Bo,e)):Pn(ti),zn(ti,n)}var Ns=null,Vp=!1,fb=!1;function PR(e){Ns===null?Ns=[e]:Ns.push(e)}function cH(e){Vp=!0,PR(e)}function lg(){if(!fb&&Ns!==null){fb=!0;var e=0,t=Bn;try{var n=Ns;for(Bn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ns=null,Vp=!1}catch(o){throw Ns!==null&&(Ns=Ns.slice(e+1)),bR(nv,lg),o}finally{Bn=t,fb=!1}}return null}var pI=[],fI=0,Wm=null,Rm=0,qi=[],$i=0,sc=null,Hs=1,Fs="";function Wg(e,t){pI[fI++]=Rm,pI[fI++]=Wm,Wm=e,Rm=t}function OR(e,t,n){qi[$i++]=Hs,qi[$i++]=Fs,qi[$i++]=sc,sc=e;var r=Hs;e=Fs;var o=32-Ra(r)-1;r&=~(1<<o),n+=1;var i=32-Ra(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Hs=1<<32-Ra(t)+o|n<<o|r,Fs=i+e}else Hs=1<<i|n<<o|r,Fs=e}function Iv(e){e.return!==null&&(Wg(e,1),OR(e,1,0))}function dv(e){for(;e===Wm;)Wm=pI[--fI],pI[fI]=null,Rm=pI[--fI],pI[fI]=null;for(;e===sc;)sc=qi[--$i],qi[$i]=null,Fs=qi[--$i],qi[$i]=null,Hs=qi[--$i],qi[$i]=null}var wi=null,Gi=null,qn=!1,wa=null;function _R(e,t){var n=na(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function JS(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wi=e,Gi=Tl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wi=e,Gi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=sc!==null?{id:Hs,overflow:Fs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=na(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wi=e,Gi=null,!0):!1;default:return!1}}function g2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function c2(e){if(qn){var t=Gi;if(t){var n=t;if(!JS(e,t)){if(g2(e))throw Error(Oe(418));t=Tl(n.nextSibling);var r=wi;t&&JS(e,t)?_R(r,n):(e.flags=e.flags&-4097|2,qn=!1,wi=e)}}else{if(g2(e))throw Error(Oe(418));e.flags=e.flags&-4097|2,qn=!1,wi=e}}}function xS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wi=e}function Zh(e){if(e!==wi)return!1;if(!qn)return xS(e),qn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!i2(e.type,e.memoizedProps)),t&&(t=Gi)){if(g2(e))throw qR(),Error(Oe(418));for(;t;)_R(e,t),t=Tl(t.nextSibling)}if(xS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Gi=Tl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Gi=null}}else Gi=wi?Tl(e.stateNode.nextSibling):null;return!0}function qR(){for(var e=Gi;e;)e=Tl(e.nextSibling)}function td(){Gi=wi=null,qn=!1}function uv(e){wa===null?wa=[e]:wa.push(e)}var IH=Os.ReactCurrentBatchConfig;function cu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Oe(309));var r=n.stateNode}if(!r)throw Error(Oe(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var s=o.refs;a===null?delete s[i]:s[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(Oe(284));if(!n._owner)throw Error(Oe(290,e))}return e}function vh(e,t){throw e=Object.prototype.toString.call(t),Error(Oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function YS(e){var t=e._init;return t(e._payload)}function $R(e){function t(A,m){if(e){var p=A.deletions;p===null?(A.deletions=[m],A.flags|=16):p.push(m)}}function n(A,m){if(!e)return null;for(;m!==null;)t(A,m),m=m.sibling;return null}function r(A,m){for(A=new Map;m!==null;)m.key!==null?A.set(m.key,m):A.set(m.index,m),m=m.sibling;return A}function o(A,m){return A=Pl(A,m),A.index=0,A.sibling=null,A}function i(A,m,p){return A.index=p,e?(p=A.alternate,p!==null?(p=p.index,p<m?(A.flags|=2,m):p):(A.flags|=2,m)):(A.flags|=1048576,m)}function a(A){return e&&A.alternate===null&&(A.flags|=2),A}function s(A,m,p,Z){return m===null||m.tag!==6?(m=Bb(p,A.mode,Z),m.return=A,m):(m=o(m,p),m.return=A,m)}function l(A,m,p,Z){var v=p.type;return v===dI?u(A,m,p.props.children,Z,p.key):m!==null&&(m.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===vl&&YS(v)===m.type)?(Z=o(m,p.props),Z.ref=cu(A,m,p),Z.return=A,Z):(Z=im(p.type,p.key,p.props,null,A.mode,Z),Z.ref=cu(A,m,p),Z.return=A,Z)}function c(A,m,p,Z){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=wb(p,A.mode,Z),m.return=A,m):(m=o(m,p.children||[]),m.return=A,m)}function u(A,m,p,Z,v){return m===null||m.tag!==7?(m=Og(p,A.mode,Z,v),m.return=A,m):(m=o(m,p),m.return=A,m)}function g(A,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Bb(""+m,A.mode,p),m.return=A,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case dh:return p=im(m.type,m.key,m.props,null,A.mode,p),p.ref=cu(A,null,m),p.return=A,p;case II:return m=wb(m,A.mode,p),m.return=A,m;case vl:var Z=m._init;return g(A,Z(m._payload),p)}if(Ju(m)||iu(m))return m=Og(m,A.mode,p,null),m.return=A,m;vh(A,m)}return null}function d(A,m,p,Z){var v=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return v!==null?null:s(A,m,""+p,Z);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case dh:return p.key===v?l(A,m,p,Z):null;case II:return p.key===v?c(A,m,p,Z):null;case vl:return v=p._init,d(A,m,v(p._payload),Z)}if(Ju(p)||iu(p))return v!==null?null:u(A,m,p,Z,null);vh(A,p)}return null}function I(A,m,p,Z,v){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return A=A.get(p)||null,s(m,A,""+Z,v);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case dh:return A=A.get(Z.key===null?p:Z.key)||null,l(m,A,Z,v);case II:return A=A.get(Z.key===null?p:Z.key)||null,c(m,A,Z,v);case vl:var k=Z._init;return I(A,m,p,k(Z._payload),v)}if(Ju(Z)||iu(Z))return A=A.get(p)||null,u(m,A,Z,v,null);vh(m,Z)}return null}function C(A,m,p,Z){for(var v=null,k=null,B=m,y=m=0,W=null;B!==null&&y<p.length;y++){B.index>y?(W=B,B=null):W=B.sibling;var G=d(A,B,p[y],Z);if(G===null){B===null&&(B=W);break}e&&B&&G.alternate===null&&t(A,B),m=i(G,m,y),k===null?v=G:k.sibling=G,k=G,B=W}if(y===p.length)return n(A,B),qn&&Wg(A,y),v;if(B===null){for(;y<p.length;y++)B=g(A,p[y],Z),B!==null&&(m=i(B,m,y),k===null?v=B:k.sibling=B,k=B);return qn&&Wg(A,y),v}for(B=r(A,B);y<p.length;y++)W=I(B,A,y,p[y],Z),W!==null&&(e&&W.alternate!==null&&B.delete(W.key===null?y:W.key),m=i(W,m,y),k===null?v=W:k.sibling=W,k=W);return e&&B.forEach(function(R){return t(A,R)}),qn&&Wg(A,y),v}function h(A,m,p,Z){var v=iu(p);if(typeof v!="function")throw Error(Oe(150));if(p=v.call(p),p==null)throw Error(Oe(151));for(var k=v=null,B=m,y=m=0,W=null,G=p.next();B!==null&&!G.done;y++,G=p.next()){B.index>y?(W=B,B=null):W=B.sibling;var R=d(A,B,G.value,Z);if(R===null){B===null&&(B=W);break}e&&B&&R.alternate===null&&t(A,B),m=i(R,m,y),k===null?v=R:k.sibling=R,k=R,B=W}if(G.done)return n(A,B),qn&&Wg(A,y),v;if(B===null){for(;!G.done;y++,G=p.next())G=g(A,G.value,Z),G!==null&&(m=i(G,m,y),k===null?v=G:k.sibling=G,k=G);return qn&&Wg(A,y),v}for(B=r(A,B);!G.done;y++,G=p.next())G=I(B,A,y,G.value,Z),G!==null&&(e&&G.alternate!==null&&B.delete(G.key===null?y:G.key),m=i(G,m,y),k===null?v=G:k.sibling=G,k=G);return e&&B.forEach(function(X){return t(A,X)}),qn&&Wg(A,y),v}function f(A,m,p,Z){if(typeof p=="object"&&p!==null&&p.type===dI&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case dh:e:{for(var v=p.key,k=m;k!==null;){if(k.key===v){if(v=p.type,v===dI){if(k.tag===7){n(A,k.sibling),m=o(k,p.props.children),m.return=A,A=m;break e}}else if(k.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===vl&&YS(v)===k.type){n(A,k.sibling),m=o(k,p.props),m.ref=cu(A,k,p),m.return=A,A=m;break e}n(A,k);break}else t(A,k);k=k.sibling}p.type===dI?(m=Og(p.props.children,A.mode,Z,p.key),m.return=A,A=m):(Z=im(p.type,p.key,p.props,null,A.mode,Z),Z.ref=cu(A,m,p),Z.return=A,A=Z)}return a(A);case II:e:{for(k=p.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){n(A,m.sibling),m=o(m,p.children||[]),m.return=A,A=m;break e}else{n(A,m);break}else t(A,m);m=m.sibling}m=wb(p,A.mode,Z),m.return=A,A=m}return a(A);case vl:return k=p._init,f(A,m,k(p._payload),Z)}if(Ju(p))return C(A,m,p,Z);if(iu(p))return h(A,m,p,Z);vh(A,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(n(A,m.sibling),m=o(m,p),m.return=A,A=m):(n(A,m),m=Bb(p,A.mode,Z),m.return=A,A=m),a(A)):n(A,m)}return f}var nd=$R(!0),ek=$R(!1),km=sg(null),Vm=null,bI=null,Cv=null;function Av(){Cv=bI=Vm=null}function hv(e){var t=km.current;Pn(km),e._currentValue=t}function I2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function XI(e,t){Vm=e,Cv=bI=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($o=!0),e.firstContext=null)}function oa(e){var t=e._currentValue;if(Cv!==e)if(e={context:e,memoizedValue:t,next:null},bI===null){if(Vm===null)throw Error(Oe(308));bI=e,Vm.dependencies={lanes:0,firstContext:e}}else bI=bI.next=e;return t}var Ng=null;function mv(e){Ng===null?Ng=[e]:Ng.push(e)}function tk(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,mv(t)):(n.next=o.next,o.next=n),t.interleaved=n,Us(e,r)}function Us(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Gl=!1;function pv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Es(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ul(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,dn&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Us(e,n)}return o=r.interleaved,o===null?(t.next=t,mv(r)):(t.next=o.next,o.next=t),r.interleaved=t,Us(e,n)}function $h(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rv(e,n)}}function NS(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xm(e,t,n,r){var o=e.updateQueue;Gl=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(i!==null){var g=o.baseState;a=0,u=c=l=null,s=i;do{var d=s.lane,I=s.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:I,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var C=e,h=s;switch(d=t,I=n,h.tag){case 1:if(C=h.payload,typeof C=="function"){g=C.call(I,g,d);break e}g=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=h.payload,d=typeof C=="function"?C.call(I,g,d):C,d==null)break e;g=ar({},g,d);break e;case 2:Gl=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,d=o.effects,d===null?o.effects=[s]:d.push(s))}else I={eventTime:I,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=I,l=g):u=u.next=I,a|=d;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;d=s,s=d.next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}while(!0);if(u===null&&(l=g),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);gc|=a,e.lanes=a,e.memoizedState=g}}function HS(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Oe(191,o));o.call(r)}}}var rA={},gs=sg(rA),ZC=sg(rA),vC=sg(rA);function Hg(e){if(e===rA)throw Error(Oe(174));return e}function fv(e,t){switch(zn(vC,t),zn(ZC,e),zn(gs,rA),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ty(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ty(t,e)}Pn(gs),zn(gs,t)}function rd(){Pn(gs),Pn(ZC),Pn(vC)}function rk(e){Hg(vC.current);var t=Hg(gs.current),n=Ty(t,e.type);t!==n&&(zn(ZC,e),zn(gs,n))}function bv(e){ZC.current===e&&(Pn(gs),Pn(ZC))}var or=sg(0);function Jm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bb=[];function yv(){for(var e=0;e<bb.length;e++)bb[e]._workInProgressVersionPrimary=null;bb.length=0}var em=Os.ReactCurrentDispatcher,yb=Os.ReactCurrentBatchConfig,lc=0,ir=null,Lr=null,Pr=null,xm=!1,Ou=!1,GC=0,dH=0;function Ao(){throw Error(Oe(321))}function Zv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xa(e[n],t[n]))return!1;return!0}function vv(e,t,n,r,o,i){if(lc=i,ir=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,em.current=e===null||e.memoizedState===null?hH:mH,e=n(r,o),Ou){i=0;do{if(Ou=!1,GC=0,25<=i)throw Error(Oe(301));i+=1,Pr=Lr=null,t.updateQueue=null,em.current=pH,e=n(r,o)}while(Ou)}if(em.current=Ym,t=Lr!==null&&Lr.next!==null,lc=0,Pr=Lr=ir=null,xm=!1,t)throw Error(Oe(300));return e}function Gv(){var e=GC!==0;return GC=0,e}function Pa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?ir.memoizedState=Pr=e:Pr=Pr.next=e,Pr}function ia(){if(Lr===null){var e=ir.alternate;e=e!==null?e.memoizedState:null}else e=Lr.next;var t=Pr===null?ir.memoizedState:Pr.next;if(t!==null)Pr=t,Lr=e;else{if(e===null)throw Error(Oe(310));Lr=e,e={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},Pr===null?ir.memoizedState=Pr=e:Pr=Pr.next=e}return Pr}function SC(e,t){return typeof t=="function"?t(e):t}function Zb(e){var t=ia(),n=t.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=e;var r=Lr,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var s=a=null,l=null,c=i;do{var u=c.lane;if((lc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var g={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=g,a=r):l=l.next=g,ir.lanes|=u,gc|=u}c=c.next}while(c!==null&&c!==i);l===null?a=r:l.next=s,Xa(r,t.memoizedState)||($o=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,ir.lanes|=i,gc|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vb(e){var t=ia(),n=t.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do i=e(i,a.action),a=a.next;while(a!==o);Xa(i,t.memoizedState)||($o=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ok(){}function ik(e,t){var n=ir,r=ia(),o=t(),i=!Xa(r.memoizedState,o);if(i&&(r.memoizedState=o,$o=!0),r=r.queue,Sv(lk.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Pr!==null&&Pr.memoizedState.tag&1){if(n.flags|=2048,BC(9,sk.bind(null,n,r,o,t),void 0,null),Or===null)throw Error(Oe(349));lc&30||ak(n,t,o)}return o}function ak(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ir.updateQueue,t===null?(t={lastEffect:null,stores:null},ir.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function sk(e,t,n,r){t.value=n,t.getSnapshot=r,gk(t)&&ck(e)}function lk(e,t,n){return n(function(){gk(t)&&ck(e)})}function gk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xa(e,n)}catch{return!0}}function ck(e){var t=Us(e,1);t!==null&&ka(t,e,1,-1)}function FS(e){var t=Pa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:SC,lastRenderedState:e},t.queue=e,e=e.dispatch=AH.bind(null,ir,e),[t.memoizedState,e]}function BC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ir.updateQueue,t===null?(t={lastEffect:null,stores:null},ir.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ik(){return ia().memoizedState}function tm(e,t,n,r){var o=Pa();ir.flags|=e,o.memoizedState=BC(1|t,n,void 0,r===void 0?null:r)}function Xp(e,t,n,r){var o=ia();r=r===void 0?null:r;var i=void 0;if(Lr!==null){var a=Lr.memoizedState;if(i=a.destroy,r!==null&&Zv(r,a.deps)){o.memoizedState=BC(t,n,i,r);return}}ir.flags|=e,o.memoizedState=BC(1|t,n,i,r)}function KS(e,t){return tm(8390656,8,e,t)}function Sv(e,t){return Xp(2048,8,e,t)}function dk(e,t){return Xp(4,2,e,t)}function uk(e,t){return Xp(4,4,e,t)}function Ck(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ak(e,t,n){return n=n!=null?n.concat([e]):null,Xp(4,4,Ck.bind(null,t,e),n)}function Bv(){}function hk(e,t){var n=ia();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function mk(e,t){var n=ia();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function pk(e,t,n){return lc&21?(Xa(n,t)||(n=vR(),ir.lanes|=n,gc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$o=!0),e.memoizedState=n)}function uH(e,t){var n=Bn;Bn=n!==0&&4>n?n:4,e(!0);var r=yb.transition;yb.transition={};try{e(!1),t()}finally{Bn=n,yb.transition=r}}function fk(){return ia().memoizedState}function CH(e,t,n){var r=Ql(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bk(e))yk(t,n);else if(n=tk(e,t,n,r),n!==null){var o=Ko();ka(n,e,r,o),Zk(n,t,r)}}function AH(e,t,n){var r=Ql(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bk(e))yk(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,Xa(s,a)){var l=t.interleaved;l===null?(o.next=o,mv(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch{}finally{}n=tk(e,t,o,r),n!==null&&(o=Ko(),ka(n,e,r,o),Zk(n,t,r))}}function bk(e){var t=e.alternate;return e===ir||t!==null&&t===ir}function yk(e,t){Ou=xm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zk(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rv(e,n)}}var Ym={readContext:oa,useCallback:Ao,useContext:Ao,useEffect:Ao,useImperativeHandle:Ao,useInsertionEffect:Ao,useLayoutEffect:Ao,useMemo:Ao,useReducer:Ao,useRef:Ao,useState:Ao,useDebugValue:Ao,useDeferredValue:Ao,useTransition:Ao,useMutableSource:Ao,useSyncExternalStore:Ao,useId:Ao,unstable_isNewReconciler:!1},hH={readContext:oa,useCallback:function(e,t){return Pa().memoizedState=[e,t===void 0?null:t],e},useContext:oa,useEffect:KS,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,tm(4194308,4,Ck.bind(null,t,e),n)},useLayoutEffect:function(e,t){return tm(4194308,4,e,t)},useInsertionEffect:function(e,t){return tm(4,2,e,t)},useMemo:function(e,t){var n=Pa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Pa();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=CH.bind(null,ir,e),[r.memoizedState,e]},useRef:function(e){var t=Pa();return e={current:e},t.memoizedState=e},useState:FS,useDebugValue:Bv,useDeferredValue:function(e){return Pa().memoizedState=e},useTransition:function(){var e=FS(!1),t=e[0];return e=uH.bind(null,e[1]),Pa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ir,o=Pa();if(qn){if(n===void 0)throw Error(Oe(407));n=n()}else{if(n=t(),Or===null)throw Error(Oe(349));lc&30||ak(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,KS(lk.bind(null,r,i,e),[e]),r.flags|=2048,BC(9,sk.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Pa(),t=Or.identifierPrefix;if(qn){var n=Fs,r=Hs;n=(r&~(1<<32-Ra(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=GC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=dH++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mH={readContext:oa,useCallback:hk,useContext:oa,useEffect:Sv,useImperativeHandle:Ak,useInsertionEffect:dk,useLayoutEffect:uk,useMemo:mk,useReducer:Zb,useRef:Ik,useState:function(){return Zb(SC)},useDebugValue:Bv,useDeferredValue:function(e){var t=ia();return pk(t,Lr.memoizedState,e)},useTransition:function(){var e=Zb(SC)[0],t=ia().memoizedState;return[e,t]},useMutableSource:ok,useSyncExternalStore:ik,useId:fk,unstable_isNewReconciler:!1},pH={readContext:oa,useCallback:hk,useContext:oa,useEffect:Sv,useImperativeHandle:Ak,useInsertionEffect:dk,useLayoutEffect:uk,useMemo:mk,useReducer:vb,useRef:Ik,useState:function(){return vb(SC)},useDebugValue:Bv,useDeferredValue:function(e){var t=ia();return Lr===null?t.memoizedState=e:pk(t,Lr.memoizedState,e)},useTransition:function(){var e=vb(SC)[0],t=ia().memoizedState;return[e,t]},useMutableSource:ok,useSyncExternalStore:ik,useId:fk,unstable_isNewReconciler:!1};function Za(e,t){if(e&&e.defaultProps){t=ar({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function d2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ar({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Jp={isMounted:function(e){return(e=e._reactInternals)?hc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ko(),o=Ql(e),i=Es(r,o);i.payload=t,n!=null&&(i.callback=n),t=Ul(e,i,o),t!==null&&(ka(t,e,o,r),$h(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ko(),o=Ql(e),i=Es(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ul(e,i,o),t!==null&&(ka(t,e,o,r),$h(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ko(),r=Ql(e),o=Es(n,r);o.tag=2,t!=null&&(o.callback=t),t=Ul(e,o,r),t!==null&&(ka(t,e,r,n),$h(t,e,r))}};function LS(e,t,n,r,o,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!pC(n,r)||!pC(o,i):!0}function vk(e,t,n){var r=!1,o=ql,i=t.contextType;return typeof i=="object"&&i!==null?i=oa(i):(o=ni(t)?ac:Bo.current,r=t.contextTypes,i=(r=r!=null)?ed(e,o):ql),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Jp,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ES(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Jp.enqueueReplaceState(t,t.state,null)}function u2(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},pv(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=oa(i):(i=ni(t)?ac:Bo.current,o.context=ed(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(d2(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Jp.enqueueReplaceState(o,o.state,null),Xm(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function od(e,t){try{var n="",r=t;do n+=U3(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function Gb(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function C2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fH=typeof WeakMap=="function"?WeakMap:Map;function Gk(e,t,n){n=Es(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hm||(Hm=!0,G2=r),C2(e,t)},n}function Sk(e,t,n){n=Es(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){C2(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){C2(e,t),typeof r!="function"&&(jl===null?jl=new Set([this]):jl.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function MS(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new fH;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=JH.bind(null,e,t,n),t.then(e,e))}function DS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zS(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Es(-1,1),t.tag=2,Ul(n,t,1))),n.lanes|=1),e)}var bH=Os.ReactCurrentOwner,$o=!1;function No(e,t,n,r){t.child=e===null?ek(t,null,n,r):nd(t,e.child,n,r)}function TS(e,t,n,r,o){n=n.render;var i=t.ref;return XI(t,o),r=vv(e,t,n,r,i,o),n=Gv(),e!==null&&!$o?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,js(e,t,o)):(qn&&n&&Iv(t),t.flags|=1,No(e,t,r,o),t.child)}function US(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!xv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Bk(e,t,i,r,o)):(e=im(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:pC,n(a,r)&&e.ref===t.ref)return js(e,t,o)}return t.flags|=1,e=Pl(i,r),e.ref=t.ref,e.return=t,t.child=e}function Bk(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(pC(i,r)&&e.ref===t.ref)if($o=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&($o=!0);else return t.lanes=e.lanes,js(e,t,o)}return A2(e,t,n,r,o)}function wk(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},zn(ZI,bi),bi|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,zn(ZI,bi),bi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,zn(ZI,bi),bi|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,zn(ZI,bi),bi|=r;return No(e,t,o,n),t.child}function Wk(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function A2(e,t,n,r,o){var i=ni(n)?ac:Bo.current;return i=ed(t,i),XI(t,o),n=vv(e,t,n,r,i,o),r=Gv(),e!==null&&!$o?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,js(e,t,o)):(qn&&r&&Iv(t),t.flags|=1,No(e,t,n,o),t.child)}function jS(e,t,n,r,o){if(ni(n)){var i=!0;wm(t)}else i=!1;if(XI(t,o),t.stateNode===null)nm(e,t),vk(t,n,r),u2(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=oa(c):(c=ni(n)?ac:Bo.current,c=ed(t,c));var u=n.getDerivedStateFromProps,g=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==c)&&ES(t,a,r,c),Gl=!1;var d=t.memoizedState;a.state=d,Xm(t,r,a,o),l=t.memoizedState,s!==r||d!==l||ti.current||Gl?(typeof u=="function"&&(d2(t,n,u,r),l=t.memoizedState),(s=Gl||LS(t,n,s,r,d,l,c))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,nk(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Za(t.type,s),a.props=c,g=t.pendingProps,d=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=oa(l):(l=ni(n)?ac:Bo.current,l=ed(t,l));var I=n.getDerivedStateFromProps;(u=typeof I=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==g||d!==l)&&ES(t,a,r,l),Gl=!1,d=t.memoizedState,a.state=d,Xm(t,r,a,o);var C=t.memoizedState;s!==g||d!==C||ti.current||Gl?(typeof I=="function"&&(d2(t,n,I,r),C=t.memoizedState),(c=Gl||LS(t,n,c,r,d,C,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=C),a.props=r,a.state=C,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return h2(e,t,n,r,i,o)}function h2(e,t,n,r,o,i){Wk(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&XS(t,n,!1),js(e,t,i);r=t.stateNode,bH.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=nd(t,e.child,null,i),t.child=nd(t,null,s,i)):No(e,t,s,i),t.memoizedState=r.state,o&&XS(t,n,!0),t.child}function Rk(e){var t=e.stateNode;t.pendingContext?VS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&VS(e,t.context,!1),fv(e,t.containerInfo)}function QS(e,t,n,r,o){return td(),uv(o),t.flags|=256,No(e,t,n,r),t.child}var m2={dehydrated:null,treeContext:null,retryLane:0};function p2(e){return{baseLanes:e,cachePool:null,transitions:null}}function kk(e,t,n){var r=t.pendingProps,o=or.current,i=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),zn(or,o&1),e===null)return c2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Np(a,r,0,null),e=Og(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=p2(n),t.memoizedState=m2,e):wv(t,a));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return yH(e,t,a,r,s,o,n);if(i){i=r.fallback,a=t.mode,o=e.child,s=o.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Pl(o,l),r.subtreeFlags=o.subtreeFlags&14680064),s!==null?i=Pl(s,i):(i=Og(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?p2(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=m2,r}return i=e.child,e=i.sibling,r=Pl(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function wv(e,t){return t=Np({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gh(e,t,n,r){return r!==null&&uv(r),nd(t,e.child,null,n),e=wv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yH(e,t,n,r,o,i,a){if(n)return t.flags&256?(t.flags&=-257,r=Gb(Error(Oe(422))),Gh(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Np({mode:"visible",children:r.children},o,0,null),i=Og(i,o,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&nd(t,e.child,null,a),t.child.memoizedState=p2(a),t.memoizedState=m2,i);if(!(t.mode&1))return Gh(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(Oe(419)),r=Gb(i,r,void 0),Gh(e,t,a,r)}if(s=(a&e.childLanes)!==0,$o||s){if(r=Or,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,Us(e,o),ka(r,e,o,-1))}return Jv(),r=Gb(Error(Oe(421))),Gh(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=xH.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,Gi=Tl(o.nextSibling),wi=t,qn=!0,wa=null,e!==null&&(qi[$i++]=Hs,qi[$i++]=Fs,qi[$i++]=sc,Hs=e.id,Fs=e.overflow,sc=t),t=wv(t,r.children),t.flags|=4096,t)}function PS(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),I2(e.return,t,n)}function Sb(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Vk(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(No(e,t,r.children,n),r=or.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&PS(e,n,t);else if(e.tag===19)PS(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(zn(or,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Jm(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Sb(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Jm(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Sb(t,!0,n,null,i);break;case"together":Sb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function js(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),gc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Oe(153));if(t.child!==null){for(e=t.child,n=Pl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Pl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ZH(e,t,n){switch(t.tag){case 3:Rk(t),td();break;case 5:rk(t);break;case 1:ni(t.type)&&wm(t);break;case 4:fv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;zn(km,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(zn(or,or.current&1),t.flags|=128,null):n&t.child.childLanes?kk(e,t,n):(zn(or,or.current&1),e=js(e,t,n),e!==null?e.sibling:null);zn(or,or.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Vk(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),zn(or,or.current),r)break;return null;case 22:case 23:return t.lanes=0,wk(e,t,n)}return js(e,t,n)}var Xk,f2,Jk,xk;Xk=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};f2=function(){};Jk=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Hg(gs.current);var i=null;switch(n){case"input":o=Ey(e,o),r=Ey(e,r),i=[];break;case"select":o=ar({},o,{value:void 0}),r=ar({},r,{value:void 0}),i=[];break;case"textarea":o=zy(e,o),r=zy(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Sm)}Uy(n,r);var a;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var s=o[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(IC.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(s=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(IC.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&jn("scroll",e),i||s===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};xk=function(e,t,n,r){n!==r&&(t.flags|=4)};function Iu(e,t){if(!qn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ho(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vH(e,t,n){var r=t.pendingProps;switch(dv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ho(t),null;case 1:return ni(t.type)&&Bm(),ho(t),null;case 3:return r=t.stateNode,rd(),Pn(ti),Pn(Bo),yv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wa!==null&&(w2(wa),wa=null))),f2(e,t),ho(t),null;case 5:bv(t);var o=Hg(vC.current);if(n=t.type,e!==null&&t.stateNode!=null)Jk(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Oe(166));return ho(t),null}if(e=Hg(gs.current),Zh(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[rs]=t,r[yC]=i,e=(t.mode&1)!==0,n){case"dialog":jn("cancel",r),jn("close",r);break;case"iframe":case"object":case"embed":jn("load",r);break;case"video":case"audio":for(o=0;o<Yu.length;o++)jn(Yu[o],r);break;case"source":jn("error",r);break;case"img":case"image":case"link":jn("error",r),jn("load",r);break;case"details":jn("toggle",r);break;case"input":oS(r,i),jn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},jn("invalid",r);break;case"textarea":aS(r,i),jn("invalid",r)}Uy(n,i),o=null;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];a==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&yh(r.textContent,s,e),o=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&yh(r.textContent,s,e),o=["children",""+s]):IC.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&jn("scroll",r)}switch(n){case"input":uh(r),iS(r,i,!0);break;case"textarea":uh(r),sS(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sm)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lR(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[rs]=t,e[yC]=r,Xk(e,t,!1,!1),t.stateNode=e;e:{switch(a=jy(n,r),n){case"dialog":jn("cancel",e),jn("close",e),o=r;break;case"iframe":case"object":case"embed":jn("load",e),o=r;break;case"video":case"audio":for(o=0;o<Yu.length;o++)jn(Yu[o],e);o=r;break;case"source":jn("error",e),o=r;break;case"img":case"image":case"link":jn("error",e),jn("load",e),o=r;break;case"details":jn("toggle",e),o=r;break;case"input":oS(e,r),o=Ey(e,r),jn("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=ar({},r,{value:void 0}),jn("invalid",e);break;case"textarea":aS(e,r),o=zy(e,r),jn("invalid",e);break;default:o=r}Uy(n,o),s=o;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?IR(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&gR(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&dC(e,l):typeof l=="number"&&dC(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(IC.hasOwnProperty(i)?l!=null&&i==="onScroll"&&jn("scroll",e):l!=null&&_Z(e,i,l,a))}switch(n){case"input":uh(e),iS(e,r,!1);break;case"textarea":uh(e),sS(e);break;case"option":r.value!=null&&e.setAttribute("value",""+_l(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?WI(e,!!r.multiple,i,!1):r.defaultValue!=null&&WI(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Sm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ho(t),null;case 6:if(e&&t.stateNode!=null)xk(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Oe(166));if(n=Hg(vC.current),Hg(gs.current),Zh(t)){if(r=t.stateNode,n=t.memoizedProps,r[rs]=t,(i=r.nodeValue!==n)&&(e=wi,e!==null))switch(e.tag){case 3:yh(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yh(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rs]=t,t.stateNode=r}return ho(t),null;case 13:if(Pn(or),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qn&&Gi!==null&&t.mode&1&&!(t.flags&128))qR(),td(),t.flags|=98560,i=!1;else if(i=Zh(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Oe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Oe(317));i[rs]=t}else td(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ho(t),i=!1}else wa!==null&&(w2(wa),wa=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||or.current&1?Mr===0&&(Mr=3):Jv())),t.updateQueue!==null&&(t.flags|=4),ho(t),null);case 4:return rd(),f2(e,t),e===null&&fC(t.stateNode.containerInfo),ho(t),null;case 10:return hv(t.type._context),ho(t),null;case 17:return ni(t.type)&&Bm(),ho(t),null;case 19:if(Pn(or),i=t.memoizedState,i===null)return ho(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Iu(i,!1);else{if(Mr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Jm(e),a!==null){for(t.flags|=128,Iu(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return zn(or,or.current&1|2),t.child}e=e.sibling}i.tail!==null&&fr()>id&&(t.flags|=128,r=!0,Iu(i,!1),t.lanes=4194304)}else{if(!r)if(e=Jm(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Iu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!qn)return ho(t),null}else 2*fr()-i.renderingStartTime>id&&n!==1073741824&&(t.flags|=128,r=!0,Iu(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=fr(),t.sibling=null,n=or.current,zn(or,r?n&1|2:n&1),t):(ho(t),null);case 22:case 23:return Xv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?bi&1073741824&&(ho(t),t.subtreeFlags&6&&(t.flags|=8192)):ho(t),null;case 24:return null;case 25:return null}throw Error(Oe(156,t.tag))}function GH(e,t){switch(dv(t),t.tag){case 1:return ni(t.type)&&Bm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rd(),Pn(ti),Pn(Bo),yv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bv(t),null;case 13:if(Pn(or),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Oe(340));td()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pn(or),null;case 4:return rd(),null;case 10:return hv(t.type._context),null;case 22:case 23:return Xv(),null;case 24:return null;default:return null}}var Sh=!1,vo=!1,SH=typeof WeakSet=="function"?WeakSet:Set,ft=null;function yI(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Cr(e,t,r)}else n.current=null}function b2(e,t,n){try{n()}catch(r){Cr(e,t,r)}}var OS=!1;function BH(e,t){if(r2=Zm,e=KR(),cv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,c=0,u=0,g=e,d=null;t:for(;;){for(var I;g!==n||o!==0&&g.nodeType!==3||(s=a+o),g!==i||r!==0&&g.nodeType!==3||(l=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(I=g.firstChild)!==null;)d=g,g=I;for(;;){if(g===e)break t;if(d===n&&++c===o&&(s=a),d===i&&++u===r&&(l=a),(I=g.nextSibling)!==null)break;g=d,d=g.parentNode}g=I}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(o2={focusedElem:e,selectionRange:n},Zm=!1,ft=t;ft!==null;)if(t=ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ft=e;else for(;ft!==null;){t=ft;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var h=C.memoizedProps,f=C.memoizedState,A=t.stateNode,m=A.getSnapshotBeforeUpdate(t.elementType===t.type?h:Za(t.type,h),f);A.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(Z){Cr(t,t.return,Z)}if(e=t.sibling,e!==null){e.return=t.return,ft=e;break}ft=t.return}return C=OS,OS=!1,C}function _u(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&b2(t,n,i)}o=o.next}while(o!==r)}}function xp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function y2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Yk(e){var t=e.alternate;t!==null&&(e.alternate=null,Yk(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rs],delete t[yC],delete t[s2],delete t[lH],delete t[gH])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Nk(e){return e.tag===5||e.tag===3||e.tag===4}function _S(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Z2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Sm));else if(r!==4&&(e=e.child,e!==null))for(Z2(e,t,n),e=e.sibling;e!==null;)Z2(e,t,n),e=e.sibling}function v2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(v2(e,t,n),e=e.sibling;e!==null;)v2(e,t,n),e=e.sibling}var io=null,Sa=!1;function Cl(e,t,n){for(n=n.child;n!==null;)Hk(e,t,n),n=n.sibling}function Hk(e,t,n){if(ls&&typeof ls.onCommitFiberUnmount=="function")try{ls.onCommitFiberUnmount(Bp,n)}catch{}switch(n.tag){case 5:vo||yI(n,t);case 6:var r=io,o=Sa;io=null,Cl(e,t,n),io=r,Sa=o,io!==null&&(Sa?(e=io,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):io.removeChild(n.stateNode));break;case 18:io!==null&&(Sa?(e=io,n=n.stateNode,e.nodeType===8?pb(e.parentNode,n):e.nodeType===1&&pb(e,n),hC(e)):pb(io,n.stateNode));break;case 4:r=io,o=Sa,io=n.stateNode.containerInfo,Sa=!0,Cl(e,t,n),io=r,Sa=o;break;case 0:case 11:case 14:case 15:if(!vo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&b2(n,t,a),o=o.next}while(o!==r)}Cl(e,t,n);break;case 1:if(!vo&&(yI(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cr(n,t,s)}Cl(e,t,n);break;case 21:Cl(e,t,n);break;case 22:n.mode&1?(vo=(r=vo)||n.memoizedState!==null,Cl(e,t,n),vo=r):Cl(e,t,n);break;default:Cl(e,t,n)}}function qS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new SH),t.forEach(function(r){var o=YH.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function fa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:io=s.stateNode,Sa=!1;break e;case 3:io=s.stateNode.containerInfo,Sa=!0;break e;case 4:io=s.stateNode.containerInfo,Sa=!0;break e}s=s.return}if(io===null)throw Error(Oe(160));Hk(i,a,o),io=null,Sa=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){Cr(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fk(t,e),t=t.sibling}function Fk(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fa(t,e),za(e),r&4){try{_u(3,e,e.return),xp(3,e)}catch(h){Cr(e,e.return,h)}try{_u(5,e,e.return)}catch(h){Cr(e,e.return,h)}}break;case 1:fa(t,e),za(e),r&512&&n!==null&&yI(n,n.return);break;case 5:if(fa(t,e),za(e),r&512&&n!==null&&yI(n,n.return),e.flags&32){var o=e.stateNode;try{dC(o,"")}catch(h){Cr(e,e.return,h)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&aR(o,i),jy(s,a);var c=jy(s,i);for(a=0;a<l.length;a+=2){var u=l[a],g=l[a+1];u==="style"?IR(o,g):u==="dangerouslySetInnerHTML"?gR(o,g):u==="children"?dC(o,g):_Z(o,u,g,c)}switch(s){case"input":My(o,i);break;case"textarea":sR(o,i);break;case"select":var d=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?WI(o,!!i.multiple,I,!1):d!==!!i.multiple&&(i.defaultValue!=null?WI(o,!!i.multiple,i.defaultValue,!0):WI(o,!!i.multiple,i.multiple?[]:"",!1))}o[yC]=i}catch(h){Cr(e,e.return,h)}}break;case 6:if(fa(t,e),za(e),r&4){if(e.stateNode===null)throw Error(Oe(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(h){Cr(e,e.return,h)}}break;case 3:if(fa(t,e),za(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hC(t.containerInfo)}catch(h){Cr(e,e.return,h)}break;case 4:fa(t,e),za(e);break;case 13:fa(t,e),za(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(kv=fr())),r&4&&qS(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(vo=(c=vo)||u,fa(t,e),vo=c):fa(t,e),za(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(ft=e,u=e.child;u!==null;){for(g=ft=u;ft!==null;){switch(d=ft,I=d.child,d.tag){case 0:case 11:case 14:case 15:_u(4,d,d.return);break;case 1:yI(d,d.return);var C=d.stateNode;if(typeof C.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(h){Cr(r,n,h)}}break;case 5:yI(d,d.return);break;case 22:if(d.memoizedState!==null){eB(g);continue}}I!==null?(I.return=d,ft=I):eB(g)}u=u.sibling}e:for(u=null,g=e;;){if(g.tag===5){if(u===null){u=g;try{o=g.stateNode,c?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=g.stateNode,l=g.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=cR("display",a))}catch(h){Cr(e,e.return,h)}}}else if(g.tag===6){if(u===null)try{g.stateNode.nodeValue=c?"":g.memoizedProps}catch(h){Cr(e,e.return,h)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;u===g&&(u=null),g=g.return}u===g&&(u=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:fa(t,e),za(e),r&4&&qS(e);break;case 21:break;default:fa(t,e),za(e)}}function za(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Nk(n)){var r=n;break e}n=n.return}throw Error(Oe(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(dC(o,""),r.flags&=-33);var i=_S(e);v2(e,i,o);break;case 3:case 4:var a=r.stateNode.containerInfo,s=_S(e);Z2(e,s,a);break;default:throw Error(Oe(161))}}catch(l){Cr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wH(e,t,n){ft=e,Kk(e)}function Kk(e,t,n){for(var r=(e.mode&1)!==0;ft!==null;){var o=ft,i=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||Sh;if(!a){var s=o.alternate,l=s!==null&&s.memoizedState!==null||vo;s=Sh;var c=vo;if(Sh=a,(vo=l)&&!c)for(ft=o;ft!==null;)a=ft,l=a.child,a.tag===22&&a.memoizedState!==null?tB(o):l!==null?(l.return=a,ft=l):tB(o);for(;i!==null;)ft=i,Kk(i),i=i.sibling;ft=o,Sh=s,vo=c}$S(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,ft=i):$S(e)}}function $S(e){for(;ft!==null;){var t=ft;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vo||xp(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!vo)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Za(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&HS(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}HS(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var g=u.dehydrated;g!==null&&hC(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}vo||t.flags&512&&y2(t)}catch(d){Cr(t,t.return,d)}}if(t===e){ft=null;break}if(n=t.sibling,n!==null){n.return=t.return,ft=n;break}ft=t.return}}function eB(e){for(;ft!==null;){var t=ft;if(t===e){ft=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ft=n;break}ft=t.return}}function tB(e){for(;ft!==null;){var t=ft;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xp(4,t)}catch(l){Cr(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(l){Cr(t,o,l)}}var i=t.return;try{y2(t)}catch(l){Cr(t,i,l)}break;case 5:var a=t.return;try{y2(t)}catch(l){Cr(t,a,l)}}}catch(l){Cr(t,t.return,l)}if(t===e){ft=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ft=s;break}ft=t.return}}var WH=Math.ceil,Nm=Os.ReactCurrentDispatcher,Wv=Os.ReactCurrentOwner,ra=Os.ReactCurrentBatchConfig,dn=0,Or=null,Xr=null,go=0,bi=0,ZI=sg(0),Mr=0,wC=null,gc=0,Yp=0,Rv=0,qu=null,_o=null,kv=0,id=1/0,Ys=null,Hm=!1,G2=null,jl=null,Bh=!1,Hl=null,Fm=0,$u=0,S2=null,rm=-1,om=0;function Ko(){return dn&6?fr():rm!==-1?rm:rm=fr()}function Ql(e){return e.mode&1?dn&2&&go!==0?go&-go:IH.transition!==null?(om===0&&(om=vR()),om):(e=Bn,e!==0||(e=window.event,e=e===void 0?16:kR(e.type)),e):1}function ka(e,t,n,r){if(50<$u)throw $u=0,S2=null,Error(Oe(185));eA(e,n,r),(!(dn&2)||e!==Or)&&(e===Or&&(!(dn&2)&&(Yp|=n),Mr===4&&Bl(e,go)),ri(e,r),n===1&&dn===0&&!(t.mode&1)&&(id=fr()+500,Vp&&lg()))}function ri(e,t){var n=e.callbackNode;IN(e,t);var r=ym(e,e===Or?go:0);if(r===0)n!==null&&cS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&cS(n),t===1)e.tag===0?cH(nB.bind(null,e)):PR(nB.bind(null,e)),aH(function(){!(dn&6)&&lg()}),n=null;else{switch(GR(r)){case 1:n=nv;break;case 4:n=yR;break;case 16:n=bm;break;case 536870912:n=ZR;break;default:n=bm}n=jk(n,Lk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Lk(e,t){if(rm=-1,om=0,dn&6)throw Error(Oe(327));var n=e.callbackNode;if(JI()&&e.callbackNode!==n)return null;var r=ym(e,e===Or?go:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Km(e,r);else{t=r;var o=dn;dn|=2;var i=Mk();(Or!==e||go!==t)&&(Ys=null,id=fr()+500,Pg(e,t));do try{VH();break}catch(s){Ek(e,s)}while(!0);Av(),Nm.current=i,dn=o,Xr!==null?t=0:(Or=null,go=0,t=Mr)}if(t!==0){if(t===2&&(o=qy(e),o!==0&&(r=o,t=B2(e,o))),t===1)throw n=wC,Pg(e,0),Bl(e,r),ri(e,fr()),n;if(t===6)Bl(e,r);else{if(o=e.current.alternate,!(r&30)&&!RH(o)&&(t=Km(e,r),t===2&&(i=qy(e),i!==0&&(r=i,t=B2(e,i))),t===1))throw n=wC,Pg(e,0),Bl(e,r),ri(e,fr()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(Oe(345));case 2:Rg(e,_o,Ys);break;case 3:if(Bl(e,r),(r&130023424)===r&&(t=kv+500-fr(),10<t)){if(ym(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Ko(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=a2(Rg.bind(null,e,_o,Ys),t);break}Rg(e,_o,Ys);break;case 4:if(Bl(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-Ra(r);i=1<<a,a=t[a],a>o&&(o=a),r&=~i}if(r=o,r=fr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WH(r/1960))-r,10<r){e.timeoutHandle=a2(Rg.bind(null,e,_o,Ys),r);break}Rg(e,_o,Ys);break;case 5:Rg(e,_o,Ys);break;default:throw Error(Oe(329))}}}return ri(e,fr()),e.callbackNode===n?Lk.bind(null,e):null}function B2(e,t){var n=qu;return e.current.memoizedState.isDehydrated&&(Pg(e,t).flags|=256),e=Km(e,t),e!==2&&(t=_o,_o=n,t!==null&&w2(t)),e}function w2(e){_o===null?_o=e:_o.push.apply(_o,e)}function RH(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Xa(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bl(e,t){for(t&=~Rv,t&=~Yp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ra(t),r=1<<n;e[n]=-1,t&=~r}}function nB(e){if(dn&6)throw Error(Oe(327));JI();var t=ym(e,0);if(!(t&1))return ri(e,fr()),null;var n=Km(e,t);if(e.tag!==0&&n===2){var r=qy(e);r!==0&&(t=r,n=B2(e,r))}if(n===1)throw n=wC,Pg(e,0),Bl(e,t),ri(e,fr()),n;if(n===6)throw Error(Oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rg(e,_o,Ys),ri(e,fr()),null}function Vv(e,t){var n=dn;dn|=1;try{return e(t)}finally{dn=n,dn===0&&(id=fr()+500,Vp&&lg())}}function cc(e){Hl!==null&&Hl.tag===0&&!(dn&6)&&JI();var t=dn;dn|=1;var n=ra.transition,r=Bn;try{if(ra.transition=null,Bn=1,e)return e()}finally{Bn=r,ra.transition=n,dn=t,!(dn&6)&&lg()}}function Xv(){bi=ZI.current,Pn(ZI)}function Pg(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,iH(n)),Xr!==null)for(n=Xr.return;n!==null;){var r=n;switch(dv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bm();break;case 3:rd(),Pn(ti),Pn(Bo),yv();break;case 5:bv(r);break;case 4:rd();break;case 13:Pn(or);break;case 19:Pn(or);break;case 10:hv(r.type._context);break;case 22:case 23:Xv()}n=n.return}if(Or=e,Xr=e=Pl(e.current,null),go=bi=t,Mr=0,wC=null,Rv=Yp=gc=0,_o=qu=null,Ng!==null){for(t=0;t<Ng.length;t++)if(n=Ng[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=o,r.next=a}n.pending=r}Ng=null}return e}function Ek(e,t){do{var n=Xr;try{if(Av(),em.current=Ym,xm){for(var r=ir.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}xm=!1}if(lc=0,Pr=Lr=ir=null,Ou=!1,GC=0,Wv.current=null,n===null||n.return===null){Mr=1,wC=t,Xr=null;break}e:{var i=e,a=n.return,s=n,l=t;if(t=go,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,g=u.tag;if(!(u.mode&1)&&(g===0||g===11||g===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var I=DS(a);if(I!==null){I.flags&=-257,zS(I,a,s,i,t),I.mode&1&&MS(i,c,t),t=I,l=c;var C=t.updateQueue;if(C===null){var h=new Set;h.add(l),t.updateQueue=h}else C.add(l);break e}else{if(!(t&1)){MS(i,c,t),Jv();break e}l=Error(Oe(426))}}else if(qn&&s.mode&1){var f=DS(a);if(f!==null){!(f.flags&65536)&&(f.flags|=256),zS(f,a,s,i,t),uv(od(l,s));break e}}i=l=od(l,s),Mr!==4&&(Mr=2),qu===null?qu=[i]:qu.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var A=Gk(i,l,t);NS(i,A);break e;case 1:s=l;var m=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(jl===null||!jl.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var Z=Sk(i,s,t);NS(i,Z);break e}}i=i.return}while(i!==null)}zk(n)}catch(v){t=v,Xr===n&&n!==null&&(Xr=n=n.return);continue}break}while(!0)}function Mk(){var e=Nm.current;return Nm.current=Ym,e===null?Ym:e}function Jv(){(Mr===0||Mr===3||Mr===2)&&(Mr=4),Or===null||!(gc&268435455)&&!(Yp&268435455)||Bl(Or,go)}function Km(e,t){var n=dn;dn|=2;var r=Mk();(Or!==e||go!==t)&&(Ys=null,Pg(e,t));do try{kH();break}catch(o){Ek(e,o)}while(!0);if(Av(),dn=n,Nm.current=r,Xr!==null)throw Error(Oe(261));return Or=null,go=0,Mr}function kH(){for(;Xr!==null;)Dk(Xr)}function VH(){for(;Xr!==null&&!nN();)Dk(Xr)}function Dk(e){var t=Uk(e.alternate,e,bi);e.memoizedProps=e.pendingProps,t===null?zk(e):Xr=t,Wv.current=null}function zk(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=GH(n,t),n!==null){n.flags&=32767,Xr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Mr=6,Xr=null;return}}else if(n=vH(n,t,bi),n!==null){Xr=n;return}if(t=t.sibling,t!==null){Xr=t;return}Xr=t=e}while(t!==null);Mr===0&&(Mr=5)}function Rg(e,t,n){var r=Bn,o=ra.transition;try{ra.transition=null,Bn=1,XH(e,t,n,r)}finally{ra.transition=o,Bn=r}return null}function XH(e,t,n,r){do JI();while(Hl!==null);if(dn&6)throw Error(Oe(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Oe(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(dN(e,i),e===Or&&(Xr=Or=null,go=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bh||(Bh=!0,jk(bm,function(){return JI(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ra.transition,ra.transition=null;var a=Bn;Bn=1;var s=dn;dn|=4,Wv.current=null,BH(e,n),Fk(n,e),qN(o2),Zm=!!r2,o2=r2=null,e.current=n,wH(n),rN(),dn=s,Bn=a,ra.transition=i}else e.current=n;if(Bh&&(Bh=!1,Hl=e,Fm=o),i=e.pendingLanes,i===0&&(jl=null),aN(n.stateNode),ri(e,fr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Hm)throw Hm=!1,e=G2,G2=null,e;return Fm&1&&e.tag!==0&&JI(),i=e.pendingLanes,i&1?e===S2?$u++:($u=0,S2=e):$u=0,lg(),null}function JI(){if(Hl!==null){var e=GR(Fm),t=ra.transition,n=Bn;try{if(ra.transition=null,Bn=16>e?16:e,Hl===null)var r=!1;else{if(e=Hl,Hl=null,Fm=0,dn&6)throw Error(Oe(331));var o=dn;for(dn|=4,ft=e.current;ft!==null;){var i=ft,a=i.child;if(ft.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(ft=c;ft!==null;){var u=ft;switch(u.tag){case 0:case 11:case 15:_u(8,u,i)}var g=u.child;if(g!==null)g.return=u,ft=g;else for(;ft!==null;){u=ft;var d=u.sibling,I=u.return;if(Yk(u),u===c){ft=null;break}if(d!==null){d.return=I,ft=d;break}ft=I}}}var C=i.alternate;if(C!==null){var h=C.child;if(h!==null){C.child=null;do{var f=h.sibling;h.sibling=null,h=f}while(h!==null)}}ft=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ft=a;else e:for(;ft!==null;){if(i=ft,i.flags&2048)switch(i.tag){case 0:case 11:case 15:_u(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,ft=A;break e}ft=i.return}}var m=e.current;for(ft=m;ft!==null;){a=ft;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,ft=p;else e:for(a=m;ft!==null;){if(s=ft,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:xp(9,s)}}catch(v){Cr(s,s.return,v)}if(s===a){ft=null;break e}var Z=s.sibling;if(Z!==null){Z.return=s.return,ft=Z;break e}ft=s.return}}if(dn=o,lg(),ls&&typeof ls.onPostCommitFiberRoot=="function")try{ls.onPostCommitFiberRoot(Bp,e)}catch{}r=!0}return r}finally{Bn=n,ra.transition=t}}return!1}function rB(e,t,n){t=od(n,t),t=Gk(e,t,1),e=Ul(e,t,1),t=Ko(),e!==null&&(eA(e,1,t),ri(e,t))}function Cr(e,t,n){if(e.tag===3)rB(e,e,n);else for(;t!==null;){if(t.tag===3){rB(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jl===null||!jl.has(r))){e=od(n,e),e=Sk(t,e,1),t=Ul(t,e,1),e=Ko(),t!==null&&(eA(t,1,e),ri(t,e));break}}t=t.return}}function JH(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ko(),e.pingedLanes|=e.suspendedLanes&n,Or===e&&(go&n)===n&&(Mr===4||Mr===3&&(go&130023424)===go&&500>fr()-kv?Pg(e,0):Rv|=n),ri(e,t)}function Tk(e,t){t===0&&(e.mode&1?(t=hh,hh<<=1,!(hh&130023424)&&(hh=4194304)):t=1);var n=Ko();e=Us(e,t),e!==null&&(eA(e,t,n),ri(e,n))}function xH(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Tk(e,n)}function YH(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Oe(314))}r!==null&&r.delete(t),Tk(e,n)}var Uk;Uk=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ti.current)$o=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $o=!1,ZH(e,t,n);$o=!!(e.flags&131072)}else $o=!1,qn&&t.flags&1048576&&OR(t,Rm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;nm(e,t),e=t.pendingProps;var o=ed(t,Bo.current);XI(t,n),o=vv(null,t,r,e,o,n);var i=Gv();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ni(r)?(i=!0,wm(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,pv(t),o.updater=Jp,t.stateNode=o,o._reactInternals=t,u2(t,r,e,n),t=h2(null,t,r,!0,i,n)):(t.tag=0,qn&&i&&Iv(t),No(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(nm(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=HH(r),e=Za(r,e),o){case 0:t=A2(null,t,r,e,n);break e;case 1:t=jS(null,t,r,e,n);break e;case 11:t=TS(null,t,r,e,n);break e;case 14:t=US(null,t,r,Za(r.type,e),n);break e}throw Error(Oe(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Za(r,o),A2(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Za(r,o),jS(e,t,r,o,n);case 3:e:{if(Rk(t),e===null)throw Error(Oe(387));r=t.pendingProps,i=t.memoizedState,o=i.element,nk(e,t),Xm(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=od(Error(Oe(423)),t),t=QS(e,t,r,n,o);break e}else if(r!==o){o=od(Error(Oe(424)),t),t=QS(e,t,r,n,o);break e}else for(Gi=Tl(t.stateNode.containerInfo.firstChild),wi=t,qn=!0,wa=null,n=ek(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(td(),r===o){t=js(e,t,n);break e}No(e,t,r,n)}t=t.child}return t;case 5:return rk(t),e===null&&c2(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,a=o.children,i2(r,o)?a=null:i!==null&&i2(r,i)&&(t.flags|=32),Wk(e,t),No(e,t,a,n),t.child;case 6:return e===null&&c2(t),null;case 13:return kk(e,t,n);case 4:return fv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=nd(t,null,r,n):No(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Za(r,o),TS(e,t,r,o,n);case 7:return No(e,t,t.pendingProps,n),t.child;case 8:return No(e,t,t.pendingProps.children,n),t.child;case 12:return No(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,a=o.value,zn(km,r._currentValue),r._currentValue=a,i!==null)if(Xa(i.value,a)){if(i.children===o.children&&!ti.current){t=js(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){a=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Es(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),I2(i.return,n,t),s.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Oe(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),I2(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}No(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,XI(t,n),o=oa(o),r=r(o),t.flags|=1,No(e,t,r,n),t.child;case 14:return r=t.type,o=Za(r,t.pendingProps),o=Za(r.type,o),US(e,t,r,o,n);case 15:return Bk(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Za(r,o),nm(e,t),t.tag=1,ni(r)?(e=!0,wm(t)):e=!1,XI(t,n),vk(t,r,o),u2(t,r,o,n),h2(null,t,r,!0,e,n);case 19:return Vk(e,t,n);case 22:return wk(e,t,n)}throw Error(Oe(156,t.tag))};function jk(e,t){return bR(e,t)}function NH(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(e,t,n,r){return new NH(e,t,n,r)}function xv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HH(e){if(typeof e=="function")return xv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$Z)return 11;if(e===ev)return 14}return 2}function Pl(e,t){var n=e.alternate;return n===null?(n=na(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function im(e,t,n,r,o,i){var a=2;if(r=e,typeof e=="function")xv(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case dI:return Og(n.children,o,i,t);case qZ:a=8,o|=8;break;case Hy:return e=na(12,n,t,o|2),e.elementType=Hy,e.lanes=i,e;case Fy:return e=na(13,n,t,o),e.elementType=Fy,e.lanes=i,e;case Ky:return e=na(19,n,t,o),e.elementType=Ky,e.lanes=i,e;case rR:return Np(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tR:a=10;break e;case nR:a=9;break e;case $Z:a=11;break e;case ev:a=14;break e;case vl:a=16,r=null;break e}throw Error(Oe(130,e==null?e:typeof e,""))}return t=na(a,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function Og(e,t,n,r){return e=na(7,e,r,t),e.lanes=n,e}function Np(e,t,n,r){return e=na(22,e,r,t),e.elementType=rR,e.lanes=n,e.stateNode={isHidden:!1},e}function Bb(e,t,n){return e=na(6,e,null,t),e.lanes=n,e}function wb(e,t,n){return t=na(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function FH(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sb(0),this.expirationTimes=sb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sb(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Yv(e,t,n,r,o,i,a,s,l){return e=new FH(e,t,n,s,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=na(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pv(i),e}function KH(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:II,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Qk(e){if(!e)return ql;e=e._reactInternals;e:{if(hc(e)!==e||e.tag!==1)throw Error(Oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Oe(171))}if(e.tag===1){var n=e.type;if(ni(n))return QR(e,n,t)}return t}function Pk(e,t,n,r,o,i,a,s,l){return e=Yv(n,r,!0,e,o,i,a,s,l),e.context=Qk(null),n=e.current,r=Ko(),o=Ql(n),i=Es(r,o),i.callback=t??null,Ul(n,i,o),e.current.lanes=o,eA(e,o,r),ri(e,r),e}function Hp(e,t,n,r){var o=t.current,i=Ko(),a=Ql(o);return n=Qk(n),t.context===null?t.context=n:t.pendingContext=n,t=Es(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ul(o,t,a),e!==null&&(ka(e,o,a,i),$h(e,o,a)),a}function Lm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function oB(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nv(e,t){oB(e,t),(e=e.alternate)&&oB(e,t)}function LH(){return null}var Ok=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hv(e){this._internalRoot=e}Fp.prototype.render=Hv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Oe(409));Hp(e,t,null,null)};Fp.prototype.unmount=Hv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cc(function(){Hp(null,e,null,null)}),t[Ts]=null}};function Fp(e){this._internalRoot=e}Fp.prototype.unstable_scheduleHydration=function(e){if(e){var t=wR();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sl.length&&t!==0&&t<Sl[n].priority;n++);Sl.splice(n,0,e),n===0&&RR(e)}};function Fv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function iB(){}function EH(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var c=Lm(a);i.call(c)}}var a=Pk(t,r,e,0,null,!1,!1,"",iB);return e._reactRootContainer=a,e[Ts]=a.current,fC(e.nodeType===8?e.parentNode:e),cc(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var s=r;r=function(){var c=Lm(l);s.call(c)}}var l=Yv(e,0,!1,null,null,!1,!1,"",iB);return e._reactRootContainer=l,e[Ts]=l.current,fC(e.nodeType===8?e.parentNode:e),cc(function(){Hp(t,l,n,r)}),l}function Lp(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if(typeof o=="function"){var s=o;o=function(){var l=Lm(a);s.call(l)}}Hp(t,a,e,o)}else a=EH(n,t,e,o,r);return Lm(a)}SR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xu(t.pendingLanes);n!==0&&(rv(t,n|1),ri(t,fr()),!(dn&6)&&(id=fr()+500,lg()))}break;case 13:cc(function(){var r=Us(e,1);if(r!==null){var o=Ko();ka(r,e,1,o)}}),Nv(e,1)}};ov=function(e){if(e.tag===13){var t=Us(e,134217728);if(t!==null){var n=Ko();ka(t,e,134217728,n)}Nv(e,134217728)}};BR=function(e){if(e.tag===13){var t=Ql(e),n=Us(e,t);if(n!==null){var r=Ko();ka(n,e,t,r)}Nv(e,t)}};wR=function(){return Bn};WR=function(e,t){var n=Bn;try{return Bn=e,t()}finally{Bn=n}};Py=function(e,t,n){switch(t){case"input":if(My(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=kp(r);if(!o)throw Error(Oe(90));iR(r),My(r,o)}}}break;case"textarea":sR(e,n);break;case"select":t=n.value,t!=null&&WI(e,!!n.multiple,t,!1)}};CR=Vv;AR=cc;var MH={usingClientEntryPoint:!1,Events:[nA,hI,kp,dR,uR,Vv]},du={findFiberByHostInstance:Yg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DH={bundleType:du.bundleType,version:du.version,rendererPackageName:du.rendererPackageName,rendererConfig:du.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pR(e),e===null?null:e.stateNode},findFiberByHostInstance:du.findFiberByHostInstance||LH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{Bp=wh.inject(DH),ls=wh}catch{}}Xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MH;Xi.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fv(t))throw Error(Oe(200));return KH(e,t,null,n)};Xi.createRoot=function(e,t){if(!Fv(e))throw Error(Oe(299));var n=!1,r="",o=Ok;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Yv(e,1,!1,null,null,n,!1,r,o),e[Ts]=t.current,fC(e.nodeType===8?e.parentNode:e),new Hv(t)};Xi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Oe(188)):(e=Object.keys(e).join(","),Error(Oe(268,e)));return e=pR(t),e=e===null?null:e.stateNode,e};Xi.flushSync=function(e){return cc(e)};Xi.hydrate=function(e,t,n){if(!Kp(t))throw Error(Oe(200));return Lp(null,e,t,!0,n)};Xi.hydrateRoot=function(e,t,n){if(!Fv(e))throw Error(Oe(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",a=Ok;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Pk(t,null,e,1,n??null,o,!1,i,a),e[Ts]=t.current,fC(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Fp(t)};Xi.render=function(e,t,n){if(!Kp(t))throw Error(Oe(200));return Lp(null,e,t,!1,n)};Xi.unmountComponentAtNode=function(e){if(!Kp(e))throw Error(Oe(40));return e._reactRootContainer?(cc(function(){Lp(null,null,e,!1,function(){e._reactRootContainer=null,e[Ts]=null})}),!0):!1};Xi.unstable_batchedUpdates=Vv;Xi.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kp(n))throw Error(Oe(200));if(e==null||e._reactInternals===void 0)throw Error(Oe(38));return Lp(e,t,n,!1,r)};Xi.version="18.3.1-next-f1338f8080-20240426";function _k(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_k)}catch(e){console.error(e)}}_k(),_W.exports=Xi;var Ep=_W.exports;const Nu=qC(Ep),zH=KW({__proto__:null,default:Nu},[Ep]);var qk,aB=Ep;qk=aB.createRoot,aB.hydrateRoot;/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rr(){return rr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rr.apply(this,arguments)}var Rr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Rr||(Rr={}));const sB="popstate";function TH(e){e===void 0&&(e={});function t(r,o){let{pathname:i,search:a,hash:s}=r.location;return WC("",{pathname:i,search:a,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Ic(o)}return jH(t,n,null,e)}function $t(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ad(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function UH(){return Math.random().toString(36).substr(2,8)}function lB(e,t){return{usr:e.state,key:e.key,idx:t}}function WC(e,t,n,r){return n===void 0&&(n=null),rr({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?gg(t):t,{state:n,key:t&&t.key||r||UH()})}function Ic(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function gg(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function jH(e,t,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:i=!1}=r,a=o.history,s=Rr.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(rr({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function g(){s=Rr.Pop;let f=u(),A=f==null?null:f-c;c=f,l&&l({action:s,location:h.location,delta:A})}function d(f,A){s=Rr.Push;let m=WC(h.location,f,A);c=u()+1;let p=lB(m,c),Z=h.createHref(m);try{a.pushState(p,"",Z)}catch(v){if(v instanceof DOMException&&v.name==="DataCloneError")throw v;o.location.assign(Z)}i&&l&&l({action:s,location:h.location,delta:1})}function I(f,A){s=Rr.Replace;let m=WC(h.location,f,A);c=u();let p=lB(m,c),Z=h.createHref(m);a.replaceState(p,"",Z),i&&l&&l({action:s,location:h.location,delta:0})}function C(f){let A=o.location.origin!=="null"?o.location.origin:o.location.href,m=typeof f=="string"?f:Ic(f);return m=m.replace(/ $/,"%20"),$t(A,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,A)}let h={get action(){return s},get location(){return e(o,a)},listen(f){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(sB,g),l=f,()=>{o.removeEventListener(sB,g),l=null}},createHref(f){return t(o,f)},createURL:C,encodeLocation(f){let A=C(f);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:d,replace:I,go(f){return a.go(f)}};return h}var Xn;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Xn||(Xn={}));const QH=new Set(["lazy","caseSensitive","path","id","index","children"]);function PH(e){return e.index===!0}function RC(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((o,i)=>{let a=[...n,String(i)],s=typeof o.id=="string"?o.id:a.join("-");if($t(o.index!==!0||!o.children,"Cannot specify children on an index route"),$t(!r[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),PH(o)){let l=rr({},o,t(o),{id:s});return r[s]=l,l}else{let l=rr({},o,t(o),{id:s,children:void 0});return r[s]=l,o.children&&(l.children=RC(o.children,t,a,r)),l}})}function xg(e,t,n){return n===void 0&&(n="/"),am(e,t,n,!1)}function am(e,t,n,r){let o=typeof t=="string"?gg(t):t,i=fd(o.pathname||"/",n);if(i==null)return null;let a=$k(e);_H(a);let s=null;for(let l=0;s==null&&l<a.length;++l){let c=lF(i);s=aF(a[l],c,r)}return s}function OH(e,t){let{route:n,pathname:r,params:o}=e;return{id:n.id,pathname:r,params:o,data:t[n.id],handle:n.handle}}function $k(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(i,a,s)=>{let l={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&($t(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ms([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&($t(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),$k(i.children,t,u,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:oF(c,i.index),routesMeta:u})};return e.forEach((i,a)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))o(i,a);else for(let l of eV(i.path))o(i,a,l)}),t}function eV(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return o?[i,""]:[i];let a=eV(r.join("/")),s=[];return s.push(...a.map(l=>l===""?i:[i,l].join("/"))),o&&s.push(...a),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function _H(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:iF(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qH=/^:[\w-]+$/,$H=3,eF=2,tF=1,nF=10,rF=-2,gB=e=>e==="*";function oF(e,t){let n=e.split("/"),r=n.length;return n.some(gB)&&(r+=rF),t&&(r+=eF),n.filter(o=>!gB(o)).reduce((o,i)=>o+(qH.test(i)?$H:i===""?tF:nF),r)}function iF(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function aF(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,o={},i="/",a=[];for(let s=0;s<r.length;++s){let l=r[s],c=s===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",g=cB({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!g&&c&&n&&!r[r.length-1].route.index&&(g=cB({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!g)return null;Object.assign(o,g.params),a.push({params:o,pathname:Ms([i,g.pathname]),pathnameBase:IF(Ms([i,g.pathnameBase])),route:d}),g.pathnameBase!=="/"&&(i=Ms([i,g.pathnameBase]))}return a}function cB(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=sF(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((c,u,g)=>{let{paramName:d,isOptional:I}=u;if(d==="*"){let h=s[g]||"";a=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const C=s[g];return I&&!C?c[d]=void 0:c[d]=(C||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:e}}function sF(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ad(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function lF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ad(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function fd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function gF(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?gg(e):e;return{pathname:n?n.startsWith("/")?n:cF(n,t):t,search:dF(r),hash:uF(o)}}function cF(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Wb(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tV(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Mp(e,t){let n=tV(e);return t?n.map((r,o)=>o===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Dp(e,t,n,r){r===void 0&&(r=!1);let o;typeof e=="string"?o=gg(e):(o=rr({},e),$t(!o.pathname||!o.pathname.includes("?"),Wb("?","pathname","search",o)),$t(!o.pathname||!o.pathname.includes("#"),Wb("#","pathname","hash",o)),$t(!o.search||!o.search.includes("#"),Wb("#","search","hash",o)));let i=e===""||o.pathname==="",a=i?"/":o.pathname,s;if(a==null)s=n;else{let g=t.length-1;if(!r&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),g-=1;o.pathname=d.join("/")}s=g>=0?t[g]:"/"}let l=gF(o,s),c=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ms=e=>e.join("/").replace(/\/\/+/g,"/"),IF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),dF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,uF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Em{constructor(t,n,r,o){o===void 0&&(o=!1),this.status=t,this.statusText=n||"",this.internal=o,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function zp(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nV=["post","put","patch","delete"],CF=new Set(nV),AF=["get",...nV],hF=new Set(AF),mF=new Set([301,302,303,307,308]),pF=new Set([307,308]),Rb={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fF={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},uu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Kv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bF=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),rV="remix-router-transitions";function yF(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;$t(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let o;if(e.mapRouteProperties)o=e.mapRouteProperties;else if(e.detectErrorBoundary){let se=e.detectErrorBoundary;o=de=>({hasErrorBoundary:se(de)})}else o=bF;let i={},a=RC(e.routes,o,void 0,i),s,l=e.basename||"/",c=e.unstable_dataStrategy||wF,u=e.unstable_patchRoutesOnNavigation,g=rr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),d=null,I=new Set,C=1e3,h=new Set,f=null,A=null,m=null,p=e.hydrationData!=null,Z=xg(a,e.history.location,l),v=null;if(Z==null&&!u){let se=xo(404,{pathname:e.history.location.pathname}),{matches:de,route:we}=fB(a);Z=de,v={[we.id]:se}}Z&&!e.hydrationData&&St(Z,a,e.history.location.pathname).active&&(Z=null);let k;if(Z)if(Z.some(se=>se.route.lazy))k=!1;else if(!Z.some(se=>se.route.loader))k=!0;else if(g.v7_partialHydration){let se=e.hydrationData?e.hydrationData.loaderData:null,de=e.hydrationData?e.hydrationData.errors:null,we=Fe=>Fe.route.loader?typeof Fe.route.loader=="function"&&Fe.route.loader.hydrate===!0?!1:se&&se[Fe.route.id]!==void 0||de&&de[Fe.route.id]!==void 0:!0;if(de){let Fe=Z.findIndex(it=>de[it.route.id]!==void 0);k=Z.slice(0,Fe+1).every(we)}else k=Z.every(we)}else k=e.hydrationData!=null;else if(k=!1,Z=[],g.v7_partialHydration){let se=St(null,a,e.history.location.pathname);se.active&&se.matches&&(Z=se.matches)}let B,y={historyAction:e.history.action,location:e.history.location,matches:Z,initialized:k,navigation:Rb,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||v,fetchers:new Map,blockers:new Map},W=Rr.Pop,G=!1,R,X=!1,Y=new Map,x=null,D=!1,L=!1,M=[],K=new Set,E=new Map,O=0,re=-1,H=new Map,z=new Set,j=new Map,$=new Map,ee=new Set,le=new Map,Ie=new Map,Ae=new Map,Ge;function We(){if(d=e.history.listen(se=>{let{action:de,location:we,delta:Fe}=se;if(Ge){Ge(),Ge=void 0;return}ad(Ie.size===0||Fe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let it=Wo({currentLocation:y.location,nextLocation:we,historyAction:de});if(it&&Fe!=null){let At=new Promise(Gt=>{Ge=Gt});e.history.go(Fe*-1),zr(it,{state:"blocked",location:we,proceed(){zr(it,{state:"proceeding",proceed:void 0,reset:void 0,location:we}),At.then(()=>e.history.go(Fe))},reset(){let Gt=new Map(y.blockers);Gt.set(it,uu),ke({blockers:Gt})}});return}return te(de,we)}),n){MF(t,Y);let se=()=>DF(t,Y);t.addEventListener("pagehide",se),x=()=>t.removeEventListener("pagehide",se)}return y.initialized||te(Rr.Pop,y.location,{initialHydration:!0}),B}function Je(){d&&d(),x&&x(),I.clear(),R&&R.abort(),y.fetchers.forEach((se,de)=>Rt(de)),y.blockers.forEach((se,de)=>Rn(de))}function ze(se){return I.add(se),()=>I.delete(se)}function ke(se,de){de===void 0&&(de={}),y=rr({},y,se);let we=[],Fe=[];g.v7_fetcherPersist&&y.fetchers.forEach((it,At)=>{it.state==="idle"&&(ee.has(At)?Fe.push(At):we.push(At))}),[...I].forEach(it=>it(y,{deletedFetchers:Fe,unstable_viewTransitionOpts:de.viewTransitionOpts,unstable_flushSync:de.flushSync===!0})),g.v7_fetcherPersist&&(we.forEach(it=>y.fetchers.delete(it)),Fe.forEach(it=>Rt(it)))}function ye(se,de,we){var Fe,it;let{flushSync:At}=we===void 0?{}:we,Gt=y.actionData!=null&&y.navigation.formMethod!=null&&Ba(y.navigation.formMethod)&&y.navigation.state==="loading"&&((Fe=se.state)==null?void 0:Fe._isRedirect)!==!0,He;de.actionData?Object.keys(de.actionData).length>0?He=de.actionData:He=null:Gt?He=y.actionData:He=null;let tt=de.loaderData?mB(y.loaderData,de.loaderData,de.matches||[],de.errors):y.loaderData,_e=y.blockers;_e.size>0&&(_e=new Map(_e),_e.forEach((_t,ln)=>_e.set(ln,uu)));let gt=G===!0||y.navigation.formMethod!=null&&Ba(y.navigation.formMethod)&&((it=se.state)==null?void 0:it._isRedirect)!==!0;s&&(a=s,s=void 0),D||W===Rr.Pop||(W===Rr.Push?e.history.push(se,se.state):W===Rr.Replace&&e.history.replace(se,se.state));let Xt;if(W===Rr.Pop){let _t=Y.get(y.location.pathname);_t&&_t.has(se.pathname)?Xt={currentLocation:y.location,nextLocation:se}:Y.has(se.pathname)&&(Xt={currentLocation:se,nextLocation:y.location})}else if(X){let _t=Y.get(y.location.pathname);_t?_t.add(se.pathname):(_t=new Set([se.pathname]),Y.set(y.location.pathname,_t)),Xt={currentLocation:y.location,nextLocation:se}}ke(rr({},de,{actionData:He,loaderData:tt,historyAction:W,location:se,initialized:!0,navigation:Rb,revalidation:"idle",restoreScrollPosition:eo(se,de.matches||y.matches),preventScrollReset:gt,blockers:_e}),{viewTransitionOpts:Xt,flushSync:At===!0}),W=Rr.Pop,G=!1,X=!1,D=!1,L=!1,M=[]}async function oe(se,de){if(typeof se=="number"){e.history.go(se);return}let we=W2(y.location,y.matches,l,g.v7_prependBasename,se,g.v7_relativeSplatPath,de==null?void 0:de.fromRouteId,de==null?void 0:de.relative),{path:Fe,submission:it,error:At}=IB(g.v7_normalizeFormMethod,!1,we,de),Gt=y.location,He=WC(y.location,Fe,de&&de.state);He=rr({},He,e.history.encodeLocation(He));let tt=de&&de.replace!=null?de.replace:void 0,_e=Rr.Push;tt===!0?_e=Rr.Replace:tt===!1||it!=null&&Ba(it.formMethod)&&it.formAction===y.location.pathname+y.location.search&&(_e=Rr.Replace);let gt=de&&"preventScrollReset"in de?de.preventScrollReset===!0:void 0,Xt=(de&&de.unstable_flushSync)===!0,_t=Wo({currentLocation:Gt,nextLocation:He,historyAction:_e});if(_t){zr(_t,{state:"blocked",location:He,proceed(){zr(_t,{state:"proceeding",proceed:void 0,reset:void 0,location:He}),oe(se,de)},reset(){let ln=new Map(y.blockers);ln.set(_t,uu),ke({blockers:ln})}});return}return await te(_e,He,{submission:it,pendingError:At,preventScrollReset:gt,replace:de&&de.replace,enableViewTransition:de&&de.unstable_viewTransition,flushSync:Xt})}function ct(){if(dt(),ke({revalidation:"loading"}),y.navigation.state!=="submitting"){if(y.navigation.state==="idle"){te(y.historyAction,y.location,{startUninterruptedRevalidation:!0});return}te(W||y.historyAction,y.navigation.location,{overrideNavigation:y.navigation,enableViewTransition:X===!0})}}async function te(se,de,we){R&&R.abort(),R=null,W=se,D=(we&&we.startUninterruptedRevalidation)===!0,Do(y.location,y.matches),G=(we&&we.preventScrollReset)===!0,X=(we&&we.enableViewTransition)===!0;let Fe=s||a,it=we&&we.overrideNavigation,At=xg(Fe,de,l),Gt=(we&&we.flushSync)===!0,He=St(At,Fe,de.pathname);if(He.active&&He.matches&&(At=He.matches),!At){let{error:Tt,notFoundMatches:tr,route:On}=Qt(de.pathname);ye(de,{matches:tr,loaderData:{},errors:{[On.id]:Tt}},{flushSync:Gt});return}if(y.initialized&&!L&&JF(y.location,de)&&!(we&&we.submission&&Ba(we.submission.formMethod))){ye(de,{matches:At},{flushSync:Gt});return}R=new AbortController;let tt=Pc(e.history,de,R.signal,we&&we.submission),_e;if(we&&we.pendingError)_e=[vI(At).route.id,{type:Xn.error,error:we.pendingError}];else if(we&&we.submission&&Ba(we.submission.formMethod)){let Tt=await ie(tt,de,we.submission,At,He.active,{replace:we.replace,flushSync:Gt});if(Tt.shortCircuited)return;if(Tt.pendingActionResult){let[tr,On]=Tt.pendingActionResult;if(yi(On)&&zp(On.error)&&On.error.status===404){R=null,ye(de,{matches:Tt.matches,loaderData:{},errors:{[tr]:On.error}});return}}At=Tt.matches||At,_e=Tt.pendingActionResult,it=kb(de,we.submission),Gt=!1,He.active=!1,tt=Pc(e.history,tt.url,tt.signal)}let{shortCircuited:gt,matches:Xt,loaderData:_t,errors:ln}=await ge(tt,de,At,He.active,it,we&&we.submission,we&&we.fetcherSubmission,we&&we.replace,we&&we.initialHydration===!0,Gt,_e);gt||(R=null,ye(de,rr({matches:Xt||At},pB(_e),{loaderData:_t,errors:ln})))}async function ie(se,de,we,Fe,it,At){At===void 0&&(At={}),dt();let Gt=LF(de,we);if(ke({navigation:Gt},{flushSync:At.flushSync===!0}),it){let _e=await Nr(Fe,de.pathname,se.signal);if(_e.type==="aborted")return{shortCircuited:!0};if(_e.type==="error"){let{boundaryId:gt,error:Xt}=yt(de.pathname,_e);return{matches:_e.partialMatches,pendingActionResult:[gt,{type:Xn.error,error:Xt}]}}else if(_e.matches)Fe=_e.matches;else{let{notFoundMatches:gt,error:Xt,route:_t}=Qt(de.pathname);return{matches:gt,pendingActionResult:[_t.id,{type:Xn.error,error:Xt}]}}}let He,tt=Hu(Fe,de);if(!tt.route.action&&!tt.route.lazy)He={type:Xn.error,error:xo(405,{method:se.method,pathname:de.pathname,routeId:tt.route.id})};else if(He=(await $e("action",y,se,[tt],Fe,null))[tt.route.id],se.signal.aborted)return{shortCircuited:!0};if(Fg(He)){let _e;return At&&At.replace!=null?_e=At.replace:_e=CB(He.response.headers.get("Location"),new URL(se.url),l)===y.location.pathname+y.location.search,await st(se,He,!0,{submission:we,replace:_e}),{shortCircuited:!0}}if(Fl(He))throw xo(400,{type:"defer-action"});if(yi(He)){let _e=vI(Fe,tt.route.id);return(At&&At.replace)!==!0&&(W=Rr.Push),{matches:Fe,pendingActionResult:[_e.route.id,He]}}return{matches:Fe,pendingActionResult:[tt.route.id,He]}}async function ge(se,de,we,Fe,it,At,Gt,He,tt,_e,gt){let Xt=it||kb(de,At),_t=At||Gt||yB(Xt),ln=!D&&(!g.v7_partialHydration||!tt);if(Fe){if(ln){let Et=be(gt);ke(rr({navigation:Xt},Et!==void 0?{actionData:Et}:{}),{flushSync:_e})}let Lt=await Nr(we,de.pathname,se.signal);if(Lt.type==="aborted")return{shortCircuited:!0};if(Lt.type==="error"){let{boundaryId:Et,error:Tr}=yt(de.pathname,Lt);return{matches:Lt.partialMatches,loaderData:{},errors:{[Et]:Tr}}}else if(Lt.matches)we=Lt.matches;else{let{error:Et,notFoundMatches:Tr,route:Nn}=Qt(de.pathname);return{matches:Tr,loaderData:{},errors:{[Nn.id]:Et}}}}let Tt=s||a,[tr,On]=dB(e.history,y,we,_t,de,g.v7_partialHydration&&tt===!0,g.v7_skipActionErrorRevalidation,L,M,K,ee,j,z,Tt,l,gt);if(qt(Lt=>!(we&&we.some(Et=>Et.route.id===Lt))||tr&&tr.some(Et=>Et.route.id===Lt)),re=++O,tr.length===0&&On.length===0){let Lt=er();return ye(de,rr({matches:we,loaderData:{},errors:gt&&yi(gt[1])?{[gt[0]]:gt[1].error}:null},pB(gt),Lt?{fetchers:new Map(y.fetchers)}:{}),{flushSync:_e}),{shortCircuited:!0}}if(ln){let Lt={};if(!Fe){Lt.navigation=Xt;let Et=be(gt);Et!==void 0&&(Lt.actionData=Et)}On.length>0&&(Lt.fetchers=Ze(On)),ke(Lt,{flushSync:_e})}On.forEach(Lt=>{E.has(Lt.key)&&pt(Lt.key),Lt.controller&&E.set(Lt.key,Lt.controller)});let ms=()=>On.forEach(Lt=>pt(Lt.key));R&&R.signal.addEventListener("abort",ms);let{loaderResults:Io,fetcherResults:da}=await ht(y,we,tr,On,se);if(se.signal.aborted)return{shortCircuited:!0};R&&R.signal.removeEventListener("abort",ms),On.forEach(Lt=>E.delete(Lt.key));let Ki=Wh(Io);if(Ki)return await st(se,Ki.result,!0,{replace:He}),{shortCircuited:!0};if(Ki=Wh(da),Ki)return z.add(Ki.key),await st(se,Ki.result,!0,{replace:He}),{shortCircuited:!0};let{loaderData:Ka,errors:ui}=hB(y,we,tr,Io,gt,On,da,le);le.forEach((Lt,Et)=>{Lt.subscribe(Tr=>{(Tr||Lt.done)&&le.delete(Et)})}),g.v7_partialHydration&&tt&&y.errors&&Object.entries(y.errors).filter(Lt=>{let[Et]=Lt;return!tr.some(Tr=>Tr.route.id===Et)}).forEach(Lt=>{let[Et,Tr]=Lt;ui=Object.assign(ui||{},{[Et]:Tr})});let ps=er(),qs=Ot(re),ua=ps||qs||On.length>0;return rr({matches:we,loaderData:Ka,errors:ui},ua?{fetchers:new Map(y.fetchers)}:{})}function be(se){if(se&&!yi(se[1]))return{[se[0]]:se[1].data};if(y.actionData)return Object.keys(y.actionData).length===0?null:y.actionData}function Ze(se){return se.forEach(de=>{let we=y.fetchers.get(de.key),Fe=Cu(void 0,we?we.data:void 0);y.fetchers.set(de.key,Fe)}),new Map(y.fetchers)}function he(se,de,we,Fe){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");E.has(se)&&pt(se);let it=(Fe&&Fe.unstable_flushSync)===!0,At=s||a,Gt=W2(y.location,y.matches,l,g.v7_prependBasename,we,g.v7_relativeSplatPath,de,Fe==null?void 0:Fe.relative),He=xg(At,Gt,l),tt=St(He,At,Gt);if(tt.active&&tt.matches&&(He=tt.matches),!He){Ke(se,de,xo(404,{pathname:Gt}),{flushSync:it});return}let{path:_e,submission:gt,error:Xt}=IB(g.v7_normalizeFormMethod,!0,Gt,Fe);if(Xt){Ke(se,de,Xt,{flushSync:it});return}let _t=Hu(He,_e);if(G=(Fe&&Fe.preventScrollReset)===!0,gt&&Ba(gt.formMethod)){Ne(se,de,_e,_t,He,tt.active,it,gt);return}j.set(se,{routeId:de,path:_e}),rt(se,de,_e,_t,He,tt.active,it,gt)}async function Ne(se,de,we,Fe,it,At,Gt,He){dt(),j.delete(se);function tt(Nn){if(!Nn.route.action&&!Nn.route.lazy){let zo=xo(405,{method:He.formMethod,pathname:we,routeId:de});return Ke(se,de,zo,{flushSync:Gt}),!0}return!1}if(!At&&tt(Fe))return;let _e=y.fetchers.get(se);Zt(se,EF(He,_e),{flushSync:Gt});let gt=new AbortController,Xt=Pc(e.history,we,gt.signal,He);if(At){let Nn=await Nr(it,we,Xt.signal);if(Nn.type==="aborted")return;if(Nn.type==="error"){let{error:zo}=yt(we,Nn);Ke(se,de,zo,{flushSync:Gt});return}else if(Nn.matches){if(it=Nn.matches,Fe=Hu(it,we),tt(Fe))return}else{Ke(se,de,xo(404,{pathname:we}),{flushSync:Gt});return}}E.set(se,gt);let _t=O,Tt=(await $e("action",y,Xt,[Fe],it,se))[Fe.route.id];if(Xt.signal.aborted){E.get(se)===gt&&E.delete(se);return}if(g.v7_fetcherPersist&&ee.has(se)){if(Fg(Tt)||yi(Tt)){Zt(se,yl(void 0));return}}else{if(Fg(Tt))if(E.delete(se),re>_t){Zt(se,yl(void 0));return}else return z.add(se),Zt(se,Cu(He)),st(Xt,Tt,!1,{fetcherSubmission:He});if(yi(Tt)){Ke(se,de,Tt.error);return}}if(Fl(Tt))throw xo(400,{type:"defer-action"});let tr=y.navigation.location||y.location,On=Pc(e.history,tr,gt.signal),ms=s||a,Io=y.navigation.state!=="idle"?xg(ms,y.navigation.location,l):y.matches;$t(Io,"Didn't find any matches after fetcher action");let da=++O;H.set(se,da);let Ki=Cu(He,Tt.data);y.fetchers.set(se,Ki);let[Ka,ui]=dB(e.history,y,Io,He,tr,!1,g.v7_skipActionErrorRevalidation,L,M,K,ee,j,z,ms,l,[Fe.route.id,Tt]);ui.filter(Nn=>Nn.key!==se).forEach(Nn=>{let zo=Nn.key,$s=y.fetchers.get(zo),kd=Cu(void 0,$s?$s.data:void 0);y.fetchers.set(zo,kd),E.has(zo)&&pt(zo),Nn.controller&&E.set(zo,Nn.controller)}),ke({fetchers:new Map(y.fetchers)});let ps=()=>ui.forEach(Nn=>pt(Nn.key));gt.signal.addEventListener("abort",ps);let{loaderResults:qs,fetcherResults:ua}=await ht(y,Io,Ka,ui,On);if(gt.signal.aborted)return;gt.signal.removeEventListener("abort",ps),H.delete(se),E.delete(se),ui.forEach(Nn=>E.delete(Nn.key));let Lt=Wh(qs);if(Lt)return st(On,Lt.result,!1);if(Lt=Wh(ua),Lt)return z.add(Lt.key),st(On,Lt.result,!1);let{loaderData:Et,errors:Tr}=hB(y,Io,Ka,qs,void 0,ui,ua,le);if(y.fetchers.has(se)){let Nn=yl(Tt.data);y.fetchers.set(se,Nn)}Ot(da),y.navigation.state==="loading"&&da>re?($t(W,"Expected pending action"),R&&R.abort(),ye(y.navigation.location,{matches:Io,loaderData:Et,errors:Tr,fetchers:new Map(y.fetchers)})):(ke({errors:Tr,loaderData:mB(y.loaderData,Et,Io,Tr),fetchers:new Map(y.fetchers)}),L=!1)}async function rt(se,de,we,Fe,it,At,Gt,He){let tt=y.fetchers.get(se);Zt(se,Cu(He,tt?tt.data:void 0),{flushSync:Gt});let _e=new AbortController,gt=Pc(e.history,we,_e.signal);if(At){let Tt=await Nr(it,we,gt.signal);if(Tt.type==="aborted")return;if(Tt.type==="error"){let{error:tr}=yt(we,Tt);Ke(se,de,tr,{flushSync:Gt});return}else if(Tt.matches)it=Tt.matches,Fe=Hu(it,we);else{Ke(se,de,xo(404,{pathname:we}),{flushSync:Gt});return}}E.set(se,_e);let Xt=O,ln=(await $e("loader",y,gt,[Fe],it,se))[Fe.route.id];if(Fl(ln)&&(ln=await Lv(ln,gt.signal,!0)||ln),E.get(se)===_e&&E.delete(se),!gt.signal.aborted){if(ee.has(se)){Zt(se,yl(void 0));return}if(Fg(ln))if(re>Xt){Zt(se,yl(void 0));return}else{z.add(se),await st(gt,ln,!1);return}if(yi(ln)){Ke(se,de,ln.error);return}$t(!Fl(ln),"Unhandled fetcher deferred data"),Zt(se,yl(ln.data))}}async function st(se,de,we,Fe){let{submission:it,fetcherSubmission:At,replace:Gt}=Fe===void 0?{}:Fe;de.response.headers.has("X-Remix-Revalidate")&&(L=!0);let He=de.response.headers.get("Location");$t(He,"Expected a Location header on the redirect Response"),He=CB(He,new URL(se.url),l);let tt=WC(y.location,He,{_isRedirect:!0});if(n){let Tt=!1;if(de.response.headers.has("X-Remix-Reload-Document"))Tt=!0;else if(Kv.test(He)){const tr=e.history.createURL(He);Tt=tr.origin!==t.location.origin||fd(tr.pathname,l)==null}if(Tt){Gt?t.location.replace(He):t.location.assign(He);return}}R=null;let _e=Gt===!0||de.response.headers.has("X-Remix-Replace")?Rr.Replace:Rr.Push,{formMethod:gt,formAction:Xt,formEncType:_t}=y.navigation;!it&&!At&&gt&&Xt&&_t&&(it=yB(y.navigation));let ln=it||At;if(pF.has(de.response.status)&&ln&&Ba(ln.formMethod))await te(_e,tt,{submission:rr({},ln,{formAction:He}),preventScrollReset:G,enableViewTransition:we?X:void 0});else{let Tt=kb(tt,it);await te(_e,tt,{overrideNavigation:Tt,fetcherSubmission:At,preventScrollReset:G,enableViewTransition:we?X:void 0})}}async function $e(se,de,we,Fe,it,At){let Gt,He={};try{Gt=await WF(c,se,de,we,Fe,it,At,i,o)}catch(tt){return Fe.forEach(_e=>{He[_e.route.id]={type:Xn.error,error:tt}}),He}for(let[tt,_e]of Object.entries(Gt))if(YF(_e)){let gt=_e.result;He[tt]={type:Xn.redirect,response:VF(gt,we,tt,it,l,g.v7_relativeSplatPath)}}else He[tt]=await kF(_e);return He}async function ht(se,de,we,Fe,it){let At=se.matches,Gt=$e("loader",se,it,we,de,null),He=Promise.all(Fe.map(async gt=>{if(gt.matches&&gt.match&&gt.controller){let _t=(await $e("loader",se,Pc(e.history,gt.path,gt.controller.signal),[gt.match],gt.matches,gt.key))[gt.match.route.id];return{[gt.key]:_t}}else return Promise.resolve({[gt.key]:{type:Xn.error,error:xo(404,{pathname:gt.path})}})})),tt=await Gt,_e=(await He).reduce((gt,Xt)=>Object.assign(gt,Xt),{});return await Promise.all([FF(de,tt,it.signal,At,se.loaderData),KF(de,_e,Fe)]),{loaderResults:tt,fetcherResults:_e}}function dt(){L=!0,M.push(...qt()),j.forEach((se,de)=>{E.has(de)&&(K.add(de),pt(de))})}function Zt(se,de,we){we===void 0&&(we={}),y.fetchers.set(se,de),ke({fetchers:new Map(y.fetchers)},{flushSync:(we&&we.flushSync)===!0})}function Ke(se,de,we,Fe){Fe===void 0&&(Fe={});let it=vI(y.matches,de);Rt(se),ke({errors:{[it.route.id]:we},fetchers:new Map(y.fetchers)},{flushSync:(Fe&&Fe.flushSync)===!0})}function mn(se){return g.v7_fetcherPersist&&($.set(se,($.get(se)||0)+1),ee.has(se)&&ee.delete(se)),y.fetchers.get(se)||fF}function Rt(se){let de=y.fetchers.get(se);E.has(se)&&!(de&&de.state==="loading"&&H.has(se))&&pt(se),j.delete(se),H.delete(se),z.delete(se),ee.delete(se),K.delete(se),y.fetchers.delete(se)}function mt(se){if(g.v7_fetcherPersist){let de=($.get(se)||0)-1;de<=0?($.delete(se),ee.add(se)):$.set(se,de)}else Rt(se);ke({fetchers:new Map(y.fetchers)})}function pt(se){let de=E.get(se);$t(de,"Expected fetch controller: "+se),de.abort(),E.delete(se)}function Nt(se){for(let de of se){let we=mn(de),Fe=yl(we.data);y.fetchers.set(de,Fe)}}function er(){let se=[],de=!1;for(let we of z){let Fe=y.fetchers.get(we);$t(Fe,"Expected fetcher: "+we),Fe.state==="loading"&&(z.delete(we),se.push(we),de=!0)}return Nt(se),de}function Ot(se){let de=[];for(let[we,Fe]of H)if(Fe<se){let it=y.fetchers.get(we);$t(it,"Expected fetcher: "+we),it.state==="loading"&&(pt(we),H.delete(we),de.push(we))}return Nt(de),de.length>0}function Ia(se,de){let we=y.blockers.get(se)||uu;return Ie.get(se)!==de&&Ie.set(se,de),we}function Rn(se){y.blockers.delete(se),Ie.delete(se)}function zr(se,de){let we=y.blockers.get(se)||uu;$t(we.state==="unblocked"&&de.state==="blocked"||we.state==="blocked"&&de.state==="blocked"||we.state==="blocked"&&de.state==="proceeding"||we.state==="blocked"&&de.state==="unblocked"||we.state==="proceeding"&&de.state==="unblocked","Invalid blocker state transition: "+we.state+" -> "+de.state);let Fe=new Map(y.blockers);Fe.set(se,de),ke({blockers:Fe})}function Wo(se){let{currentLocation:de,nextLocation:we,historyAction:Fe}=se;if(Ie.size===0)return;Ie.size>1&&ad(!1,"A router only supports one blocker at a time");let it=Array.from(Ie.entries()),[At,Gt]=it[it.length-1],He=y.blockers.get(At);if(!(He&&He.state==="proceeding")&&Gt({currentLocation:de,nextLocation:we,historyAction:Fe}))return At}function Qt(se){let de=xo(404,{pathname:se}),we=s||a,{matches:Fe,route:it}=fB(we);return qt(),{notFoundMatches:Fe,route:it,error:de}}function yt(se,de){return{boundaryId:vI(de.partialMatches).route.id,error:xo(400,{type:"route-discovery",pathname:se,message:de.error!=null&&"message"in de.error?de.error:String(de.error)})}}function qt(se){let de=[];return le.forEach((we,Fe)=>{(!se||se(Fe))&&(we.cancel(),de.push(Fe),le.delete(Fe))}),de}function cn(se,de,we){if(f=se,m=de,A=we||null,!p&&y.navigation===Rb){p=!0;let Fe=eo(y.location,y.matches);Fe!=null&&ke({restoreScrollPosition:Fe})}return()=>{f=null,m=null,A=null}}function pn(se,de){return A&&A(se,de.map(Fe=>OH(Fe,y.loaderData)))||se.key}function Do(se,de){if(f&&m){let we=pn(se,de);f[we]=m()}}function eo(se,de){if(f){let we=pn(se,de),Fe=f[we];if(typeof Fe=="number")return Fe}return null}function St(se,de,we){if(u){if(h.has(we))return{active:!1,matches:se};if(se){if(Object.keys(se[0].params).length>0)return{active:!0,matches:am(de,we,l,!0)}}else return{active:!0,matches:am(de,we,l,!0)||[]}}return{active:!1,matches:null}}async function Nr(se,de,we){let Fe=se;for(;;){let it=s==null,At=s||a;try{await SF(u,de,Fe,At,i,o,Ae,we)}catch(tt){return{type:"error",error:tt,partialMatches:Fe}}finally{it&&(a=[...a])}if(we.aborted)return{type:"aborted"};let Gt=xg(At,de,l);if(Gt)return to(de,h),{type:"success",matches:Gt};let He=am(At,de,l,!0);if(!He||Fe.length===He.length&&Fe.every((tt,_e)=>tt.route.id===He[_e].route.id))return to(de,h),{type:"success",matches:null};Fe=He}}function to(se,de){if(de.size>=C){let we=de.values().next().value;de.delete(we)}de.add(se)}function Ar(se){i={},s=RC(se,o,void 0,i)}function Un(se,de){let we=s==null;iV(se,de,s||a,i,o),we&&(a=[...a],ke({}))}return B={get basename(){return l},get future(){return g},get state(){return y},get routes(){return a},get window(){return t},initialize:We,subscribe:ze,enableScrollRestoration:cn,navigate:oe,fetch:he,revalidate:ct,createHref:se=>e.history.createHref(se),encodeLocation:se=>e.history.encodeLocation(se),getFetcher:mn,deleteFetcher:mt,dispose:Je,getBlocker:Ia,deleteBlocker:Rn,patchRoutes:Un,_internalFetchControllers:E,_internalActiveDeferreds:le,_internalSetRoutes:Ar},B}function ZF(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function W2(e,t,n,r,o,i,a,s){let l,c;if(a){l=[];for(let g of t)if(l.push(g),g.route.id===a){c=g;break}}else l=t,c=t[t.length-1];let u=Dp(o||".",Mp(l,i),fd(e.pathname,n)||e.pathname,s==="path");return o==null&&(u.search=e.search,u.hash=e.hash),(o==null||o===""||o===".")&&c&&c.route.index&&!Ev(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Ms([n,u.pathname])),Ic(u)}function IB(e,t,n,r){if(!r||!ZF(r))return{path:n};if(r.formMethod&&!HF(r.formMethod))return{path:n,error:xo(405,{method:r.formMethod})};let o=()=>({path:n,error:xo(400,{type:"invalid-body"})}),i=r.formMethod||"get",a=e?i.toUpperCase():i.toLowerCase(),s=aV(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Ba(a))return o();let d=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((I,C)=>{let[h,f]=C;return""+I+h+"="+f+`
`},""):String(r.body);return{path:n,submission:{formMethod:a,formAction:s,formEncType:r.formEncType,formData:void 0,json:void 0,text:d}}}else if(r.formEncType==="application/json"){if(!Ba(a))return o();try{let d=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:a,formAction:s,formEncType:r.formEncType,formData:void 0,json:d,text:void 0}}}catch{return o()}}}$t(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=R2(r.formData),c=r.formData;else if(r.body instanceof FormData)l=R2(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=AB(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=AB(l)}catch{return o()}let u={formMethod:a,formAction:s,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Ba(u.formMethod))return{path:n,submission:u};let g=gg(n);return t&&g.search&&Ev(g.search)&&l.append("index",""),g.search="?"+l,{path:Ic(g),submission:u}}function vF(e,t){let n=e;if(t){let r=e.findIndex(o=>o.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function dB(e,t,n,r,o,i,a,s,l,c,u,g,d,I,C,h){let f=h?yi(h[1])?h[1].error:h[1].data:void 0,A=e.createURL(t.location),m=e.createURL(o),p=h&&yi(h[1])?h[0]:void 0,Z=p?vF(n,p):n,v=h?h[1].statusCode:void 0,k=a&&v&&v>=400,B=Z.filter((W,G)=>{let{route:R}=W;if(R.lazy)return!0;if(R.loader==null)return!1;if(i)return typeof R.loader!="function"||R.loader.hydrate?!0:t.loaderData[R.id]===void 0&&(!t.errors||t.errors[R.id]===void 0);if(GF(t.loaderData,t.matches[G],W)||l.some(x=>x===W.route.id))return!0;let X=t.matches[G],Y=W;return uB(W,rr({currentUrl:A,currentParams:X.params,nextUrl:m,nextParams:Y.params},r,{actionResult:f,actionStatus:v,defaultShouldRevalidate:k?!1:s||A.pathname+A.search===m.pathname+m.search||A.search!==m.search||oV(X,Y)}))}),y=[];return g.forEach((W,G)=>{if(i||!n.some(D=>D.route.id===W.routeId)||u.has(G))return;let R=xg(I,W.path,C);if(!R){y.push({key:G,routeId:W.routeId,path:W.path,matches:null,match:null,controller:null});return}let X=t.fetchers.get(G),Y=Hu(R,W.path),x=!1;d.has(G)?x=!1:c.has(G)?(c.delete(G),x=!0):X&&X.state!=="idle"&&X.data===void 0?x=s:x=uB(Y,rr({currentUrl:A,currentParams:t.matches[t.matches.length-1].params,nextUrl:m,nextParams:n[n.length-1].params},r,{actionResult:f,actionStatus:v,defaultShouldRevalidate:k?!1:s})),x&&y.push({key:G,routeId:W.routeId,path:W.path,matches:R,match:Y,controller:new AbortController})}),[B,y]}function GF(e,t,n){let r=!t||n.route.id!==t.route.id,o=e[n.route.id]===void 0;return r||o}function oV(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function uB(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function SF(e,t,n,r,o,i,a,s){let l=[t,...n.map(c=>c.route.id)].join("-");try{let c=a.get(l);c||(c=e({path:t,matches:n,patch:(u,g)=>{s.aborted||iV(u,g,r,o,i)}}),a.set(l,c)),c&&xF(c)&&await c}finally{a.delete(l)}}function iV(e,t,n,r,o){if(e){var i;let a=r[e];$t(a,"No route found to patch children into: routeId = "+e);let s=RC(t,o,[e,"patch",String(((i=a.children)==null?void 0:i.length)||"0")],r);a.children?a.children.push(...s):a.children=s}else{let a=RC(t,o,["patch",String(n.length||"0")],r);n.push(...a)}}async function BF(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let o=n[e.id];$t(o,"No route found in manifest");let i={};for(let a in r){let l=o[a]!==void 0&&a!=="hasErrorBoundary";ad(!l,'Route "'+o.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!l&&!QH.has(a)&&(i[a]=r[a])}Object.assign(o,i),Object.assign(o,rr({},t(o),{lazy:void 0}))}async function wF(e){let{matches:t}=e,n=t.filter(o=>o.shouldLoad);return(await Promise.all(n.map(o=>o.resolve()))).reduce((o,i,a)=>Object.assign(o,{[n[a].route.id]:i}),{})}async function WF(e,t,n,r,o,i,a,s,l,c){let u=i.map(I=>I.route.lazy?BF(I.route,l,s):void 0),g=i.map((I,C)=>{let h=u[C],f=o.some(m=>m.route.id===I.route.id);return rr({},I,{shouldLoad:f,resolve:async m=>(m&&r.method==="GET"&&(I.route.lazy||I.route.loader)&&(f=!0),f?RF(t,r,I,h,m,c):Promise.resolve({type:Xn.data,result:void 0}))})}),d=await e({matches:g,request:r,params:i[0].params,fetcherKey:a,context:c});try{await Promise.all(u)}catch{}return d}async function RF(e,t,n,r,o,i){let a,s,l=c=>{let u,g=new Promise((C,h)=>u=h);s=()=>u(),t.signal.addEventListener("abort",s);let d=C=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):c({request:t,params:n.params,context:i},...C!==void 0?[C]:[]),I=(async()=>{try{return{type:"data",result:await(o?o(h=>d(h)):d())}}catch(C){return{type:"error",result:C}}})();return Promise.race([I,g])};try{let c=n.route[e];if(r)if(c){let u,[g]=await Promise.all([l(c).catch(d=>{u=d}),r]);if(u!==void 0)throw u;a=g}else if(await r,c=n.route[e],c)a=await l(c);else if(e==="action"){let u=new URL(t.url),g=u.pathname+u.search;throw xo(405,{method:t.method,pathname:g,routeId:n.route.id})}else return{type:Xn.data,result:void 0};else if(c)a=await l(c);else{let u=new URL(t.url),g=u.pathname+u.search;throw xo(404,{pathname:g})}$t(a.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Xn.error,result:c}}finally{s&&t.signal.removeEventListener("abort",s)}return a}async function kF(e){let{result:t,type:n}=e;if(sV(t)){let c;try{let u=t.headers.get("Content-Type");u&&/\bapplication\/json\b/.test(u)?t.body==null?c=null:c=await t.json():c=await t.text()}catch(u){return{type:Xn.error,error:u}}return n===Xn.error?{type:Xn.error,error:new Em(t.status,t.statusText,c),statusCode:t.status,headers:t.headers}:{type:Xn.data,data:c,statusCode:t.status,headers:t.headers}}if(n===Xn.error){if(bB(t)){var r;if(t.data instanceof Error){var o;return{type:Xn.error,error:t.data,statusCode:(o=t.init)==null?void 0:o.status}}t=new Em(((r=t.init)==null?void 0:r.status)||500,void 0,t.data)}return{type:Xn.error,error:t,statusCode:zp(t)?t.status:void 0}}if(NF(t)){var i,a;return{type:Xn.deferred,deferredData:t,statusCode:(i=t.init)==null?void 0:i.status,headers:((a=t.init)==null?void 0:a.headers)&&new Headers(t.init.headers)}}if(bB(t)){var s,l;return{type:Xn.data,data:t.data,statusCode:(s=t.init)==null?void 0:s.status,headers:(l=t.init)!=null&&l.headers?new Headers(t.init.headers):void 0}}return{type:Xn.data,data:t}}function VF(e,t,n,r,o,i){let a=e.headers.get("Location");if($t(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Kv.test(a)){let s=r.slice(0,r.findIndex(l=>l.route.id===n)+1);a=W2(new URL(t.url),s,o,!0,a,i),e.headers.set("Location",a)}return e}function CB(e,t,n){if(Kv.test(e)){let r=e,o=r.startsWith("//")?new URL(t.protocol+r):new URL(r),i=fd(o.pathname,n)!=null;if(o.origin===t.origin&&i)return o.pathname+o.search+o.hash}return e}function Pc(e,t,n,r){let o=e.createURL(aV(t)).toString(),i={signal:n};if(r&&Ba(r.formMethod)){let{formMethod:a,formEncType:s}=r;i.method=a.toUpperCase(),s==="application/json"?(i.headers=new Headers({"Content-Type":s}),i.body=JSON.stringify(r.json)):s==="text/plain"?i.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?i.body=R2(r.formData):i.body=r.formData}return new Request(o,i)}function R2(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function AB(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function XF(e,t,n,r,o){let i={},a=null,s,l=!1,c={},u=n&&yi(n[1])?n[1].error:void 0;return e.forEach(g=>{if(!(g.route.id in t))return;let d=g.route.id,I=t[d];if($t(!Fg(I),"Cannot handle redirect results in processLoaderData"),yi(I)){let C=I.error;u!==void 0&&(C=u,u=void 0),a=a||{};{let h=vI(e,d);a[h.route.id]==null&&(a[h.route.id]=C)}i[d]=void 0,l||(l=!0,s=zp(I.error)?I.error.status:500),I.headers&&(c[d]=I.headers)}else Fl(I)?(r.set(d,I.deferredData),i[d]=I.deferredData.data,I.statusCode!=null&&I.statusCode!==200&&!l&&(s=I.statusCode),I.headers&&(c[d]=I.headers)):(i[d]=I.data,I.statusCode&&I.statusCode!==200&&!l&&(s=I.statusCode),I.headers&&(c[d]=I.headers))}),u!==void 0&&n&&(a={[n[0]]:u},i[n[0]]=void 0),{loaderData:i,errors:a,statusCode:s||200,loaderHeaders:c}}function hB(e,t,n,r,o,i,a,s){let{loaderData:l,errors:c}=XF(t,r,o,s);return i.forEach(u=>{let{key:g,match:d,controller:I}=u,C=a[g];if($t(C,"Did not find corresponding fetcher result"),!(I&&I.signal.aborted))if(yi(C)){let h=vI(e.matches,d==null?void 0:d.route.id);c&&c[h.route.id]||(c=rr({},c,{[h.route.id]:C.error})),e.fetchers.delete(g)}else if(Fg(C))$t(!1,"Unhandled fetcher revalidation redirect");else if(Fl(C))$t(!1,"Unhandled fetcher deferred data");else{let h=yl(C.data);e.fetchers.set(g,h)}}),{loaderData:l,errors:c}}function mB(e,t,n,r){let o=rr({},t);for(let i of n){let a=i.route.id;if(t.hasOwnProperty(a)?t[a]!==void 0&&(o[a]=t[a]):e[a]!==void 0&&i.route.loader&&(o[a]=e[a]),r&&r.hasOwnProperty(a))break}return o}function pB(e){return e?yi(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function vI(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function fB(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function xo(e,t){let{pathname:n,routeId:r,method:o,type:i,message:a}=t===void 0?{}:t,s="Unknown Server Error",l="Unknown @remix-run/router error";return e===400?(s="Bad Request",i==="route-discovery"?l='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+a):o&&n&&r?l="You made a "+o+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?l="defer() is not supported in actions":i==="invalid-body"&&(l="Unable to encode submission body")):e===403?(s="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):e===404?(s="Not Found",l='No route matches URL "'+n+'"'):e===405&&(s="Method Not Allowed",o&&n&&r?l="You made a "+o.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":o&&(l='Invalid request method "'+o.toUpperCase()+'"')),new Em(e||500,s,new Error(l),!0)}function Wh(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,o]=t[n];if(Fg(o))return{key:r,result:o}}}function aV(e){let t=typeof e=="string"?gg(e):e;return Ic(rr({},t,{hash:""}))}function JF(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function xF(e){return typeof e=="object"&&e!=null&&"then"in e}function YF(e){return sV(e.result)&&mF.has(e.result.status)}function Fl(e){return e.type===Xn.deferred}function yi(e){return e.type===Xn.error}function Fg(e){return(e&&e.type)===Xn.redirect}function bB(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function NF(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function sV(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function HF(e){return hF.has(e.toLowerCase())}function Ba(e){return CF.has(e.toLowerCase())}async function FF(e,t,n,r,o){let i=Object.entries(t);for(let a=0;a<i.length;a++){let[s,l]=i[a],c=e.find(d=>(d==null?void 0:d.route.id)===s);if(!c)continue;let u=r.find(d=>d.route.id===c.route.id),g=u!=null&&!oV(u,c)&&(o&&o[c.route.id])!==void 0;Fl(l)&&g&&await Lv(l,n,!1).then(d=>{d&&(t[s]=d)})}}async function KF(e,t,n){for(let r=0;r<n.length;r++){let{key:o,routeId:i,controller:a}=n[r],s=t[o];e.find(c=>(c==null?void 0:c.route.id)===i)&&Fl(s)&&($t(a,"Expected an AbortController for revalidating fetcher deferred result"),await Lv(s,a.signal,!0).then(c=>{c&&(t[o]=c)}))}}async function Lv(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Xn.data,data:e.deferredData.unwrappedData}}catch(o){return{type:Xn.error,error:o}}return{type:Xn.data,data:e.deferredData.data}}}function Ev(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Hu(e,t){let n=typeof t=="string"?gg(t).search:t.search;if(e[e.length-1].route.index&&Ev(n||""))return e[e.length-1];let r=tV(e);return r[r.length-1]}function yB(e){let{formMethod:t,formAction:n,formEncType:r,text:o,formData:i,json:a}=e;if(!(!t||!n||!r)){if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:o};if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(a!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:a,text:void 0}}}function kb(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function LF(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Cu(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function EF(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function yl(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function MF(e,t){try{let n=e.sessionStorage.getItem(rV);if(n){let r=JSON.parse(n);for(let[o,i]of Object.entries(r||{}))i&&Array.isArray(i)&&t.set(o,new Set(i||[]))}}catch{}}function DF(e,t){if(t.size>0){let n={};for(let[r,o]of t)n[r]=[...o];try{e.sessionStorage.setItem(rV,JSON.stringify(n))}catch(r){ad(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mm(){return Mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mm.apply(this,arguments)}const Tp=F.createContext(null),lV=F.createContext(null),cg=F.createContext(null),Mv=F.createContext(null),Cs=F.createContext({outlet:null,matches:[],isDataRoute:!1}),gV=F.createContext(null);function zF(e,t){let{relative:n}=t===void 0?{}:t;bd()||$t(!1);let{basename:r,navigator:o}=F.useContext(cg),{hash:i,pathname:a,search:s}=dV(e,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Ms([r,a])),o.createHref({pathname:l,search:s,hash:i})}function bd(){return F.useContext(Mv)!=null}function mc(){return bd()||$t(!1),F.useContext(Mv).location}function cV(e){F.useContext(cg).static||F.useLayoutEffect(e)}function sa(){let{isDataRoute:e}=F.useContext(Cs);return e?o9():TF()}function TF(){bd()||$t(!1);let e=F.useContext(Tp),{basename:t,future:n,navigator:r}=F.useContext(cg),{matches:o}=F.useContext(Cs),{pathname:i}=mc(),a=JSON.stringify(Mp(o,n.v7_relativeSplatPath)),s=F.useRef(!1);return cV(()=>{s.current=!0}),F.useCallback(function(c,u){if(u===void 0&&(u={}),!s.current)return;if(typeof c=="number"){r.go(c);return}let g=Dp(c,JSON.parse(a),i,u.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Ms([t,g.pathname])),(u.replace?r.replace:r.push)(g,u.state,u)},[t,r,a,i,e])}const UF=F.createContext(null);function jF(e){let t=F.useContext(Cs).outlet;return t&&F.createElement(UF.Provider,{value:e},t)}function IV(){let{matches:e}=F.useContext(Cs),t=e[e.length-1];return t?t.params:{}}function dV(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=F.useContext(cg),{matches:o}=F.useContext(Cs),{pathname:i}=mc(),a=JSON.stringify(Mp(o,r.v7_relativeSplatPath));return F.useMemo(()=>Dp(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function QF(e,t,n,r){bd()||$t(!1);let{navigator:o}=F.useContext(cg),{matches:i}=F.useContext(Cs),a=i[i.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=mc(),u;u=c;let g=u.pathname||"/",d=g;if(l!=="/"){let h=l.replace(/^\//,"").split("/");d="/"+g.replace(/^\//,"").split("/").slice(h.length).join("/")}let I=xg(e,{pathname:d});return $F(I&&I.map(h=>Object.assign({},h,{params:Object.assign({},s,h.params),pathname:Ms([l,o.encodeLocation?o.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?l:Ms([l,o.encodeLocation?o.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),i,n,r)}function PF(){let e=r9(),t=zp(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),n?F.createElement("pre",{style:o},n):null,null)}const OF=F.createElement(PF,null);class _F extends F.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?F.createElement(Cs.Provider,{value:this.props.routeContext},F.createElement(gV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qF(e){let{routeContext:t,match:n,children:r}=e,o=F.useContext(Tp);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(Cs.Provider,{value:t},r)}function $F(e,t,n,r){var o;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,s=(o=n)==null?void 0:o.errors;if(s!=null){let u=a.findIndex(g=>g.route.id&&(s==null?void 0:s[g.route.id])!==void 0);u>=0||$t(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let g=a[u];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(c=u),g.route.id){let{loaderData:d,errors:I}=n,C=g.route.loader&&d[g.route.id]===void 0&&(!I||I[g.route.id]===void 0);if(g.route.lazy||C){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,g,d)=>{let I,C=!1,h=null,f=null;n&&(I=s&&g.route.id?s[g.route.id]:void 0,h=g.route.errorElement||OF,l&&(c<0&&d===0?(C=!0,f=null):c===d&&(C=!0,f=g.route.hydrateFallbackElement||null)));let A=t.concat(a.slice(0,d+1)),m=()=>{let p;return I?p=h:C?p=f:g.route.Component?p=F.createElement(g.route.Component,null):g.route.element?p=g.route.element:p=u,F.createElement(qF,{match:g,routeContext:{outlet:u,matches:A,isDataRoute:n!=null},children:p})};return n&&(g.route.ErrorBoundary||g.route.errorElement||d===0)?F.createElement(_F,{location:n.location,revalidation:n.revalidation,component:h,error:I,children:m(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):m()},null)}var uV=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(uV||{}),Dm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Dm||{});function e9(e){let t=F.useContext(Tp);return t||$t(!1),t}function t9(e){let t=F.useContext(lV);return t||$t(!1),t}function n9(e){let t=F.useContext(Cs);return t||$t(!1),t}function CV(e){let t=n9(),n=t.matches[t.matches.length-1];return n.route.id||$t(!1),n.route.id}function r9(){var e;let t=F.useContext(gV),n=t9(Dm.UseRouteError),r=CV(Dm.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function o9(){let{router:e}=e9(uV.UseNavigateStable),t=CV(Dm.UseNavigateStable),n=F.useRef(!1);return cV(()=>{n.current=!0}),F.useCallback(function(o,i){i===void 0&&(i={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,Mm({fromRouteId:t},i)))},[e,t])}function Up(e){let{to:t,replace:n,state:r,relative:o}=e;bd()||$t(!1);let{future:i,static:a}=F.useContext(cg),{matches:s}=F.useContext(Cs),{pathname:l}=mc(),c=sa(),u=Dp(t,Mp(s,i.v7_relativeSplatPath),l,o==="path"),g=JSON.stringify(u);return F.useEffect(()=>c(JSON.parse(g),{replace:n,state:r,relative:o}),[c,g,o,n,r]),null}function i9(e){return jF(e.context)}function a9(e){let{basename:t="/",children:n=null,location:r,navigationType:o=Rr.Pop,navigator:i,static:a=!1,future:s}=e;bd()&&$t(!1);let l=t.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:i,static:a,future:Mm({v7_relativeSplatPath:!1},s)}),[l,s,i,a]);typeof r=="string"&&(r=gg(r));let{pathname:u="/",search:g="",hash:d="",state:I=null,key:C="default"}=r,h=F.useMemo(()=>{let f=fd(u,l);return f==null?null:{location:{pathname:f,search:g,hash:d,state:I,key:C},navigationType:o}},[l,u,g,d,I,C,o]);return h==null?null:F.createElement(cg.Provider,{value:c},F.createElement(Mv.Provider,{children:n,value:h}))}new Promise(()=>{});function s9(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:F.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:F.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:F.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kC(){return kC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kC.apply(this,arguments)}function l9(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function g9(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function c9(e,t){return e.button===0&&(!t||t==="_self")&&!g9(e)}const I9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],d9="6";try{window.__reactRouterVersion=d9}catch{}function u9(e,t){return yF({basename:void 0,future:kC({},void 0,{v7_prependBasename:!0}),history:TH({window:void 0}),hydrationData:C9(),routes:e,mapRouteProperties:s9,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function C9(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=kC({},t,{errors:A9(t.errors)})),t}function A9(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,o]of t)if(o&&o.__type==="RouteErrorResponse")n[r]=new Em(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let i=window[o.__subType];if(typeof i=="function")try{let a=new i(o.message);a.stack="",n[r]=a}catch{}}if(n[r]==null){let i=new Error(o.message);i.stack="",n[r]=i}}else n[r]=o;return n}const h9=F.createContext({isTransitioning:!1}),m9=F.createContext(new Map),p9="startTransition",ZB=cC[p9],f9="flushSync",vB=zH[f9];function b9(e){ZB?ZB(e):e()}function Au(e){vB?vB(e):e()}class y9{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function Z9(e){let{fallbackElement:t,router:n,future:r}=e,[o,i]=F.useState(n.state),[a,s]=F.useState(),[l,c]=F.useState({isTransitioning:!1}),[u,g]=F.useState(),[d,I]=F.useState(),[C,h]=F.useState(),f=F.useRef(new Map),{v7_startTransition:A}=r||{},m=F.useCallback(y=>{A?b9(y):y()},[A]),p=F.useCallback((y,W)=>{let{deletedFetchers:G,unstable_flushSync:R,unstable_viewTransitionOpts:X}=W;G.forEach(x=>f.current.delete(x)),y.fetchers.forEach((x,D)=>{x.data!==void 0&&f.current.set(D,x.data)});let Y=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!X||Y){R?Au(()=>i(y)):m(()=>i(y));return}if(R){Au(()=>{d&&(u&&u.resolve(),d.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:X.currentLocation,nextLocation:X.nextLocation})});let x=n.window.document.startViewTransition(()=>{Au(()=>i(y))});x.finished.finally(()=>{Au(()=>{g(void 0),I(void 0),s(void 0),c({isTransitioning:!1})})}),Au(()=>I(x));return}d?(u&&u.resolve(),d.skipTransition(),h({state:y,currentLocation:X.currentLocation,nextLocation:X.nextLocation})):(s(y),c({isTransitioning:!0,flushSync:!1,currentLocation:X.currentLocation,nextLocation:X.nextLocation}))},[n.window,d,u,f,m]);F.useLayoutEffect(()=>n.subscribe(p),[n,p]),F.useEffect(()=>{l.isTransitioning&&!l.flushSync&&g(new y9)},[l]),F.useEffect(()=>{if(u&&a&&n.window){let y=a,W=u.promise,G=n.window.document.startViewTransition(async()=>{m(()=>i(y)),await W});G.finished.finally(()=>{g(void 0),I(void 0),s(void 0),c({isTransitioning:!1})}),I(G)}},[m,a,u,n.window]),F.useEffect(()=>{u&&a&&o.location.key===a.location.key&&u.resolve()},[u,d,o.location,a]),F.useEffect(()=>{!l.isTransitioning&&C&&(s(C.state),c({isTransitioning:!0,flushSync:!1,currentLocation:C.currentLocation,nextLocation:C.nextLocation}),h(void 0))},[l.isTransitioning,C]),F.useEffect(()=>{},[]);let Z=F.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:y=>n.navigate(y),push:(y,W,G)=>n.navigate(y,{state:W,preventScrollReset:G==null?void 0:G.preventScrollReset}),replace:(y,W,G)=>n.navigate(y,{replace:!0,state:W,preventScrollReset:G==null?void 0:G.preventScrollReset})}),[n]),v=n.basename||"/",k=F.useMemo(()=>({router:n,navigator:Z,static:!1,basename:v}),[n,Z,v]),B=F.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return F.createElement(F.Fragment,null,F.createElement(Tp.Provider,{value:k},F.createElement(lV.Provider,{value:o},F.createElement(m9.Provider,{value:f.current},F.createElement(h9.Provider,{value:l},F.createElement(a9,{basename:v,location:o.location,navigationType:o.historyAction,navigator:Z,future:B},o.initialized||n.future.v7_partialHydration?F.createElement(v9,{routes:n.routes,future:n.future,state:o}):t))))),null)}const v9=F.memo(G9);function G9(e){let{routes:t,future:n,state:r}=e;return QF(t,void 0,r,n)}const S9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",B9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AV=F.forwardRef(function(t,n){let{onClick:r,relative:o,reloadDocument:i,replace:a,state:s,target:l,to:c,preventScrollReset:u,unstable_viewTransition:g}=t,d=l9(t,I9),{basename:I}=F.useContext(cg),C,h=!1;if(typeof c=="string"&&B9.test(c)&&(C=c,S9))try{let p=new URL(window.location.href),Z=c.startsWith("//")?new URL(p.protocol+c):new URL(c),v=fd(Z.pathname,I);Z.origin===p.origin&&v!=null?c=v+Z.search+Z.hash:h=!0}catch{}let f=zF(c,{relative:o}),A=w9(c,{replace:a,state:s,target:l,preventScrollReset:u,relative:o,unstable_viewTransition:g});function m(p){r&&r(p),p.defaultPrevented||A(p)}return F.createElement("a",kC({},d,{href:C||f,onClick:h||i?r:m,ref:n,target:l}))});var GB;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(GB||(GB={}));var SB;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(SB||(SB={}));function w9(e,t){let{target:n,replace:r,state:o,preventScrollReset:i,relative:a,unstable_viewTransition:s}=t===void 0?{}:t,l=sa(),c=mc(),u=dV(e,{relative:a});return F.useCallback(g=>{if(c9(g,n)){g.preventDefault();let d=r!==void 0?r:Ic(c)===Ic(u);l(e,{replace:d,state:o,preventScrollReset:i,relative:a,unstable_viewTransition:s})}},[c,l,u,r,o,n,e,i,a,s])}const VC={black:"#000",white:"#fff"},Oc={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},_c={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},qc={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},$c={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},eI={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},hu={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},W9={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Qs(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${e}; visit ${n} for the full message.`}const Va="$$material";function sd(){return sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sd.apply(null,arguments)}function hV(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var R9=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,k9=hV(function(e){return R9.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),V9=!1;function X9(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function J9(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var x9=function(){function e(n){var r=this;this._insertTag=function(o){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(o,i),r.tags.push(o)},this.isSpeedy=n.speedy===void 0?!V9:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(J9(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var i=X9(o);try{i.insertRule(r,i.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var o;return(o=r.parentNode)==null?void 0:o.removeChild(r)}),this.tags=[],this.ctr=0},e}(),yo="-ms-",zm="-moz-",bn="-webkit-",mV="comm",Dv="rule",zv="decl",Y9="@import",pV="@keyframes",N9="@layer",H9=Math.abs,jp=String.fromCharCode,F9=Object.assign;function K9(e,t){return ao(e,0)^45?(((t<<2^ao(e,0))<<2^ao(e,1))<<2^ao(e,2))<<2^ao(e,3):0}function fV(e){return e.trim()}function L9(e,t){return(e=t.exec(e))?e[0]:e}function yn(e,t,n){return e.replace(t,n)}function k2(e,t){return e.indexOf(t)}function ao(e,t){return e.charCodeAt(t)|0}function XC(e,t,n){return e.slice(t,n)}function ts(e){return e.length}function Tv(e){return e.length}function Rh(e,t){return t.push(e),e}function E9(e,t){return e.map(t).join("")}var Qp=1,ld=1,bV=0,li=0,kr=0,yd="";function Pp(e,t,n,r,o,i,a){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:Qp,column:ld,length:a,return:""}}function mu(e,t){return F9(Pp("",null,null,"",null,null,0),e,{length:-e.length},t)}function M9(){return kr}function D9(){return kr=li>0?ao(yd,--li):0,ld--,kr===10&&(ld=1,Qp--),kr}function Wi(){return kr=li<bV?ao(yd,li++):0,ld++,kr===10&&(ld=1,Qp++),kr}function cs(){return ao(yd,li)}function sm(){return li}function oA(e,t){return XC(yd,e,t)}function JC(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function yV(e){return Qp=ld=1,bV=ts(yd=e),li=0,[]}function ZV(e){return yd="",e}function lm(e){return fV(oA(li-1,V2(e===91?e+2:e===40?e+1:e)))}function z9(e){for(;(kr=cs())&&kr<33;)Wi();return JC(e)>2||JC(kr)>3?"":" "}function T9(e,t){for(;--t&&Wi()&&!(kr<48||kr>102||kr>57&&kr<65||kr>70&&kr<97););return oA(e,sm()+(t<6&&cs()==32&&Wi()==32))}function V2(e){for(;Wi();)switch(kr){case e:return li;case 34:case 39:e!==34&&e!==39&&V2(kr);break;case 40:e===41&&V2(e);break;case 92:Wi();break}return li}function U9(e,t){for(;Wi()&&e+kr!==57;)if(e+kr===84&&cs()===47)break;return"/*"+oA(t,li-1)+"*"+jp(e===47?e:Wi())}function j9(e){for(;!JC(cs());)Wi();return oA(e,li)}function Q9(e){return ZV(gm("",null,null,null,[""],e=yV(e),0,[0],e))}function gm(e,t,n,r,o,i,a,s,l){for(var c=0,u=0,g=a,d=0,I=0,C=0,h=1,f=1,A=1,m=0,p="",Z=o,v=i,k=r,B=p;f;)switch(C=m,m=Wi()){case 40:if(C!=108&&ao(B,g-1)==58){k2(B+=yn(lm(m),"&","&\f"),"&\f")!=-1&&(A=-1);break}case 34:case 39:case 91:B+=lm(m);break;case 9:case 10:case 13:case 32:B+=z9(C);break;case 92:B+=T9(sm()-1,7);continue;case 47:switch(cs()){case 42:case 47:Rh(P9(U9(Wi(),sm()),t,n),l);break;default:B+="/"}break;case 123*h:s[c++]=ts(B)*A;case 125*h:case 59:case 0:switch(m){case 0:case 125:f=0;case 59+u:A==-1&&(B=yn(B,/\f/g,"")),I>0&&ts(B)-g&&Rh(I>32?wB(B+";",r,n,g-1):wB(yn(B," ","")+";",r,n,g-2),l);break;case 59:B+=";";default:if(Rh(k=BB(B,t,n,c,u,o,s,p,Z=[],v=[],g),i),m===123)if(u===0)gm(B,t,k,k,Z,i,g,s,v);else switch(d===99&&ao(B,3)===110?100:d){case 100:case 108:case 109:case 115:gm(e,k,k,r&&Rh(BB(e,k,k,0,0,o,s,p,o,Z=[],g),v),o,v,g,s,r?Z:v);break;default:gm(B,k,k,k,[""],v,0,s,v)}}c=u=I=0,h=A=1,p=B="",g=a;break;case 58:g=1+ts(B),I=C;default:if(h<1){if(m==123)--h;else if(m==125&&h++==0&&D9()==125)continue}switch(B+=jp(m),m*h){case 38:A=u>0?1:(B+="\f",-1);break;case 44:s[c++]=(ts(B)-1)*A,A=1;break;case 64:cs()===45&&(B+=lm(Wi())),d=cs(),u=g=ts(p=B+=j9(sm())),m++;break;case 45:C===45&&ts(B)==2&&(h=0)}}return i}function BB(e,t,n,r,o,i,a,s,l,c,u){for(var g=o-1,d=o===0?i:[""],I=Tv(d),C=0,h=0,f=0;C<r;++C)for(var A=0,m=XC(e,g+1,g=H9(h=a[C])),p=e;A<I;++A)(p=fV(h>0?d[A]+" "+m:yn(m,/&\f/g,d[A])))&&(l[f++]=p);return Pp(e,t,n,o===0?Dv:s,l,c,u)}function P9(e,t,n){return Pp(e,t,n,mV,jp(M9()),XC(e,2,-2),0)}function wB(e,t,n,r){return Pp(e,t,n,zv,XC(e,0,r),XC(e,r+1,-1),r)}function xI(e,t){for(var n="",r=Tv(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function O9(e,t,n,r){switch(e.type){case N9:if(e.children.length)break;case Y9:case zv:return e.return=e.return||e.value;case mV:return"";case pV:return e.return=e.value+"{"+xI(e.children,r)+"}";case Dv:e.value=e.props.join(",")}return ts(n=xI(e.children,r))?e.return=e.value+"{"+n+"}":""}function _9(e){var t=Tv(e);return function(n,r,o,i){for(var a="",s=0;s<t;s++)a+=e[s](n,r,o,i)||"";return a}}function q9(e){return function(t){t.root||(t=t.return)&&e(t)}}var $9=function(t,n,r){for(var o=0,i=0;o=i,i=cs(),o===38&&i===12&&(n[r]=1),!JC(i);)Wi();return oA(t,li)},eK=function(t,n){var r=-1,o=44;do switch(JC(o)){case 0:o===38&&cs()===12&&(n[r]=1),t[r]+=$9(li-1,n,r);break;case 2:t[r]+=lm(o);break;case 4:if(o===44){t[++r]=cs()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=jp(o)}while(o=Wi());return t},tK=function(t,n){return ZV(eK(yV(t),n))},WB=new WeakMap,nK=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,o=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!WB.get(r))&&!o){WB.set(t,!0);for(var i=[],a=tK(n,i),s=r.props,l=0,c=0;l<a.length;l++)for(var u=0;u<s.length;u++,c++)t.props[c]=i[l]?a[l].replace(/&\f/g,s[u]):s[u]+" "+a[l]}}},rK=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function vV(e,t){switch(K9(e,t)){case 5103:return bn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return bn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return bn+e+zm+e+yo+e+e;case 6828:case 4268:return bn+e+yo+e+e;case 6165:return bn+e+yo+"flex-"+e+e;case 5187:return bn+e+yn(e,/(\w+).+(:[^]+)/,bn+"box-$1$2"+yo+"flex-$1$2")+e;case 5443:return bn+e+yo+"flex-item-"+yn(e,/flex-|-self/,"")+e;case 4675:return bn+e+yo+"flex-line-pack"+yn(e,/align-content|flex-|-self/,"")+e;case 5548:return bn+e+yo+yn(e,"shrink","negative")+e;case 5292:return bn+e+yo+yn(e,"basis","preferred-size")+e;case 6060:return bn+"box-"+yn(e,"-grow","")+bn+e+yo+yn(e,"grow","positive")+e;case 4554:return bn+yn(e,/([^-])(transform)/g,"$1"+bn+"$2")+e;case 6187:return yn(yn(yn(e,/(zoom-|grab)/,bn+"$1"),/(image-set)/,bn+"$1"),e,"")+e;case 5495:case 3959:return yn(e,/(image-set\([^]*)/,bn+"$1$`$1");case 4968:return yn(yn(e,/(.+:)(flex-)?(.*)/,bn+"box-pack:$3"+yo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+bn+e+e;case 4095:case 3583:case 4068:case 2532:return yn(e,/(.+)-inline(.+)/,bn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ts(e)-1-t>6)switch(ao(e,t+1)){case 109:if(ao(e,t+4)!==45)break;case 102:return yn(e,/(.+:)(.+)-([^]+)/,"$1"+bn+"$2-$3$1"+zm+(ao(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~k2(e,"stretch")?vV(yn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ao(e,t+1)!==115)break;case 6444:switch(ao(e,ts(e)-3-(~k2(e,"!important")&&10))){case 107:return yn(e,":",":"+bn)+e;case 101:return yn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+bn+(ao(e,14)===45?"inline-":"")+"box$3$1"+bn+"$2$3$1"+yo+"$2box$3")+e}break;case 5936:switch(ao(e,t+11)){case 114:return bn+e+yo+yn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return bn+e+yo+yn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return bn+e+yo+yn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return bn+e+yo+e+e}return e}var oK=function(t,n,r,o){if(t.length>-1&&!t.return)switch(t.type){case zv:t.return=vV(t.value,t.length);break;case pV:return xI([mu(t,{value:yn(t.value,"@","@"+bn)})],o);case Dv:if(t.length)return E9(t.props,function(i){switch(L9(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return xI([mu(t,{props:[yn(i,/:(read-\w+)/,":"+zm+"$1")]})],o);case"::placeholder":return xI([mu(t,{props:[yn(i,/:(plac\w+)/,":"+bn+"input-$1")]}),mu(t,{props:[yn(i,/:(plac\w+)/,":"+zm+"$1")]}),mu(t,{props:[yn(i,/:(plac\w+)/,yo+"input-$1")]})],o)}return""})}},iK=[oK],aK=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(h){var f=h.getAttribute("data-emotion");f.indexOf(" ")!==-1&&(document.head.appendChild(h),h.setAttribute("data-s",""))})}var o=t.stylisPlugins||iK,i={},a,s=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(h){for(var f=h.getAttribute("data-emotion").split(" "),A=1;A<f.length;A++)i[f[A]]=!0;s.push(h)});var l,c=[nK,rK];{var u,g=[O9,q9(function(h){u.insert(h)})],d=_9(c.concat(o,g)),I=function(f){return xI(Q9(f),d)};l=function(f,A,m,p){u=m,I(f?f+"{"+A.styles+"}":A.styles),p&&(C.inserted[A.name]=!0)}}var C={key:n,sheet:new x9({key:n,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:l};return C.sheet.hydrate(s),C},GV={exports:{}},Wn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr=typeof Symbol=="function"&&Symbol.for,Uv=qr?Symbol.for("react.element"):60103,jv=qr?Symbol.for("react.portal"):60106,Op=qr?Symbol.for("react.fragment"):60107,_p=qr?Symbol.for("react.strict_mode"):60108,qp=qr?Symbol.for("react.profiler"):60114,$p=qr?Symbol.for("react.provider"):60109,ef=qr?Symbol.for("react.context"):60110,Qv=qr?Symbol.for("react.async_mode"):60111,tf=qr?Symbol.for("react.concurrent_mode"):60111,nf=qr?Symbol.for("react.forward_ref"):60112,rf=qr?Symbol.for("react.suspense"):60113,sK=qr?Symbol.for("react.suspense_list"):60120,of=qr?Symbol.for("react.memo"):60115,af=qr?Symbol.for("react.lazy"):60116,lK=qr?Symbol.for("react.block"):60121,gK=qr?Symbol.for("react.fundamental"):60117,cK=qr?Symbol.for("react.responder"):60118,IK=qr?Symbol.for("react.scope"):60119;function xi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Uv:switch(e=e.type,e){case Qv:case tf:case Op:case qp:case _p:case rf:return e;default:switch(e=e&&e.$$typeof,e){case ef:case nf:case af:case of:case $p:return e;default:return t}}case jv:return t}}}function SV(e){return xi(e)===tf}Wn.AsyncMode=Qv;Wn.ConcurrentMode=tf;Wn.ContextConsumer=ef;Wn.ContextProvider=$p;Wn.Element=Uv;Wn.ForwardRef=nf;Wn.Fragment=Op;Wn.Lazy=af;Wn.Memo=of;Wn.Portal=jv;Wn.Profiler=qp;Wn.StrictMode=_p;Wn.Suspense=rf;Wn.isAsyncMode=function(e){return SV(e)||xi(e)===Qv};Wn.isConcurrentMode=SV;Wn.isContextConsumer=function(e){return xi(e)===ef};Wn.isContextProvider=function(e){return xi(e)===$p};Wn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Uv};Wn.isForwardRef=function(e){return xi(e)===nf};Wn.isFragment=function(e){return xi(e)===Op};Wn.isLazy=function(e){return xi(e)===af};Wn.isMemo=function(e){return xi(e)===of};Wn.isPortal=function(e){return xi(e)===jv};Wn.isProfiler=function(e){return xi(e)===qp};Wn.isStrictMode=function(e){return xi(e)===_p};Wn.isSuspense=function(e){return xi(e)===rf};Wn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Op||e===tf||e===qp||e===_p||e===rf||e===sK||typeof e=="object"&&e!==null&&(e.$$typeof===af||e.$$typeof===of||e.$$typeof===$p||e.$$typeof===ef||e.$$typeof===nf||e.$$typeof===gK||e.$$typeof===cK||e.$$typeof===IK||e.$$typeof===lK)};Wn.typeOf=xi;GV.exports=Wn;var dK=GV.exports,BV=dK,uK={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},CK={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},wV={};wV[BV.ForwardRef]=uK;wV[BV.Memo]=CK;var AK=!0;function hK(e,t,n){var r="";return n.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]+";"):o&&(r+=o+" ")}),r}var WV=function(t,n,r){var o=t.key+"-"+n.name;(r===!1||AK===!1)&&t.registered[o]===void 0&&(t.registered[o]=n.styles)},RV=function(t,n,r){WV(t,n,r);var o=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var i=n;do t.insert(n===i?"."+o:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function mK(e){for(var t=0,n,r=0,o=e.length;o>=4;++r,o-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var pK={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},fK=!1,bK=/[A-Z]|^ms/g,yK=/_EMO_([^_]+?)_([^]*?)_EMO_/g,kV=function(t){return t.charCodeAt(1)===45},RB=function(t){return t!=null&&typeof t!="boolean"},Vb=hV(function(e){return kV(e)?e:e.replace(bK,"-$&").toLowerCase()}),kB=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(yK,function(r,o,i){return ns={name:o,styles:i,next:ns},o})}return pK[t]!==1&&!kV(t)&&typeof n=="number"&&n!==0?n+"px":n},ZK="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function xC(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var o=n;if(o.anim===1)return ns={name:o.name,styles:o.styles,next:ns},o.name;var i=n;if(i.styles!==void 0){var a=i.next;if(a!==void 0)for(;a!==void 0;)ns={name:a.name,styles:a.styles,next:ns},a=a.next;var s=i.styles+";";return s}return vK(e,t,n)}case"function":{if(e!==void 0){var l=ns,c=n(e);return ns=l,xC(e,t,c)}break}}var u=n;if(t==null)return u;var g=t[u];return g!==void 0?g:u}function vK(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=xC(e,t,n[o])+";";else for(var i in n){var a=n[i];if(typeof a!="object"){var s=a;t!=null&&t[s]!==void 0?r+=i+"{"+t[s]+"}":RB(s)&&(r+=Vb(i)+":"+kB(i,s)+";")}else{if(i==="NO_COMPONENT_SELECTOR"&&fK)throw new Error(ZK);if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var l=0;l<a.length;l++)RB(a[l])&&(r+=Vb(i)+":"+kB(i,a[l])+";");else{var c=xC(e,t,a);switch(i){case"animation":case"animationName":{r+=Vb(i)+":"+c+";";break}default:r+=i+"{"+c+"}"}}}}return r}var VB=/label:\s*([^\s;{]+)\s*(;|$)/g,ns;function sf(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,o="";ns=void 0;var i=e[0];if(i==null||i.raw===void 0)r=!1,o+=xC(n,t,i);else{var a=i;o+=a[0]}for(var s=1;s<e.length;s++)if(o+=xC(n,t,e[s]),r){var l=i;o+=l[s]}VB.lastIndex=0;for(var c="",u;(u=VB.exec(o))!==null;)c+="-"+u[1];var g=mK(o)+c;return{name:g,styles:o,next:ns}}var GK=function(t){return t()},VV=cC.useInsertionEffect?cC.useInsertionEffect:!1,SK=VV||GK,XB=VV||F.useLayoutEffect,XV=F.createContext(typeof HTMLElement<"u"?aK({key:"css"}):null);XV.Provider;var JV=function(t){return F.forwardRef(function(n,r){var o=F.useContext(XV);return t(n,o,r)})},lf=F.createContext({}),BK=JV(function(e,t){var n=e.styles,r=sf([n],void 0,F.useContext(lf)),o=F.useRef();return XB(function(){var i=t.key+"-global",a=new t.sheet.constructor({key:i,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),s=!1,l=document.querySelector('style[data-emotion="'+i+" "+r.name+'"]');return t.sheet.tags.length&&(a.before=t.sheet.tags[0]),l!==null&&(s=!0,l.setAttribute("data-emotion",i),a.hydrate([l])),o.current=[a,s],function(){a.flush()}},[t]),XB(function(){var i=o.current,a=i[0],s=i[1];if(s){i[1]=!1;return}if(r.next!==void 0&&RV(t,r.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}t.insert("",r,a,!1)},[t,r.name]),null});function Pv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sf(t)}var iA=function(){var t=Pv.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},wK=k9,WK=function(t){return t!=="theme"},JB=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?wK:WK},xB=function(t,n,r){var o;if(n){var i=n.shouldForwardProp;o=t.__emotion_forwardProp&&i?function(a){return t.__emotion_forwardProp(a)&&i(a)}:i}return typeof o!="function"&&r&&(o=t.__emotion_forwardProp),o},RK=!1,kK=function(t){var n=t.cache,r=t.serialized,o=t.isStringTag;return WV(n,r,o),SK(function(){return RV(n,r,o)}),null},VK=function e(t,n){var r=t.__emotion_real===t,o=r&&t.__emotion_base||t,i,a;n!==void 0&&(i=n.label,a=n.target);var s=xB(t,n,r),l=s||JB(o),c=!l("as");return function(){var u=arguments,g=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&g.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)g.push.apply(g,u);else{g.push(u[0][0]);for(var d=u.length,I=1;I<d;I++)g.push(u[I],u[0][I])}var C=JV(function(h,f,A){var m=c&&h.as||o,p="",Z=[],v=h;if(h.theme==null){v={};for(var k in h)v[k]=h[k];v.theme=F.useContext(lf)}typeof h.className=="string"?p=hK(f.registered,Z,h.className):h.className!=null&&(p=h.className+" ");var B=sf(g.concat(Z),f.registered,v);p+=f.key+"-"+B.name,a!==void 0&&(p+=" "+a);var y=c&&s===void 0?JB(m):l,W={};for(var G in h)c&&G==="as"||y(G)&&(W[G]=h[G]);return W.className=p,A&&(W.ref=A),F.createElement(F.Fragment,null,F.createElement(kK,{cache:f,serialized:B,isStringTag:typeof m=="string"}),F.createElement(m,W))});return C.displayName=i!==void 0?i:"Styled("+(typeof o=="string"?o:o.displayName||o.name||"Component")+")",C.defaultProps=t.defaultProps,C.__emotion_real=C,C.__emotion_base=o,C.__emotion_styles=g,C.__emotion_forwardProp=s,Object.defineProperty(C,"toString",{value:function(){return a===void 0&&RK?"NO_COMPONENT_SELECTOR":"."+a}}),C.withComponent=function(h,f){return e(h,sd({},n,f,{shouldForwardProp:xB(C,f,!0)})).apply(void 0,g)},C}},XK=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],X2=VK.bind();XK.forEach(function(e){X2[e]=X2(e)});function JK(e){return e==null||Object.keys(e).length===0}function xV(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?o=>t(JK(o)?n:o):t;return w.jsx(BK,{styles:r})}/**
 * @mui/styled-engine v6.1.5
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function YV(e,t){return X2(e,t)}function xK(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const YB=[];function NB(e){return YB[0]=e,sf(YB)}function os(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function NV(e){if(!os(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=NV(e[n])}),t}function So(e,t,n={clone:!0}){const r=n.clone?{...e}:e;return os(e)&&os(t)&&Object.keys(t).forEach(o=>{os(t[o])&&Object.prototype.hasOwnProperty.call(e,o)&&os(e[o])?r[o]=So(e[o],t[o],n):n.clone?r[o]=os(t[o])?NV(t[o]):t[o]:r[o]=t[o]}),r}const YK=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function NK(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...o}=e,i=YK(t),a=Object.keys(i);function s(d){return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${n})`}function l(d){return`@media (max-width:${(typeof t[d]=="number"?t[d]:d)-r/100}${n})`}function c(d,I){const C=a.indexOf(I);return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${n}) and (max-width:${(C!==-1&&typeof t[a[C]]=="number"?t[a[C]]:I)-r/100}${n})`}function u(d){return a.indexOf(d)+1<a.length?c(d,a[a.indexOf(d)+1]):s(d)}function g(d){const I=a.indexOf(d);return I===0?s(a[1]):I===a.length-1?l(a[I]):c(d,a[a.indexOf(d)+1]).replace("@media","@media not all and")}return{keys:a,values:i,up:s,down:l,between:c,only:u,not:g,unit:n,...o}}function HK(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(r=>r.startsWith("@container")).sort((r,o)=>{var a,s;const i=/min-width:\s*([0-9.]+)/;return+(((a=r.match(i))==null?void 0:a[1])||0)-+(((s=o.match(i))==null?void 0:s[1])||0)});return n.length?n.reduce((r,o)=>{const i=t[o];return delete r[o],r[o]=i,r},{...t}):t}function FK(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function KK(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,o]=n,i=Number.isNaN(+r)?r||0:+r;return e.containerQueries(o).up(i)}function LK(e){const t=(i,a)=>i.replace("@media",a?`@container ${a}`:"@container");function n(i,a){i.up=(...s)=>t(e.breakpoints.up(...s),a),i.down=(...s)=>t(e.breakpoints.down(...s),a),i.between=(...s)=>t(e.breakpoints.between(...s),a),i.only=(...s)=>t(e.breakpoints.only(...s),a),i.not=(...s)=>{const l=t(e.breakpoints.not(...s),a);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},o=i=>(n(r,i),r);return n(o),{...e,containerQueries:o}}const EK={borderRadius:4};function eC(e,t){return t?So(e,t,{clone:!1}):e}const gf={xs:0,sm:600,md:900,lg:1200,xl:1536},HB={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${gf[e]}px)`},MK={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:gf[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function aa(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const i=r.breakpoints||HB;return t.reduce((a,s,l)=>(a[i.up(i.keys[l])]=n(t[l]),a),{})}if(typeof t=="object"){const i=r.breakpoints||HB;return Object.keys(t).reduce((a,s)=>{if(FK(i.keys,s)){const l=KK(r.containerQueries?r:MK,s);l&&(a[l]=n(t[s],s))}else if(Object.keys(i.values||gf).includes(s)){const l=i.up(s);a[l]=n(t[s],s)}else{const l=s;a[l]=t[l]}return a},{})}return n(t)}function DK(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((r,o)=>{const i=e.up(o);return r[i]={},r},{}))||{}}function zK(e,t){return e.reduce((n,r)=>{const o=n[r];return(!o||Object.keys(o).length===0)&&delete n[r],n},t)}function TK(e,t){if(typeof e!="object")return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((o,i)=>{i<e.length&&(n[o]=!0)}):r.forEach(o=>{e[o]!=null&&(n[o]=!0)}),n}function cf({values:e,breakpoints:t,base:n}){const r=n||TK(e,t),o=Object.keys(r);if(o.length===0)return e;let i;return o.reduce((a,s,l)=>(Array.isArray(e)?(a[s]=e[l]!=null?e[l]:e[i],i=l):typeof e=="object"?(a[s]=e[s]!=null?e[s]:e[i],i=s):a[s]=e,a),{})}function Te(e){if(typeof e!="string")throw new Error(Qs(7));return e.charAt(0).toUpperCase()+e.slice(1)}function gd(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((o,i)=>o&&o[i]?o[i]:null,e);if(r!=null)return r}return t.split(".").reduce((r,o)=>r&&r[o]!=null?r[o]:null,e)}function Tm(e,t,n,r=n){let o;return typeof e=="function"?o=e(n):Array.isArray(e)?o=e[n]||r:o=gd(e,n)||r,t&&(o=t(o,r,e)),o}function vr(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:o}=e,i=a=>{if(a[t]==null)return null;const s=a[t],l=a.theme,c=gd(l,r)||{};return aa(a,s,g=>{let d=Tm(c,o,g);return g===d&&typeof g=="string"&&(d=Tm(c,o,`${t}${g==="default"?"":Te(g)}`,g)),n===!1?d:{[n]:d}})};return i.propTypes={},i.filterProps=[t],i}function UK(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const jK={m:"margin",p:"padding"},QK={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},FB={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},PK=UK(e=>{if(e.length>2)if(FB[e])e=FB[e];else return[e];const[t,n]=e.split(""),r=jK[t],o=QK[n]||"";return Array.isArray(o)?o.map(i=>r+i):[r+o]}),Ov=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],_v=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Ov,..._v];function aA(e,t,n,r){const o=gd(e,t,!0)??n;return typeof o=="number"||typeof o=="string"?i=>typeof i=="string"?i:typeof o=="string"?`calc(${i} * ${o})`:o*i:Array.isArray(o)?i=>{if(typeof i=="string")return i;const a=Math.abs(i),s=o[a];return i>=0?s:typeof s=="number"?-s:`-${s}`}:typeof o=="function"?o:()=>{}}function qv(e){return aA(e,"spacing",8)}function sA(e,t){return typeof t=="string"||t==null?t:e(t)}function OK(e,t){return n=>e.reduce((r,o)=>(r[o]=sA(t,n),r),{})}function _K(e,t,n,r){if(!t.includes(n))return null;const o=PK(n),i=OK(o,r),a=e[n];return aa(e,a,i)}function HV(e,t){const n=qv(e.theme);return Object.keys(e).map(r=>_K(e,t,r,n)).reduce(eC,{})}function gr(e){return HV(e,Ov)}gr.propTypes={};gr.filterProps=Ov;function cr(e){return HV(e,_v)}cr.propTypes={};cr.filterProps=_v;function FV(e=8,t=qv({spacing:e})){if(e.mui)return e;const n=(...r)=>(r.length===0?[1]:r).map(i=>{const a=t(i);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function If(...e){const t=e.reduce((r,o)=>(o.filterProps.forEach(i=>{r[i]=o}),r),{}),n=r=>Object.keys(r).reduce((o,i)=>t[i]?eC(o,t[i](r)):o,{});return n.propTypes={},n.filterProps=e.reduce((r,o)=>r.concat(o.filterProps),[]),n}function ea(e){return typeof e!="number"?e:`${e}px solid`}function la(e,t){return vr({prop:e,themeKey:"borders",transform:t})}const qK=la("border",ea),$K=la("borderTop",ea),eL=la("borderRight",ea),tL=la("borderBottom",ea),nL=la("borderLeft",ea),rL=la("borderColor"),oL=la("borderTopColor"),iL=la("borderRightColor"),aL=la("borderBottomColor"),sL=la("borderLeftColor"),lL=la("outline",ea),gL=la("outlineColor"),df=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=aA(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:sA(t,r)});return aa(e,e.borderRadius,n)}return null};df.propTypes={};df.filterProps=["borderRadius"];If(qK,$K,eL,tL,nL,rL,oL,iL,aL,sL,df,lL,gL);const uf=e=>{if(e.gap!==void 0&&e.gap!==null){const t=aA(e.theme,"spacing",8),n=r=>({gap:sA(t,r)});return aa(e,e.gap,n)}return null};uf.propTypes={};uf.filterProps=["gap"];const Cf=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=aA(e.theme,"spacing",8),n=r=>({columnGap:sA(t,r)});return aa(e,e.columnGap,n)}return null};Cf.propTypes={};Cf.filterProps=["columnGap"];const Af=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=aA(e.theme,"spacing",8),n=r=>({rowGap:sA(t,r)});return aa(e,e.rowGap,n)}return null};Af.propTypes={};Af.filterProps=["rowGap"];const cL=vr({prop:"gridColumn"}),IL=vr({prop:"gridRow"}),dL=vr({prop:"gridAutoFlow"}),uL=vr({prop:"gridAutoColumns"}),CL=vr({prop:"gridAutoRows"}),AL=vr({prop:"gridTemplateColumns"}),hL=vr({prop:"gridTemplateRows"}),mL=vr({prop:"gridTemplateAreas"}),pL=vr({prop:"gridArea"});If(uf,Cf,Af,cL,IL,dL,uL,CL,AL,hL,mL,pL);function YI(e,t){return t==="grey"?t:e}const fL=vr({prop:"color",themeKey:"palette",transform:YI}),bL=vr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:YI}),yL=vr({prop:"backgroundColor",themeKey:"palette",transform:YI});If(fL,bL,yL);function Zi(e){return e<=1&&e!==0?`${e*100}%`:e}const ZL=vr({prop:"width",transform:Zi}),$v=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var o,i,a,s,l;const r=((a=(i=(o=e.theme)==null?void 0:o.breakpoints)==null?void 0:i.values)==null?void 0:a[n])||gf[n];return r?((l=(s=e.theme)==null?void 0:s.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${e.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Zi(n)}};return aa(e,e.maxWidth,t)}return null};$v.filterProps=["maxWidth"];const vL=vr({prop:"minWidth",transform:Zi}),GL=vr({prop:"height",transform:Zi}),SL=vr({prop:"maxHeight",transform:Zi}),BL=vr({prop:"minHeight",transform:Zi});vr({prop:"size",cssProperty:"width",transform:Zi});vr({prop:"size",cssProperty:"height",transform:Zi});const wL=vr({prop:"boxSizing"});If(ZL,$v,vL,GL,SL,BL,wL);const lA={border:{themeKey:"borders",transform:ea},borderTop:{themeKey:"borders",transform:ea},borderRight:{themeKey:"borders",transform:ea},borderBottom:{themeKey:"borders",transform:ea},borderLeft:{themeKey:"borders",transform:ea},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ea},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:df},color:{themeKey:"palette",transform:YI},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:YI},backgroundColor:{themeKey:"palette",transform:YI},p:{style:cr},pt:{style:cr},pr:{style:cr},pb:{style:cr},pl:{style:cr},px:{style:cr},py:{style:cr},padding:{style:cr},paddingTop:{style:cr},paddingRight:{style:cr},paddingBottom:{style:cr},paddingLeft:{style:cr},paddingX:{style:cr},paddingY:{style:cr},paddingInline:{style:cr},paddingInlineStart:{style:cr},paddingInlineEnd:{style:cr},paddingBlock:{style:cr},paddingBlockStart:{style:cr},paddingBlockEnd:{style:cr},m:{style:gr},mt:{style:gr},mr:{style:gr},mb:{style:gr},ml:{style:gr},mx:{style:gr},my:{style:gr},margin:{style:gr},marginTop:{style:gr},marginRight:{style:gr},marginBottom:{style:gr},marginLeft:{style:gr},marginX:{style:gr},marginY:{style:gr},marginInline:{style:gr},marginInlineStart:{style:gr},marginInlineEnd:{style:gr},marginBlock:{style:gr},marginBlockStart:{style:gr},marginBlockEnd:{style:gr},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:uf},rowGap:{style:Af},columnGap:{style:Cf},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Zi},maxWidth:{style:$v},minWidth:{transform:Zi},height:{transform:Zi},maxHeight:{transform:Zi},minHeight:{transform:Zi},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function WL(...e){const t=e.reduce((r,o)=>r.concat(Object.keys(o)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function RL(e,t){return typeof e=="function"?e(t):e}function kL(){function e(n,r,o,i){const a={[n]:r,theme:o},s=i[n];if(!s)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:g}=s;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const d=gd(o,c)||{};return g?g(a):aa(a,r,C=>{let h=Tm(d,u,C);return C===h&&typeof C=="string"&&(h=Tm(d,u,`${n}${C==="default"?"":Te(C)}`,C)),l===!1?h:{[l]:h}})}function t(n){const{sx:r,theme:o={}}=n||{};if(!r)return null;const i=o.unstable_sxConfig??lA;function a(s){let l=s;if(typeof s=="function")l=s(o);else if(typeof s!="object")return s;if(!l)return null;const c=DK(o.breakpoints),u=Object.keys(c);let g=c;return Object.keys(l).forEach(d=>{const I=RL(l[d],o);if(I!=null)if(typeof I=="object")if(i[d])g=eC(g,e(d,I,o,i));else{const C=aa({theme:o},I,h=>({[d]:h}));WL(C,I)?g[d]=t({sx:I,theme:o}):g=eC(g,C)}else g=eC(g,e(d,I,o,i))}),HK(o,zK(u,g))}return Array.isArray(r)?r.map(a):a(r)}return t}const $l=kL();$l.filterProps=["sx"];function VL(e,t){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[e])||typeof n.getColorSchemeSelector!="function")return{};let o=n.getColorSchemeSelector(e);return o==="&"?t:((o.includes("data-")||o.includes("."))&&(o=`*:where(${o.replace(/\s*&$/,"")}) &`),{[o]:t})}return n.palette.mode===e?t:{}}function hf(e={},...t){const{breakpoints:n={},palette:r={},spacing:o,shape:i={},...a}=e,s=NK(n),l=FV(o);let c=So({breakpoints:s,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...EK,...i}},a);return c=LK(c),c.applyStyles=VL,c=t.reduce((u,g)=>So(u,g),c),c.unstable_sxConfig={...lA,...a==null?void 0:a.unstable_sxConfig},c.unstable_sx=function(g){return $l({sx:g,theme:this})},c}function XL(e){return Object.keys(e).length===0}function eG(e=null){const t=F.useContext(lf);return!t||XL(t)?e:t}const JL=hf();function mf(e=JL){return eG(e)}function xL({styles:e,themeId:t,defaultTheme:n={}}){const r=mf(n),o=typeof e=="function"?e(t&&r[t]||r):e;return w.jsx(xV,{styles:o})}const YL=e=>{var r;const t={systemProps:{},otherProps:{}},n=((r=e==null?void 0:e.theme)==null?void 0:r.unstable_sxConfig)??lA;return Object.keys(e).forEach(o=>{n[o]?t.systemProps[o]=e[o]:t.otherProps[o]=e[o]}),t};function tG(e){const{sx:t,...n}=e,{systemProps:r,otherProps:o}=YL(n);let i;return Array.isArray(t)?i=[r,...t]:typeof t=="function"?i=(...a)=>{const s=t(...a);return os(s)?{...r,...s}:r}:i={...r,...t},{...o,sx:i}}const KB=e=>e,NL=()=>{let e=KB;return{configure(t){e=t},generate(t){return e(t)},reset(){e=KB}}},KV=NL();function LV(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=LV(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function nt(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=LV(e))&&(r&&(r+=" "),r+=t);return r}function HL(e={}){const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:o}=e,i=YV("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})($l);return F.forwardRef(function(l,c){const u=mf(n),{className:g,component:d="div",...I}=tG(l);return w.jsx(i,{as:d,ref:c,className:nt(g,o?o(r):r),theme:t&&u[t]||u,...I})})}const FL={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Jt(e,t,n="Mui"){const r=FL[t];return r?`${n}-${r}`:`${KV.generate(e)}-${t}`}function Vt(e,t,n="Mui"){const r={};return t.forEach(o=>{r[o]=Jt(e,o,n)}),r}function EV(e){const{variants:t,...n}=e,r={variants:t,style:NB(n),isProcessed:!0};return r.style===n||t&&t.forEach(o=>{typeof o.style!="function"&&(o.style=NB(o.style))}),r}const KL=hf();function Xb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function LL(e){return e?(t,n)=>n[e]:null}function EL(e,t,n){e.theme=DL(e.theme)?n:e.theme[t]||e.theme}function cm(e,t){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(r=>cm(e,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:o,...i}=n;r=i}return MV(e,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function MV(e,t,n=[]){var o;let r;e:for(let i=0;i<t.length;i+=1){const a=t[i];if(typeof a.props=="function"){if(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),!a.props(r))continue}else for(const s in a.props)if(e[s]!==a.props[s]&&((o=e.ownerState)==null?void 0:o[s])!==a.props[s])continue e;typeof a.style=="function"?(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),n.push(a.style(r))):n.push(a.style)}return n}function DV(e={}){const{themeId:t,defaultTheme:n=KL,rootShouldForwardProp:r=Xb,slotShouldForwardProp:o=Xb}=e;function i(s){EL(s,t,n)}return(s,l={})=>{xK(s,v=>v.filter(k=>k!==$l));const{name:c,slot:u,skipVariantsResolver:g,skipSx:d,overridesResolver:I=LL(TL(u)),...C}=l,h=g!==void 0?g:u&&u!=="Root"&&u!=="root"||!1,f=d||!1;let A=Xb;u==="Root"||u==="root"?A=r:u?A=o:zL(s)&&(A=void 0);const m=YV(s,{shouldForwardProp:A,label:ML(),...C}),p=v=>{if(typeof v=="function"&&v.__emotion_real!==v)return function(B){return cm(B,v)};if(os(v)){const k=EV(v);return k.variants?function(y){return cm(y,k)}:k.style}return v},Z=(...v)=>{const k=[],B=v.map(p),y=[];if(k.push(i),c&&I&&y.push(function(X){var L,M;const x=(M=(L=X.theme.components)==null?void 0:L[c])==null?void 0:M.styleOverrides;if(!x)return null;const D={};for(const K in x)D[K]=cm(X,x[K]);return I(X,D)}),c&&!h&&y.push(function(X){var D,L;const Y=X.theme,x=(L=(D=Y==null?void 0:Y.components)==null?void 0:D[c])==null?void 0:L.variants;return x?MV(X,x):null}),f||y.push($l),Array.isArray(B[0])){const R=B.shift(),X=new Array(k.length).fill(""),Y=new Array(y.length).fill("");let x;x=[...X,...R,...Y],x.raw=[...X,...R.raw,...Y],k.unshift(x)}const W=[...k,...B,...y],G=m(...W);return s.muiName&&(G.muiName=s.muiName),G};return m.withConfig&&(Z.withConfig=m.withConfig),Z}}function ML(e,t){return void 0}function DL(e){for(const t in e)return!1;return!0}function zL(e){return typeof e=="string"&&e.charCodeAt(0)>96}function TL(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const et=DV();function YC(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const o=r;if(o==="components"||o==="slots")n[o]={...e[o],...n[o]};else if(o==="componentsProps"||o==="slotProps"){const i=e[o],a=t[o];if(!a)n[o]=i||{};else if(!i)n[o]=a;else{n[o]={...a};for(const s in i)if(Object.prototype.hasOwnProperty.call(i,s)){const l=s;n[o][l]=YC(i[l],a[l])}}}else n[o]===void 0&&(n[o]=e[o])}return n}function zV(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:YC(t.components[n].defaultProps,r)}function TV({props:e,name:t,defaultTheme:n,themeId:r}){let o=mf(n);return r&&(o=o[r]||o),zV({theme:o,name:t,props:e})}const Ps=typeof window<"u"?F.useLayoutEffect:F.useEffect;function UL(e,t,n,r,o){const[i,a]=F.useState(()=>o&&n?n(e).matches:r?r(e).matches:t);return Ps(()=>{if(!n)return;const s=n(e),l=()=>{a(s.matches)};return l(),s.addEventListener("change",l),()=>{s.removeEventListener("change",l)}},[e,n]),i}const jL={...cC},UV=jL.useSyncExternalStore;function QL(e,t,n,r,o){const i=F.useCallback(()=>t,[t]),a=F.useMemo(()=>{if(o&&n)return()=>n(e).matches;if(r!==null){const{matches:u}=r(e);return()=>u}return i},[i,e,r,o,n]),[s,l]=F.useMemo(()=>{if(n===null)return[i,()=>()=>{}];const u=n(e);return[()=>u.matches,g=>(u.addEventListener("change",g),()=>{u.removeEventListener("change",g)})]},[i,n,e]);return UV(l,s,a)}function Um(e,t={}){const n=eG(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:o=!1,matchMedia:i=r?window.matchMedia:null,ssrMatchMedia:a=null,noSsr:s=!1}=zV({name:"MuiUseMediaQuery",props:t,theme:n});let l=typeof e=="function"?e(n):e;return l=l.replace(/^@media( ?)/m,""),(UV!==void 0?QL:UL)(l,o,i,a,s)}function PL(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function nG(e,t=0,n=1){return PL(e,t,n)}function OL(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,o)=>o<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function eg(e){if(e.type)return e;if(e.charAt(0)==="#")return eg(OL(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Qs(9,e));let r=e.substring(t+1,e.length-1),o;if(n==="color"){if(r=r.split(" "),o=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(o))throw new Error(Qs(10,o))}else r=r.split(",");return r=r.map(i=>parseFloat(i)),{type:n,values:r,colorSpace:o}}const _L=e=>{const t=eg(e);return t.values.slice(0,3).map((n,r)=>t.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},Fu=(e,t)=>{try{return _L(e)}catch{return e}};function pf(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map((o,i)=>i<3?parseInt(o,10):o):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function jV(e){e=eg(e);const{values:t}=e,n=t[0],r=t[1]/100,o=t[2]/100,i=r*Math.min(o,1-o),a=(c,u=(c+n/30)%12)=>o-i*Math.max(Math.min(u-3,9-u,1),-1);let s="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return e.type==="hsla"&&(s+="a",l.push(t[3])),pf({type:s,values:l})}function J2(e){e=eg(e);let t=e.type==="hsl"||e.type==="hsla"?eg(jV(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function qL(e,t){const n=J2(e),r=J2(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function sn(e,t){return e=eg(e),t=nG(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,pf(e)}function kh(e,t,n){try{return sn(e,t)}catch{return e}}function ff(e,t){if(e=eg(e),t=nG(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return pf(e)}function Fn(e,t,n){try{return ff(e,t)}catch{return e}}function bf(e,t){if(e=eg(e),t=nG(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return pf(e)}function Kn(e,t,n){try{return bf(e,t)}catch{return e}}function QV(e,t=.15){return J2(e)>.5?ff(e,t):bf(e,t)}function Vh(e,t,n){try{return QV(e,t)}catch{return e}}function LB(...e){return e.reduce((t,n)=>n==null?t:function(...o){t.apply(this,o),n.apply(this,o)},()=>{})}function rG(e,t=166){let n;function r(...o){const i=()=>{e.apply(this,o)};clearTimeout(n),n=setTimeout(i,t)}return r.clear=()=>{clearTimeout(n)},r}function Jb(e,t){var n,r,o;return F.isValidElement(e)&&t.indexOf(e.type.muiName??((o=(r=(n=e.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:o.muiName))!==-1}function oi(e){return e&&e.ownerDocument||document}function Ja(e){return oi(e).defaultView||window}function x2(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let EB=0;function $L(e){const[t,n]=F.useState(e),r=e||t;return F.useEffect(()=>{t==null&&(EB+=1,n(`mui-${EB}`))},[t]),r}const eE={...cC},MB=eE.useId;function oG(e){if(MB!==void 0){const t=MB();return e??t}return $L(e)}function Y2({controlled:e,default:t,name:n,state:r="value"}){const{current:o}=F.useRef(e!==void 0),[i,a]=F.useState(t),s=o?e:i,l=F.useCallback(c=>{o||a(c)},[]);return[s,l]}function Ks(e){const t=F.useRef(e);return Ps(()=>{t.current=e}),F.useRef((...n)=>(0,t.current)(...n)).current}function xr(...e){return F.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{x2(n,t)})},e)}const DB={};function PV(e,t){const n=F.useRef(DB);return n.current===DB&&(n.current=e(t)),n}const tE=[];function nE(e){F.useEffect(e,tE)}class iG{constructor(){ji(this,"currentId",null);ji(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});ji(this,"disposeEffect",()=>this.clear)}static create(){return new iG}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function aG(){const e=PV(iG.create).current;return nE(e.disposeEffect),e}function jm(e){try{return e.matches(":focus-visible")}catch{}return!1}function OV(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function Yt(e,t,n=void 0){const r={};for(const o in e){const i=e[o];let a="",s=!0;for(let l=0;l<i.length;l+=1){const c=i[l];c&&(a+=(s===!0?"":" ")+t(c),s=!1,n&&n[c]&&(a+=" "+n[c]))}r[o]=a}return r}function rE(e){return typeof e=="string"}function _V(e,t,n){return e===void 0||rE(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function Qm(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function zB(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function qV(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:o,className:i}=e;if(!t){const I=nt(n==null?void 0:n.className,i,o==null?void 0:o.className,r==null?void 0:r.className),C={...n==null?void 0:n.style,...o==null?void 0:o.style,...r==null?void 0:r.style},h={...n,...o,...r};return I.length>0&&(h.className=I),Object.keys(C).length>0&&(h.style=C),{props:h,internalRef:void 0}}const a=Qm({...o,...r}),s=zB(r),l=zB(o),c=t(a),u=nt(c==null?void 0:c.className,n==null?void 0:n.className,i,o==null?void 0:o.className,r==null?void 0:r.className),g={...c==null?void 0:c.style,...n==null?void 0:n.style,...o==null?void 0:o.style,...r==null?void 0:r.style},d={...c,...n,...l,...s};return u.length>0&&(d.className=u),Object.keys(g).length>0&&(d.style=g),{props:d,internalRef:c.ref}}function $V(e,t,n){return typeof e=="function"?e(t,n):e}function N2(e){var g;const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:o=!1,...i}=e,a=o?{}:$V(n,r),{props:s,internalRef:l}=qV({...i,externalSlotProps:a}),c=xr(l,a==null?void 0:a.ref,(g=e.additionalProps)==null?void 0:g.ref);return _V(t,{...s,ref:c},r)}function pc(e){var t;return parseInt(F.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}const eX=F.createContext(null);function sG(){return F.useContext(eX)}const oE=typeof Symbol=="function"&&Symbol.for,iE=oE?Symbol.for("mui.nested"):"__THEME_NESTED__";function aE(e,t){return typeof t=="function"?t(e):{...e,...t}}function sE(e){const{children:t,theme:n}=e,r=sG(),o=F.useMemo(()=>{const i=r===null?{...n}:aE(r,n);return i!=null&&(i[iE]=r!==null),i},[n,r]);return w.jsx(eX.Provider,{value:o,children:t})}const tX=F.createContext();function lE({value:e,...t}){return w.jsx(tX.Provider,{value:e??!0,...t})}const nX=()=>F.useContext(tX)??!1,rX=F.createContext(void 0);function gE({value:e,children:t}){return w.jsx(rX.Provider,{value:e,children:t})}function cE(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const o=t.components[n];return o.defaultProps?YC(o.defaultProps,r):!o.styleOverrides&&!o.variants?YC(o,r):r}function IE({props:e,name:t}){const n=F.useContext(rX);return cE({props:e,name:t,theme:{components:n}})}const TB={};function UB(e,t,n,r=!1){return F.useMemo(()=>{const o=e&&t[e]||t;if(typeof n=="function"){const i=n(o),a=e?{...t,[e]:i}:i;return r?()=>a:a}return e?{...t,[e]:n}:{...t,...n}},[e,t,n,r])}function oX(e){const{children:t,theme:n,themeId:r}=e,o=eG(TB),i=sG()||TB,a=UB(r,o,n),s=UB(r,i,n,!0),l=a.direction==="rtl";return w.jsx(sE,{theme:s,children:w.jsx(lf.Provider,{value:a,children:w.jsx(lE,{value:l,children:w.jsx(gE,{value:a==null?void 0:a.components,children:t})})})})}const jB={theme:void 0};function dE(e){let t,n;return function(o){let i=t;return(i===void 0||o.theme!==n)&&(jB.theme=o.theme,i=EV(e(jB)),t=i,n=o.theme),i}}const lG="mode",gG="color-scheme",uE="data-color-scheme";function CE(e){const{defaultMode:t="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:o=lG,colorSchemeStorageKey:i=gG,attribute:a=uE,colorSchemeNode:s="document.documentElement",nonce:l}=e||{};let c="",u=a;if(a==="class"&&(u=".%s"),a==="data"&&(u="[data-%s]"),u.startsWith(".")){const d=u.substring(1);c+=`${s}.classList.remove('${d}'.replace('%s', light), '${d}'.replace('%s', dark));
      ${s}.classList.add('${d}'.replace('%s', colorScheme));`}const g=u.match(/\[([^\]]+)\]/);if(g){const[d,I]=g[1].split("=");I||(c+=`${s}.removeAttribute('${d}'.replace('%s', light));
      ${s}.removeAttribute('${d}'.replace('%s', dark));`),c+=`
      ${s}.setAttribute('${d}'.replace('%s', colorScheme), ${I?`${I}.replace('%s', colorScheme)`:'""'});`}else c+=`${s}.setAttribute('${u}', colorScheme);`;return w.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${o}') || '${t}';
  const dark = localStorage.getItem('${i}-dark') || '${r}';
  const light = localStorage.getItem('${i}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${c}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function QB(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function iX(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function AE(e){return iX(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function xb(e,t){if(typeof window>"u")return;let n;try{n=localStorage.getItem(e)||void 0,n||localStorage.setItem(e,t)}catch{}return n||t}function hE(e){const{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:o=[],modeStorageKey:i=lG,colorSchemeStorageKey:a=gG,storageWindow:s=typeof window>"u"?void 0:window}=e,l=o.join(","),c=o.length>1,[u,g]=F.useState(()=>{const p=xb(i,t),Z=xb(`${a}-light`,n),v=xb(`${a}-dark`,r);return{mode:p,systemMode:QB(p),lightColorScheme:Z,darkColorScheme:v}}),[,d]=F.useState(!1),I=F.useRef(!1);F.useEffect(()=>{c&&d(!0),I.current=!0},[c]);const C=AE(u),h=F.useCallback(p=>{g(Z=>{if(p===Z.mode)return Z;const v=p??t;try{localStorage.setItem(i,v)}catch{}return{...Z,mode:v,systemMode:QB(v)}})},[i,t]),f=F.useCallback(p=>{p?typeof p=="string"?p&&!l.includes(p)?console.error(`\`${p}\` does not exist in \`theme.colorSchemes\`.`):g(Z=>{const v={...Z};return iX(Z,k=>{try{localStorage.setItem(`${a}-${k}`,p)}catch{}k==="light"&&(v.lightColorScheme=p),k==="dark"&&(v.darkColorScheme=p)}),v}):g(Z=>{const v={...Z},k=p.light===null?n:p.light,B=p.dark===null?r:p.dark;if(k)if(!l.includes(k))console.error(`\`${k}\` does not exist in \`theme.colorSchemes\`.`);else{v.lightColorScheme=k;try{localStorage.setItem(`${a}-light`,k)}catch{}}if(B)if(!l.includes(B))console.error(`\`${B}\` does not exist in \`theme.colorSchemes\`.`);else{v.darkColorScheme=B;try{localStorage.setItem(`${a}-dark`,B)}catch{}}return v}):g(Z=>{try{localStorage.setItem(`${a}-light`,n),localStorage.setItem(`${a}-dark`,r)}catch{}return{...Z,lightColorScheme:n,darkColorScheme:r}})},[l,a,n,r]),A=F.useCallback(p=>{u.mode==="system"&&g(Z=>{const v=p!=null&&p.matches?"dark":"light";return Z.systemMode===v?Z:{...Z,systemMode:v}})},[u.mode]),m=F.useRef(A);return m.current=A,F.useEffect(()=>{if(typeof window.matchMedia!="function"||!c)return;const p=(...v)=>m.current(...v),Z=window.matchMedia("(prefers-color-scheme: dark)");return Z.addListener(p),p(Z),()=>{Z.removeListener(p)}},[c]),F.useEffect(()=>{if(s&&c){const p=Z=>{const v=Z.newValue;typeof Z.key=="string"&&Z.key.startsWith(a)&&(!v||l.match(v))&&(Z.key.endsWith("light")&&f({light:v}),Z.key.endsWith("dark")&&f({dark:v})),Z.key===i&&(!v||["light","dark","system"].includes(v))&&h(v||t)};return s.addEventListener("storage",p),()=>{s.removeEventListener("storage",p)}}},[f,h,i,a,l,t,s,c]),{...u,mode:I.current||!c?u.mode:void 0,systemMode:I.current||!c?u.systemMode:void 0,colorScheme:I.current||!c?C:void 0,setMode:h,setColorScheme:f}}const mE="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function pE(e){const{themeId:t,theme:n={},modeStorageKey:r=lG,colorSchemeStorageKey:o=gG,disableTransitionOnChange:i=!1,defaultColorScheme:a,resolveTheme:s}=e,l={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},c=F.createContext(void 0),u=()=>F.useContext(c)||l;function g(h){var Ze,he,Ne,rt,st;const{children:f,theme:A,modeStorageKey:m=r,colorSchemeStorageKey:p=o,disableTransitionOnChange:Z=i,storageWindow:v=typeof window>"u"?void 0:window,documentNode:k=typeof document>"u"?void 0:document,colorSchemeNode:B=typeof document>"u"?void 0:document.documentElement,disableNestedContext:y=!1,disableStyleSheetGeneration:W=!1,defaultMode:G="system"}=h,R=F.useRef(!1),X=sG(),Y=F.useContext(c),x=!!Y&&!y,D=F.useMemo(()=>A||(typeof n=="function"?n():n),[A]),L=D[t],{colorSchemes:M={},components:K={},cssVarPrefix:E,...O}=L||D,re=Object.keys(M).filter($e=>!!M[$e]).join(","),H=F.useMemo(()=>re.split(","),[re]),z=typeof a=="string"?a:a.light,j=typeof a=="string"?a:a.dark,$=M[z]&&M[j]?G:((he=(Ze=M[O.defaultColorScheme])==null?void 0:Ze.palette)==null?void 0:he.mode)||((Ne=O.palette)==null?void 0:Ne.mode),{mode:ee,setMode:le,systemMode:Ie,lightColorScheme:Ae,darkColorScheme:Ge,colorScheme:We,setColorScheme:Je}=hE({supportedColorSchemes:H,defaultLightColorScheme:z,defaultDarkColorScheme:j,modeStorageKey:m,colorSchemeStorageKey:p,defaultMode:$,storageWindow:v});let ze=ee,ke=We;x&&(ze=Y.mode,ke=Y.colorScheme);const ye=ke||O.defaultColorScheme,oe=((rt=O.generateThemeVars)==null?void 0:rt.call(O))||O.vars,ct={...O,components:K,colorSchemes:M,cssVarPrefix:E,vars:oe};if(typeof ct.generateSpacing=="function"&&(ct.spacing=ct.generateSpacing()),ye){const $e=M[ye];$e&&typeof $e=="object"&&Object.keys($e).forEach(ht=>{$e[ht]&&typeof $e[ht]=="object"?ct[ht]={...ct[ht],...$e[ht]}:ct[ht]=$e[ht]})}const te=O.colorSchemeSelector;F.useEffect(()=>{if(ke&&B&&te&&te!=="media"){const $e=te;let ht=te;if($e==="class"&&(ht=".%s"),$e==="data"&&(ht="[data-%s]"),$e!=null&&$e.startsWith("data-")&&!$e.includes("%s")&&(ht=`[${$e}="%s"]`),ht.startsWith("."))B.classList.remove(...H.map(dt=>ht.substring(1).replace("%s",dt))),B.classList.add(ht.substring(1).replace("%s",ke));else{const dt=ht.replace("%s",ke).match(/\[([^\]]+)\]/);if(dt){const[Zt,Ke]=dt[1].split("=");Ke||H.forEach(mn=>{B.removeAttribute(Zt.replace(ke,mn))}),B.setAttribute(Zt,Ke?Ke.replace(/"|'/g,""):"")}else B.setAttribute(ht,ke)}}},[ke,te,B,H]),F.useEffect(()=>{let $e;if(Z&&R.current&&k){const ht=k.createElement("style");ht.appendChild(k.createTextNode(mE)),k.head.appendChild(ht),window.getComputedStyle(k.body),$e=setTimeout(()=>{k.head.removeChild(ht)},1)}return()=>{clearTimeout($e)}},[ke,Z,k]),F.useEffect(()=>(R.current=!0,()=>{R.current=!1}),[]);const ie=F.useMemo(()=>({allColorSchemes:H,colorScheme:ke,darkColorScheme:Ge,lightColorScheme:Ae,mode:ze,setColorScheme:Je,setMode:le,systemMode:Ie}),[H,ke,Ge,Ae,ze,Je,le,Ie]);let ge=!0;(W||O.cssVariables===!1||x&&(X==null?void 0:X.cssVarPrefix)===E)&&(ge=!1);const be=w.jsxs(F.Fragment,{children:[w.jsx(oX,{themeId:L?t:void 0,theme:s?s(ct):ct,children:f}),ge&&w.jsx(xV,{styles:((st=ct.generateStyleSheets)==null?void 0:st.call(ct))||[]})]});return x?be:w.jsx(c.Provider,{value:ie,children:be})}const d=typeof a=="string"?a:a.light,I=typeof a=="string"?a:a.dark;return{CssVarsProvider:g,useColorScheme:u,getInitColorSchemeScript:h=>CE({colorSchemeStorageKey:o,defaultLightColorScheme:d,defaultDarkColorScheme:I,modeStorageKey:r,...h})}}function fE(e=""){function t(...r){if(!r.length)return"";const o=r[0];return typeof o=="string"&&!o.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${o}${t(...r.slice(1))})`:`, ${o}`}return(r,...o)=>`var(--${e?`${e}-`:""}${r}${t(...o)})`}const PB=(e,t,n,r=[])=>{let o=e;t.forEach((i,a)=>{a===t.length-1?Array.isArray(o)?o[Number(i)]=n:o&&typeof o=="object"&&(o[i]=n):o&&typeof o=="object"&&(o[i]||(o[i]=r.includes(i)?[]:{}),o=o[i])})},bE=(e,t,n)=>{function r(o,i=[],a=[]){Object.entries(o).forEach(([s,l])=>{(!n||n&&!n([...i,s]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...i,s],Array.isArray(l)?[...a,s]:a):t([...i,s],l,a))})}r(e)},yE=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>e.includes(r))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function Yb(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},o={},i={},a={};return bE(e,(s,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(s,l))){const u=`--${n?`${n}-`:""}${s.join("-")}`,g=yE(s,l);Object.assign(o,{[u]:g}),PB(i,s,`var(${u})`,c),PB(a,s,`var(${u}, ${g})`,c)}},s=>s[0]==="vars"),{css:o,vars:i,varsWithDefaults:a}}function ZE(e,t={}){const{getSelector:n=f,disableCssColorScheme:r,colorSchemeSelector:o}=t,{colorSchemes:i={},components:a,defaultColorScheme:s="light",...l}=e,{vars:c,css:u,varsWithDefaults:g}=Yb(l,t);let d=g;const I={},{[s]:C,...h}=i;if(Object.entries(h||{}).forEach(([p,Z])=>{const{vars:v,css:k,varsWithDefaults:B}=Yb(Z,t);d=So(d,B),I[p]={css:k,vars:v}}),C){const{css:p,vars:Z,varsWithDefaults:v}=Yb(C,t);d=So(d,v),I[s]={css:p,vars:Z}}function f(p,Z){var k,B;let v=o;if(o==="class"&&(v=".%s"),o==="data"&&(v="[data-%s]"),o!=null&&o.startsWith("data-")&&!o.includes("%s")&&(v=`[${o}="%s"]`),p){if(v==="media")return e.defaultColorScheme===p?":root":{[`@media (prefers-color-scheme: ${((B=(k=i[p])==null?void 0:k.palette)==null?void 0:B.mode)||p})`]:{":root":Z}};if(v)return e.defaultColorScheme===p?`:root, ${v.replace("%s",String(p))}`:v.replace("%s",String(p))}return":root"}return{vars:d,generateThemeVars:()=>{let p={...c};return Object.entries(I).forEach(([,{vars:Z}])=>{p=So(p,Z)}),p},generateStyleSheets:()=>{var y,W;const p=[],Z=e.defaultColorScheme||"light";function v(G,R){Object.keys(R).length&&p.push(typeof G=="string"?{[G]:{...R}}:G)}v(n(void 0,{...u}),u);const{[Z]:k,...B}=I;if(k){const{css:G}=k,R=(W=(y=i[Z])==null?void 0:y.palette)==null?void 0:W.mode,X=!r&&R?{colorScheme:R,...G}:{...G};v(n(Z,{...X}),X)}return Object.entries(B).forEach(([G,{css:R}])=>{var x,D;const X=(D=(x=i[G])==null?void 0:x.palette)==null?void 0:D.mode,Y=!r&&X?{colorScheme:X,...R}:{...R};v(n(G,{...Y}),Y)}),p}}}function vE(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}const GE=hf(),SE=et("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${Te(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),BE=e=>TV({props:e,name:"MuiContainer",defaultTheme:GE}),wE=(e,t)=>{const n=l=>Jt(t,l),{classes:r,fixed:o,disableGutters:i,maxWidth:a}=e,s={root:["root",a&&`maxWidth${Te(String(a))}`,o&&"fixed",i&&"disableGutters"]};return Yt(s,n,r)};function WE(e={}){const{createStyledComponent:t=SE,useThemeProps:n=BE,componentName:r="MuiContainer"}=e,o=t(({theme:a,ownerState:s})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!s.disableGutters&&{paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}}}),({theme:a,ownerState:s})=>s.fixed&&Object.keys(a.breakpoints.values).reduce((l,c)=>{const u=c,g=a.breakpoints.values[u];return g!==0&&(l[a.breakpoints.up(u)]={maxWidth:`${g}${a.breakpoints.unit}`}),l},{}),({theme:a,ownerState:s})=>({...s.maxWidth==="xs"&&{[a.breakpoints.up("xs")]:{maxWidth:Math.max(a.breakpoints.values.xs,444)}},...s.maxWidth&&s.maxWidth!=="xs"&&{[a.breakpoints.up(s.maxWidth)]:{maxWidth:`${a.breakpoints.values[s.maxWidth]}${a.breakpoints.unit}`}}}));return F.forwardRef(function(s,l){const c=n(s),{className:u,component:g="div",disableGutters:d=!1,fixed:I=!1,maxWidth:C="lg",classes:h,...f}=c,A={...c,component:g,disableGutters:d,fixed:I,maxWidth:C},m=wE(A,r);return w.jsx(o,{as:g,ownerState:A,className:nt(m.root,u),ref:l,...f})})}function aX(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:VC.white,default:VC.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const RE=aX();function sX(){return{text:{primary:VC.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:VC.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const OB=sX();function _B(e,t,n,r){const o=r.light||r,i=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=bf(e.main,o):t==="dark"&&(e.dark=ff(e.main,i)))}function kE(e="light"){return e==="dark"?{main:qc[200],light:qc[50],dark:qc[400]}:{main:qc[700],light:qc[400],dark:qc[800]}}function VE(e="light"){return e==="dark"?{main:_c[200],light:_c[50],dark:_c[400]}:{main:_c[500],light:_c[300],dark:_c[700]}}function XE(e="light"){return e==="dark"?{main:Oc[500],light:Oc[300],dark:Oc[700]}:{main:Oc[700],light:Oc[400],dark:Oc[800]}}function JE(e="light"){return e==="dark"?{main:$c[400],light:$c[300],dark:$c[700]}:{main:$c[700],light:$c[500],dark:$c[900]}}function xE(e="light"){return e==="dark"?{main:eI[400],light:eI[300],dark:eI[700]}:{main:eI[800],light:eI[500],dark:eI[900]}}function YE(e="light"){return e==="dark"?{main:hu[400],light:hu[300],dark:hu[700]}:{main:"#ed6c02",light:hu[500],dark:hu[900]}}function cG(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...o}=e,i=e.primary||kE(t),a=e.secondary||VE(t),s=e.error||XE(t),l=e.info||JE(t),c=e.success||xE(t),u=e.warning||YE(t);function g(h){return qL(h,OB.text.primary)>=n?OB.text.primary:RE.text.primary}const d=({color:h,name:f,mainShade:A=500,lightShade:m=300,darkShade:p=700})=>{if(h={...h},!h.main&&h[A]&&(h.main=h[A]),!h.hasOwnProperty("main"))throw new Error(Qs(11,f?` (${f})`:"",A));if(typeof h.main!="string")throw new Error(Qs(12,f?` (${f})`:"",JSON.stringify(h.main)));return _B(h,"light",m,r),_B(h,"dark",p,r),h.contrastText||(h.contrastText=g(h.main)),h};let I;return t==="light"?I=aX():t==="dark"&&(I=sX()),So({common:{...VC},mode:t,primary:d({color:i,name:"primary"}),secondary:d({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:s,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:W9,contrastThreshold:n,getContrastText:g,augmentColor:d,tonalOffset:r,...I},o)}function NE(e){const t={};return Object.entries(e).forEach(r=>{const[o,i]=r;typeof i=="object"&&(t[o]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function HE(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function FE(e){return Math.round(e*1e5)/1e5}const qB={textTransform:"uppercase"},$B='"Roboto", "Helvetica", "Arial", sans-serif';function lX(e,t){const{fontFamily:n=$B,fontSize:r=14,fontWeightLight:o=300,fontWeightRegular:i=400,fontWeightMedium:a=500,fontWeightBold:s=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...g}=typeof t=="function"?t(e):t,d=r/14,I=u||(f=>`${f/l*d}rem`),C=(f,A,m,p,Z)=>({fontFamily:n,fontWeight:f,fontSize:I(A),lineHeight:m,...n===$B?{letterSpacing:`${FE(p/A)}em`}:{},...Z,...c}),h={h1:C(o,96,1.167,-1.5),h2:C(o,60,1.2,-.5),h3:C(i,48,1.167,0),h4:C(i,34,1.235,.25),h5:C(i,24,1.334,0),h6:C(a,20,1.6,.15),subtitle1:C(i,16,1.75,.15),subtitle2:C(a,14,1.57,.1),body1:C(i,16,1.5,.15),body2:C(i,14,1.43,.15),button:C(a,14,1.75,.4,qB),caption:C(i,12,1.66,.4),overline:C(i,12,2.66,1,qB),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return So({htmlFontSize:l,pxToRem:I,fontFamily:n,fontSize:r,fontWeightLight:o,fontWeightRegular:i,fontWeightMedium:a,fontWeightBold:s,...h},g,{clone:!1})}const KE=.2,LE=.14,EE=.12;function _n(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${KE})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${LE})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${EE})`].join(",")}const ME=["none",_n(0,2,1,-1,0,1,1,0,0,1,3,0),_n(0,3,1,-2,0,2,2,0,0,1,5,0),_n(0,3,3,-2,0,3,4,0,0,1,8,0),_n(0,2,4,-1,0,4,5,0,0,1,10,0),_n(0,3,5,-1,0,5,8,0,0,1,14,0),_n(0,3,5,-1,0,6,10,0,0,1,18,0),_n(0,4,5,-2,0,7,10,1,0,2,16,1),_n(0,5,5,-3,0,8,10,1,0,3,14,2),_n(0,5,6,-3,0,9,12,1,0,3,16,2),_n(0,6,6,-3,0,10,14,1,0,4,18,3),_n(0,6,7,-4,0,11,15,1,0,4,20,3),_n(0,7,8,-4,0,12,17,2,0,5,22,4),_n(0,7,8,-4,0,13,19,2,0,5,24,4),_n(0,7,9,-4,0,14,21,2,0,5,26,4),_n(0,8,9,-5,0,15,22,2,0,6,28,5),_n(0,8,10,-5,0,16,24,2,0,6,30,5),_n(0,8,11,-5,0,17,26,2,0,6,32,5),_n(0,9,11,-5,0,18,28,2,0,7,34,6),_n(0,9,12,-6,0,19,29,2,0,7,36,6),_n(0,10,13,-6,0,20,31,3,0,8,38,7),_n(0,10,13,-6,0,21,33,3,0,8,40,7),_n(0,10,14,-6,0,22,35,3,0,8,42,7),_n(0,11,14,-7,0,23,36,3,0,9,44,8),_n(0,11,15,-7,0,24,38,3,0,9,46,8)],DE={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},zE={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function e5(e){return`${Math.round(e)}ms`}function TE(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function UE(e){const t={...DE,...e.easing},n={...zE,...e.duration};return{getAutoHeightDuration:TE,create:(o=["all"],i={})=>{const{duration:a=n.standard,easing:s=t.easeInOut,delay:l=0,...c}=i;return(Array.isArray(o)?o:[o]).map(u=>`${u} ${typeof a=="string"?a:e5(a)} ${s} ${typeof l=="string"?l:e5(l)}`).join(",")},...e,easing:t,duration:n}}const jE={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function QE(e){return os(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function gX(e={}){const t={...e};function n(r){const o=Object.entries(r);for(let i=0;i<o.length;i++){const[a,s]=o[i];!QE(s)||a.startsWith("unstable_")?delete r[a]:os(s)&&(r[a]={...s},n(r[a]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function H2(e={},...t){const{breakpoints:n,mixins:r={},spacing:o,palette:i={},transitions:a={},typography:s={},shape:l,...c}=e;if(e.vars)throw new Error(Qs(20));const u=cG(i),g=hf(e);let d=So(g,{mixins:HE(g.breakpoints,r),palette:u,shadows:ME.slice(),typography:lX(u,s),transitions:UE(a),zIndex:{...jE}});return d=So(d,c),d=t.reduce((I,C)=>So(I,C),d),d.unstable_sxConfig={...lA,...c==null?void 0:c.unstable_sxConfig},d.unstable_sx=function(C){return $l({sx:C,theme:this})},d.toRuntimeSource=gX,d}function F2(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const PE=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=F2(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function cX(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function IX(e){return e==="dark"?PE:[]}function OE(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...o}=e,i=cG(t);return{palette:i,opacity:{...cX(i.mode),...n},overlays:r||IX(i.mode),...o}}function _E(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const qE=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],$E=e=>(t,n)=>{const r=e.rootSelector||":root",o=e.colorSchemeSelector;let i=o;if(o==="class"&&(i=".%s"),o==="data"&&(i="[data-%s]"),o!=null&&o.startsWith("data-")&&!o.includes("%s")&&(i=`[${o}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const a={};return qE(e.cssVarPrefix).forEach(s=>{a[s]=n[s],delete n[s]}),i==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:a}}:i?{[i.replace("%s",t)]:a,[`${r}, ${i.replace("%s",t)}`]:n}:{[r]:{...n,...a}}}if(i&&i!=="media")return`${r}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(i)return i.replace("%s",String(t))}return r};function eM(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function Ye(e,t,n){!e[t]&&n&&(e[t]=n)}function Ku(e){return!e||!e.startsWith("hsl")?e:jV(e)}function Ws(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Fu(Ku(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function tM(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Ta=e=>{try{return e()}catch{}},nM=(e="mui")=>fE(e);function Nb(e,t,n,r){if(!t)return;t=t===!0?{}:t;const o=r==="dark"?"dark":"light";if(!n){e[r]=OE({...t,palette:{mode:o,...t==null?void 0:t.palette}});return}const{palette:i,...a}=H2({...n,palette:{mode:o,...t==null?void 0:t.palette}});return e[r]={...t,palette:i,opacity:{...cX(o),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||IX(o)},a}function rM(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:o=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:a=_E,colorSchemeSelector:s=n.light&&n.dark?"media":void 0,rootSelector:l=":root",...c}=e,u=Object.keys(n)[0],g=r||(n.light&&u!=="light"?"light":u),d=nM(i),{[g]:I,light:C,dark:h,...f}=n,A={...f};let m=I;if((g==="dark"&&!("dark"in n)||g==="light"&&!("light"in n))&&(m=!0),!m)throw new Error(Qs(21,g));const p=Nb(A,m,c,g);C&&!A.light&&Nb(A,C,void 0,"light"),h&&!A.dark&&Nb(A,h,void 0,"dark");let Z={defaultColorScheme:g,...p,cssVarPrefix:i,colorSchemeSelector:s,rootSelector:l,getCssVar:d,colorSchemes:A,font:{...NE(p.typography),...p.font},spacing:tM(c.spacing)};Object.keys(Z.colorSchemes).forEach(W=>{const G=Z.colorSchemes[W].palette,R=X=>{const Y=X.split("-"),x=Y[1],D=Y[2];return d(X,G[x][D])};if(G.mode==="light"&&(Ye(G.common,"background","#fff"),Ye(G.common,"onBackground","#000")),G.mode==="dark"&&(Ye(G.common,"background","#000"),Ye(G.common,"onBackground","#fff")),eM(G,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),G.mode==="light"){Ye(G.Alert,"errorColor",Fn(G.error.light,.6)),Ye(G.Alert,"infoColor",Fn(G.info.light,.6)),Ye(G.Alert,"successColor",Fn(G.success.light,.6)),Ye(G.Alert,"warningColor",Fn(G.warning.light,.6)),Ye(G.Alert,"errorFilledBg",R("palette-error-main")),Ye(G.Alert,"infoFilledBg",R("palette-info-main")),Ye(G.Alert,"successFilledBg",R("palette-success-main")),Ye(G.Alert,"warningFilledBg",R("palette-warning-main")),Ye(G.Alert,"errorFilledColor",Ta(()=>G.getContrastText(G.error.main))),Ye(G.Alert,"infoFilledColor",Ta(()=>G.getContrastText(G.info.main))),Ye(G.Alert,"successFilledColor",Ta(()=>G.getContrastText(G.success.main))),Ye(G.Alert,"warningFilledColor",Ta(()=>G.getContrastText(G.warning.main))),Ye(G.Alert,"errorStandardBg",Kn(G.error.light,.9)),Ye(G.Alert,"infoStandardBg",Kn(G.info.light,.9)),Ye(G.Alert,"successStandardBg",Kn(G.success.light,.9)),Ye(G.Alert,"warningStandardBg",Kn(G.warning.light,.9)),Ye(G.Alert,"errorIconColor",R("palette-error-main")),Ye(G.Alert,"infoIconColor",R("palette-info-main")),Ye(G.Alert,"successIconColor",R("palette-success-main")),Ye(G.Alert,"warningIconColor",R("palette-warning-main")),Ye(G.AppBar,"defaultBg",R("palette-grey-100")),Ye(G.Avatar,"defaultBg",R("palette-grey-400")),Ye(G.Button,"inheritContainedBg",R("palette-grey-300")),Ye(G.Button,"inheritContainedHoverBg",R("palette-grey-A100")),Ye(G.Chip,"defaultBorder",R("palette-grey-400")),Ye(G.Chip,"defaultAvatarColor",R("palette-grey-700")),Ye(G.Chip,"defaultIconColor",R("palette-grey-700")),Ye(G.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Ye(G.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Ye(G.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Ye(G.LinearProgress,"primaryBg",Kn(G.primary.main,.62)),Ye(G.LinearProgress,"secondaryBg",Kn(G.secondary.main,.62)),Ye(G.LinearProgress,"errorBg",Kn(G.error.main,.62)),Ye(G.LinearProgress,"infoBg",Kn(G.info.main,.62)),Ye(G.LinearProgress,"successBg",Kn(G.success.main,.62)),Ye(G.LinearProgress,"warningBg",Kn(G.warning.main,.62)),Ye(G.Skeleton,"bg",`rgba(${R("palette-text-primaryChannel")} / 0.11)`),Ye(G.Slider,"primaryTrack",Kn(G.primary.main,.62)),Ye(G.Slider,"secondaryTrack",Kn(G.secondary.main,.62)),Ye(G.Slider,"errorTrack",Kn(G.error.main,.62)),Ye(G.Slider,"infoTrack",Kn(G.info.main,.62)),Ye(G.Slider,"successTrack",Kn(G.success.main,.62)),Ye(G.Slider,"warningTrack",Kn(G.warning.main,.62));const X=Vh(G.background.default,.8);Ye(G.SnackbarContent,"bg",X),Ye(G.SnackbarContent,"color",Ta(()=>G.getContrastText(X))),Ye(G.SpeedDialAction,"fabHoverBg",Vh(G.background.paper,.15)),Ye(G.StepConnector,"border",R("palette-grey-400")),Ye(G.StepContent,"border",R("palette-grey-400")),Ye(G.Switch,"defaultColor",R("palette-common-white")),Ye(G.Switch,"defaultDisabledColor",R("palette-grey-100")),Ye(G.Switch,"primaryDisabledColor",Kn(G.primary.main,.62)),Ye(G.Switch,"secondaryDisabledColor",Kn(G.secondary.main,.62)),Ye(G.Switch,"errorDisabledColor",Kn(G.error.main,.62)),Ye(G.Switch,"infoDisabledColor",Kn(G.info.main,.62)),Ye(G.Switch,"successDisabledColor",Kn(G.success.main,.62)),Ye(G.Switch,"warningDisabledColor",Kn(G.warning.main,.62)),Ye(G.TableCell,"border",Kn(kh(G.divider,1),.88)),Ye(G.Tooltip,"bg",kh(G.grey[700],.92))}if(G.mode==="dark"){Ye(G.Alert,"errorColor",Kn(G.error.light,.6)),Ye(G.Alert,"infoColor",Kn(G.info.light,.6)),Ye(G.Alert,"successColor",Kn(G.success.light,.6)),Ye(G.Alert,"warningColor",Kn(G.warning.light,.6)),Ye(G.Alert,"errorFilledBg",R("palette-error-dark")),Ye(G.Alert,"infoFilledBg",R("palette-info-dark")),Ye(G.Alert,"successFilledBg",R("palette-success-dark")),Ye(G.Alert,"warningFilledBg",R("palette-warning-dark")),Ye(G.Alert,"errorFilledColor",Ta(()=>G.getContrastText(G.error.dark))),Ye(G.Alert,"infoFilledColor",Ta(()=>G.getContrastText(G.info.dark))),Ye(G.Alert,"successFilledColor",Ta(()=>G.getContrastText(G.success.dark))),Ye(G.Alert,"warningFilledColor",Ta(()=>G.getContrastText(G.warning.dark))),Ye(G.Alert,"errorStandardBg",Fn(G.error.light,.9)),Ye(G.Alert,"infoStandardBg",Fn(G.info.light,.9)),Ye(G.Alert,"successStandardBg",Fn(G.success.light,.9)),Ye(G.Alert,"warningStandardBg",Fn(G.warning.light,.9)),Ye(G.Alert,"errorIconColor",R("palette-error-main")),Ye(G.Alert,"infoIconColor",R("palette-info-main")),Ye(G.Alert,"successIconColor",R("palette-success-main")),Ye(G.Alert,"warningIconColor",R("palette-warning-main")),Ye(G.AppBar,"defaultBg",R("palette-grey-900")),Ye(G.AppBar,"darkBg",R("palette-background-paper")),Ye(G.AppBar,"darkColor",R("palette-text-primary")),Ye(G.Avatar,"defaultBg",R("palette-grey-600")),Ye(G.Button,"inheritContainedBg",R("palette-grey-800")),Ye(G.Button,"inheritContainedHoverBg",R("palette-grey-700")),Ye(G.Chip,"defaultBorder",R("palette-grey-700")),Ye(G.Chip,"defaultAvatarColor",R("palette-grey-300")),Ye(G.Chip,"defaultIconColor",R("palette-grey-300")),Ye(G.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Ye(G.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Ye(G.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Ye(G.LinearProgress,"primaryBg",Fn(G.primary.main,.5)),Ye(G.LinearProgress,"secondaryBg",Fn(G.secondary.main,.5)),Ye(G.LinearProgress,"errorBg",Fn(G.error.main,.5)),Ye(G.LinearProgress,"infoBg",Fn(G.info.main,.5)),Ye(G.LinearProgress,"successBg",Fn(G.success.main,.5)),Ye(G.LinearProgress,"warningBg",Fn(G.warning.main,.5)),Ye(G.Skeleton,"bg",`rgba(${R("palette-text-primaryChannel")} / 0.13)`),Ye(G.Slider,"primaryTrack",Fn(G.primary.main,.5)),Ye(G.Slider,"secondaryTrack",Fn(G.secondary.main,.5)),Ye(G.Slider,"errorTrack",Fn(G.error.main,.5)),Ye(G.Slider,"infoTrack",Fn(G.info.main,.5)),Ye(G.Slider,"successTrack",Fn(G.success.main,.5)),Ye(G.Slider,"warningTrack",Fn(G.warning.main,.5));const X=Vh(G.background.default,.98);Ye(G.SnackbarContent,"bg",X),Ye(G.SnackbarContent,"color",Ta(()=>G.getContrastText(X))),Ye(G.SpeedDialAction,"fabHoverBg",Vh(G.background.paper,.15)),Ye(G.StepConnector,"border",R("palette-grey-600")),Ye(G.StepContent,"border",R("palette-grey-600")),Ye(G.Switch,"defaultColor",R("palette-grey-300")),Ye(G.Switch,"defaultDisabledColor",R("palette-grey-600")),Ye(G.Switch,"primaryDisabledColor",Fn(G.primary.main,.55)),Ye(G.Switch,"secondaryDisabledColor",Fn(G.secondary.main,.55)),Ye(G.Switch,"errorDisabledColor",Fn(G.error.main,.55)),Ye(G.Switch,"infoDisabledColor",Fn(G.info.main,.55)),Ye(G.Switch,"successDisabledColor",Fn(G.success.main,.55)),Ye(G.Switch,"warningDisabledColor",Fn(G.warning.main,.55)),Ye(G.TableCell,"border",Fn(kh(G.divider,1),.68)),Ye(G.Tooltip,"bg",kh(G.grey[700],.92))}Ws(G.background,"default"),Ws(G.background,"paper"),Ws(G.common,"background"),Ws(G.common,"onBackground"),Ws(G,"divider"),Object.keys(G).forEach(X=>{const Y=G[X];Y&&typeof Y=="object"&&(Y.main&&Ye(G[X],"mainChannel",Fu(Ku(Y.main))),Y.light&&Ye(G[X],"lightChannel",Fu(Ku(Y.light))),Y.dark&&Ye(G[X],"darkChannel",Fu(Ku(Y.dark))),Y.contrastText&&Ye(G[X],"contrastTextChannel",Fu(Ku(Y.contrastText))),X==="text"&&(Ws(G[X],"primary"),Ws(G[X],"secondary")),X==="action"&&(Y.active&&Ws(G[X],"active"),Y.selected&&Ws(G[X],"selected")))})}),Z=t.reduce((W,G)=>So(W,G),Z);const v={prefix:i,disableCssColorScheme:o,shouldSkipGeneratingVar:a,getSelector:$E(Z)},{vars:k,generateThemeVars:B,generateStyleSheets:y}=ZE(Z,v);return Z.vars=k,Object.entries(Z.colorSchemes[Z.defaultColorScheme]).forEach(([W,G])=>{Z[W]=G}),Z.generateThemeVars=B,Z.generateStyleSheets=y,Z.generateSpacing=function(){return FV(c.spacing,qv(this))},Z.getColorSchemeSelector=vE(s),Z.spacing=Z.generateSpacing(),Z.shouldSkipGeneratingVar=a,Z.unstable_sxConfig={...lA,...c==null?void 0:c.unstable_sxConfig},Z.unstable_sx=function(G){return $l({sx:G,theme:this})},Z.toRuntimeSource=gX,Z}function t5(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:cG({...n===!0?{}:n.palette,mode:t})})}function yf(e={},...t){const{palette:n,cssVariables:r=!1,colorSchemes:o=n?void 0:{light:!0},defaultColorScheme:i=n==null?void 0:n.mode,...a}=e,s=i||"light",l=o==null?void 0:o[s],c={...o,...n?{[s]:{...typeof l!="boolean"&&l,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in e))return H2(e,...t);let u=n;"palette"in e||c[s]&&(c[s]!==!0?u=c[s].palette:s==="dark"&&(u={mode:"dark"}));const g=H2({...e,palette:u},...t);return g.defaultColorScheme=s,g.colorSchemes=c,g.palette.mode==="light"&&(g.colorSchemes.light={...c.light!==!0&&c.light,palette:g.palette},t5(g,"dark",c.dark)),g.palette.mode==="dark"&&(g.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:g.palette},t5(g,"light",c.light)),g}return!n&&!("light"in c)&&s==="light"&&(c.light=!0),rM({...a,colorSchemes:c,defaultColorScheme:s,...typeof r!="boolean"&&r},...t)}const Zf=yf();function As(){const e=mf(Zf);return e[Va]||e}function IG({props:e,name:t}){return TV({props:e,name:t,defaultTheme:Zf,themeId:Va})}function dX(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Mo=e=>dX(e)&&e!=="classes",Pe=DV({themeId:Va,defaultTheme:Zf,rootShouldForwardProp:Mo});function n5({theme:e,...t}){const n=Va in e?e[Va]:void 0;return w.jsx(oX,{...t,themeId:n?Va:void 0,theme:n||e})}const Xh={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:oM,useColorScheme:$ne,getInitColorSchemeScript:ere}=pE({themeId:Va,theme:()=>yf({cssVariables:!0}),colorSchemeStorageKey:Xh.colorSchemeStorageKey,modeStorageKey:Xh.modeStorageKey,defaultColorScheme:{light:Xh.defaultLightColorScheme,dark:Xh.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:lX(e.palette,e.typography)};return t.unstable_sx=function(r){return $l({sx:r,theme:this})},t}}),iM=oM;function aM({theme:e,...t}){return typeof e=="function"?w.jsx(n5,{theme:e,...t}):"colorSchemes"in(Va in e?e[Va]:e)?w.jsx(iM,{theme:e,...t}):w.jsx(n5,{theme:e,...t})}function sM(e){return w.jsx(xL,{...e,defaultTheme:Zf,themeId:Va})}function dG(e){return function(n){return w.jsx(sM,{styles:typeof e=="function"?r=>e({theme:r,...n}):e})}}function lM(){return tG}const Pt=dE;function Ht(e){return IE(e)}function gM(e){return Jt("MuiSvgIcon",e)}Vt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const cM=e=>{const{color:t,fontSize:n,classes:r}=e,o={root:["root",t!=="inherit"&&`color${Te(t)}`,`fontSize${Te(n)}`]};return Yt(o,gM,r)},IM=Pe("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Te(n.color)}`],t[`fontSize${Te(n.fontSize)}`]]}})(Pt(({theme:e})=>{var t,n,r,o,i,a,s,l,c,u,g,d,I,C;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(o=(t=e.transitions)==null?void 0:t.create)==null?void 0:o.call(t,"fill",{duration:(r=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:h=>!h.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((a=(i=e.typography)==null?void 0:i.pxToRem)==null?void 0:a.call(i,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(s=e.typography)==null?void 0:s.pxToRem)==null?void 0:l.call(s,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=e.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,h])=>h&&h.main).map(([h])=>{var f,A;return{props:{color:h},style:{color:(A=(f=(e.vars??e).palette)==null?void 0:f[h])==null?void 0:A.main}}}),{props:{color:"action"},style:{color:(d=(g=(e.vars??e).palette)==null?void 0:g.action)==null?void 0:d.active}},{props:{color:"disabled"},style:{color:(C=(I=(e.vars??e).palette)==null?void 0:I.action)==null?void 0:C.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),NC=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiSvgIcon"}),{children:o,className:i,color:a="inherit",component:s="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:g,viewBox:d="0 0 24 24",...I}=r,C=F.isValidElement(o)&&o.type==="svg",h={...r,color:a,component:s,fontSize:l,instanceFontSize:t.fontSize,inheritViewBox:u,viewBox:d,hasSvgAsChild:C},f={};u||(f.viewBox=d);const A=cM(h);return w.jsxs(IM,{as:s,className:nt(A.root,i),focusable:"false",color:c,"aria-hidden":g?void 0:!0,role:g?"img":void 0,ref:n,...f,...I,...C&&o.props,ownerState:h,children:[C?o.props.children:o,g?w.jsx("title",{children:g}):null]})});NC&&(NC.muiName="SvgIcon");function Jn(e,t){function n(r,o){return w.jsx(NC,{"data-testid":`${t}Icon`,ref:o,...r,children:e})}return n.muiName=NC.muiName,F.memo(F.forwardRef(n))}var xn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uG=Symbol.for("react.element"),CG=Symbol.for("react.portal"),vf=Symbol.for("react.fragment"),Gf=Symbol.for("react.strict_mode"),Sf=Symbol.for("react.profiler"),Bf=Symbol.for("react.provider"),wf=Symbol.for("react.context"),dM=Symbol.for("react.server_context"),Wf=Symbol.for("react.forward_ref"),Rf=Symbol.for("react.suspense"),kf=Symbol.for("react.suspense_list"),Vf=Symbol.for("react.memo"),Xf=Symbol.for("react.lazy"),uM=Symbol.for("react.offscreen"),uX;uX=Symbol.for("react.module.reference");function ga(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case uG:switch(e=e.type,e){case vf:case Sf:case Gf:case Rf:case kf:return e;default:switch(e=e&&e.$$typeof,e){case dM:case wf:case Wf:case Xf:case Vf:case Bf:return e;default:return t}}case CG:return t}}}xn.ContextConsumer=wf;xn.ContextProvider=Bf;xn.Element=uG;xn.ForwardRef=Wf;xn.Fragment=vf;xn.Lazy=Xf;xn.Memo=Vf;xn.Portal=CG;xn.Profiler=Sf;xn.StrictMode=Gf;xn.Suspense=Rf;xn.SuspenseList=kf;xn.isAsyncMode=function(){return!1};xn.isConcurrentMode=function(){return!1};xn.isContextConsumer=function(e){return ga(e)===wf};xn.isContextProvider=function(e){return ga(e)===Bf};xn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===uG};xn.isForwardRef=function(e){return ga(e)===Wf};xn.isFragment=function(e){return ga(e)===vf};xn.isLazy=function(e){return ga(e)===Xf};xn.isMemo=function(e){return ga(e)===Vf};xn.isPortal=function(e){return ga(e)===CG};xn.isProfiler=function(e){return ga(e)===Sf};xn.isStrictMode=function(e){return ga(e)===Gf};xn.isSuspense=function(e){return ga(e)===Rf};xn.isSuspenseList=function(e){return ga(e)===kf};xn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===vf||e===Sf||e===Gf||e===Rf||e===kf||e===uM||typeof e=="object"&&e!==null&&(e.$$typeof===Xf||e.$$typeof===Vf||e.$$typeof===Bf||e.$$typeof===wf||e.$$typeof===Wf||e.$$typeof===uX||e.getModuleId!==void 0)};xn.typeOf=ga;function Jf(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function K2(e,t){return K2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},K2(e,t)}function AG(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,K2(e,t)}function CM(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function AM(e,t){e.classList?e.classList.add(t):CM(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function r5(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function hM(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=r5(e.className,t):e.setAttribute("class",r5(e.className&&e.className.baseVal||"",t))}const o5={disabled:!1},Pm=qe.createContext(null);var CX=function(t){return t.scrollTop},Lu="unmounted",kg="exited",Vg="entering",lI="entered",L2="exiting",ca=function(e){AG(t,e);function t(r,o){var i;i=e.call(this,r,o)||this;var a=o,s=a&&!a.isMounting?r.enter:r.appear,l;return i.appearStatus=null,r.in?s?(l=kg,i.appearStatus=Vg):l=lI:r.unmountOnExit||r.mountOnEnter?l=Lu:l=kg,i.state={status:l},i.nextCallback=null,i}t.getDerivedStateFromProps=function(o,i){var a=o.in;return a&&i.status===Lu?{status:kg}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(o){var i=null;if(o!==this.props){var a=this.state.status;this.props.in?a!==Vg&&a!==lI&&(i=Vg):(a===Vg||a===lI)&&(i=L2)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var o=this.props.timeout,i,a,s;return i=a=s=o,o!=null&&typeof o!="number"&&(i=o.exit,a=o.enter,s=o.appear!==void 0?o.appear:a),{exit:i,enter:a,appear:s}},n.updateStatus=function(o,i){if(o===void 0&&(o=!1),i!==null)if(this.cancelNextCallback(),i===Vg){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:Nu.findDOMNode(this);a&&CX(a)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===kg&&this.setState({status:Lu})},n.performEnter=function(o){var i=this,a=this.props.enter,s=this.context?this.context.isMounting:o,l=this.props.nodeRef?[s]:[Nu.findDOMNode(this),s],c=l[0],u=l[1],g=this.getTimeouts(),d=s?g.appear:g.enter;if(!o&&!a||o5.disabled){this.safeSetState({status:lI},function(){i.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Vg},function(){i.props.onEntering(c,u),i.onTransitionEnd(d,function(){i.safeSetState({status:lI},function(){i.props.onEntered(c,u)})})})},n.performExit=function(){var o=this,i=this.props.exit,a=this.getTimeouts(),s=this.props.nodeRef?void 0:Nu.findDOMNode(this);if(!i||o5.disabled){this.safeSetState({status:kg},function(){o.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:L2},function(){o.props.onExiting(s),o.onTransitionEnd(a.exit,function(){o.safeSetState({status:kg},function(){o.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(o,i){i=this.setNextCallback(i),this.setState(o,i)},n.setNextCallback=function(o){var i=this,a=!0;return this.nextCallback=function(s){a&&(a=!1,i.nextCallback=null,o(s))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(o,i){this.setNextCallback(i);var a=this.props.nodeRef?this.props.nodeRef.current:Nu.findDOMNode(this),s=o==null&&!this.props.addEndListener;if(!a||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}o!=null&&setTimeout(this.nextCallback,o)},n.render=function(){var o=this.state.status;if(o===Lu)return null;var i=this.props,a=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var s=Jf(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return qe.createElement(Pm.Provider,{value:null},typeof a=="function"?a(o,s):qe.cloneElement(qe.Children.only(a),s))},t}(qe.Component);ca.contextType=Pm;ca.propTypes={};function tI(){}ca.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:tI,onEntering:tI,onEntered:tI,onExit:tI,onExiting:tI,onExited:tI};ca.UNMOUNTED=Lu;ca.EXITED=kg;ca.ENTERING=Vg;ca.ENTERED=lI;ca.EXITING=L2;var mM=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return AM(t,r)})},Hb=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return hM(t,r)})},hG=function(e){AG(t,e);function t(){for(var r,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return r=e.call.apply(e,[this].concat(i))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(s,l){var c=r.resolveArguments(s,l),u=c[0],g=c[1];r.removeClasses(u,"exit"),r.addClass(u,g?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(s,l)},r.onEntering=function(s,l){var c=r.resolveArguments(s,l),u=c[0],g=c[1],d=g?"appear":"enter";r.addClass(u,d,"active"),r.props.onEntering&&r.props.onEntering(s,l)},r.onEntered=function(s,l){var c=r.resolveArguments(s,l),u=c[0],g=c[1],d=g?"appear":"enter";r.removeClasses(u,d),r.addClass(u,d,"done"),r.props.onEntered&&r.props.onEntered(s,l)},r.onExit=function(s){var l=r.resolveArguments(s),c=l[0];r.removeClasses(c,"appear"),r.removeClasses(c,"enter"),r.addClass(c,"exit","base"),r.props.onExit&&r.props.onExit(s)},r.onExiting=function(s){var l=r.resolveArguments(s),c=l[0];r.addClass(c,"exit","active"),r.props.onExiting&&r.props.onExiting(s)},r.onExited=function(s){var l=r.resolveArguments(s),c=l[0];r.removeClasses(c,"exit"),r.addClass(c,"exit","done"),r.props.onExited&&r.props.onExited(s)},r.resolveArguments=function(s,l){return r.props.nodeRef?[r.props.nodeRef.current,s]:[s,l]},r.getClassNames=function(s){var l=r.props.classNames,c=typeof l=="string",u=c&&l?l+"-":"",g=c?""+u+s:l[s],d=c?g+"-active":l[s+"Active"],I=c?g+"-done":l[s+"Done"];return{baseClassName:g,activeClassName:d,doneClassName:I}},r}var n=t.prototype;return n.addClass=function(o,i,a){var s=this.getClassNames(i)[a+"ClassName"],l=this.getClassNames("enter"),c=l.doneClassName;i==="appear"&&a==="done"&&c&&(s+=" "+c),a==="active"&&o&&CX(o),s&&(this.appliedClasses[i][a]=s,mM(o,s))},n.removeClasses=function(o,i){var a=this.appliedClasses[i],s=a.base,l=a.active,c=a.done;this.appliedClasses[i]={},s&&Hb(o,s),l&&Hb(o,l),c&&Hb(o,c)},n.render=function(){var o=this.props;o.classNames;var i=Jf(o,["classNames"]);return qe.createElement(ca,sd({},i,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(qe.Component);hG.defaultProps={classNames:""};hG.propTypes={};function pM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mG(e,t){var n=function(i){return t&&F.isValidElement(i)?t(i):i},r=Object.create(null);return e&&F.Children.map(e,function(o){return o}).forEach(function(o){r[o.key]=n(o)}),r}function fM(e,t){e=e||{},t=t||{};function n(u){return u in t?t[u]:e[u]}var r=Object.create(null),o=[];for(var i in e)i in t?o.length&&(r[i]=o,o=[]):o.push(i);var a,s={};for(var l in t){if(r[l])for(a=0;a<r[l].length;a++){var c=r[l][a];s[r[l][a]]=n(c)}s[l]=n(l)}for(a=0;a<o.length;a++)s[o[a]]=n(o[a]);return s}function Kg(e,t,n){return n[t]!=null?n[t]:e.props[t]}function bM(e,t){return mG(e.children,function(n){return F.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Kg(n,"appear",e),enter:Kg(n,"enter",e),exit:Kg(n,"exit",e)})})}function yM(e,t,n){var r=mG(e.children),o=fM(t,r);return Object.keys(o).forEach(function(i){var a=o[i];if(F.isValidElement(a)){var s=i in t,l=i in r,c=t[i],u=F.isValidElement(c)&&!c.props.in;l&&(!s||u)?o[i]=F.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:Kg(a,"exit",e),enter:Kg(a,"enter",e)}):!l&&s&&!u?o[i]=F.cloneElement(a,{in:!1}):l&&s&&F.isValidElement(c)&&(o[i]=F.cloneElement(a,{onExited:n.bind(null,a),in:c.props.in,exit:Kg(a,"exit",e),enter:Kg(a,"enter",e)}))}}),o}var ZM=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},vM={component:"div",childFactory:function(t){return t}},pG=function(e){AG(t,e);function t(r,o){var i;i=e.call(this,r,o)||this;var a=i.handleExited.bind(pM(i));return i.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},i}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(o,i){var a=i.children,s=i.handleExited,l=i.firstRender;return{children:l?bM(o,s):yM(o,a,s),firstRender:!1}},n.handleExited=function(o,i){var a=mG(this.props.children);o.key in a||(o.props.onExited&&o.props.onExited(i),this.mounted&&this.setState(function(s){var l=sd({},s.children);return delete l[o.key],{children:l}}))},n.render=function(){var o=this.props,i=o.component,a=o.childFactory,s=Jf(o,["component","childFactory"]),l=this.state.contextValue,c=ZM(this.state.children).map(a);return delete s.appear,delete s.enter,delete s.exit,i===null?qe.createElement(Pm.Provider,{value:l},c):qe.createElement(Pm.Provider,{value:l},qe.createElement(i,s,c))},t}(qe.Component);pG.propTypes={};pG.defaultProps=vM;const fG=e=>e.scrollTop;function cd(e,t){const{timeout:n,easing:r,style:o={}}=e;return{duration:o.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:o.transitionTimingFunction??(typeof r=="object"?r[t.mode]:r),delay:o.transitionDelay}}function GM(e){return Jt("MuiPaper",e)}Vt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const SM=e=>{const{square:t,elevation:n,variant:r,classes:o}=e,i={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return Yt(i,GM,o)},BM=Pe("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(Pt(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),xa=F.forwardRef(function(t,n){var I;const r=Ht({props:t,name:"MuiPaper"}),o=As(),{className:i,component:a="div",elevation:s=1,square:l=!1,variant:c="elevation",...u}=r,g={...r,component:a,elevation:s,square:l,variant:c},d=SM(g);return w.jsx(BM,{as:a,ownerState:g,className:nt(d.root,i),ref:n,...u,style:{...c==="elevation"&&{"--Paper-shadow":(o.vars||o).shadows[s],...o.vars&&{"--Paper-overlay":(I=o.vars.overlays)==null?void 0:I[s]},...!o.vars&&o.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${sn("#fff",F2(s))}, ${sn("#fff",F2(s))})`}},...u.style}})});function vi(e,t){const{className:n,elementType:r,ownerState:o,externalForwardedProps:i,getSlotOwnerState:a,internalForwardedProps:s,...l}=t,{component:c,slots:u={[e]:void 0},slotProps:g={[e]:void 0},...d}=i,I=u[e]||r,C=$V(g[e],o),{props:{component:h,...f},internalRef:A}=qV({className:n,...l,externalForwardedProps:e==="root"?d:void 0,externalSlotProps:C}),m=xr(A,C==null?void 0:C.ref,t.ref),p=a?a(f):{},Z={...o,...p},v=e==="root"?h||c:h,k=_V(I,{...e==="root"&&!c&&!u[e]&&s,...e!=="root"&&!u[e]&&s,...f,...v&&{as:v},ref:m},Z);return Object.keys(p).forEach(B=>{delete k[B]}),[I,k]}class Om{constructor(){ji(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Om}static use(){const t=PV(Om.create).current,[n,r]=F.useState(!1);return t.shouldMount=n,t.setShouldMount=r,F.useEffect(t.mountEffect,[n]),t}mount(){return this.mounted||(this.mounted=WM(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...t)})}stop(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...t)})}pulsate(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...t)})}}function wM(){return Om.use()}function WM(){let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.resolve=e,n.reject=t,n}function RM(e){const{className:t,classes:n,pulsate:r=!1,rippleX:o,rippleY:i,rippleSize:a,in:s,onExited:l,timeout:c}=e,[u,g]=F.useState(!1),d=nt(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),I={width:a,height:a,top:-(a/2)+i,left:-(a/2)+o},C=nt(n.child,u&&n.childLeaving,r&&n.childPulsate);return!s&&!u&&g(!0),F.useEffect(()=>{if(!s&&l!=null){const h=setTimeout(l,c);return()=>{clearTimeout(h)}}},[l,s,c]),w.jsx("span",{className:d,style:I,children:w.jsx("span",{className:C})})}const Oi=Vt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),E2=550,kM=80,VM=iA`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,XM=iA`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,JM=iA`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,xM=Pe("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),YM=Pe(RM,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Oi.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${VM};
    animation-duration: ${E2}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Oi.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Oi.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Oi.childLeaving} {
    opacity: 0;
    animation-name: ${XM};
    animation-duration: ${E2}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Oi.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${JM};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,NM=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiTouchRipple"}),{center:o=!1,classes:i={},className:a,...s}=r,[l,c]=F.useState([]),u=F.useRef(0),g=F.useRef(null);F.useEffect(()=>{g.current&&(g.current(),g.current=null)},[l]);const d=F.useRef(!1),I=aG(),C=F.useRef(null),h=F.useRef(null),f=F.useCallback(Z=>{const{pulsate:v,rippleX:k,rippleY:B,rippleSize:y,cb:W}=Z;c(G=>[...G,w.jsx(YM,{classes:{ripple:nt(i.ripple,Oi.ripple),rippleVisible:nt(i.rippleVisible,Oi.rippleVisible),ripplePulsate:nt(i.ripplePulsate,Oi.ripplePulsate),child:nt(i.child,Oi.child),childLeaving:nt(i.childLeaving,Oi.childLeaving),childPulsate:nt(i.childPulsate,Oi.childPulsate)},timeout:E2,pulsate:v,rippleX:k,rippleY:B,rippleSize:y},u.current)]),u.current+=1,g.current=W},[i]),A=F.useCallback((Z={},v={},k=()=>{})=>{const{pulsate:B=!1,center:y=o||v.pulsate,fakeElement:W=!1}=v;if((Z==null?void 0:Z.type)==="mousedown"&&d.current){d.current=!1;return}(Z==null?void 0:Z.type)==="touchstart"&&(d.current=!0);const G=W?null:h.current,R=G?G.getBoundingClientRect():{width:0,height:0,left:0,top:0};let X,Y,x;if(y||Z===void 0||Z.clientX===0&&Z.clientY===0||!Z.clientX&&!Z.touches)X=Math.round(R.width/2),Y=Math.round(R.height/2);else{const{clientX:D,clientY:L}=Z.touches&&Z.touches.length>0?Z.touches[0]:Z;X=Math.round(D-R.left),Y=Math.round(L-R.top)}if(y)x=Math.sqrt((2*R.width**2+R.height**2)/3),x%2===0&&(x+=1);else{const D=Math.max(Math.abs((G?G.clientWidth:0)-X),X)*2+2,L=Math.max(Math.abs((G?G.clientHeight:0)-Y),Y)*2+2;x=Math.sqrt(D**2+L**2)}Z!=null&&Z.touches?C.current===null&&(C.current=()=>{f({pulsate:B,rippleX:X,rippleY:Y,rippleSize:x,cb:k})},I.start(kM,()=>{C.current&&(C.current(),C.current=null)})):f({pulsate:B,rippleX:X,rippleY:Y,rippleSize:x,cb:k})},[o,f,I]),m=F.useCallback(()=>{A({},{pulsate:!0})},[A]),p=F.useCallback((Z,v)=>{if(I.clear(),(Z==null?void 0:Z.type)==="touchend"&&C.current){C.current(),C.current=null,I.start(0,()=>{p(Z,v)});return}C.current=null,c(k=>k.length>0?k.slice(1):k),g.current=v},[I]);return F.useImperativeHandle(n,()=>({pulsate:m,start:A,stop:p}),[m,A,p]),w.jsx(xM,{className:nt(Oi.root,i.root,a),ref:h,...s,children:w.jsx(pG,{component:null,exit:!0,children:l})})});function HM(e){return Jt("MuiButtonBase",e)}const FM=Vt("MuiButtonBase",["root","disabled","focusVisible"]),KM=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:o}=e,a=Yt({root:["root",t&&"disabled",n&&"focusVisible"]},HM,o);return n&&r&&(a.root+=` ${r}`),a},LM=Pe("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${FM.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Id=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiButtonBase"}),{action:o,centerRipple:i=!1,children:a,className:s,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:g=!1,focusRipple:d=!1,focusVisibleClassName:I,LinkComponent:C="a",onBlur:h,onClick:f,onContextMenu:A,onDragLeave:m,onFocus:p,onFocusVisible:Z,onKeyDown:v,onKeyUp:k,onMouseDown:B,onMouseLeave:y,onMouseUp:W,onTouchEnd:G,onTouchMove:R,onTouchStart:X,tabIndex:Y=0,TouchRippleProps:x,touchRippleRef:D,type:L,...M}=r,K=F.useRef(null),E=wM(),O=xr(E.ref,D),[re,H]=F.useState(!1);c&&re&&H(!1),F.useImperativeHandle(o,()=>({focusVisible:()=>{H(!0),K.current.focus()}}),[]);const z=E.shouldMount&&!u&&!c;F.useEffect(()=>{re&&d&&!u&&E.pulsate()},[u,d,re,E]);function j(he,Ne,rt=g){return Ks(st=>(Ne&&Ne(st),rt||E[he](st),!0))}const $=j("start",B),ee=j("stop",A),le=j("stop",m),Ie=j("stop",W),Ae=j("stop",he=>{re&&he.preventDefault(),y&&y(he)}),Ge=j("start",X),We=j("stop",G),Je=j("stop",R),ze=j("stop",he=>{jm(he.target)||H(!1),h&&h(he)},!1),ke=Ks(he=>{K.current||(K.current=he.currentTarget),jm(he.target)&&(H(!0),Z&&Z(he)),p&&p(he)}),ye=()=>{const he=K.current;return l&&l!=="button"&&!(he.tagName==="A"&&he.href)},oe=Ks(he=>{d&&!he.repeat&&re&&he.key===" "&&E.stop(he,()=>{E.start(he)}),he.target===he.currentTarget&&ye()&&he.key===" "&&he.preventDefault(),v&&v(he),he.target===he.currentTarget&&ye()&&he.key==="Enter"&&!c&&(he.preventDefault(),f&&f(he))}),ct=Ks(he=>{d&&he.key===" "&&re&&!he.defaultPrevented&&E.stop(he,()=>{E.pulsate(he)}),k&&k(he),f&&he.target===he.currentTarget&&ye()&&he.key===" "&&!he.defaultPrevented&&f(he)});let te=l;te==="button"&&(M.href||M.to)&&(te=C);const ie={};te==="button"?(ie.type=L===void 0?"button":L,ie.disabled=c):(!M.href&&!M.to&&(ie.role="button"),c&&(ie["aria-disabled"]=c));const ge=xr(n,K),be={...r,centerRipple:i,component:l,disabled:c,disableRipple:u,disableTouchRipple:g,focusRipple:d,tabIndex:Y,focusVisible:re},Ze=KM(be);return w.jsxs(LM,{as:te,className:nt(Ze.root,s),ownerState:be,onBlur:ze,onClick:f,onContextMenu:ee,onFocus:ke,onKeyDown:oe,onKeyUp:ct,onMouseDown:$,onMouseLeave:Ae,onMouseUp:Ie,onDragLeave:le,onTouchEnd:We,onTouchMove:Je,onTouchStart:Ge,ref:ge,tabIndex:c?-1:Y,type:L,...ie,...M,children:[a,z?w.jsx(NM,{ref:O,center:i,...x}):null]})});function EM(e){return typeof e.main=="string"}function MM(e,t=[]){if(!EM(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function lo(e=[]){return([,t])=>t&&MM(t,e)}function DM(e){return Jt("MuiIconButton",e)}const zM=Vt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),TM=e=>{const{classes:t,disabled:n,color:r,edge:o,size:i}=e,a={root:["root",n&&"disabled",r!=="default"&&`color${Te(r)}`,o&&`edge${Te(o)}`,`size${Te(i)}`]};return Yt(a,DM,t)},UM=Pe(Id,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${Te(n.color)}`],n.edge&&t[`edge${Te(n.edge)}`],t[`size${Te(n.size)}`]]}})(Pt(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:sn(e.palette.action.active,e.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Pt(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(lo()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(lo()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.vars?`rgba(${(e.vars||e).palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:sn((e.vars||e).palette[t].main,e.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${zM.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}}))),tg=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiIconButton"}),{edge:o=!1,children:i,className:a,color:s="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium",...g}=r,d={...r,edge:o,color:s,disabled:l,disableFocusRipple:c,size:u},I=TM(d);return w.jsx(UM,{className:nt(I.root,a),centerRipple:!0,focusRipple:!c,disabled:l,ref:n,...g,ownerState:d,children:i})});function jM(e){return Jt("MuiTypography",e)}const i5=Vt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),QM={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},PM=lM(),OM=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:o,variant:i,classes:a}=e,s={root:["root",i,e.align!=="inherit"&&`align${Te(t)}`,n&&"gutterBottom",r&&"noWrap",o&&"paragraph"]};return Yt(s,jM,a)},_M=Pe("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Te(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(Pt(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(e.palette).filter(lo()).map(([n])=>({props:{color:n},style:{color:(e.vars||e).palette[n].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Te(n)}`},style:{color:(e.vars||e).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),a5={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ee=F.forwardRef(function(t,n){const{color:r,...o}=Ht({props:t,name:"MuiTypography"}),i=!QM[r],a=PM({...o,...i&&{color:r}}),{align:s="inherit",className:l,component:c,gutterBottom:u=!1,noWrap:g=!1,paragraph:d=!1,variant:I="body1",variantMapping:C=a5,...h}=a,f={...a,align:s,color:r,className:l,component:c,gutterBottom:u,noWrap:g,paragraph:d,variant:I,variantMapping:C},A=c||(d?"p":C[I]||a5[I])||"span",m=OM(f);return w.jsx(_M,{as:A,ref:n,className:nt(m.root,l),...h,ownerState:f,style:{...s!=="inherit"&&{"--Typography-textAlign":s},...h.style}})});function qM(e){return Jt("MuiAppBar",e)}Vt("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const $M=e=>{const{color:t,position:n,classes:r}=e,o={root:["root",`color${Te(t)}`,`position${Te(n)}`]};return Yt(o,qM,r)},s5=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,e4=Pe(xa,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Te(n.position)}`],t[`color${Te(n.color)}`]]}})(Pt(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(lo(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?s5(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?s5(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),t4=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiAppBar"}),{className:o,color:i="primary",enableColorOnDark:a=!1,position:s="fixed",...l}=r,c={...r,color:i,position:s,enableColorOnDark:a},u=$M(c);return w.jsx(e4,{square:!0,component:"header",ownerState:c,elevation:4,className:nt(u.root,o,s==="fixed"&&"mui-fixed"),ref:n,...l})});function n4(e){return typeof e=="function"?e():e}const r4=F.forwardRef(function(t,n){const{children:r,container:o,disablePortal:i=!1}=t,[a,s]=F.useState(null),l=xr(F.isValidElement(r)?pc(r):null,n);if(Ps(()=>{i||s(n4(o)||document.body)},[o,i]),Ps(()=>{if(a&&!i)return x2(n,a),()=>{x2(n,null)}},[n,a,i]),i){if(F.isValidElement(r)){const c={ref:l};return F.cloneElement(r,c)}return w.jsx(F.Fragment,{children:r})}return w.jsx(F.Fragment,{children:a&&Ep.createPortal(r,a)})}),o4=Jn(w.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function i4(e){return Jt("MuiChip",e)}const en=Vt("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),a4=e=>{const{classes:t,disabled:n,size:r,color:o,iconColor:i,onDelete:a,clickable:s,variant:l}=e,c={root:["root",l,n&&"disabled",`size${Te(r)}`,`color${Te(o)}`,s&&"clickable",s&&`clickableColor${Te(o)}`,a&&"deletable",a&&`deletableColor${Te(o)}`,`${l}${Te(o)}`],label:["label",`label${Te(r)}`],avatar:["avatar",`avatar${Te(r)}`,`avatarColor${Te(o)}`],icon:["icon",`icon${Te(r)}`,`iconColor${Te(i)}`],deleteIcon:["deleteIcon",`deleteIcon${Te(r)}`,`deleteIconColor${Te(o)}`,`deleteIcon${Te(l)}Color${Te(o)}`]};return Yt(c,i4,t)},s4=Pe("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:o,clickable:i,onDelete:a,size:s,variant:l}=n;return[{[`& .${en.avatar}`]:t.avatar},{[`& .${en.avatar}`]:t[`avatar${Te(s)}`]},{[`& .${en.avatar}`]:t[`avatarColor${Te(r)}`]},{[`& .${en.icon}`]:t.icon},{[`& .${en.icon}`]:t[`icon${Te(s)}`]},{[`& .${en.icon}`]:t[`iconColor${Te(o)}`]},{[`& .${en.deleteIcon}`]:t.deleteIcon},{[`& .${en.deleteIcon}`]:t[`deleteIcon${Te(s)}`]},{[`& .${en.deleteIcon}`]:t[`deleteIconColor${Te(r)}`]},{[`& .${en.deleteIcon}`]:t[`deleteIcon${Te(l)}Color${Te(r)}`]},t.root,t[`size${Te(s)}`],t[`color${Te(r)}`],i&&t.clickable,i&&r!=="default"&&t[`clickableColor${Te(r)})`],a&&t.deletable,a&&r!=="default"&&t[`deletableColor${Te(r)}`],t[l],t[`${l}${Te(r)}`]]}})(Pt(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${en.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${en.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${en.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${en.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${en.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${en.icon}`]:{marginLeft:5,marginRight:-6},[`& .${en.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:sn(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:sn(e.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${en.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${en.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(lo(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText,[`& .${en.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].contrastTextChannel} / 0.7)`:sn(e.palette[n].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${en.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:t}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${en.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${en.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:sn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}},...Object.entries(e.palette).filter(lo(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${en.focusVisible}`]:{background:(e.vars||e).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:sn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${en.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:sn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(lo(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${en.focusVisible}`]:{backgroundColor:(e.vars||e).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${en.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${en.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${en.avatar}`]:{marginLeft:4},[`& .${en.avatarSmall}`]:{marginLeft:2},[`& .${en.icon}`]:{marginLeft:4},[`& .${en.iconSmall}`]:{marginLeft:2},[`& .${en.deleteIcon}`]:{marginRight:5},[`& .${en.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(lo()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(e.vars||e).palette[n].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:sn(e.palette[n].main,.7)}`,[`&.${en.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:sn(e.palette[n].main,e.palette.action.hoverOpacity)},[`&.${en.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.focusOpacity})`:sn(e.palette[n].main,e.palette.action.focusOpacity)},[`& .${en.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:sn(e.palette[n].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].main}}}}))]}})),l4=Pe("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${Te(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function l5(e){return e.key==="Backspace"||e.key==="Delete"}const g5=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiChip"}),{avatar:o,className:i,clickable:a,color:s="default",component:l,deleteIcon:c,disabled:u=!1,icon:g,label:d,onClick:I,onDelete:C,onKeyDown:h,onKeyUp:f,size:A="medium",variant:m="filled",tabIndex:p,skipFocusWhenDisabled:Z=!1,...v}=r,k=F.useRef(null),B=xr(k,n),y=E=>{E.stopPropagation(),C&&C(E)},W=E=>{E.currentTarget===E.target&&l5(E)&&E.preventDefault(),h&&h(E)},G=E=>{E.currentTarget===E.target&&C&&l5(E)&&C(E),f&&f(E)},R=a!==!1&&I?!0:a,X=R||C?Id:l||"div",Y={...r,component:X,disabled:u,size:A,color:s,iconColor:F.isValidElement(g)&&g.props.color||s,onDelete:!!C,clickable:R,variant:m},x=a4(Y),D=X===Id?{component:l||"div",focusVisibleClassName:x.focusVisible,...C&&{disableRipple:!0}}:{};let L=null;C&&(L=c&&F.isValidElement(c)?F.cloneElement(c,{className:nt(c.props.className,x.deleteIcon),onClick:y}):w.jsx(o4,{className:nt(x.deleteIcon),onClick:y}));let M=null;o&&F.isValidElement(o)&&(M=F.cloneElement(o,{className:nt(x.avatar,o.props.className)}));let K=null;return g&&F.isValidElement(g)&&(K=F.cloneElement(g,{className:nt(x.icon,g.props.className)})),w.jsxs(s4,{as:X,className:nt(x.root,i),disabled:R&&u?!0:void 0,onClick:I,onKeyDown:W,onKeyUp:G,ref:B,tabIndex:Z&&u?-1:p,ownerState:Y,...D,...v,children:[M||K,w.jsx(l4,{className:nt(x.label),ownerState:Y,children:d}),L]})});function Jh(e){return parseInt(e,10)||0}const g4={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function c4(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflowing}const I4=F.forwardRef(function(t,n){const{onChange:r,maxRows:o,minRows:i=1,style:a,value:s,...l}=t,{current:c}=F.useRef(s!=null),u=F.useRef(null),g=xr(n,u),d=F.useRef(null),I=F.useRef(null),C=F.useCallback(()=>{const A=u.current,p=Ja(A).getComputedStyle(A);if(p.width==="0px")return{outerHeightStyle:0,overflowing:!1};const Z=I.current;Z.style.width=p.width,Z.value=A.value||t.placeholder||"x",Z.value.slice(-1)===`
`&&(Z.value+=" ");const v=p.boxSizing,k=Jh(p.paddingBottom)+Jh(p.paddingTop),B=Jh(p.borderBottomWidth)+Jh(p.borderTopWidth),y=Z.scrollHeight;Z.value="x";const W=Z.scrollHeight;let G=y;i&&(G=Math.max(Number(i)*W,G)),o&&(G=Math.min(Number(o)*W,G)),G=Math.max(G,W);const R=G+(v==="border-box"?k+B:0),X=Math.abs(G-y)<=1;return{outerHeightStyle:R,overflowing:X}},[o,i,t.placeholder]),h=F.useCallback(()=>{const A=C();if(c4(A))return;const m=A.outerHeightStyle,p=u.current;d.current!==m&&(d.current=m,p.style.height=`${m}px`),p.style.overflow=A.overflowing?"hidden":""},[C]);Ps(()=>{const A=()=>{h()};let m;const p=rG(A),Z=u.current,v=Ja(Z);v.addEventListener("resize",p);let k;return typeof ResizeObserver<"u"&&(k=new ResizeObserver(A),k.observe(Z)),()=>{p.clear(),cancelAnimationFrame(m),v.removeEventListener("resize",p),k&&k.disconnect()}},[C,h]),Ps(()=>{h()});const f=A=>{c||h(),r&&r(A)};return w.jsxs(F.Fragment,{children:[w.jsx("textarea",{value:s,onChange:f,ref:g,rows:i,style:a,...l}),w.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:I,tabIndex:-1,style:{...g4.shadow,...a,paddingTop:0,paddingBottom:0}})]})});function M2(e){return typeof e=="string"}function fc({props:e,states:t,muiFormControl:n}){return t.reduce((r,o)=>(r[o]=e[o],n&&typeof e[o]>"u"&&(r[o]=n[o]),r),{})}const bG=F.createContext(void 0);function Ig(){return F.useContext(bG)}function c5(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function _m(e,t=!1){return e&&(c5(e.value)&&e.value!==""||t&&c5(e.defaultValue)&&e.defaultValue!=="")}function d4(e){return e.startAdornment}function u4(e){return Jt("MuiInputBase",e)}const dd=Vt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var I5;const xf=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Te(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Yf=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},C4=e=>{const{classes:t,color:n,disabled:r,error:o,endAdornment:i,focused:a,formControl:s,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:g,size:d,startAdornment:I,type:C}=e,h={root:["root",`color${Te(n)}`,r&&"disabled",o&&"error",l&&"fullWidth",a&&"focused",s&&"formControl",d&&d!=="medium"&&`size${Te(d)}`,u&&"multiline",I&&"adornedStart",i&&"adornedEnd",c&&"hiddenLabel",g&&"readOnly"],input:["input",r&&"disabled",C==="search"&&"inputTypeSearch",u&&"inputMultiline",d==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",I&&"inputAdornedStart",i&&"inputAdornedEnd",g&&"readOnly"]};return Yt(h,u4,t)},Nf=Pe("div",{name:"MuiInputBase",slot:"Root",overridesResolver:xf})(Pt(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${dd.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),Hf=Pe("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Yf})(Pt(({theme:e})=>{const t=e.palette.mode==="light",n={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},o=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${dd.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${dd.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:i})=>!i.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:i})=>i.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),d5=dG({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),yG=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:i,autoFocus:a,className:s,color:l,components:c={},componentsProps:u={},defaultValue:g,disabled:d,disableInjectingGlobalStyles:I,endAdornment:C,error:h,fullWidth:f=!1,id:A,inputComponent:m="input",inputProps:p={},inputRef:Z,margin:v,maxRows:k,minRows:B,multiline:y=!1,name:W,onBlur:G,onChange:R,onClick:X,onFocus:Y,onKeyDown:x,onKeyUp:D,placeholder:L,readOnly:M,renderSuffix:K,rows:E,size:O,slotProps:re={},slots:H={},startAdornment:z,type:j="text",value:$,...ee}=r,le=p.value!=null?p.value:$,{current:Ie}=F.useRef(le!=null),Ae=F.useRef(),Ge=F.useCallback(Ke=>{},[]),We=xr(Ae,Z,p.ref,Ge),[Je,ze]=F.useState(!1),ke=Ig(),ye=fc({props:r,muiFormControl:ke,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ye.focused=ke?ke.focused:Je,F.useEffect(()=>{!ke&&d&&Je&&(ze(!1),G&&G())},[ke,d,Je,G]);const oe=ke&&ke.onFilled,ct=ke&&ke.onEmpty,te=F.useCallback(Ke=>{_m(Ke)?oe&&oe():ct&&ct()},[oe,ct]);Ps(()=>{Ie&&te({value:le})},[le,te,Ie]);const ie=Ke=>{Y&&Y(Ke),p.onFocus&&p.onFocus(Ke),ke&&ke.onFocus?ke.onFocus(Ke):ze(!0)},ge=Ke=>{G&&G(Ke),p.onBlur&&p.onBlur(Ke),ke&&ke.onBlur?ke.onBlur(Ke):ze(!1)},be=(Ke,...mn)=>{if(!Ie){const Rt=Ke.target||Ae.current;if(Rt==null)throw new Error(Qs(1));te({value:Rt.value})}p.onChange&&p.onChange(Ke,...mn),R&&R(Ke,...mn)};F.useEffect(()=>{te(Ae.current)},[]);const Ze=Ke=>{Ae.current&&Ke.currentTarget===Ke.target&&Ae.current.focus(),X&&X(Ke)};let he=m,Ne=p;y&&he==="input"&&(E?Ne={type:void 0,minRows:E,maxRows:E,...Ne}:Ne={type:void 0,maxRows:k,minRows:B,...Ne},he=I4);const rt=Ke=>{te(Ke.animationName==="mui-auto-fill-cancel"?Ae.current:{value:"x"})};F.useEffect(()=>{ke&&ke.setAdornedStart(!!z)},[ke,z]);const st={...r,color:ye.color||"primary",disabled:ye.disabled,endAdornment:C,error:ye.error,focused:ye.focused,formControl:ke,fullWidth:f,hiddenLabel:ye.hiddenLabel,multiline:y,size:ye.size,startAdornment:z,type:j},$e=C4(st),ht=H.root||c.Root||Nf,dt=re.root||u.root||{},Zt=H.input||c.Input||Hf;return Ne={...Ne,...re.input??u.input},w.jsxs(F.Fragment,{children:[!I&&typeof d5=="function"&&(I5||(I5=w.jsx(d5,{}))),w.jsxs(ht,{...dt,ref:n,onClick:Ze,...ee,...!M2(ht)&&{ownerState:{...st,...dt.ownerState}},className:nt($e.root,dt.className,s,M&&"MuiInputBase-readOnly"),children:[z,w.jsx(bG.Provider,{value:null,children:w.jsx(Zt,{"aria-invalid":ye.error,"aria-describedby":o,autoComplete:i,autoFocus:a,defaultValue:g,disabled:ye.disabled,id:A,onAnimationStart:rt,name:W,placeholder:L,readOnly:M,required:ye.required,rows:E,value:le,onKeyDown:x,onKeyUp:D,type:j,...Ne,...!M2(Zt)&&{as:he,ownerState:{...st,...Ne.ownerState}},ref:We,className:nt($e.input,Ne.className,M&&"MuiInputBase-readOnly"),onBlur:ge,onChange:be,onFocus:ie})}),C,K?K({...ye,startAdornment:z}):null]})]})});function A4(e){return Jt("MuiInput",e)}const pu={...dd,...Vt("MuiInput",["root","underline","input"])};function h4(e){return Jt("MuiOutlinedInput",e)}const Ua={...dd,...Vt("MuiOutlinedInput",["root","notchedOutline","input"])};function m4(e){return Jt("MuiFilledInput",e)}const Gg={...dd,...Vt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},p4=Jn(w.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),f4=Jn(w.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function b4(e){return Jt("MuiAvatar",e)}Vt("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const y4=e=>{const{classes:t,variant:n,colorDefault:r}=e;return Yt({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},b4,t)},Z4=Pe("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(Pt(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),v4=Pe("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),G4=Pe(f4,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function S4({crossOrigin:e,referrerPolicy:t,src:n,srcSet:r}){const[o,i]=F.useState(!1);return F.useEffect(()=>{if(!n&&!r)return;i(!1);let a=!0;const s=new Image;return s.onload=()=>{a&&i("loaded")},s.onerror=()=>{a&&i("error")},s.crossOrigin=e,s.referrerPolicy=t,s.src=n,r&&(s.srcset=r),()=>{a=!1}},[e,t,n,r]),o}const AX=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiAvatar"}),{alt:o,children:i,className:a,component:s="div",slots:l={},slotProps:c={},imgProps:u,sizes:g,src:d,srcSet:I,variant:C="circular",...h}=r;let f=null;const A=S4({...u,src:d,srcSet:I}),m=d||I,p=m&&A!=="error",Z={...r,colorDefault:!p,component:s,variant:C};delete Z.ownerState;const v=y4(Z),[k,B]=vi("img",{className:v.img,elementType:v4,externalForwardedProps:{slots:l,slotProps:{img:{...u,...c.img}}},additionalProps:{alt:o,src:d,srcSet:I,sizes:g},ownerState:Z});return p?f=w.jsx(k,{...B}):i||i===0?f=i:m&&o?f=o[0]:f=w.jsx(G4,{ownerState:Z,className:v.fallback}),w.jsx(Z4,{as:s,className:nt(v.root,a),ref:n,...h,ownerState:Z,children:f})}),B4={entering:{opacity:1},entered:{opacity:1}},ZG=F.forwardRef(function(t,n){const r=As(),o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:i,appear:a=!0,children:s,easing:l,in:c,onEnter:u,onEntered:g,onEntering:d,onExit:I,onExited:C,onExiting:h,style:f,timeout:A=o,TransitionComponent:m=ca,...p}=t,Z=F.useRef(null),v=xr(Z,pc(s),n),k=x=>D=>{if(x){const L=Z.current;D===void 0?x(L):x(L,D)}},B=k(d),y=k((x,D)=>{fG(x);const L=cd({style:f,timeout:A,easing:l},{mode:"enter"});x.style.webkitTransition=r.transitions.create("opacity",L),x.style.transition=r.transitions.create("opacity",L),u&&u(x,D)}),W=k(g),G=k(h),R=k(x=>{const D=cd({style:f,timeout:A,easing:l},{mode:"exit"});x.style.webkitTransition=r.transitions.create("opacity",D),x.style.transition=r.transitions.create("opacity",D),I&&I(x)}),X=k(C),Y=x=>{i&&i(Z.current,x)};return w.jsx(m,{appear:a,in:c,nodeRef:Z,onEnter:y,onEntered:W,onEntering:B,onExit:R,onExited:X,onExiting:G,addEndListener:Y,timeout:A,...p,children:(x,D)=>F.cloneElement(s,{style:{opacity:0,visibility:x==="exited"&&!c?"hidden":void 0,...B4[x],...f,...s.props.style},ref:v,...D})})});function w4(e){return Jt("MuiBackdrop",e)}Vt("MuiBackdrop",["root","invisible"]);const W4=e=>{const{ownerState:t,...n}=e;return n},R4=e=>{const{classes:t,invisible:n}=e;return Yt({root:["root",n&&"invisible"]},w4,t)},k4=Pe("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),hX=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiBackdrop"}),{children:o,className:i,component:a="div",invisible:s=!1,open:l,components:c={},componentsProps:u={},slotProps:g={},slots:d={},TransitionComponent:I,transitionDuration:C,...h}=r,f={...r,component:a,invisible:s},A=R4(f),m={transition:I,root:c.Root,...d},p={...u,...g},Z={slots:m,slotProps:p},[v,k]=vi("root",{elementType:k4,externalForwardedProps:Z,className:nt(A.root,i),ownerState:f}),[B,y]=vi("transition",{elementType:ZG,externalForwardedProps:Z,ownerState:f}),W=W4(y);return w.jsx(B,{in:l,timeout:C,...h,...W,children:w.jsx(v,{"aria-hidden":!0,...k,classes:A,ref:n,children:o})})}),V4=Vt("MuiBox",["root"]),X4=yf(),je=HL({themeId:Va,defaultTheme:X4,defaultClassName:V4.root,generateClassName:KV.generate});function J4(e){return Jt("MuiButton",e)}const nI=Vt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),x4=F.createContext({}),Y4=F.createContext(void 0),N4=e=>{const{color:t,disableElevation:n,fullWidth:r,size:o,variant:i,classes:a}=e,s={root:["root",i,`${i}${Te(t)}`,`size${Te(o)}`,`${i}Size${Te(o)}`,`color${Te(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Te(o)}`],endIcon:["icon","endIcon",`iconSize${Te(o)}`]},l=Yt(s,J4,a);return{...a,...l}},mX=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],H4=Pe(Id,{shouldForwardProp:e=>Mo(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Te(n.color)}`],t[`size${Te(n.size)}`],t[`${n.variant}Size${Te(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(Pt(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${nI.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${nI.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${nI.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${nI.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(lo()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(e.vars||e).palette[r].main,"--variant-outlinedColor":(e.vars||e).palette[r].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[r].mainChannel} / 0.5)`:sn(e.palette[r].main,.5),"--variant-containedColor":(e.vars||e).palette[r].contrastText,"--variant-containedBg":(e.vars||e).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[r].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:sn(e.palette[r].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[r].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:sn(e.palette[r].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:sn(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:sn(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${nI.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${nI.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}})),F4=Pe("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${Te(n.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...mX]}),K4=Pe("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${Te(n.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...mX]}),rn=F.forwardRef(function(t,n){const r=F.useContext(x4),o=F.useContext(Y4),i=YC(r,t),a=Ht({props:i,name:"MuiButton"}),{children:s,color:l="primary",component:c="button",className:u,disabled:g=!1,disableElevation:d=!1,disableFocusRipple:I=!1,endIcon:C,focusVisibleClassName:h,fullWidth:f=!1,size:A="medium",startIcon:m,type:p,variant:Z="text",...v}=a,k={...a,color:l,component:c,disabled:g,disableElevation:d,disableFocusRipple:I,fullWidth:f,size:A,type:p,variant:Z},B=N4(k),y=m&&w.jsx(F4,{className:B.startIcon,ownerState:k,children:m}),W=C&&w.jsx(K4,{className:B.endIcon,ownerState:k,children:C}),G=o||"";return w.jsxs(H4,{ownerState:k,className:nt(r.className,B.root,u,G),component:c,disabled:g,focusRipple:!I,focusVisibleClassName:nt(B.focusVisible,h),ref:n,type:p,...v,classes:B,children:[y,s,W]})});function L4(e){return Jt("MuiCard",e)}Vt("MuiCard",["root"]);const E4=e=>{const{classes:t}=e;return Yt({root:["root"]},L4,t)},M4=Pe(xa,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),pX=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiCard"}),{className:o,raised:i=!1,...a}=r,s={...r,raised:i},l=E4(s);return w.jsx(M4,{className:nt(l.root,o),elevation:i?8:void 0,ref:n,ownerState:s,...a})});function D4(e){return Jt("MuiCardContent",e)}Vt("MuiCardContent",["root"]);const z4=e=>{const{classes:t}=e;return Yt({root:["root"]},D4,t)},T4=Pe("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),fX=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiCardContent"}),{className:o,component:i="div",...a}=r,s={...r,component:i},l=z4(s);return w.jsx(T4,{as:i,className:nt(l.root,o),ownerState:s,ref:n,...a})});function U4(e){return Jt("MuiCardMedia",e)}Vt("MuiCardMedia",["root","media","img"]);const j4=e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e;return Yt({root:["root",n&&"media",r&&"img"]},U4,t)},Q4=Pe("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:o}=n;return[t.root,r&&t.media,o&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),P4=["video","audio","picture","iframe","img"],O4=["picture","img"],_4=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiCardMedia"}),{children:o,className:i,component:a="div",image:s,src:l,style:c,...u}=r,g=P4.includes(a),d=!g&&s?{backgroundImage:`url("${s}")`,...c}:c,I={...r,component:a,isMediaComponent:g,isImageComponent:O4.includes(a)},C=j4(I);return w.jsx(Q4,{className:nt(C.root,i),as:a,role:!g&&s?"img":void 0,ref:n,style:d,ownerState:I,src:g?s||l:void 0,...u,children:o})});function q4(e){return Jt("PrivateSwitchBase",e)}Vt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const $4=e=>{const{classes:t,checked:n,disabled:r,edge:o}=e,i={root:["root",n&&"checked",r&&"disabled",o&&`edge${Te(o)}`],input:["input"]};return Yt(i,q4,t)},eD=Pe(Id)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),tD=Pe("input",{shouldForwardProp:Mo})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),nD=F.forwardRef(function(t,n){const{autoFocus:r,checked:o,checkedIcon:i,className:a,defaultChecked:s,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:g,id:d,inputProps:I,inputRef:C,name:h,onBlur:f,onChange:A,onFocus:m,readOnly:p,required:Z=!1,tabIndex:v,type:k,value:B,...y}=t,[W,G]=Y2({controlled:o,default:!!s,name:"SwitchBase",state:"checked"}),R=Ig(),X=E=>{m&&m(E),R&&R.onFocus&&R.onFocus(E)},Y=E=>{f&&f(E),R&&R.onBlur&&R.onBlur(E)},x=E=>{if(E.nativeEvent.defaultPrevented)return;const O=E.target.checked;G(O),A&&A(E,O)};let D=l;R&&typeof D>"u"&&(D=R.disabled);const L=k==="checkbox"||k==="radio",M={...t,checked:W,disabled:D,disableFocusRipple:c,edge:u},K=$4(M);return w.jsxs(eD,{component:"span",className:nt(K.root,a),centerRipple:!0,focusRipple:!c,disabled:D,tabIndex:null,role:void 0,onFocus:X,onBlur:Y,ownerState:M,ref:n,...y,children:[w.jsx(tD,{autoFocus:r,checked:o,defaultChecked:s,className:K.input,disabled:D,id:L?d:void 0,name:h,onChange:x,readOnly:p,ref:C,required:Z,ownerState:M,tabIndex:v,type:k,...k==="checkbox"&&B===void 0?{}:{value:B},...I}),W?i:g]})}),rD=Jn(w.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),oD=Jn(w.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),iD=Jn(w.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function aD(e){return Jt("MuiCheckbox",e)}const Fb=Vt("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),sD=e=>{const{classes:t,indeterminate:n,color:r,size:o}=e,i={root:["root",n&&"indeterminate",`color${Te(r)}`,`size${Te(o)}`]},a=Yt(i,aD,t);return{...t,...a}},lD=Pe(nD,{shouldForwardProp:e=>Mo(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${Te(n.size)}`],n.color!=="default"&&t[`color${Te(n.color)}`]]}})(Pt(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:sn(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(lo()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:sn(e.palette[t].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(lo()).map(([t])=>({props:{color:t},style:{[`&.${Fb.checked}, &.${Fb.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${Fb.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),gD=w.jsx(oD,{}),cD=w.jsx(rD,{}),ID=w.jsx(iD,{}),u5=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiCheckbox"}),{checkedIcon:o=gD,color:i="primary",icon:a=cD,indeterminate:s=!1,indeterminateIcon:l=ID,inputProps:c,size:u="medium",disableRipple:g=!1,className:d,...I}=r,C=s?l:a,h=s?l:o,f={...r,disableRipple:g,color:i,indeterminate:s,size:u},A=sD(f);return w.jsx(lD,{type:"checkbox",inputProps:{"data-indeterminate":s,...c},icon:F.cloneElement(C,{fontSize:C.props.fontSize??u}),checkedIcon:F.cloneElement(h,{fontSize:h.props.fontSize??u}),ownerState:f,ref:n,className:nt(A.root,d),disableRipple:g,...I,classes:A})});function dD(e){return Jt("MuiCircularProgress",e)}Vt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Al=44,D2=iA`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,z2=iA`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,uD=typeof D2!="string"?Pv`
        animation: ${D2} 1.4s linear infinite;
      `:null,CD=typeof z2!="string"?Pv`
        animation: ${z2} 1.4s ease-in-out infinite;
      `:null,AD=e=>{const{classes:t,variant:n,color:r,disableShrink:o}=e,i={root:["root",n,`color${Te(r)}`],svg:["svg"],circle:["circle",`circle${Te(n)}`,o&&"circleDisableShrink"]};return Yt(i,dD,t)},hD=Pe("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Te(n.color)}`]]}})(Pt(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:uD||{animation:`${D2} 1.4s linear infinite`}},...Object.entries(e.palette).filter(lo()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),mD=Pe("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),pD=Pe("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Te(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(Pt(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:CD||{animation:`${z2} 1.4s ease-in-out infinite`}}]}))),vG=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiCircularProgress"}),{className:o,color:i="primary",disableShrink:a=!1,size:s=40,style:l,thickness:c=3.6,value:u=0,variant:g="indeterminate",...d}=r,I={...r,color:i,disableShrink:a,size:s,thickness:c,value:u,variant:g},C=AD(I),h={},f={},A={};if(g==="determinate"){const m=2*Math.PI*((Al-c)/2);h.strokeDasharray=m.toFixed(3),A["aria-valuenow"]=Math.round(u),h.strokeDashoffset=`${((100-u)/100*m).toFixed(3)}px`,f.transform="rotate(-90deg)"}return w.jsx(hD,{className:nt(C.root,o),style:{width:s,height:s,...f,...l},ownerState:I,ref:n,role:"progressbar",...A,...d,children:w.jsx(mD,{className:C.svg,ownerState:I,viewBox:`${Al/2} ${Al/2} ${Al} ${Al}`,children:w.jsx(pD,{className:C.circle,style:h,ownerState:I,cx:Al,cy:Al,r:(Al-c)/2,fill:"none",strokeWidth:c})})})});function C5(e){return e.substring(2).toLowerCase()}function fD(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function bD(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:o,touchEvent:i="onTouchEnd"}=e,a=F.useRef(!1),s=F.useRef(null),l=F.useRef(!1),c=F.useRef(!1);F.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const u=xr(pc(t),s),g=Ks(C=>{const h=c.current;c.current=!1;const f=oi(s.current);if(!l.current||!s.current||"clientX"in C&&fD(C,f))return;if(a.current){a.current=!1;return}let A;C.composedPath?A=C.composedPath().includes(s.current):A=!f.documentElement.contains(C.target)||s.current.contains(C.target),!A&&(n||!h)&&o(C)}),d=C=>h=>{c.current=!0;const f=t.props[C];f&&f(h)},I={ref:u};return i!==!1&&(I[i]=d(i)),F.useEffect(()=>{if(i!==!1){const C=C5(i),h=oi(s.current),f=()=>{a.current=!0};return h.addEventListener(C,g),h.addEventListener("touchmove",f),()=>{h.removeEventListener(C,g),h.removeEventListener("touchmove",f)}}},[g,i]),r!==!1&&(I[r]=d(r)),F.useEffect(()=>{if(r!==!1){const C=C5(r),h=oi(s.current);return h.addEventListener(C,g),()=>{h.removeEventListener(C,g)}}},[g,r]),w.jsx(F.Fragment,{children:F.cloneElement(t,I)})}const bX=WE({createStyledComponent:Pe("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${Te(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>IG({props:e,name:"MuiContainer"})}),T2=typeof dG({})=="function",yD=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),ZD=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),yX=(e,t=!1)=>{var i,a;const n={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([s,l])=>{var u,g;const c=e.getColorSchemeSelector(s);c.startsWith("@")?n[c]={":root":{colorScheme:(u=l.palette)==null?void 0:u.mode}}:n[c.replace(/\s*&/,"")]={colorScheme:(g=l.palette)==null?void 0:g.mode}});let r={html:yD(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...ZD(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...n};const o=(a=(i=e.components)==null?void 0:i.MuiCssBaseline)==null?void 0:a.styleOverrides;return o&&(r=[r,o]),r},Im="mui-ecs",vD=e=>{const t=yX(e,!1),n=Array.isArray(t)?t[0]:t;return!e.vars&&n&&(n.html[`:root:has(${Im})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([r,o])=>{var a,s;const i=e.getColorSchemeSelector(r);i.startsWith("@")?n[i]={[`:root:not(:has(.${Im}))`]:{colorScheme:(a=o.palette)==null?void 0:a.mode}}:n[i.replace(/\s*&/,"")]={[`&:not(:has(.${Im}))`]:{colorScheme:(s=o.palette)==null?void 0:s.mode}}}),t},GD=dG(T2?({theme:e,enableColorScheme:t})=>yX(e,t):({theme:e})=>vD(e));function SD(e){const t=Ht({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=t;return w.jsxs(F.Fragment,{children:[T2&&w.jsx(GD,{enableColorScheme:r}),!T2&&!r&&w.jsx("span",{className:Im,style:{display:"none"}}),n]})}function BD(e){const t=oi(e);return t.body===e?Ja(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function tC(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function A5(e){return parseInt(Ja(e).getComputedStyle(e).paddingRight,10)||0}function wD(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function h5(e,t,n,r,o){const i=[t,n,...r];[].forEach.call(e.children,a=>{const s=!i.includes(a),l=!wD(a);s&&l&&tC(a,o)})}function Kb(e,t){let n=-1;return e.some((r,o)=>t(r)?(n=o,!0):!1),n}function WD(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(BD(r)){const a=OV(Ja(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${A5(r)+a}px`;const s=oi(r).querySelectorAll(".mui-fixed");[].forEach.call(s,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${A5(l)+a}px`})}let i;if(r.parentNode instanceof DocumentFragment)i=oi(r).body;else{const a=r.parentElement,s=Ja(r);i=(a==null?void 0:a.nodeName)==="HTML"&&s.getComputedStyle(a).overflowY==="scroll"?a:r}n.push({value:i.style.overflow,property:"overflow",el:i},{value:i.style.overflowX,property:"overflow-x",el:i},{value:i.style.overflowY,property:"overflow-y",el:i}),i.style.overflow="hidden"}return()=>{n.forEach(({value:i,el:a,property:s})=>{i?a.style.setProperty(s,i):a.style.removeProperty(s)})}}function RD(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class kD{constructor(){this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&tC(t.modalRef,!1);const o=RD(n);h5(n,t.mount,t.modalRef,o,!0);const i=Kb(this.containers,a=>a.container===n);return i!==-1?(this.containers[i].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:o}),r)}mount(t,n){const r=Kb(this.containers,i=>i.modals.includes(t)),o=this.containers[r];o.restore||(o.restore=WD(o,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const o=Kb(this.containers,a=>a.modals.includes(t)),i=this.containers[o];if(i.modals.splice(i.modals.indexOf(t),1),this.modals.splice(r,1),i.modals.length===0)i.restore&&i.restore(),t.modalRef&&tC(t.modalRef,n),h5(i.container,t.mount,t.modalRef,i.hiddenSiblings,!1),this.containers.splice(o,1);else{const a=i.modals[i.modals.length-1];a.modalRef&&tC(a.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const VD=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function XD(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function JD(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function xD(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||JD(e))}function YD(e){const t=[],n=[];return Array.from(e.querySelectorAll(VD)).forEach((r,o)=>{const i=XD(r);i===-1||!xD(r)||(i===0?t.push(r):n.push({documentOrder:o,tabIndex:i,node:r}))}),n.sort((r,o)=>r.tabIndex===o.tabIndex?r.documentOrder-o.documentOrder:r.tabIndex-o.tabIndex).map(r=>r.node).concat(t)}function ND(){return!0}function HD(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:o=!1,getTabbable:i=YD,isEnabled:a=ND,open:s}=e,l=F.useRef(!1),c=F.useRef(null),u=F.useRef(null),g=F.useRef(null),d=F.useRef(null),I=F.useRef(!1),C=F.useRef(null),h=xr(pc(t),C),f=F.useRef(null);F.useEffect(()=>{!s||!C.current||(I.current=!n)},[n,s]),F.useEffect(()=>{if(!s||!C.current)return;const p=oi(C.current);return C.current.contains(p.activeElement)||(C.current.hasAttribute("tabIndex")||C.current.setAttribute("tabIndex","-1"),I.current&&C.current.focus()),()=>{o||(g.current&&g.current.focus&&(l.current=!0,g.current.focus()),g.current=null)}},[s]),F.useEffect(()=>{if(!s||!C.current)return;const p=oi(C.current),Z=B=>{f.current=B,!(r||!a()||B.key!=="Tab")&&p.activeElement===C.current&&B.shiftKey&&(l.current=!0,u.current&&u.current.focus())},v=()=>{var W,G;const B=C.current;if(B===null)return;if(!p.hasFocus()||!a()||l.current){l.current=!1;return}if(B.contains(p.activeElement)||r&&p.activeElement!==c.current&&p.activeElement!==u.current)return;if(p.activeElement!==d.current)d.current=null;else if(d.current!==null)return;if(!I.current)return;let y=[];if((p.activeElement===c.current||p.activeElement===u.current)&&(y=i(C.current)),y.length>0){const R=!!((W=f.current)!=null&&W.shiftKey&&((G=f.current)==null?void 0:G.key)==="Tab"),X=y[0],Y=y[y.length-1];typeof X!="string"&&typeof Y!="string"&&(R?Y.focus():X.focus())}else B.focus()};p.addEventListener("focusin",v),p.addEventListener("keydown",Z,!0);const k=setInterval(()=>{p.activeElement&&p.activeElement.tagName==="BODY"&&v()},50);return()=>{clearInterval(k),p.removeEventListener("focusin",v),p.removeEventListener("keydown",Z,!0)}},[n,r,o,a,s,i]);const A=p=>{g.current===null&&(g.current=p.relatedTarget),I.current=!0,d.current=p.target;const Z=t.props.onFocus;Z&&Z(p)},m=p=>{g.current===null&&(g.current=p.relatedTarget),I.current=!0};return w.jsxs(F.Fragment,{children:[w.jsx("div",{tabIndex:s?0:-1,onFocus:m,ref:c,"data-testid":"sentinelStart"}),F.cloneElement(t,{ref:h,onFocus:A}),w.jsx("div",{tabIndex:s?0:-1,onFocus:m,ref:u,"data-testid":"sentinelEnd"})]})}function FD(e){return typeof e=="function"?e():e}function KD(e){return e?e.props.hasOwnProperty("in"):!1}const xh=new kD;function LD(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:o=!1,onTransitionEnter:i,onTransitionExited:a,children:s,onClose:l,open:c,rootRef:u}=e,g=F.useRef({}),d=F.useRef(null),I=F.useRef(null),C=xr(I,u),[h,f]=F.useState(!c),A=KD(s);let m=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(m=!1);const p=()=>oi(d.current),Z=()=>(g.current.modalRef=I.current,g.current.mount=d.current,g.current),v=()=>{xh.mount(Z(),{disableScrollLock:r}),I.current&&(I.current.scrollTop=0)},k=Ks(()=>{const D=FD(t)||p().body;xh.add(Z(),D),I.current&&v()}),B=()=>xh.isTopModal(Z()),y=Ks(D=>{d.current=D,D&&(c&&B()?v():I.current&&tC(I.current,m))}),W=F.useCallback(()=>{xh.remove(Z(),m)},[m]);F.useEffect(()=>()=>{W()},[W]),F.useEffect(()=>{c?k():(!A||!o)&&W()},[c,W,A,o,k]);const G=D=>L=>{var M;(M=D.onKeyDown)==null||M.call(D,L),!(L.key!=="Escape"||L.which===229||!B())&&(n||(L.stopPropagation(),l&&l(L,"escapeKeyDown")))},R=D=>L=>{var M;(M=D.onClick)==null||M.call(D,L),L.target===L.currentTarget&&l&&l(L,"backdropClick")};return{getRootProps:(D={})=>{const L=Qm(e);delete L.onTransitionEnter,delete L.onTransitionExited;const M={...L,...D};return{role:"presentation",...M,onKeyDown:G(M),ref:C}},getBackdropProps:(D={})=>{const L=D;return{"aria-hidden":!0,...L,onClick:R(L),open:c}},getTransitionProps:()=>{const D=()=>{f(!1),i&&i()},L=()=>{f(!0),a&&a(),o&&W()};return{onEnter:LB(D,s==null?void 0:s.props.onEnter),onExited:LB(L,s==null?void 0:s.props.onExited)}},rootRef:C,portalRef:y,isTopModal:B,exited:h,hasTransition:A}}function ED(e){return Jt("MuiModal",e)}Vt("MuiModal",["root","hidden","backdrop"]);const MD=e=>{const{open:t,exited:n,classes:r}=e;return Yt({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},ED,r)},DD=Pe("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(Pt(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),zD=Pe(hX,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),GG=F.forwardRef(function(t,n){const r=Ht({name:"MuiModal",props:t}),{BackdropComponent:o=zD,BackdropProps:i,classes:a,className:s,closeAfterTransition:l=!1,children:c,container:u,component:g,components:d={},componentsProps:I={},disableAutoFocus:C=!1,disableEnforceFocus:h=!1,disableEscapeKeyDown:f=!1,disablePortal:A=!1,disableRestoreFocus:m=!1,disableScrollLock:p=!1,hideBackdrop:Z=!1,keepMounted:v=!1,onBackdropClick:k,onClose:B,onTransitionEnter:y,onTransitionExited:W,open:G,slotProps:R={},slots:X={},theme:Y,...x}=r,D={...r,closeAfterTransition:l,disableAutoFocus:C,disableEnforceFocus:h,disableEscapeKeyDown:f,disablePortal:A,disableRestoreFocus:m,disableScrollLock:p,hideBackdrop:Z,keepMounted:v},{getRootProps:L,getBackdropProps:M,getTransitionProps:K,portalRef:E,isTopModal:O,exited:re,hasTransition:H}=LD({...D,rootRef:n}),z={...D,exited:re},j=MD(z),$={};if(c.props.tabIndex===void 0&&($.tabIndex="-1"),H){const{onEnter:Je,onExited:ze}=K();$.onEnter=Je,$.onExited=ze}const ee={...x,slots:{root:d.Root,backdrop:d.Backdrop,...X},slotProps:{...I,...R}},[le,Ie]=vi("root",{elementType:DD,externalForwardedProps:ee,getSlotProps:L,additionalProps:{ref:n,as:g},ownerState:z,className:nt(s,j==null?void 0:j.root,!z.open&&z.exited&&(j==null?void 0:j.hidden))}),[Ae,Ge]=vi("backdrop",{elementType:o,externalForwardedProps:ee,additionalProps:i,getSlotProps:Je=>M({...Je,onClick:ze=>{k&&k(ze),Je!=null&&Je.onClick&&Je.onClick(ze)}}),className:nt(i==null?void 0:i.className,j==null?void 0:j.backdrop),ownerState:z}),We=xr(i==null?void 0:i.ref,Ge.ref);return!v&&!G&&(!H||re)?null:w.jsx(r4,{ref:E,container:u,disablePortal:A,children:w.jsxs(le,{...Ie,children:[!Z&&o?w.jsx(Ae,{...Ge,ref:We}):null,w.jsx(HD,{disableEnforceFocus:h,disableAutoFocus:C,disableRestoreFocus:m,isEnabled:O,open:G,children:F.cloneElement(c,$)})]})})});function TD(e){return Jt("MuiDialog",e)}const Lb=Vt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),UD=F.createContext({}),jD=Pe(hX,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),QD=e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:o,fullScreen:i}=e,a={root:["root"],container:["container",`scroll${Te(n)}`],paper:["paper",`paperScroll${Te(n)}`,`paperWidth${Te(String(r))}`,o&&"paperFullWidth",i&&"paperFullScreen"]};return Yt(a,TD,t)},PD=Pe(GG,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),OD=Pe("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${Te(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),_D=Pe(xa,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${Te(n.scroll)}`],t[`paperWidth${Te(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(Pt(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${Lb.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${Lb.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Lb.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),qD=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiDialog"}),o=As(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":s,"aria-modal":l=!0,BackdropComponent:c,BackdropProps:u,children:g,className:d,disableEscapeKeyDown:I=!1,fullScreen:C=!1,fullWidth:h=!1,maxWidth:f="sm",onBackdropClick:A,onClick:m,onClose:p,open:Z,PaperComponent:v=xa,PaperProps:k={},scroll:B="paper",TransitionComponent:y=ZG,transitionDuration:W=i,TransitionProps:G,...R}=r,X={...r,disableEscapeKeyDown:I,fullScreen:C,fullWidth:h,maxWidth:f,scroll:B},Y=QD(X),x=F.useRef(),D=E=>{x.current=E.target===E.currentTarget},L=E=>{m&&m(E),x.current&&(x.current=null,A&&A(E),p&&p(E,"backdropClick"))},M=oG(s),K=F.useMemo(()=>({titleId:M}),[M]);return w.jsx(PD,{className:nt(Y.root,d),closeAfterTransition:!0,components:{Backdrop:jD},componentsProps:{backdrop:{transitionDuration:W,as:c,...u}},disableEscapeKeyDown:I,onClose:p,open:Z,ref:n,onClick:L,ownerState:X,...R,children:w.jsx(y,{appear:!0,in:Z,timeout:W,role:"presentation",...G,children:w.jsx(OD,{className:nt(Y.container),onMouseDown:D,ownerState:X,children:w.jsx(_D,{as:v,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":M,"aria-modal":l,...k,className:nt(Y.paper,k.className),ownerState:X,children:w.jsx(UD.Provider,{value:K,children:g})})})})})});function $D(e){return Jt("MuiDivider",e)}const m5=Vt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),ez=e=>{const{absolute:t,children:n,classes:r,flexItem:o,light:i,orientation:a,textAlign:s,variant:l}=e;return Yt({root:["root",t&&"absolute",l,i&&"light",a==="vertical"&&"vertical",o&&"flexItem",n&&"withChildren",n&&a==="vertical"&&"withChildrenVertical",s==="right"&&a!=="vertical"&&"textAlignRight",s==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},$D,r)},tz=Pe("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(Pt(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:sn(e.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),nz=Pe("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(Pt(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),qm=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiDivider"}),{absolute:o=!1,children:i,className:a,orientation:s="horizontal",component:l=i||s==="vertical"?"div":"hr",flexItem:c=!1,light:u=!1,role:g=l!=="hr"?"separator":void 0,textAlign:d="center",variant:I="fullWidth",...C}=r,h={...r,absolute:o,component:l,flexItem:c,light:u,orientation:s,role:g,textAlign:d,variant:I},f=ez(h);return w.jsx(tz,{as:l,className:nt(f.root,a),role:g,ref:n,ownerState:h,"aria-orientation":g==="separator"&&(l!=="hr"||s==="vertical")?s:void 0,...C,children:i?w.jsx(nz,{className:f.wrapper,ownerState:h,children:i}):null})});qm&&(qm.muiSkipListHighlight=!0);function rz(e,t,n){const r=t.getBoundingClientRect(),o=n&&n.getBoundingClientRect(),i=Ja(t);let a;if(t.fakeTransform)a=t.fakeTransform;else{const c=i.getComputedStyle(t);a=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}let s=0,l=0;if(a&&a!=="none"&&typeof a=="string"){const c=a.split("(")[1].split(")")[0].split(",");s=parseInt(c[4],10),l=parseInt(c[5],10)}return e==="left"?o?`translateX(${o.right+s-r.left}px)`:`translateX(${i.innerWidth+s-r.left}px)`:e==="right"?o?`translateX(-${r.right-o.left-s}px)`:`translateX(-${r.left+r.width-s}px)`:e==="up"?o?`translateY(${o.bottom+l-r.top}px)`:`translateY(${i.innerHeight+l-r.top}px)`:o?`translateY(-${r.top-o.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}function oz(e){return typeof e=="function"?e():e}function Yh(e,t,n){const r=oz(n),o=rz(e,t,r);o&&(t.style.webkitTransform=o,t.style.transform=o)}const iz=F.forwardRef(function(t,n){const r=As(),o={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:s=!0,children:l,container:c,direction:u="down",easing:g=o,in:d,onEnter:I,onEntered:C,onEntering:h,onExit:f,onExited:A,onExiting:m,style:p,timeout:Z=i,TransitionComponent:v=ca,...k}=t,B=F.useRef(null),y=xr(pc(l),B,n),W=K=>E=>{K&&(E===void 0?K(B.current):K(B.current,E))},G=W((K,E)=>{Yh(u,K,c),fG(K),I&&I(K,E)}),R=W((K,E)=>{const O=cd({timeout:Z,style:p,easing:g},{mode:"enter"});K.style.webkitTransition=r.transitions.create("-webkit-transform",{...O}),K.style.transition=r.transitions.create("transform",{...O}),K.style.webkitTransform="none",K.style.transform="none",h&&h(K,E)}),X=W(C),Y=W(m),x=W(K=>{const E=cd({timeout:Z,style:p,easing:g},{mode:"exit"});K.style.webkitTransition=r.transitions.create("-webkit-transform",E),K.style.transition=r.transitions.create("transform",E),Yh(u,K,c),f&&f(K)}),D=W(K=>{K.style.webkitTransition="",K.style.transition="",A&&A(K)}),L=K=>{a&&a(B.current,K)},M=F.useCallback(()=>{B.current&&Yh(u,B.current,c)},[u,c]);return F.useEffect(()=>{if(d||u==="down"||u==="right")return;const K=rG(()=>{B.current&&Yh(u,B.current,c)}),E=Ja(B.current);return E.addEventListener("resize",K),()=>{K.clear(),E.removeEventListener("resize",K)}},[u,d,c]),F.useEffect(()=>{d||M()},[d,M]),w.jsx(v,{nodeRef:B,onEnter:G,onEntered:X,onEntering:R,onExit:x,onExited:D,onExiting:Y,addEndListener:L,appear:s,in:d,timeout:Z,...k,children:(K,E)=>F.cloneElement(l,{ref:y,style:{visibility:K==="exited"&&!d?"hidden":void 0,...p,...l.props.style},...E})})});function az(e){return Jt("MuiDrawer",e)}Vt("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const ZX=(e,t)=>{const{ownerState:n}=e;return[t.root,(n.variant==="permanent"||n.variant==="persistent")&&t.docked,t.modal]},sz=e=>{const{classes:t,anchor:n,variant:r}=e,o={root:["root"],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Te(n)}`,r!=="temporary"&&`paperAnchorDocked${Te(n)}`]};return Yt(o,az,t)},lz=Pe(GG,{name:"MuiDrawer",slot:"Root",overridesResolver:ZX})(Pt(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),p5=Pe("div",{shouldForwardProp:Mo,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:ZX})({flex:"0 0 auto"}),gz=Pe(xa,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${Te(n.anchor)}`],n.variant!=="temporary"&&t[`paperAnchorDocked${Te(n.anchor)}`]]}})(Pt(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),vX={left:"right",right:"left",top:"down",bottom:"up"};function cz(e){return["left","right"].includes(e)}function Iz({direction:e},t){return e==="rtl"&&cz(t)?vX[t]:t}const dz=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiDrawer"}),o=As(),i=nX(),a={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:l,children:c,className:u,elevation:g=16,hideBackdrop:d=!1,ModalProps:{BackdropProps:I,...C}={},onClose:h,open:f=!1,PaperProps:A={},SlideProps:m,TransitionComponent:p=iz,transitionDuration:Z=a,variant:v="temporary",...k}=r,B=F.useRef(!1);F.useEffect(()=>{B.current=!0},[]);const y=Iz({direction:i?"rtl":"ltr"},s),G={...r,anchor:s,elevation:g,open:f,variant:v,...k},R=sz(G),X=w.jsx(gz,{elevation:v==="temporary"?g:0,square:!0,...A,className:nt(R.paper,A.className),ownerState:G,children:c});if(v==="permanent")return w.jsx(p5,{className:nt(R.root,R.docked,u),ownerState:G,ref:n,...k,children:X});const Y=w.jsx(p,{in:f,direction:vX[y],timeout:Z,appear:B.current,...m,children:X});return v==="persistent"?w.jsx(p5,{className:nt(R.root,R.docked,u),ownerState:G,ref:n,...k,children:Y}):w.jsx(lz,{BackdropProps:{...l,...I,transitionDuration:Z},className:nt(R.root,R.modal,u),open:f,ownerState:G,onClose:h,hideBackdrop:d,ref:n,...k,...C,children:Y})}),uz=e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:o,size:i,hiddenLabel:a,multiline:s}=e,l={root:["root",!n&&"underline",r&&"adornedStart",o&&"adornedEnd",i==="small"&&`size${Te(i)}`,a&&"hiddenLabel",s&&"multiline"],input:["input"]},c=Yt(l,m4,t);return{...t,...c}},Cz=Pe(Nf,{shouldForwardProp:e=>Mo(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...xf(e,t),!n.disableUnderline&&t.underline]}})(Pt(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r}},[`&.${Gg.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r},[`&.${Gg.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:i},variants:[{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Gg.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Gg.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Gg.disabled}, .${Gg.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Gg.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(lo()).map(([a])=>{var s;return{props:{disableUnderline:!1,color:a},style:{"&::after":{borderBottom:`2px solid ${(s=(e.vars||e).palette[a])==null?void 0:s.main}`}}}}),{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:12}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:12}},{props:({ownerState:a})=>a.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:a,size:s})=>a.multiline&&s==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel&&a.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Az=Pe(Hf,{name:"MuiFilledInput",slot:"Input",overridesResolver:Yf})(Pt(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),$m=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiFilledInput"}),{disableUnderline:o=!1,components:i={},componentsProps:a,fullWidth:s=!1,hiddenLabel:l,inputComponent:c="input",multiline:u=!1,slotProps:g,slots:d={},type:I="text",...C}=r,h={...r,disableUnderline:o,fullWidth:s,inputComponent:c,multiline:u,type:I},f=uz(r),A={root:{ownerState:h},input:{ownerState:h}},m=g??a?So(A,g??a):A,p=d.root??i.Root??Cz,Z=d.input??i.Input??Az;return w.jsx(yG,{slots:{root:p,input:Z},componentsProps:m,fullWidth:s,inputComponent:c,multiline:u,ref:n,type:I,...C,classes:f})});$m&&($m.muiName="Input");function hz(e){return Jt("MuiFormControl",e)}Vt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const mz=e=>{const{classes:t,margin:n,fullWidth:r}=e,o={root:["root",n!=="none"&&`margin${Te(n)}`,r&&"fullWidth"]};return Yt(o,hz,t)},pz=Pe("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>({...t.root,...t[`margin${Te(e.margin)}`],...e.fullWidth&&t.fullWidth})})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),ep=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiFormControl"}),{children:o,className:i,color:a="primary",component:s="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:g=!1,hiddenLabel:d=!1,margin:I="none",required:C=!1,size:h="medium",variant:f="outlined",...A}=r,m={...r,color:a,component:s,disabled:l,error:c,fullWidth:g,hiddenLabel:d,margin:I,required:C,size:h,variant:f},p=mz(m),[Z,v]=F.useState(()=>{let Y=!1;return o&&F.Children.forEach(o,x=>{if(!Jb(x,["Input","Select"]))return;const D=Jb(x,["Select"])?x.props.input:x;D&&d4(D.props)&&(Y=!0)}),Y}),[k,B]=F.useState(()=>{let Y=!1;return o&&F.Children.forEach(o,x=>{Jb(x,["Input","Select"])&&(_m(x.props,!0)||_m(x.props.inputProps,!0))&&(Y=!0)}),Y}),[y,W]=F.useState(!1);l&&y&&W(!1);const G=u!==void 0&&!l?u:y;let R;F.useRef(!1);const X=F.useMemo(()=>({adornedStart:Z,setAdornedStart:v,color:a,disabled:l,error:c,filled:k,focused:G,fullWidth:g,hiddenLabel:d,size:h,onBlur:()=>{W(!1)},onEmpty:()=>{B(!1)},onFilled:()=>{B(!0)},onFocus:()=>{W(!0)},registerEffect:R,required:C,variant:f}),[Z,a,l,c,k,G,g,d,R,C,h,f]);return w.jsx(bG.Provider,{value:X,children:w.jsx(pz,{as:s,ownerState:m,className:nt(p.root,i),ref:n,...A,children:o})})});function fz(e){return Jt("MuiFormControlLabel",e)}const Eu=Vt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),bz=e=>{const{classes:t,disabled:n,labelPlacement:r,error:o,required:i}=e,a={root:["root",n&&"disabled",`labelPlacement${Te(r)}`,o&&"error",i&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",o&&"error"]};return Yt(a,fz,t)},yz=Pe("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Eu.label}`]:t.label},t.root,t[`labelPlacement${Te(n.labelPlacement)}`]]}})(Pt(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Eu.disabled}`]:{cursor:"default"},[`& .${Eu.label}`]:{[`&.${Eu.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),Zz=Pe("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(Pt(({theme:e})=>({[`&.${Eu.error}`]:{color:(e.vars||e).palette.error.main}}))),vz=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiFormControlLabel"}),{checked:o,className:i,componentsProps:a={},control:s,disabled:l,disableTypography:c,inputRef:u,label:g,labelPlacement:d="end",name:I,onChange:C,required:h,slots:f={},slotProps:A={},value:m,...p}=r,Z=Ig(),v=l??s.props.disabled??(Z==null?void 0:Z.disabled),k=h??s.props.required,B={disabled:v,required:k};["checked","name","onChange","value","inputRef"].forEach(D=>{typeof s.props[D]>"u"&&typeof r[D]<"u"&&(B[D]=r[D])});const y=fc({props:r,muiFormControl:Z,states:["error"]}),W={...r,disabled:v,labelPlacement:d,required:k,error:y.error},G=bz(W),R={slots:f,slotProps:{...a,...A}},[X,Y]=vi("typography",{elementType:Ee,externalForwardedProps:R,ownerState:W});let x=g;return x!=null&&x.type!==Ee&&!c&&(x=w.jsx(X,{component:"span",...Y,className:nt(G.label,Y==null?void 0:Y.className),children:x})),w.jsxs(yz,{className:nt(G.root,i),ownerState:W,ref:n,...p,children:[F.cloneElement(s,B),k?w.jsxs("div",{children:[x,w.jsxs(Zz,{ownerState:W,"aria-hidden":!0,className:G.asterisk,children:[" ","*"]})]}):x]})});function Gz(e){return Jt("MuiFormHelperText",e)}const f5=Vt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var b5;const Sz=e=>{const{classes:t,contained:n,size:r,disabled:o,error:i,filled:a,focused:s,required:l}=e,c={root:["root",o&&"disabled",i&&"error",r&&`size${Te(r)}`,n&&"contained",s&&"focused",a&&"filled",l&&"required"]};return Yt(c,Gz,t)},Bz=Pe("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Te(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(Pt(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${f5.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${f5.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),wz=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiFormHelperText"}),{children:o,className:i,component:a="p",disabled:s,error:l,filled:c,focused:u,margin:g,required:d,variant:I,...C}=r,h=Ig(),f=fc({props:r,muiFormControl:h,states:["variant","size","disabled","error","filled","focused","required"]}),A={...r,component:a,contained:f.variant==="filled"||f.variant==="outlined",variant:f.variant,size:f.size,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required};delete A.ownerState;const m=Sz(A);return w.jsx(Bz,{as:a,className:nt(m.root,i),ref:n,...C,ownerState:A,children:o===" "?b5||(b5=w.jsx("span",{className:"notranslate",children:"​"})):o})});function Wz(e){return Jt("MuiFormLabel",e)}const nC=Vt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Rz=e=>{const{classes:t,color:n,focused:r,disabled:o,error:i,filled:a,required:s}=e,l={root:["root",`color${Te(n)}`,o&&"disabled",i&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",i&&"error"]};return Yt(l,Wz,t)},kz=Pe("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>({...t.root,...e.color==="secondary"&&t.colorSecondary,...e.filled&&t.filled})})(Pt(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(lo()).map(([t])=>({props:{color:t},style:{[`&.${nC.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${nC.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${nC.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),Vz=Pe("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(Pt(({theme:e})=>({[`&.${nC.error}`]:{color:(e.vars||e).palette.error.main}}))),Xz=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiFormLabel"}),{children:o,className:i,color:a,component:s="label",disabled:l,error:c,filled:u,focused:g,required:d,...I}=r,C=Ig(),h=fc({props:r,muiFormControl:C,states:["color","required","focused","disabled","error","filled"]}),f={...r,color:h.color||"primary",component:s,disabled:h.disabled,error:h.error,filled:h.filled,focused:h.focused,required:h.required},A=Rz(f);return w.jsxs(kz,{as:s,ownerState:f,className:nt(A.root,i),ref:n,...I,children:[o,h.required&&w.jsxs(Vz,{ownerState:f,"aria-hidden":!0,className:A.asterisk,children:[" ","*"]})]})}),y5=F.createContext();function Jz(e){return Jt("MuiGrid",e)}const xz=[0,1,2,3,4,5,6,7,8,9,10],Yz=["column-reverse","column","row-reverse","row"],Nz=["nowrap","wrap-reverse","wrap"],fu=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],HC=Vt("MuiGrid",["root","container","item","zeroMinWidth",...xz.map(e=>`spacing-xs-${e}`),...Yz.map(e=>`direction-xs-${e}`),...Nz.map(e=>`wrap-xs-${e}`),...fu.map(e=>`grid-xs-${e}`),...fu.map(e=>`grid-sm-${e}`),...fu.map(e=>`grid-md-${e}`),...fu.map(e=>`grid-lg-${e}`),...fu.map(e=>`grid-xl-${e}`)]);function Hz({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce((r,o)=>{let i={};if(t[o]&&(n=t[o]),!n)return r;if(n===!0)i={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const a=cf({values:t.columns,breakpoints:e.breakpoints.values}),s=typeof a=="object"?a[o]:a;if(s==null)return r;const l=`${Math.round(n/s*1e8)/1e6}%`;let c={};if(t.container&&t.item&&t.columnSpacing!==0){const u=e.spacing(t.columnSpacing);if(u!=="0px"){const g=`calc(${l} + ${u})`;c={flexBasis:g,maxWidth:g}}}i={flexBasis:l,flexGrow:0,maxWidth:l,...c}}return e.breakpoints.values[o]===0?Object.assign(r,i):r[e.breakpoints.up(o)]=i,r},{})}function Fz({theme:e,ownerState:t}){const n=cf({values:t.direction,breakpoints:e.breakpoints.values});return aa({theme:e},n,r=>{const o={flexDirection:r};return r.startsWith("column")&&(o[`& > .${HC.item}`]={maxWidth:"none"}),o})}function GX({breakpoints:e,values:t}){let n="";Object.keys(t).forEach(o=>{n===""&&t[o]!==0&&(n=o)});const r=Object.keys(e).sort((o,i)=>e[o]-e[i]);return r.slice(0,r.indexOf(n))}function Kz({theme:e,ownerState:t}){const{container:n,rowSpacing:r}=t;let o={};if(n&&r!==0){const i=cf({values:r,breakpoints:e.breakpoints.values});let a;typeof i=="object"&&(a=GX({breakpoints:e.breakpoints.values,values:i})),o=aa({theme:e},i,(s,l)=>{const c=e.spacing(s);return c!=="0px"?{marginTop:e.spacing(-s),[`& > .${HC.item}`]:{paddingTop:c}}:a!=null&&a.includes(l)?{}:{marginTop:0,[`& > .${HC.item}`]:{paddingTop:0}}})}return o}function Lz({theme:e,ownerState:t}){const{container:n,columnSpacing:r}=t;let o={};if(n&&r!==0){const i=cf({values:r,breakpoints:e.breakpoints.values});let a;typeof i=="object"&&(a=GX({breakpoints:e.breakpoints.values,values:i})),o=aa({theme:e},i,(s,l)=>{const c=e.spacing(s);if(c!=="0px"){const u=e.spacing(-s);return{width:`calc(100% + ${c})`,marginLeft:u,[`& > .${HC.item}`]:{paddingLeft:c}}}return a!=null&&a.includes(l)?{}:{width:"100%",marginLeft:0,[`& > .${HC.item}`]:{paddingLeft:0}}})}return o}function Ez(e,t,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach(o=>{const i=e[o];Number(i)>0&&r.push(n[`spacing-${o}-${String(i)}`])}),r}const Mz=Pe("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:o,item:i,spacing:a,wrap:s,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=Ez(a,c,t));const g=[];return c.forEach(d=>{const I=n[d];I&&g.push(t[`grid-${d}-${String(I)}`])}),[t.root,r&&t.container,i&&t.item,l&&t.zeroMinWidth,...u,o!=="row"&&t[`direction-xs-${String(o)}`],s!=="wrap"&&t[`wrap-xs-${String(s)}`],...g]}})(({ownerState:e})=>({boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...e.item&&{margin:0},...e.zeroMinWidth&&{minWidth:0},...e.wrap!=="wrap"&&{flexWrap:e.wrap}}),Fz,Kz,Lz,Hz);function Dz(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return t.forEach(r=>{const o=e[r];if(Number(o)>0){const i=`spacing-${r}-${String(o)}`;n.push(i)}}),n}const zz=e=>{const{classes:t,container:n,direction:r,item:o,spacing:i,wrap:a,zeroMinWidth:s,breakpoints:l}=e;let c=[];n&&(c=Dz(i,l));const u=[];l.forEach(d=>{const I=e[d];I&&u.push(`grid-${d}-${String(I)}`)});const g={root:["root",n&&"container",o&&"item",s&&"zeroMinWidth",...c,r!=="row"&&`direction-xs-${String(r)}`,a!=="wrap"&&`wrap-xs-${String(a)}`,...u]};return Yt(g,Jz,t)},at=F.forwardRef(function(t,n){const r=IG({props:t,name:"MuiGrid"}),{breakpoints:o}=As(),i=tG(r),{className:a,columns:s,columnSpacing:l,component:c="div",container:u=!1,direction:g="row",item:d=!1,rowSpacing:I,spacing:C=0,wrap:h="wrap",zeroMinWidth:f=!1,...A}=i,m=I||C,p=l||C,Z=F.useContext(y5),v=u?s||12:Z,k={},B={...A};o.keys.forEach(G=>{A[G]!=null&&(k[G]=A[G],delete B[G])});const y={...i,columns:v,container:u,direction:g,item:d,rowSpacing:m,columnSpacing:p,wrap:h,zeroMinWidth:f,spacing:C,...k,breakpoints:o.keys},W=zz(y);return w.jsx(y5.Provider,{value:v,children:w.jsx(Mz,{ownerState:y,className:nt(W.root,a),as:c,ref:n,...B})})});function U2(e){return`scale(${e}, ${e**2})`}const Tz={entering:{opacity:1,transform:U2(1)},entered:{opacity:1,transform:"none"}},Eb=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),tp=F.forwardRef(function(t,n){const{addEndListener:r,appear:o=!0,children:i,easing:a,in:s,onEnter:l,onEntered:c,onEntering:u,onExit:g,onExited:d,onExiting:I,style:C,timeout:h="auto",TransitionComponent:f=ca,...A}=t,m=aG(),p=F.useRef(),Z=As(),v=F.useRef(null),k=xr(v,pc(i),n),B=D=>L=>{if(D){const M=v.current;L===void 0?D(M):D(M,L)}},y=B(u),W=B((D,L)=>{fG(D);const{duration:M,delay:K,easing:E}=cd({style:C,timeout:h,easing:a},{mode:"enter"});let O;h==="auto"?(O=Z.transitions.getAutoHeightDuration(D.clientHeight),p.current=O):O=M,D.style.transition=[Z.transitions.create("opacity",{duration:O,delay:K}),Z.transitions.create("transform",{duration:Eb?O:O*.666,delay:K,easing:E})].join(","),l&&l(D,L)}),G=B(c),R=B(I),X=B(D=>{const{duration:L,delay:M,easing:K}=cd({style:C,timeout:h,easing:a},{mode:"exit"});let E;h==="auto"?(E=Z.transitions.getAutoHeightDuration(D.clientHeight),p.current=E):E=L,D.style.transition=[Z.transitions.create("opacity",{duration:E,delay:M}),Z.transitions.create("transform",{duration:Eb?E:E*.666,delay:Eb?M:M||E*.333,easing:K})].join(","),D.style.opacity=0,D.style.transform=U2(.75),g&&g(D)}),Y=B(d),x=D=>{h==="auto"&&m.start(p.current||0,D),r&&r(v.current,D)};return w.jsx(f,{appear:o,in:s,nodeRef:v,onEnter:W,onEntered:G,onEntering:y,onExit:X,onExited:Y,onExiting:R,addEndListener:x,timeout:h==="auto"?null:h,...A,children:(D,L)=>F.cloneElement(i,{style:{opacity:0,transform:U2(.75),visibility:D==="exited"&&!s?"hidden":void 0,...Tz[D],...C,...i.props.style},ref:k,...L})})});tp&&(tp.muiSupportAuto=!0);const Uz=e=>{const{classes:t,disableUnderline:n}=e,o=Yt({root:["root",!n&&"underline"],input:["input"]},A4,t);return{...t,...o}},jz=Pe(Nf,{shouldForwardProp:e=>Mo(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...xf(e,t),!n.disableUnderline&&t.underline]}})(Pt(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${pu.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${pu.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${pu.disabled}, .${pu.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${pu.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(lo()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[r].main}`}}}))]}})),Qz=Pe(Hf,{name:"MuiInput",slot:"Input",overridesResolver:Yf})({}),np=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiInput"}),{disableUnderline:o=!1,components:i={},componentsProps:a,fullWidth:s=!1,inputComponent:l="input",multiline:c=!1,slotProps:u,slots:g={},type:d="text",...I}=r,C=Uz(r),f={root:{ownerState:{disableUnderline:o}}},A=u??a?So(u??a,f):f,m=g.root??i.Root??jz,p=g.input??i.Input??Qz;return w.jsx(yG,{slots:{root:m,input:p},slotProps:A,fullWidth:s,inputComponent:l,multiline:c,ref:n,type:d,...I,classes:C})});np&&(np.muiName="Input");function Pz(e){return Jt("MuiInputLabel",e)}Vt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Oz=e=>{const{classes:t,formControl:n,size:r,shrink:o,disableAnimation:i,variant:a,required:s}=e,l={root:["root",n&&"formControl",!i&&"animated",o&&"shrink",r&&r!=="normal"&&`size${Te(r)}`,a],asterisk:[s&&"asterisk"]},c=Yt(l,Pz,t);return{...t,...c}},_z=Pe(Xz,{shouldForwardProp:e=>Mo(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${nC.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(Pt(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:n,size:r})=>t==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),rp=F.forwardRef(function(t,n){const r=Ht({name:"MuiInputLabel",props:t}),{disableAnimation:o=!1,margin:i,shrink:a,variant:s,className:l,...c}=r,u=Ig();let g=a;typeof g>"u"&&u&&(g=u.filled||u.focused||u.adornedStart);const d=fc({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),I={...r,disableAnimation:o,formControl:u,shrink:g,size:d.size,variant:d.variant,required:d.required,focused:d.focused},C=Oz(I);return w.jsx(_z,{"data-shrink":g,ref:n,className:nt(C.root,l),...c,ownerState:I,classes:C})});function qz(e){return Jt("MuiLink",e)}const $z=Vt("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),eT=({theme:e,ownerState:t})=>{const n=t.color,r=gd(e,`palette.${n}`,!1)||t.color,o=gd(e,`palette.${n}Channel`);return"vars"in e&&o?`rgba(${o} / 0.4)`:sn(r,.4)},Z5={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},tT=e=>{const{classes:t,component:n,focusVisible:r,underline:o}=e,i={root:["root",`underline${Te(o)}`,n==="button"&&"button",r&&"focusVisible"]};return Yt(i,qz,t)},nT=Pe(Ee,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${Te(n.underline)}`],n.component==="button"&&t.button]}})(Pt(({theme:e})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:t,ownerState:n})=>t==="always"&&n.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(e.palette).filter(lo()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette[t].mainChannel} / 0.4)`:sn(e.palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:sn(e.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.secondaryChannel} / 0.4)`:sn(e.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${$z.focusVisible}`]:{outline:"auto"}}}]}))),pi=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiLink"}),o=As(),{className:i,color:a="primary",component:s="a",onBlur:l,onFocus:c,TypographyClasses:u,underline:g="always",variant:d="inherit",sx:I,...C}=r,[h,f]=F.useState(!1),A=v=>{jm(v.target)||f(!1),l&&l(v)},m=v=>{jm(v.target)&&f(!0),c&&c(v)},p={...r,color:a,component:s,focusVisible:h,underline:g,variant:d},Z=tT(p);return w.jsx(nT,{color:a,className:nt(Z.root,i),classes:u,component:s,onBlur:A,onFocus:m,ref:n,ownerState:p,variant:d,...C,sx:[...Z5[a]===void 0?[{color:a}]:[],...Array.isArray(I)?I:[I]],style:{...C.style,...g==="always"&&a!=="inherit"&&!Z5[a]&&{"--Link-underlineColor":eT({theme:o,ownerState:p})}}})}),op=F.createContext({});function rT(e){return Jt("MuiList",e)}Vt("MuiList",["root","padding","dense","subheader"]);const oT=e=>{const{classes:t,disablePadding:n,dense:r,subheader:o}=e;return Yt({root:["root",!n&&"padding",r&&"dense",o&&"subheader"]},rT,t)},iT=Pe("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),SG=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiList"}),{children:o,className:i,component:a="ul",dense:s=!1,disablePadding:l=!1,subheader:c,...u}=r,g=F.useMemo(()=>({dense:s}),[s]),d={...r,component:a,dense:s,disablePadding:l},I=oT(d);return w.jsx(op.Provider,{value:g,children:w.jsxs(iT,{as:a,className:nt(I.root,i),ref:n,ownerState:d,...u,children:[c,o]})})}),v5=Vt("MuiListItemIcon",["root","alignItemsFlexStart"]);function aT(e){return Jt("MuiListItemText",e)}const GI=Vt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),sT=e=>{const{classes:t,inset:n,primary:r,secondary:o,dense:i}=e;return Yt({root:["root",n&&"inset",i&&"dense",r&&o&&"multiline"],primary:["primary"],secondary:["secondary"]},aT,t)},lT=Pe("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${GI.primary}`]:t.primary},{[`& .${GI.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${i5.root}:where(& .${GI.primary})`]:{display:"block"},[`.${i5.root}:where(& .${GI.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),gT=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiListItemText"}),{children:o,className:i,disableTypography:a=!1,inset:s=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:g,...d}=r,{dense:I}=F.useContext(op);let C=l??o,h=u;const f={...r,disableTypography:a,inset:s,primary:!!C,secondary:!!h,dense:I},A=sT(f);return C!=null&&C.type!==Ee&&!a&&(C=w.jsx(Ee,{variant:I?"body2":"body1",className:A.primary,component:c!=null&&c.variant?void 0:"span",...c,children:C})),h!=null&&h.type!==Ee&&!a&&(h=w.jsx(Ee,{variant:"body2",className:A.secondary,color:"textSecondary",...g,children:h})),w.jsxs(lT,{className:nt(A.root,i),ownerState:f,ref:n,...d,children:[C,h]})});function Mb(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function G5(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function SX(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function bu(e,t,n,r,o,i){let a=!1,s=o(e,t,t?n:!1);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const l=r?!1:s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||!SX(s,i)||l)s=o(e,s,n);else return s.focus(),!0}return!1}const cT=F.forwardRef(function(t,n){const{actions:r,autoFocus:o=!1,autoFocusItem:i=!1,children:a,className:s,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:g="selectedMenu",...d}=t,I=F.useRef(null),C=F.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Ps(()=>{o&&I.current.focus()},[o]),F.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(p,{direction:Z})=>{const v=!I.current.style.width;if(p.clientHeight<I.current.clientHeight&&v){const k=`${OV(Ja(p))}px`;I.current.style[Z==="rtl"?"paddingLeft":"paddingRight"]=k,I.current.style.width=`calc(100% + ${k})`}return I.current}}),[]);const h=p=>{const Z=I.current,v=p.key;if(p.ctrlKey||p.metaKey||p.altKey){u&&u(p);return}const B=oi(Z).activeElement;if(v==="ArrowDown")p.preventDefault(),bu(Z,B,c,l,Mb);else if(v==="ArrowUp")p.preventDefault(),bu(Z,B,c,l,G5);else if(v==="Home")p.preventDefault(),bu(Z,null,c,l,Mb);else if(v==="End")p.preventDefault(),bu(Z,null,c,l,G5);else if(v.length===1){const y=C.current,W=v.toLowerCase(),G=performance.now();y.keys.length>0&&(G-y.lastTime>500?(y.keys=[],y.repeating=!0,y.previousKeyMatched=!0):y.repeating&&W!==y.keys[0]&&(y.repeating=!1)),y.lastTime=G,y.keys.push(W);const R=B&&!y.repeating&&SX(B,y);y.previousKeyMatched&&(R||bu(Z,B,!1,l,Mb,y))?p.preventDefault():y.previousKeyMatched=!1}u&&u(p)},f=xr(I,n);let A=-1;F.Children.forEach(a,(p,Z)=>{if(!F.isValidElement(p)){A===Z&&(A+=1,A>=a.length&&(A=-1));return}p.props.disabled||(g==="selectedMenu"&&p.props.selected||A===-1)&&(A=Z),A===Z&&(p.props.disabled||p.props.muiSkipListHighlight||p.type.muiSkipListHighlight)&&(A+=1,A>=a.length&&(A=-1))});const m=F.Children.map(a,(p,Z)=>{if(Z===A){const v={};return i&&(v.autoFocus=!0),p.props.tabIndex===void 0&&g==="selectedMenu"&&(v.tabIndex=0),F.cloneElement(p,v)}return p});return w.jsx(SG,{role:"menu",ref:f,className:s,onKeyDown:h,tabIndex:o?0:-1,...d,children:m})});function IT(e){return Jt("MuiPopover",e)}Vt("MuiPopover",["root","paper"]);function S5(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function B5(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function w5(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function Db(e){return typeof e=="function"?e():e}const dT=e=>{const{classes:t}=e;return Yt({root:["root"],paper:["paper"]},IT,t)},uT=Pe(GG,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),BX=Pe(xa,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),CT=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiPopover"}),{action:o,anchorEl:i,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:s,anchorReference:l="anchorEl",children:c,className:u,container:g,elevation:d=8,marginThreshold:I=16,open:C,PaperProps:h={},slots:f={},slotProps:A={},transformOrigin:m={vertical:"top",horizontal:"left"},TransitionComponent:p=tp,transitionDuration:Z="auto",TransitionProps:{onEntering:v,...k}={},disableScrollLock:B=!1,...y}=r,W=(A==null?void 0:A.paper)??h,G=F.useRef(),R={...r,anchorOrigin:a,anchorReference:l,elevation:d,marginThreshold:I,externalPaperSlotProps:W,transformOrigin:m,TransitionComponent:p,transitionDuration:Z,TransitionProps:k},X=dT(R),Y=F.useCallback(()=>{if(l==="anchorPosition")return s;const Ge=Db(i),Je=(Ge&&Ge.nodeType===1?Ge:oi(G.current).body).getBoundingClientRect();return{top:Je.top+S5(Je,a.vertical),left:Je.left+B5(Je,a.horizontal)}},[i,a.horizontal,a.vertical,s,l]),x=F.useCallback(Ge=>({vertical:S5(Ge,m.vertical),horizontal:B5(Ge,m.horizontal)}),[m.horizontal,m.vertical]),D=F.useCallback(Ge=>{const We={width:Ge.offsetWidth,height:Ge.offsetHeight},Je=x(We);if(l==="none")return{top:null,left:null,transformOrigin:w5(Je)};const ze=Y();let ke=ze.top-Je.vertical,ye=ze.left-Je.horizontal;const oe=ke+We.height,ct=ye+We.width,te=Ja(Db(i)),ie=te.innerHeight-I,ge=te.innerWidth-I;if(I!==null&&ke<I){const be=ke-I;ke-=be,Je.vertical+=be}else if(I!==null&&oe>ie){const be=oe-ie;ke-=be,Je.vertical+=be}if(I!==null&&ye<I){const be=ye-I;ye-=be,Je.horizontal+=be}else if(ct>ge){const be=ct-ge;ye-=be,Je.horizontal+=be}return{top:`${Math.round(ke)}px`,left:`${Math.round(ye)}px`,transformOrigin:w5(Je)}},[i,l,Y,x,I]),[L,M]=F.useState(C),K=F.useCallback(()=>{const Ge=G.current;if(!Ge)return;const We=D(Ge);We.top!==null&&Ge.style.setProperty("top",We.top),We.left!==null&&(Ge.style.left=We.left),Ge.style.transformOrigin=We.transformOrigin,M(!0)},[D]);F.useEffect(()=>(B&&window.addEventListener("scroll",K),()=>window.removeEventListener("scroll",K)),[i,B,K]);const E=(Ge,We)=>{v&&v(Ge,We),K()},O=()=>{M(!1)};F.useEffect(()=>{C&&K()}),F.useImperativeHandle(o,()=>C?{updatePosition:()=>{K()}}:null,[C,K]),F.useEffect(()=>{if(!C)return;const Ge=rG(()=>{K()}),We=Ja(i);return We.addEventListener("resize",Ge),()=>{Ge.clear(),We.removeEventListener("resize",Ge)}},[i,C,K]);let re=Z;Z==="auto"&&!p.muiSupportAuto&&(re=void 0);const H=g||(i?oi(Db(i)).body:void 0),z={slots:f,slotProps:{...A,paper:W}},[j,$]=vi("paper",{elementType:BX,externalForwardedProps:z,additionalProps:{elevation:d,className:nt(X.paper,W==null?void 0:W.className),style:L?W.style:{...W.style,opacity:0}},ownerState:R}),[ee,{slotProps:le,...Ie}]=vi("root",{elementType:uT,externalForwardedProps:z,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:H,open:C},ownerState:R,className:nt(X.root,u)}),Ae=xr(G,$.ref);return w.jsx(ee,{...Ie,...!M2(ee)&&{slotProps:le,disableScrollLock:B},...y,ref:n,children:w.jsx(p,{appear:!0,in:C,onEntering:E,onExited:O,timeout:re,...k,children:w.jsx(j,{...$,ref:Ae,children:c})})})});function AT(e){return Jt("MuiMenu",e)}Vt("MuiMenu",["root","paper","list"]);const hT={vertical:"top",horizontal:"right"},mT={vertical:"top",horizontal:"left"},pT=e=>{const{classes:t}=e;return Yt({root:["root"],paper:["paper"],list:["list"]},AT,t)},fT=Pe(CT,{shouldForwardProp:e=>Mo(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),bT=Pe(BX,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),yT=Pe(cT,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),ip=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiMenu"}),{autoFocus:o=!0,children:i,className:a,disableAutoFocusItem:s=!1,MenuListProps:l={},onClose:c,open:u,PaperProps:g={},PopoverClasses:d,transitionDuration:I="auto",TransitionProps:{onEntering:C,...h}={},variant:f="selectedMenu",slots:A={},slotProps:m={},...p}=r,Z=nX(),v={...r,autoFocus:o,disableAutoFocusItem:s,MenuListProps:l,onEntering:C,PaperProps:g,transitionDuration:I,TransitionProps:h,variant:f},k=pT(v),B=o&&!s&&u,y=F.useRef(null),W=(L,M)=>{y.current&&y.current.adjustStyleForScrollbar(L,{direction:Z?"rtl":"ltr"}),C&&C(L,M)},G=L=>{L.key==="Tab"&&(L.preventDefault(),c&&c(L,"tabKeyDown"))};let R=-1;F.Children.map(i,(L,M)=>{F.isValidElement(L)&&(L.props.disabled||(f==="selectedMenu"&&L.props.selected||R===-1)&&(R=M))});const X=A.paper??bT,Y=m.paper??g,x=N2({elementType:A.root,externalSlotProps:m.root,ownerState:v,className:[k.root,a]}),D=N2({elementType:X,externalSlotProps:Y,ownerState:v,className:k.paper});return w.jsx(fT,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:Z?"right":"left"},transformOrigin:Z?hT:mT,slots:{paper:X,root:A.root},slotProps:{root:x,paper:D},open:u,ref:n,transitionDuration:I,TransitionProps:{onEntering:W,...h},ownerState:v,...p,classes:d,children:w.jsx(yT,{onKeyDown:G,actions:y,autoFocus:o&&(R===-1||s),autoFocusItem:B,variant:f,...l,className:nt(k.list,l.className),children:i})})});function ZT(e){return Jt("MuiMenuItem",e)}const yu=Vt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),vT=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},GT=e=>{const{disabled:t,dense:n,divider:r,disableGutters:o,selected:i,classes:a}=e,l=Yt({root:["root",n&&"dense",t&&"disabled",!o&&"gutters",r&&"divider",i&&"selected"]},ZT,a);return{...a,...l}},ST=Pe(Id,{shouldForwardProp:e=>Mo(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:vT})(Pt(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${yu.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:sn(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${yu.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:sn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${yu.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:sn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:sn(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${yu.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${yu.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${m5.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${m5.inset}`]:{marginLeft:52},[`& .${GI.root}`]:{marginTop:0,marginBottom:0},[`& .${GI.inset}`]:{paddingLeft:36},[`& .${v5.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${v5.root} svg`]:{fontSize:"1.25rem"}}}]}))),is=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiMenuItem"}),{autoFocus:o=!1,component:i="li",dense:a=!1,divider:s=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:g,className:d,...I}=r,C=F.useContext(op),h=F.useMemo(()=>({dense:a||C.dense||!1,disableGutters:l}),[C.dense,a,l]),f=F.useRef(null);Ps(()=>{o&&f.current&&f.current.focus()},[o]);const A={...r,dense:h.dense,divider:s,disableGutters:l},m=GT(r),p=xr(f,n);let Z;return r.disabled||(Z=g!==void 0?g:-1),w.jsx(op.Provider,{value:h,children:w.jsx(ST,{ref:p,role:u,tabIndex:Z,component:i,focusVisibleClassName:nt(m.focusVisible,c),className:nt(m.root,d),...I,ownerState:A,classes:m})})});function BT(e){return Jt("MuiNativeSelect",e)}const BG=Vt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),wT=e=>{const{classes:t,variant:n,disabled:r,multiple:o,open:i,error:a}=e,s={select:["select",n,r&&"disabled",o&&"multiple",a&&"error"],icon:["icon",`icon${Te(n)}`,i&&"iconOpen",r&&"disabled"]};return Yt(s,BT,t)},wX=Pe("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${BG.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),WT=Pe(wX,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Mo,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${BG.multiple}`]:t.multiple}]}})({}),WX=Pe("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${BG.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),RT=Pe(WX,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Te(n.variant)}`],n.open&&t.iconOpen]}})({}),kT=F.forwardRef(function(t,n){const{className:r,disabled:o,error:i,IconComponent:a,inputRef:s,variant:l="standard",...c}=t,u={...t,disabled:o,variant:l,error:i},g=wT(u);return w.jsxs(F.Fragment,{children:[w.jsx(WT,{ownerState:u,className:nt(g.select,r),disabled:o,ref:s||n,...c}),t.multiple?null:w.jsx(RT,{as:a,ownerState:u,className:g.icon})]})});var W5;const VT=Pe("fieldset",{shouldForwardProp:Mo})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),XT=Pe("legend",{shouldForwardProp:Mo})(Pt(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function JT(e){const{children:t,classes:n,className:r,label:o,notched:i,...a}=e,s=o!=null&&o!=="",l={...e,notched:i,withLabel:s};return w.jsx(VT,{"aria-hidden":!0,className:r,ownerState:l,...a,children:w.jsx(XT,{ownerState:l,children:s?w.jsx("span",{children:o}):W5||(W5=w.jsx("span",{className:"notranslate",children:"​"}))})})}const xT=e=>{const{classes:t}=e,r=Yt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},h4,t);return{...t,...r}},YT=Pe(Nf,{shouldForwardProp:e=>Mo(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:xf})(Pt(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Ua.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ua.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Ua.focused} .${Ua.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(lo()).map(([n])=>({props:{color:n},style:{[`&.${Ua.focused} .${Ua.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}})),{props:{},style:{[`&.${Ua.error} .${Ua.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Ua.disabled} .${Ua.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),NT=Pe(JT,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(Pt(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),HT=Pe(Hf,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Yf})(Pt(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),ap=F.forwardRef(function(t,n){var r;const o=Ht({props:t,name:"MuiOutlinedInput"}),{components:i={},fullWidth:a=!1,inputComponent:s="input",label:l,multiline:c=!1,notched:u,slots:g={},type:d="text",...I}=o,C=xT(o),h=Ig(),f=fc({props:o,muiFormControl:h,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),A={...o,color:f.color||"primary",disabled:f.disabled,error:f.error,focused:f.focused,formControl:h,fullWidth:a,hiddenLabel:f.hiddenLabel,multiline:c,size:f.size,type:d},m=g.root??i.Root??YT,p=g.input??i.Input??HT;return w.jsx(yG,{slots:{root:m,input:p},renderSuffix:Z=>w.jsx(NT,{ownerState:A,className:C.notchedOutline,label:l!=null&&l!==""&&f.required?r||(r=w.jsxs(F.Fragment,{children:[l," ","*"]})):l,notched:typeof u<"u"?u:!!(Z.startAdornment||Z.filled||Z.focused)}),fullWidth:a,inputComponent:s,multiline:c,ref:n,type:d,...I,classes:{...C,notchedOutline:null}})});ap&&(ap.muiName="Input");function FT(e){return Jt("MuiSelect",e)}const Zu=Vt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var R5;const KT=Pe(wX,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Zu.select}`]:t.select},{[`&.${Zu.select}`]:t[n.variant]},{[`&.${Zu.error}`]:t.error},{[`&.${Zu.multiple}`]:t.multiple}]}})({[`&.${Zu.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),LT=Pe(WX,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Te(n.variant)}`],n.open&&t.iconOpen]}})({}),ET=Pe("input",{shouldForwardProp:e=>dX(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function k5(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function MT(e){return e==null||typeof e=="string"&&!e.trim()}const DT=e=>{const{classes:t,variant:n,disabled:r,multiple:o,open:i,error:a}=e,s={select:["select",n,r&&"disabled",o&&"multiple",a&&"error"],icon:["icon",`icon${Te(n)}`,i&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Yt(s,FT,t)},zT=F.forwardRef(function(t,n){var Rt;const{"aria-describedby":r,"aria-label":o,autoFocus:i,autoWidth:a,children:s,className:l,defaultOpen:c,defaultValue:u,disabled:g,displayEmpty:d,error:I=!1,IconComponent:C,inputRef:h,labelId:f,MenuProps:A={},multiple:m,name:p,onBlur:Z,onChange:v,onClose:k,onFocus:B,onOpen:y,open:W,readOnly:G,renderValue:R,SelectDisplayProps:X={},tabIndex:Y,type:x,value:D,variant:L="standard",...M}=t,[K,E]=Y2({controlled:D,default:u,name:"Select"}),[O,re]=Y2({controlled:W,default:c,name:"Select"}),H=F.useRef(null),z=F.useRef(null),[j,$]=F.useState(null),{current:ee}=F.useRef(W!=null),[le,Ie]=F.useState(),Ae=xr(n,h),Ge=F.useCallback(mt=>{z.current=mt,mt&&$(mt)},[]),We=j==null?void 0:j.parentNode;F.useImperativeHandle(Ae,()=>({focus:()=>{z.current.focus()},node:H.current,value:K}),[K]),F.useEffect(()=>{c&&O&&j&&!ee&&(Ie(a?null:We.clientWidth),z.current.focus())},[j,a]),F.useEffect(()=>{i&&z.current.focus()},[i]),F.useEffect(()=>{if(!f)return;const mt=oi(z.current).getElementById(f);if(mt){const pt=()=>{getSelection().isCollapsed&&z.current.focus()};return mt.addEventListener("click",pt),()=>{mt.removeEventListener("click",pt)}}},[f]);const Je=(mt,pt)=>{mt?y&&y(pt):k&&k(pt),ee||(Ie(a?null:We.clientWidth),re(mt))},ze=mt=>{mt.button===0&&(mt.preventDefault(),z.current.focus(),Je(!0,mt))},ke=mt=>{Je(!1,mt)},ye=F.Children.toArray(s),oe=mt=>{const pt=ye.find(Nt=>Nt.props.value===mt.target.value);pt!==void 0&&(E(pt.props.value),v&&v(mt,pt))},ct=mt=>pt=>{let Nt;if(pt.currentTarget.hasAttribute("tabindex")){if(m){Nt=Array.isArray(K)?K.slice():[];const er=K.indexOf(mt.props.value);er===-1?Nt.push(mt.props.value):Nt.splice(er,1)}else Nt=mt.props.value;if(mt.props.onClick&&mt.props.onClick(pt),K!==Nt&&(E(Nt),v)){const er=pt.nativeEvent||pt,Ot=new er.constructor(er.type,er);Object.defineProperty(Ot,"target",{writable:!0,value:{value:Nt,name:p}}),v(Ot,mt)}m||Je(!1,pt)}},te=mt=>{G||[" ","ArrowUp","ArrowDown","Enter"].includes(mt.key)&&(mt.preventDefault(),Je(!0,mt))},ie=j!==null&&O,ge=mt=>{!ie&&Z&&(Object.defineProperty(mt,"target",{writable:!0,value:{value:K,name:p}}),Z(mt))};delete M["aria-invalid"];let be,Ze;const he=[];let Ne=!1;(_m({value:K})||d)&&(R?be=R(K):Ne=!0);const rt=ye.map(mt=>{if(!F.isValidElement(mt))return null;let pt;if(m){if(!Array.isArray(K))throw new Error(Qs(2));pt=K.some(Nt=>k5(Nt,mt.props.value)),pt&&Ne&&he.push(mt.props.children)}else pt=k5(K,mt.props.value),pt&&Ne&&(Ze=mt.props.children);return F.cloneElement(mt,{"aria-selected":pt?"true":"false",onClick:ct(mt),onKeyUp:Nt=>{Nt.key===" "&&Nt.preventDefault(),mt.props.onKeyUp&&mt.props.onKeyUp(Nt)},role:"option",selected:pt,value:void 0,"data-value":mt.props.value})});Ne&&(m?he.length===0?be=null:be=he.reduce((mt,pt,Nt)=>(mt.push(pt),Nt<he.length-1&&mt.push(", "),mt),[]):be=Ze);let st=le;!a&&ee&&j&&(st=We.clientWidth);let $e;typeof Y<"u"?$e=Y:$e=g?null:0;const ht=X.id||(p?`mui-component-select-${p}`:void 0),dt={...t,variant:L,value:K,open:ie,error:I},Zt=DT(dt),Ke={...A.PaperProps,...(Rt=A.slotProps)==null?void 0:Rt.paper},mn=oG();return w.jsxs(F.Fragment,{children:[w.jsx(KT,{as:"div",ref:Ge,tabIndex:$e,role:"combobox","aria-controls":mn,"aria-disabled":g?"true":void 0,"aria-expanded":ie?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[f,ht].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:te,onMouseDown:g||G?null:ze,onBlur:ge,onFocus:B,...X,ownerState:dt,className:nt(X.className,Zt.select,l),id:ht,children:MT(be)?R5||(R5=w.jsx("span",{className:"notranslate",children:"​"})):be}),w.jsx(ET,{"aria-invalid":I,value:Array.isArray(K)?K.join(","):K,name:p,ref:H,"aria-hidden":!0,onChange:oe,tabIndex:-1,disabled:g,className:Zt.nativeInput,autoFocus:i,...M,ownerState:dt}),w.jsx(LT,{as:C,className:Zt.icon,ownerState:dt}),w.jsx(ip,{id:`menu-${p||""}`,anchorEl:We,open:ie,onClose:ke,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...A,MenuListProps:{"aria-labelledby":f,role:"listbox","aria-multiselectable":m?"true":void 0,disableListWrap:!0,id:mn,...A.MenuListProps},slotProps:{...A.slotProps,paper:{...Ke,style:{minWidth:st,...Ke!=null?Ke.style:null}}},children:rt})]})}),TT=e=>{const{classes:t}=e;return t},wG={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Mo(e)&&e!=="variant",slot:"Root"},UT=Pe(np,wG)(""),jT=Pe(ap,wG)(""),QT=Pe($m,wG)(""),gA=F.forwardRef(function(t,n){const r=IG({name:"MuiSelect",props:t}),{autoWidth:o=!1,children:i,classes:a={},className:s,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=p4,id:g,input:d,inputProps:I,label:C,labelId:h,MenuProps:f,multiple:A=!1,native:m=!1,onClose:p,onOpen:Z,open:v,renderValue:k,SelectDisplayProps:B,variant:y="outlined",...W}=r,G=m?kT:zT,R=Ig(),X=fc({props:r,muiFormControl:R,states:["variant","error"]}),Y=X.variant||y,x={...r,variant:Y,classes:a},D=TT(x),{root:L,...M}=D,K=d||{standard:w.jsx(UT,{ownerState:x}),outlined:w.jsx(jT,{label:C,ownerState:x}),filled:w.jsx(QT,{ownerState:x})}[Y],E=xr(n,pc(K));return w.jsx(F.Fragment,{children:F.cloneElement(K,{inputComponent:G,inputProps:{children:i,error:X.error,IconComponent:u,variant:Y,type:void 0,multiple:A,...m?{id:g}:{autoWidth:o,defaultOpen:l,displayEmpty:c,labelId:h,MenuProps:f,onClose:p,onOpen:Z,open:v,renderValue:k,SelectDisplayProps:{id:g,...B}},...I,classes:I?So(M,I.classes):M,...d?d.props.inputProps:{}},...(A&&m||c)&&Y==="outlined"?{notched:!0}:{},ref:E,className:nt(K.props.className,s,D.root),...!d&&{variant:Y},...W})})});gA.muiName="Select";function PT(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:r,open:o,resumeHideDuration:i}=e,a=aG();F.useEffect(()=>{if(!o)return;function A(m){m.defaultPrevented||m.key==="Escape"&&(r==null||r(m,"escapeKeyDown"))}return document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}},[o,r]);const s=Ks((A,m)=>{r==null||r(A,m)}),l=Ks(A=>{!r||A==null||a.start(A,()=>{s(null,"timeout")})});F.useEffect(()=>(o&&l(t),a.clear),[o,t,l,a]);const c=A=>{r==null||r(A,"clickaway")},u=a.clear,g=F.useCallback(()=>{t!=null&&l(i??t*.5)},[t,i,l]),d=A=>m=>{const p=A.onBlur;p==null||p(m),g()},I=A=>m=>{const p=A.onFocus;p==null||p(m),u()},C=A=>m=>{const p=A.onMouseEnter;p==null||p(m),u()},h=A=>m=>{const p=A.onMouseLeave;p==null||p(m),g()};return F.useEffect(()=>{if(!n&&o)return window.addEventListener("focus",g),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",g),window.removeEventListener("blur",u)}},[n,o,g,u]),{getRootProps:(A={})=>{const m={...Qm(e),...Qm(A)};return{role:"presentation",...A,...m,onBlur:d(m),onFocus:I(m),onMouseEnter:C(m),onMouseLeave:h(m)}},onClickAway:c}}function OT(e){return Jt("MuiSnackbarContent",e)}Vt("MuiSnackbarContent",["root","message","action"]);const _T=e=>{const{classes:t}=e;return Yt({root:["root"],action:["action"],message:["message"]},OT,t)},qT=Pe(xa,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(Pt(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,n=QV(e.palette.background.default,t);return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(n),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),$T=Pe("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),eU=Pe("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),tU=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiSnackbarContent"}),{action:o,className:i,message:a,role:s="alert",...l}=r,c=r,u=_T(c);return w.jsxs(qT,{role:s,square:!0,elevation:6,className:nt(u.root,i),ownerState:c,ref:n,...l,children:[w.jsx($T,{className:u.message,ownerState:c,children:a}),o?w.jsx(eU,{className:u.action,ownerState:c,children:o}):null]})});function nU(e){return Jt("MuiSnackbar",e)}Vt("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const rU=e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${Te(n.vertical)}${Te(n.horizontal)}`]};return Yt(r,nU,t)},V5=Pe("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${Te(n.anchorOrigin.vertical)}${Te(n.anchorOrigin.horizontal)}`]]}})(Pt(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),oU=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiSnackbar"}),o=As(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{action:a,anchorOrigin:{vertical:s,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:g,ClickAwayListenerProps:d,ContentProps:I,disableWindowBlurListener:C=!1,message:h,onBlur:f,onClose:A,onFocus:m,onMouseEnter:p,onMouseLeave:Z,open:v,resumeHideDuration:k,TransitionComponent:B=tp,transitionDuration:y=i,TransitionProps:{onEnter:W,onExited:G,...R}={},...X}=r,Y={...r,anchorOrigin:{vertical:s,horizontal:l},autoHideDuration:c,disableWindowBlurListener:C,TransitionComponent:B,transitionDuration:y},x=rU(Y),{getRootProps:D,onClickAway:L}=PT({...Y}),[M,K]=F.useState(!0),E=N2({elementType:V5,getSlotProps:D,externalForwardedProps:X,ownerState:Y,additionalProps:{ref:n},className:[x.root,g]}),O=H=>{K(!0),G&&G(H)},re=(H,z)=>{K(!1),W&&W(H,z)};return!v&&M?null:w.jsx(bD,{onClickAway:L,...d,children:w.jsx(V5,{...E,children:w.jsx(B,{appear:!0,in:v,timeout:y,direction:s==="top"?"down":"up",onEnter:re,onExited:O,...R,children:u||w.jsx(tU,{message:h,action:a,...I})})})})}),RX=F.createContext();function iU(e){return Jt("MuiTable",e)}Vt("MuiTable",["root","stickyHeader"]);const aU=e=>{const{classes:t,stickyHeader:n}=e;return Yt({root:["root",n&&"stickyHeader"]},iU,t)},sU=Pe("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(Pt(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:t})=>t.stickyHeader,style:{borderCollapse:"separate"}}]}))),X5="table",WG=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiTable"}),{className:o,component:i=X5,padding:a="normal",size:s="medium",stickyHeader:l=!1,...c}=r,u={...r,component:i,padding:a,size:s,stickyHeader:l},g=aU(u),d=F.useMemo(()=>({padding:a,size:s,stickyHeader:l}),[a,s,l]);return w.jsx(RX.Provider,{value:d,children:w.jsx(sU,{as:i,role:i===X5?null:"table",ref:n,className:nt(g.root,o),ownerState:u,...c})})}),Ff=F.createContext();function lU(e){return Jt("MuiTableBody",e)}Vt("MuiTableBody",["root"]);const gU=e=>{const{classes:t}=e;return Yt({root:["root"]},lU,t)},cU=Pe("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),IU={variant:"body"},J5="tbody",RG=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiTableBody"}),{className:o,component:i=J5,...a}=r,s={...r,component:i},l=gU(s);return w.jsx(Ff.Provider,{value:IU,children:w.jsx(cU,{className:nt(l.root,o),as:i,ref:n,role:i===J5?null:"rowgroup",ownerState:s,...a})})});function dU(e){return Jt("MuiTableCell",e)}const uU=Vt("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),CU=e=>{const{classes:t,variant:n,align:r,padding:o,size:i,stickyHeader:a}=e,s={root:["root",n,a&&"stickyHeader",r!=="inherit"&&`align${Te(r)}`,o!=="normal"&&`padding${Te(o)}`,`size${Te(i)}`]};return Yt(s,dU,t)},AU=Pe("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Te(n.size)}`],n.padding!=="normal"&&t[`padding${Te(n.padding)}`],n.align!=="inherit"&&t[`align${Te(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(Pt(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?bf(sn(e.palette.divider,1),.88):ff(sn(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${uU.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:t})=>t.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),ur=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiTableCell"}),{align:o="inherit",className:i,component:a,padding:s,scope:l,size:c,sortDirection:u,variant:g,...d}=r,I=F.useContext(RX),C=F.useContext(Ff),h=C&&C.variant==="head";let f;a?f=a:f=h?"th":"td";let A=l;f==="td"?A=void 0:!A&&h&&(A="col");const m=g||C&&C.variant,p={...r,align:o,component:f,padding:s||(I&&I.padding?I.padding:"normal"),size:c||(I&&I.size?I.size:"medium"),sortDirection:u,stickyHeader:m==="head"&&I&&I.stickyHeader,variant:m},Z=CU(p);let v=null;return u&&(v=u==="asc"?"ascending":"descending"),w.jsx(AU,{as:f,ref:n,className:nt(Z.root,i),"aria-sort":v,scope:A,ownerState:p,...d})});function hU(e){return Jt("MuiTableContainer",e)}Vt("MuiTableContainer",["root"]);const mU=e=>{const{classes:t}=e;return Yt({root:["root"]},hU,t)},pU=Pe("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),kX=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiTableContainer"}),{className:o,component:i="div",...a}=r,s={...r,component:i},l=mU(s);return w.jsx(pU,{ref:n,as:i,className:nt(l.root,o),ownerState:s,...a})});function fU(e){return Jt("MuiTableHead",e)}Vt("MuiTableHead",["root"]);const bU=e=>{const{classes:t}=e;return Yt({root:["root"]},fU,t)},yU=Pe("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),ZU={variant:"head"},x5="thead",kG=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiTableHead"}),{className:o,component:i=x5,...a}=r,s={...r,component:i},l=bU(s);return w.jsx(Ff.Provider,{value:ZU,children:w.jsx(yU,{as:i,className:nt(l.root,o),ref:n,role:i===x5?null:"rowgroup",ownerState:s,...a})})});function vU(e){return Jt("MuiToolbar",e)}Vt("MuiToolbar",["root","gutters","regular","dense"]);const GU=e=>{const{classes:t,disableGutters:n,variant:r}=e;return Yt({root:["root",!n&&"gutters",r]},vU,t)},SU=Pe("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(Pt(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),BU=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiToolbar"}),{className:o,component:i="div",disableGutters:a=!1,variant:s="regular",...l}=r,c={...r,component:i,disableGutters:a,variant:s},u=GU(c);return w.jsx(SU,{as:i,className:nt(u.root,o),ref:n,ownerState:c,...l})});function wU(e){return Jt("MuiTableRow",e)}const Y5=Vt("MuiTableRow",["root","selected","hover","head","footer"]),WU=e=>{const{classes:t,selected:n,hover:r,head:o,footer:i}=e;return Yt({root:["root",n&&"selected",r&&"hover",o&&"head",i&&"footer"]},wU,t)},RU=Pe("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(Pt(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${Y5.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Y5.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:sn(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:sn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}}))),N5="tr",_g=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiTableRow"}),{className:o,component:i=N5,hover:a=!1,selected:s=!1,...l}=r,c=F.useContext(Ff),u={...r,component:i,hover:a,selected:s,head:c&&c.variant==="head",footer:c&&c.variant==="footer"},g=WU(u);return w.jsx(RU,{as:i,ref:n,className:nt(g.root,o),role:i===N5?null:"row",ownerState:u,...l})});function kU(e){return Jt("MuiTextField",e)}Vt("MuiTextField",["root"]);const VU={standard:np,filled:$m,outlined:ap},XU=e=>{const{classes:t}=e;return Yt({root:["root"]},kU,t)},JU=Pe(ep,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Vr=F.forwardRef(function(t,n){const r=Ht({props:t,name:"MuiTextField"}),{autoComplete:o,autoFocus:i=!1,children:a,className:s,color:l="primary",defaultValue:c,disabled:u=!1,error:g=!1,FormHelperTextProps:d,fullWidth:I=!1,helperText:C,id:h,InputLabelProps:f,inputProps:A,InputProps:m,inputRef:p,label:Z,maxRows:v,minRows:k,multiline:B=!1,name:y,onBlur:W,onChange:G,onFocus:R,placeholder:X,required:Y=!1,rows:x,select:D=!1,SelectProps:L,slots:M={},slotProps:K={},type:E,value:O,variant:re="outlined",...H}=r,z={...r,autoFocus:i,color:l,disabled:u,error:g,fullWidth:I,multiline:B,required:Y,select:D,variant:re},j=XU(z),$=oG(h),ee=C&&$?`${$}-helper-text`:void 0,le=Z&&$?`${$}-label`:void 0,Ie=VU[re],Ae={slots:M,slotProps:{input:m,inputLabel:f,htmlInput:A,formHelperText:d,select:L,...K}},Ge={},We=Ae.slotProps.inputLabel;re==="outlined"&&(We&&typeof We.shrink<"u"&&(Ge.notched=We.shrink),Ge.label=Z),D&&((!L||!L.native)&&(Ge.id=void 0),Ge["aria-describedby"]=void 0);const[Je,ze]=vi("input",{elementType:Ie,externalForwardedProps:Ae,additionalProps:Ge,ownerState:z}),[ke,ye]=vi("inputLabel",{elementType:rp,externalForwardedProps:Ae,ownerState:z}),[oe,ct]=vi("htmlInput",{elementType:"input",externalForwardedProps:Ae,ownerState:z}),[te,ie]=vi("formHelperText",{elementType:wz,externalForwardedProps:Ae,ownerState:z}),[ge,be]=vi("select",{elementType:gA,externalForwardedProps:Ae,ownerState:z}),Ze=w.jsx(Je,{"aria-describedby":ee,autoComplete:o,autoFocus:i,defaultValue:c,fullWidth:I,multiline:B,name:y,rows:x,maxRows:v,minRows:k,type:E,value:O,id:$,inputRef:p,onBlur:W,onChange:G,onFocus:R,placeholder:X,inputProps:ct,slots:{input:M.htmlInput?oe:void 0},...ze});return w.jsxs(JU,{className:nt(j.root,s),disabled:u,error:g,fullWidth:I,ref:n,required:Y,color:l,variant:re,ownerState:z,...H,children:[Z!=null&&Z!==""&&w.jsx(ke,{htmlFor:$,id:le,...ye,children:Z}),D?w.jsx(ge,{"aria-describedby":ee,id:$,labelId:le,value:O,input:Ze,...be,children:a}):Ze,C&&w.jsx(te,{id:ee,...ie,children:C})]})}),xU=Jn(w.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),H5=Jn(w.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),YU=Jn(w.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle");class Mu extends Error{}Mu.prototype.name="InvalidTokenError";function NU(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function HU(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return NU(t)}catch{return atob(t)}}function FU(e,t){if(typeof e!="string")throw new Mu("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new Mu(`Invalid token specified: missing part #${n+1}`);let o;try{o=HU(r)}catch(i){throw new Mu(`Invalid token specified: invalid base64 for part #${n+1} (${i.message})`)}try{return JSON.parse(o)}catch(i){throw new Mu(`Invalid token specified: invalid json for part #${n+1} (${i.message})`)}}const VX=F.createContext(),KU=({children:e})=>{const[t,n]=F.useState(localStorage.getItem("token")),r=a=>{n(a),localStorage.setItem("token",a)},o=()=>{n(null),localStorage.removeItem("token")},i=()=>{console.log(t);const{_id:a,name:s,email:l,accessToken:c,role:u,service:g}=FU(t);return{_id:a,name:s,email:l,accessToken:c,role:u,service:g}};return w.jsx(VX.Provider,{value:{authToken:t,login:r,logout:o,getCurrentUser:i},children:e})},gi=()=>F.useContext(VX);function An(e){"@babel/helpers - typeof";return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(e)}function LU(e,t){if(An(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(An(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EU(e){var t=LU(e,"string");return An(t)=="symbol"?t:t+""}function MU(e,t,n){return(t=EU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DU(e){if(Array.isArray(e))return e}function zU(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}function F5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function TU(e,t){if(e){if(typeof e=="string")return F5(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F5(e,t):void 0}}function UU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jU(e,t){return DU(e)||zU(e,t)||TU(e,t)||UU()}function QU(e,t){if(e==null)return{};var n,r,o=Jf(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var XX={exports:{}},Yn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $r=typeof Symbol=="function"&&Symbol.for,VG=$r?Symbol.for("react.element"):60103,XG=$r?Symbol.for("react.portal"):60106,Kf=$r?Symbol.for("react.fragment"):60107,Lf=$r?Symbol.for("react.strict_mode"):60108,Ef=$r?Symbol.for("react.profiler"):60114,Mf=$r?Symbol.for("react.provider"):60109,Df=$r?Symbol.for("react.context"):60110,JG=$r?Symbol.for("react.async_mode"):60111,zf=$r?Symbol.for("react.concurrent_mode"):60111,Tf=$r?Symbol.for("react.forward_ref"):60112,Uf=$r?Symbol.for("react.suspense"):60113,PU=$r?Symbol.for("react.suspense_list"):60120,jf=$r?Symbol.for("react.memo"):60115,Qf=$r?Symbol.for("react.lazy"):60116,OU=$r?Symbol.for("react.block"):60121,_U=$r?Symbol.for("react.fundamental"):60117,qU=$r?Symbol.for("react.responder"):60118,$U=$r?Symbol.for("react.scope"):60119;function Yi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case VG:switch(e=e.type,e){case JG:case zf:case Kf:case Ef:case Lf:case Uf:return e;default:switch(e=e&&e.$$typeof,e){case Df:case Tf:case Qf:case jf:case Mf:return e;default:return t}}case XG:return t}}}function JX(e){return Yi(e)===zf}Yn.AsyncMode=JG;Yn.ConcurrentMode=zf;Yn.ContextConsumer=Df;Yn.ContextProvider=Mf;Yn.Element=VG;Yn.ForwardRef=Tf;Yn.Fragment=Kf;Yn.Lazy=Qf;Yn.Memo=jf;Yn.Portal=XG;Yn.Profiler=Ef;Yn.StrictMode=Lf;Yn.Suspense=Uf;Yn.isAsyncMode=function(e){return JX(e)||Yi(e)===JG};Yn.isConcurrentMode=JX;Yn.isContextConsumer=function(e){return Yi(e)===Df};Yn.isContextProvider=function(e){return Yi(e)===Mf};Yn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===VG};Yn.isForwardRef=function(e){return Yi(e)===Tf};Yn.isFragment=function(e){return Yi(e)===Kf};Yn.isLazy=function(e){return Yi(e)===Qf};Yn.isMemo=function(e){return Yi(e)===jf};Yn.isPortal=function(e){return Yi(e)===XG};Yn.isProfiler=function(e){return Yi(e)===Ef};Yn.isStrictMode=function(e){return Yi(e)===Lf};Yn.isSuspense=function(e){return Yi(e)===Uf};Yn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Kf||e===zf||e===Ef||e===Lf||e===Uf||e===PU||typeof e=="object"&&e!==null&&(e.$$typeof===Qf||e.$$typeof===jf||e.$$typeof===Mf||e.$$typeof===Df||e.$$typeof===Tf||e.$$typeof===_U||e.$$typeof===qU||e.$$typeof===$U||e.$$typeof===OU)};Yn.typeOf=Yi;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var K5=Object.getOwnPropertySymbols,ej=Object.prototype.hasOwnProperty,tj=Object.prototype.propertyIsEnumerable;function nj(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function rj(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(r.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(i){o[i]=i}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}rj();var oj="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ij=oj;Function.call.bind(Object.prototype.hasOwnProperty);var aj=ij;function xX(){}function YX(){}YX.resetWarningCache=xX;var sj=function(){function e(r,o,i,a,s,l){if(l!==aj){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:YX,resetWarningCache:xX};return n.PropTypes=n,n};XX.exports=sj();var rI=XX.exports;function lj(e,t){var n=atob(e);return n}function gj(e,t,n){var r=lj(e),o=r.indexOf(`
`,10)+1,i=r.substring(o)+"",a=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(a)}function cj(e,t,n){var r;return function(i){return r=r||gj(e),new Worker(r,i)}}var Ij=cj("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg=="),dj=["constraints","onError","onLoad","onScan","resolution","qrArea"];function L5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function E5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L5(Object(n),!0).forEach(function(r){MU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var uj=function(){return new Ij},M5=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().forEach(function(n){t.removeTrack(n),n.stop()}),t.getAudioTracks().forEach(function(n){t.removeTrack(n),n.stop()})):t.stop())},xG=function(t){var n=t.constraints,r=t.onError,o=t.onLoad,i=t.onScan,a=t.resolution,s=t.qrArea,l=QU(t,dj),c=F.useRef(null),u=F.useRef(null),g=F.useRef(document.createElement("canvas")),d=F.useRef(null),I=F.useRef(),C=F.useState(null),h=jU(C,2),f=h[0],A=h[1],m=F.useRef(!1),p=F.useRef();F.useEffect(function(){p.current=uj();var B=p.current;return B.onmessage=function(y){i&&i(y.data?E5(E5({},y.data),{},{canvas:g.current}):null),m.current=!1},function(){B.terminate()}},[i]);var Z=JSON.stringify(s),v=F.useCallback(function(){var B=JSON.parse(Z),y=p.current,W=u.current&&u.current.readyState===u.current.HAVE_ENOUGH_DATA;if(!m.current&&W){m.current=!0;var G=u.current.videoWidth,R=u.current.videoHeight,X=G>R?G:R,Y=Math.floor(a/X*100)/100;R=Math.floor(Y*R),G=Math.floor(Y*G),g.current.width=G,g.current.height=R,d.current=g.current.getContext("2d"),d.current.drawImage(u.current,0,0,G,R);var x;B&&B.length===2&&B[0]>0&&B[1]>0?x=d.current.getImageData(Math.floor((G-B[0])/2),Math.floor((R-B[1])/2),B[0],B[1]):x=d.current.getImageData(0,0,G,R),y.postMessage(x)}I.current=requestAnimationFrame(v)},[a,Z]),k=JSON.stringify(n);return F.useEffect(function(){var B=JSON.parse(k),y=!0;return navigator.mediaDevices.getUserMedia(B).then(function(W){if(!y)M5(W);else{c.current=W;try{u.current&&(u.current.srcObject=W,u.current.setAttribute("playsinline",!0))}catch{A(window.URL.createObjectURL(W))}o&&o(),I.current=requestAnimationFrame(v)}}).catch(function(W){return y?r(W):null}),function(){cancelAnimationFrame(I.current),y=!1,M5(c.current),f&&window.URL.revokeObjectURL(f)}},[v,k,r,o,f]),F.createElement("video",sd({autoPlay:!0,playsInline:!0,src:f,ref:u},l))};xG.propTypes={constraints:rI.object,onError:rI.func.isRequired,onLoad:rI.func,onScan:rI.func.isRequired,resolution:rI.number,qrArea:rI.array};xG.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};var cA=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ud=typeof window>"u"||"Deno"in globalThis;function Pi(){}function Cj(e,t){return typeof e=="function"?e(t):e}function j2(e){return typeof e=="number"&&e>=0&&e!==1/0}function NX(e,t){return Math.max(e+(t||0)-Date.now(),0)}function NI(e,t){return typeof e=="function"?e(t):e}function Wa(e,t){return typeof e=="function"?e(t):e}function D5(e,t){const{type:n="all",exact:r,fetchStatus:o,predicate:i,queryKey:a,stale:s}=e;if(a){if(r){if(t.queryHash!==YG(a,t.options))return!1}else if(!KC(t.queryKey,a))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof s=="boolean"&&t.isStale()!==s||o&&o!==t.state.fetchStatus||i&&!i(t))}function z5(e,t){const{exact:n,status:r,predicate:o,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(FC(t.options.mutationKey)!==FC(i))return!1}else if(!KC(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||o&&!o(t))}function YG(e,t){return((t==null?void 0:t.queryKeyHashFn)||FC)(e)}function FC(e){return JSON.stringify(e,(t,n)=>P2(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function KC(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!KC(e[n],t[n])):!1}function HX(e,t){if(e===t)return e;const n=T5(e)&&T5(t);if(n||P2(e)&&P2(t)){const r=n?e:Object.keys(e),o=r.length,i=n?t:Object.keys(t),a=i.length,s=n?[]:{};let l=0;for(let c=0;c<a;c++){const u=n?c:i[c];(!n&&r.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(s[u]=void 0,l++):(s[u]=HX(e[u],t[u]),s[u]===e[u]&&e[u]!==void 0&&l++)}return o===a&&l===o?e:s}return t}function Q2(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function T5(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function P2(e){if(!U5(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!U5(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function U5(e){return Object.prototype.toString.call(e)==="[object Object]"}function Aj(e){return new Promise(t=>{setTimeout(t,e)})}function O2(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?HX(e,t):t}function hj(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function mj(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var FX=Symbol();function KX(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===FX?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Mg,Rl,LI,kW,pj=(kW=class extends cA{constructor(){super();Kt(this,Mg);Kt(this,Rl);Kt(this,LI);vt(this,LI,t=>{if(!ud&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){pe(this,Rl)||this.setEventListener(pe(this,LI))}onUnsubscribe(){var t;this.hasListeners()||((t=pe(this,Rl))==null||t.call(this),vt(this,Rl,void 0))}setEventListener(t){var n;vt(this,LI,t),(n=pe(this,Rl))==null||n.call(this),vt(this,Rl,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){pe(this,Mg)!==t&&(vt(this,Mg,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof pe(this,Mg)=="boolean"?pe(this,Mg):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Mg=new WeakMap,Rl=new WeakMap,LI=new WeakMap,kW),NG=new pj,EI,kl,MI,VW,fj=(VW=class extends cA{constructor(){super();Kt(this,EI,!0);Kt(this,kl);Kt(this,MI);vt(this,MI,t=>{if(!ud&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){pe(this,kl)||this.setEventListener(pe(this,MI))}onUnsubscribe(){var t;this.hasListeners()||((t=pe(this,kl))==null||t.call(this),vt(this,kl,void 0))}setEventListener(t){var n;vt(this,MI,t),(n=pe(this,kl))==null||n.call(this),vt(this,kl,t(this.setOnline.bind(this)))}setOnline(t){pe(this,EI)!==t&&(vt(this,EI,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return pe(this,EI)}},EI=new WeakMap,kl=new WeakMap,MI=new WeakMap,VW),sp=new fj;function bj(e){return Math.min(1e3*2**e,3e4)}function LX(e){return(e??"online")==="online"?sp.isOnline():!0}var EX=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function zb(e){return e instanceof EX}function MX(e){let t=!1,n=0,r=!1,o,i,a;const s=new Promise((A,m)=>{i=A,a=m}),l=A=>{var m;r||(C(new EX(A)),(m=e.abort)==null||m.call(e))},c=()=>{t=!0},u=()=>{t=!1},g=()=>NG.isFocused()&&(e.networkMode==="always"||sp.isOnline())&&e.canRun(),d=()=>LX(e.networkMode)&&e.canRun(),I=A=>{var m;r||(r=!0,(m=e.onSuccess)==null||m.call(e,A),o==null||o(),i(A))},C=A=>{var m;r||(r=!0,(m=e.onError)==null||m.call(e,A),o==null||o(),a(A))},h=()=>new Promise(A=>{var m;o=p=>{(r||g())&&A(p)},(m=e.onPause)==null||m.call(e)}).then(()=>{var A;o=void 0,r||(A=e.onContinue)==null||A.call(e)}),f=()=>{if(r)return;let A;const m=n===0?e.initialPromise:void 0;try{A=m??e.fn()}catch(p){A=Promise.reject(p)}Promise.resolve(A).then(I).catch(p=>{var y;if(r)return;const Z=e.retry??(ud?0:3),v=e.retryDelay??bj,k=typeof v=="function"?v(n,p):v,B=Z===!0||typeof Z=="number"&&n<Z||typeof Z=="function"&&Z(n,p);if(t||!B){C(p);return}n++,(y=e.onFail)==null||y.call(e,n,p),Aj(k).then(()=>g()?void 0:h()).then(()=>{t?C(p):f()})})};return{promise:s,cancel:l,continue:()=>(o==null||o(),s),cancelRetry:c,continueRetry:u,canStart:d,start:()=>(d()?f():h().then(f),s)}}function yj(){let e=[],t=0,n=s=>{s()},r=s=>{s()},o=s=>setTimeout(s,0);const i=s=>{t?e.push(s):o(()=>{n(s)})},a=()=>{const s=e;e=[],s.length&&o(()=>{r(()=>{s.forEach(l=>{n(l)})})})};return{batch:s=>{let l;t++;try{l=s()}finally{t--,t||a()}return l},batchCalls:s=>(...l)=>{i(()=>{s(...l)})},schedule:i,setNotifyFunction:s=>{n=s},setBatchNotifyFunction:s=>{r=s},setScheduler:s=>{o=s}}}var so=yj(),Dg,XW,DX=(XW=class{constructor(){Kt(this,Dg)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),j2(this.gcTime)&&vt(this,Dg,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ud?1/0:5*60*1e3))}clearGcTimeout(){pe(this,Dg)&&(clearTimeout(pe(this,Dg)),vt(this,Dg,void 0))}},Dg=new WeakMap,XW),DI,zI,Qi,Zo,QC,zg,Ga,xs,JW,Zj=(JW=class extends DX{constructor(t){super();Kt(this,Ga);Kt(this,DI);Kt(this,zI);Kt(this,Qi);Kt(this,Zo);Kt(this,QC);Kt(this,zg);vt(this,zg,!1),vt(this,QC,t.defaultOptions),this.setOptions(t.options),this.observers=[],vt(this,Qi,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,vt(this,DI,vj(this.options)),this.state=t.state??pe(this,DI),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=pe(this,Zo))==null?void 0:t.promise}setOptions(t){this.options={...pe(this,QC),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&pe(this,Qi).remove(this)}setData(t,n){const r=O2(this.state.data,t,this.options);return on(this,Ga,xs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){on(this,Ga,xs).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,o;const n=(r=pe(this,Zo))==null?void 0:r.promise;return(o=pe(this,Zo))==null||o.cancel(t),n?n.then(Pi).catch(Pi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(pe(this,DI))}isActive(){return this.observers.some(t=>Wa(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!NX(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=pe(this,Zo))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=pe(this,Zo))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),pe(this,Qi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(pe(this,Zo)&&(pe(this,zg)?pe(this,Zo).cancel({revert:!0}):pe(this,Zo).cancelRetry()),this.scheduleGc()),pe(this,Qi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||on(this,Ga,xs).call(this,{type:"invalidate"})}fetch(t,n){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(pe(this,Zo))return pe(this,Zo).continueRetry(),pe(this,Zo).promise}if(t&&this.setOptions(t),!this.options.queryFn){const g=this.observers.find(d=>d.options.queryFn);g&&this.setOptions(g.options)}const r=new AbortController,o=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(vt(this,zg,!0),r.signal)})},i=()=>{const g=KX(this.options,n),d={queryKey:this.queryKey,meta:this.meta};return o(d),vt(this,zg,!1),this.options.persister?this.options.persister(g,d,this):g(d)},a={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};o(a),(l=this.options.behavior)==null||l.onFetch(a,this),vt(this,zI,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&on(this,Ga,xs).call(this,{type:"fetch",meta:(u=a.fetchOptions)==null?void 0:u.meta});const s=g=>{var d,I,C,h;zb(g)&&g.silent||on(this,Ga,xs).call(this,{type:"error",error:g}),zb(g)||((I=(d=pe(this,Qi).config).onError)==null||I.call(d,g,this),(h=(C=pe(this,Qi).config).onSettled)==null||h.call(C,this.state.data,g,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return vt(this,Zo,MX({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:g=>{var d,I,C,h;if(g===void 0){s(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(f){s(f);return}(I=(d=pe(this,Qi).config).onSuccess)==null||I.call(d,g,this),(h=(C=pe(this,Qi).config).onSettled)==null||h.call(C,g,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:s,onFail:(g,d)=>{on(this,Ga,xs).call(this,{type:"failed",failureCount:g,error:d})},onPause:()=>{on(this,Ga,xs).call(this,{type:"pause"})},onContinue:()=>{on(this,Ga,xs).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),pe(this,Zo).start()}},DI=new WeakMap,zI=new WeakMap,Qi=new WeakMap,Zo=new WeakMap,QC=new WeakMap,zg=new WeakMap,Ga=new WeakSet,xs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...zX(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=t.error;return zb(o)&&o.revert&&pe(this,zI)?{...pe(this,zI),fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),so.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),pe(this,Qi).notify({query:this,type:"updated",action:t})})},JW);function zX(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:LX(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function vj(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var _a,xW,Gj=(xW=class extends cA{constructor(t={}){super();Kt(this,_a);this.config=t,vt(this,_a,new Map)}build(t,n,r){const o=n.queryKey,i=n.queryHash??YG(o,n);let a=this.get(i);return a||(a=new Zj({cache:this,queryKey:o,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(o)}),this.add(a)),a}add(t){pe(this,_a).has(t.queryHash)||(pe(this,_a).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=pe(this,_a).get(t.queryHash);n&&(t.destroy(),n===t&&pe(this,_a).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){so.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return pe(this,_a).get(t)}getAll(){return[...pe(this,_a).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>D5(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>D5(t,r)):n}notify(t){so.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){so.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){so.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},_a=new WeakMap,xW),qa,Xo,Tg,$a,Zl,YW,Sj=(YW=class extends DX{constructor(t){super();Kt(this,$a);Kt(this,qa);Kt(this,Xo);Kt(this,Tg);this.mutationId=t.mutationId,vt(this,Xo,t.mutationCache),vt(this,qa,[]),this.state=t.state||Bj(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){pe(this,qa).includes(t)||(pe(this,qa).push(t),this.clearGcTimeout(),pe(this,Xo).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){vt(this,qa,pe(this,qa).filter(n=>n!==t)),this.scheduleGc(),pe(this,Xo).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){pe(this,qa).length||(this.state.status==="pending"?this.scheduleGc():pe(this,Xo).remove(this))}continue(){var t;return((t=pe(this,Tg))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,i,a,s,l,c,u,g,d,I,C,h,f,A,m,p,Z,v,k,B;vt(this,Tg,MX({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(y,W)=>{on(this,$a,Zl).call(this,{type:"failed",failureCount:y,error:W})},onPause:()=>{on(this,$a,Zl).call(this,{type:"pause"})},onContinue:()=>{on(this,$a,Zl).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>pe(this,Xo).canRun(this)}));const n=this.state.status==="pending",r=!pe(this,Tg).canStart();try{if(!n){on(this,$a,Zl).call(this,{type:"pending",variables:t,isPaused:r}),await((i=(o=pe(this,Xo).config).onMutate)==null?void 0:i.call(o,t,this));const W=await((s=(a=this.options).onMutate)==null?void 0:s.call(a,t));W!==this.state.context&&on(this,$a,Zl).call(this,{type:"pending",context:W,variables:t,isPaused:r})}const y=await pe(this,Tg).start();return await((c=(l=pe(this,Xo).config).onSuccess)==null?void 0:c.call(l,y,t,this.state.context,this)),await((g=(u=this.options).onSuccess)==null?void 0:g.call(u,y,t,this.state.context)),await((I=(d=pe(this,Xo).config).onSettled)==null?void 0:I.call(d,y,null,this.state.variables,this.state.context,this)),await((h=(C=this.options).onSettled)==null?void 0:h.call(C,y,null,t,this.state.context)),on(this,$a,Zl).call(this,{type:"success",data:y}),y}catch(y){try{throw await((A=(f=pe(this,Xo).config).onError)==null?void 0:A.call(f,y,t,this.state.context,this)),await((p=(m=this.options).onError)==null?void 0:p.call(m,y,t,this.state.context)),await((v=(Z=pe(this,Xo).config).onSettled)==null?void 0:v.call(Z,void 0,y,this.state.variables,this.state.context,this)),await((B=(k=this.options).onSettled)==null?void 0:B.call(k,void 0,y,t,this.state.context)),y}finally{on(this,$a,Zl).call(this,{type:"error",error:y})}}finally{pe(this,Xo).runNext(this)}}},qa=new WeakMap,Xo=new WeakMap,Tg=new WeakMap,$a=new WeakSet,Zl=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),so.batch(()=>{pe(this,qa).forEach(r=>{r.onMutationUpdate(t)}),pe(this,Xo).notify({mutation:this,type:"updated",action:t})})},YW);function Bj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fi,PC,NW,wj=(NW=class extends cA{constructor(t={}){super();Kt(this,fi);Kt(this,PC);this.config=t,vt(this,fi,new Map),vt(this,PC,Date.now())}build(t,n,r){const o=new Sj({mutationCache:this,mutationId:++ch(this,PC)._,options:t.defaultMutationOptions(n),state:r});return this.add(o),o}add(t){const n=Nh(t),r=pe(this,fi).get(n)??[];r.push(t),pe(this,fi).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Nh(t);if(pe(this,fi).has(n)){const o=(r=pe(this,fi).get(n))==null?void 0:r.filter(i=>i!==t);o&&(o.length===0?pe(this,fi).delete(n):pe(this,fi).set(n,o))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=pe(this,fi).get(Nh(t)))==null?void 0:r.find(o=>o.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=pe(this,fi).get(Nh(t)))==null?void 0:r.find(o=>o!==t&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){so.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...pe(this,fi).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>z5(n,r))}findAll(t={}){return this.getAll().filter(n=>z5(t,n))}notify(t){so.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return so.batch(()=>Promise.all(t.map(n=>n.continue().catch(Pi))))}},fi=new WeakMap,PC=new WeakMap,NW);function Nh(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function j5(e){return{onFetch:(t,n)=>{var u,g,d,I,C;const r=t.options,o=(d=(g=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:g.fetchMore)==null?void 0:d.direction,i=((I=t.state.data)==null?void 0:I.pages)||[],a=((C=t.state.data)==null?void 0:C.pageParams)||[];let s={pages:[],pageParams:[]},l=0;const c=async()=>{let h=!1;const f=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(t.signal.aborted?h=!0:t.signal.addEventListener("abort",()=>{h=!0}),t.signal)})},A=KX(t.options,t.fetchOptions),m=async(p,Z,v)=>{if(h)return Promise.reject();if(Z==null&&p.pages.length)return Promise.resolve(p);const k={queryKey:t.queryKey,pageParam:Z,direction:v?"backward":"forward",meta:t.options.meta};f(k);const B=await A(k),{maxPages:y}=t.options,W=v?mj:hj;return{pages:W(p.pages,B,y),pageParams:W(p.pageParams,Z,y)}};if(o&&i.length){const p=o==="backward",Z=p?Wj:Q5,v={pages:i,pageParams:a},k=Z(r,v);s=await m(v,k,p)}else{const p=e??i.length;do{const Z=l===0?a[0]??r.initialPageParam:Q5(r,s);if(l>0&&Z==null)break;s=await m(s,Z),l++}while(l<p)}return s};t.options.persister?t.fetchFn=()=>{var h,f;return(f=(h=t.options).persister)==null?void 0:f.call(h,c,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function Q5(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Wj(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Ir,Vl,Xl,TI,UI,Jl,jI,QI,HW,Rj=(HW=class{constructor(e={}){Kt(this,Ir);Kt(this,Vl);Kt(this,Xl);Kt(this,TI);Kt(this,UI);Kt(this,Jl);Kt(this,jI);Kt(this,QI);vt(this,Ir,e.queryCache||new Gj),vt(this,Vl,e.mutationCache||new wj),vt(this,Xl,e.defaultOptions||{}),vt(this,TI,new Map),vt(this,UI,new Map),vt(this,Jl,0)}mount(){ch(this,Jl)._++,pe(this,Jl)===1&&(vt(this,jI,NG.subscribe(async e=>{e&&(await this.resumePausedMutations(),pe(this,Ir).onFocus())})),vt(this,QI,sp.subscribe(async e=>{e&&(await this.resumePausedMutations(),pe(this,Ir).onOnline())})))}unmount(){var e,t;ch(this,Jl)._--,pe(this,Jl)===0&&((e=pe(this,jI))==null||e.call(this),vt(this,jI,void 0),(t=pe(this,QI))==null||t.call(this),vt(this,QI,void 0))}isFetching(e){return pe(this,Ir).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return pe(this,Vl).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=pe(this,Ir).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=pe(this,Ir).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(NI(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return pe(this,Ir).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),o=pe(this,Ir).get(r.queryHash),i=o==null?void 0:o.state.data,a=Cj(t,i);if(a!==void 0)return pe(this,Ir).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return so.batch(()=>pe(this,Ir).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=pe(this,Ir).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=pe(this,Ir);so.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=pe(this,Ir),r={type:"active",...e};return so.batch(()=>(n.findAll(e).forEach(o=>{o.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=so.batch(()=>pe(this,Ir).findAll(e).map(o=>o.cancel(n)));return Promise.all(r).then(Pi).catch(Pi)}invalidateQueries(e={},t={}){return so.batch(()=>{if(pe(this,Ir).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=so.batch(()=>pe(this,Ir).findAll(e).filter(o=>!o.isDisabled()).map(o=>{let i=o.fetch(void 0,n);return n.throwOnError||(i=i.catch(Pi)),o.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Pi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=pe(this,Ir).build(this,t);return n.isStaleByTime(NI(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Pi).catch(Pi)}fetchInfiniteQuery(e){return e.behavior=j5(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Pi).catch(Pi)}ensureInfiniteQueryData(e){return e.behavior=j5(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return sp.isOnline()?pe(this,Vl).resumePausedMutations():Promise.resolve()}getQueryCache(){return pe(this,Ir)}getMutationCache(){return pe(this,Vl)}getDefaultOptions(){return pe(this,Xl)}setDefaultOptions(e){vt(this,Xl,e)}setQueryDefaults(e,t){pe(this,TI).set(FC(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...pe(this,TI).values()];let n={};return t.forEach(r=>{KC(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){pe(this,UI).set(FC(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...pe(this,UI).values()];let n={};return t.forEach(r=>{KC(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...pe(this,Xl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=YG(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===FX&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...pe(this,Xl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){pe(this,Ir).clear(),pe(this,Vl).clear()}},Ir=new WeakMap,Vl=new WeakMap,Xl=new WeakMap,TI=new WeakMap,UI=new WeakMap,Jl=new WeakMap,jI=new WeakMap,QI=new WeakMap,HW),Oo,an,OC,Jo,Ug,PI,es,_C,OI,_I,jg,Qg,xl,qI,Zn,Du,_2,q2,$2,eZ,tZ,nZ,rZ,TX,FW,kj=(FW=class extends cA{constructor(t,n){super();Kt(this,Zn);Kt(this,Oo);Kt(this,an);Kt(this,OC);Kt(this,Jo);Kt(this,Ug);Kt(this,PI);Kt(this,es);Kt(this,_C);Kt(this,OI);Kt(this,_I);Kt(this,jg);Kt(this,Qg);Kt(this,xl);Kt(this,qI,new Set);this.options=n,vt(this,Oo,t),vt(this,es,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(pe(this,an).addObserver(this),P5(pe(this,an),this.options)?on(this,Zn,Du).call(this):this.updateResult(),on(this,Zn,eZ).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return oZ(pe(this,an),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return oZ(pe(this,an),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,on(this,Zn,tZ).call(this),on(this,Zn,nZ).call(this),pe(this,an).removeObserver(this)}setOptions(t,n){const r=this.options,o=pe(this,an);if(this.options=pe(this,Oo).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wa(this.options.enabled,pe(this,an))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");on(this,Zn,rZ).call(this),pe(this,an).setOptions(this.options),r._defaulted&&!Q2(this.options,r)&&pe(this,Oo).getQueryCache().notify({type:"observerOptionsUpdated",query:pe(this,an),observer:this});const i=this.hasListeners();i&&O5(pe(this,an),o,this.options,r)&&on(this,Zn,Du).call(this),this.updateResult(n),i&&(pe(this,an)!==o||Wa(this.options.enabled,pe(this,an))!==Wa(r.enabled,pe(this,an))||NI(this.options.staleTime,pe(this,an))!==NI(r.staleTime,pe(this,an)))&&on(this,Zn,_2).call(this);const a=on(this,Zn,q2).call(this);i&&(pe(this,an)!==o||Wa(this.options.enabled,pe(this,an))!==Wa(r.enabled,pe(this,an))||a!==pe(this,xl))&&on(this,Zn,$2).call(this,a)}getOptimisticResult(t){const n=pe(this,Oo).getQueryCache().build(pe(this,Oo),t),r=this.createResult(n,t);return Xj(this,r)&&(vt(this,Jo,r),vt(this,PI,this.options),vt(this,Ug,pe(this,an).state)),r}getCurrentResult(){return pe(this,Jo)}trackResult(t,n){const r={};return Object.keys(t).forEach(o=>{Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),n==null||n(o),t[o])})}),r}trackProp(t){pe(this,qI).add(t)}getCurrentQuery(){return pe(this,an)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=pe(this,Oo).defaultQueryOptions(t),r=pe(this,Oo).getQueryCache().build(pe(this,Oo),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){return on(this,Zn,Du).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),pe(this,Jo)))}createResult(t,n){var B;const r=pe(this,an),o=this.options,i=pe(this,Jo),a=pe(this,Ug),s=pe(this,PI),c=t!==r?t.state:pe(this,OC),{state:u}=t;let g={...u},d=!1,I;if(n._optimisticResults){const y=this.hasListeners(),W=!y&&P5(t,n),G=y&&O5(t,r,n,o);(W||G)&&(g={...g,...zX(u.data,t.options)}),n._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:C,errorUpdatedAt:h,status:f}=g;if(n.select&&g.data!==void 0)if(i&&g.data===(a==null?void 0:a.data)&&n.select===pe(this,_C))I=pe(this,OI);else try{vt(this,_C,n.select),I=n.select(g.data),I=O2(i==null?void 0:i.data,I,n),vt(this,OI,I),vt(this,es,null)}catch(y){vt(this,es,y)}else I=g.data;if(n.placeholderData!==void 0&&I===void 0&&f==="pending"){let y;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(s==null?void 0:s.placeholderData))y=i.data;else if(y=typeof n.placeholderData=="function"?n.placeholderData((B=pe(this,_I))==null?void 0:B.state.data,pe(this,_I)):n.placeholderData,n.select&&y!==void 0)try{y=n.select(y),vt(this,es,null)}catch(W){vt(this,es,W)}y!==void 0&&(f="success",I=O2(i==null?void 0:i.data,y,n),d=!0)}pe(this,es)&&(C=pe(this,es),I=pe(this,OI),h=Date.now(),f="error");const A=g.fetchStatus==="fetching",m=f==="pending",p=f==="error",Z=m&&A,v=I!==void 0;return{status:f,fetchStatus:g.fetchStatus,isPending:m,isSuccess:f==="success",isError:p,isInitialLoading:Z,isLoading:Z,data:I,dataUpdatedAt:g.dataUpdatedAt,error:C,errorUpdatedAt:h,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>c.dataUpdateCount||g.errorUpdateCount>c.errorUpdateCount,isFetching:A,isRefetching:A&&!m,isLoadingError:p&&!v,isPaused:g.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:p&&v,isStale:HG(t,n),refetch:this.refetch}}updateResult(t){const n=pe(this,Jo),r=this.createResult(pe(this,an),this.options);if(vt(this,Ug,pe(this,an).state),vt(this,PI,this.options),pe(this,Ug).data!==void 0&&vt(this,_I,pe(this,an)),Q2(r,n))return;vt(this,Jo,r);const o={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!pe(this,qI).size)return!0;const l=new Set(s??pe(this,qI));return this.options.throwOnError&&l.add("error"),Object.keys(pe(this,Jo)).some(c=>{const u=c;return pe(this,Jo)[u]!==n[u]&&l.has(u)})};(t==null?void 0:t.listeners)!==!1&&i()&&(o.listeners=!0),on(this,Zn,TX).call(this,{...o,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&on(this,Zn,eZ).call(this)}},Oo=new WeakMap,an=new WeakMap,OC=new WeakMap,Jo=new WeakMap,Ug=new WeakMap,PI=new WeakMap,es=new WeakMap,_C=new WeakMap,OI=new WeakMap,_I=new WeakMap,jg=new WeakMap,Qg=new WeakMap,xl=new WeakMap,qI=new WeakMap,Zn=new WeakSet,Du=function(t){on(this,Zn,rZ).call(this);let n=pe(this,an).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Pi)),n},_2=function(){on(this,Zn,tZ).call(this);const t=NI(this.options.staleTime,pe(this,an));if(ud||pe(this,Jo).isStale||!j2(t))return;const r=NX(pe(this,Jo).dataUpdatedAt,t)+1;vt(this,jg,setTimeout(()=>{pe(this,Jo).isStale||this.updateResult()},r))},q2=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(pe(this,an)):this.options.refetchInterval)??!1},$2=function(t){on(this,Zn,nZ).call(this),vt(this,xl,t),!(ud||Wa(this.options.enabled,pe(this,an))===!1||!j2(pe(this,xl))||pe(this,xl)===0)&&vt(this,Qg,setInterval(()=>{(this.options.refetchIntervalInBackground||NG.isFocused())&&on(this,Zn,Du).call(this)},pe(this,xl)))},eZ=function(){on(this,Zn,_2).call(this),on(this,Zn,$2).call(this,on(this,Zn,q2).call(this))},tZ=function(){pe(this,jg)&&(clearTimeout(pe(this,jg)),vt(this,jg,void 0))},nZ=function(){pe(this,Qg)&&(clearInterval(pe(this,Qg)),vt(this,Qg,void 0))},rZ=function(){const t=pe(this,Oo).getQueryCache().build(pe(this,Oo),this.options);if(t===pe(this,an))return;const n=pe(this,an);vt(this,an,t),vt(this,OC,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},TX=function(t){so.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(pe(this,Jo))}),pe(this,Oo).getQueryCache().notify({query:pe(this,an),type:"observerResultsUpdated"})})},FW);function Vj(e,t){return Wa(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function P5(e,t){return Vj(e,t)||e.state.data!==void 0&&oZ(e,t,t.refetchOnMount)}function oZ(e,t,n){if(Wa(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&HG(e,t)}return!1}function O5(e,t,n,r){return(e!==t||Wa(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&HG(e,n)}function HG(e,t){return Wa(t.enabled,e)!==!1&&e.isStaleByTime(NI(t.staleTime,e))}function Xj(e,t){return!Q2(e.getCurrentResult(),t)}var UX=F.createContext(void 0),Jj=e=>{const t=F.useContext(UX);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},xj=({client:e,children:t})=>(F.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),w.jsx(UX.Provider,{value:e,children:t})),jX=F.createContext(!1),Yj=()=>F.useContext(jX);jX.Provider;function Nj(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Hj=F.createContext(Nj()),Fj=()=>F.useContext(Hj);function Kj(e,t){return typeof e=="function"?e(...t):!!e}var Lj=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Ej=e=>{F.useEffect(()=>{e.clearReset()},[e])},Mj=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Kj(n,[e.error,r]),Dj=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},zj=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Tj=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Uj(e,t,n){var c,u,g,d;const r=Jj(),o=Yj(),i=Fj(),a=r.defaultQueryOptions(e);(u=(c=r.getDefaultOptions().queries)==null?void 0:c._experimental_beforeQuery)==null||u.call(c,a),a._optimisticResults=o?"isRestoring":"optimistic",Dj(a),Lj(a,i),Ej(i);const[s]=F.useState(()=>new t(r,a)),l=s.getOptimisticResult(a);if(F.useSyncExternalStore(F.useCallback(I=>{const C=o?()=>{}:s.subscribe(so.batchCalls(I));return s.updateResult(),C},[s,o]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),F.useEffect(()=>{s.setOptions(a,{listeners:!1})},[a,s]),zj(a,l))throw Tj(a,s,i);if(Mj({result:l,errorResetBoundary:i,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash)}))throw l.error;return(d=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||d.call(g,a,l),a.notifyOnChangeProps?l:s.trackResult(l)}function bc(e,t){return Uj(e,kj)}function QX(e,t){return function(){return e.apply(t,arguments)}}const{toString:jj}=Object.prototype,{getPrototypeOf:FG}=Object,Pf=(e=>t=>{const n=jj.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ya=e=>(e=e.toLowerCase(),t=>Pf(t)===e),Of=e=>t=>typeof t===e,{isArray:Zd}=Array,LC=Of("undefined");function Qj(e){return e!==null&&!LC(e)&&e.constructor!==null&&!LC(e.constructor)&&Ri(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const PX=Ya("ArrayBuffer");function Pj(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&PX(e.buffer),t}const Oj=Of("string"),Ri=Of("function"),OX=Of("number"),_f=e=>e!==null&&typeof e=="object",_j=e=>e===!0||e===!1,dm=e=>{if(Pf(e)!=="object")return!1;const t=FG(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},qj=Ya("Date"),$j=Ya("File"),eQ=Ya("Blob"),tQ=Ya("FileList"),nQ=e=>_f(e)&&Ri(e.pipe),rQ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ri(e.append)&&((t=Pf(e))==="formdata"||t==="object"&&Ri(e.toString)&&e.toString()==="[object FormData]"))},oQ=Ya("URLSearchParams"),[iQ,aQ,sQ,lQ]=["ReadableStream","Request","Response","Headers"].map(Ya),gQ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function IA(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),Zd(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let s;for(r=0;r<a;r++)s=i[r],t.call(null,e[s],s,e)}}function _X(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const Lg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qX=e=>!LC(e)&&e!==Lg;function iZ(){const{caseless:e}=qX(this)&&this||{},t={},n=(r,o)=>{const i=e&&_X(t,o)||o;dm(t[i])&&dm(r)?t[i]=iZ(t[i],r):dm(r)?t[i]=iZ({},r):Zd(r)?t[i]=r.slice():t[i]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&IA(arguments[r],n);return t}const cQ=(e,t,n,{allOwnKeys:r}={})=>(IA(t,(o,i)=>{n&&Ri(o)?e[i]=QX(o,n):e[i]=o},{allOwnKeys:r}),e),IQ=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),dQ=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},uQ=(e,t,n,r)=>{let o,i,a;const s={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],(!r||r(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=n!==!1&&FG(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},CQ=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},AQ=e=>{if(!e)return null;if(Zd(e))return e;let t=e.length;if(!OX(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},hQ=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&FG(Uint8Array)),mQ=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const i=o.value;t.call(e,i[0],i[1])}},pQ=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},fQ=Ya("HTMLFormElement"),bQ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),_5=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),yQ=Ya("RegExp"),$X=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};IA(n,(o,i)=>{let a;(a=t(o,i,e))!==!1&&(r[i]=a||o)}),Object.defineProperties(e,r)},ZQ=e=>{$X(e,(t,n)=>{if(Ri(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Ri(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},vQ=(e,t)=>{const n={},r=o=>{o.forEach(i=>{n[i]=!0})};return Zd(e)?r(e):r(String(e).split(t)),n},GQ=()=>{},SQ=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Tb="abcdefghijklmnopqrstuvwxyz",q5="0123456789",eJ={DIGIT:q5,ALPHA:Tb,ALPHA_DIGIT:Tb+Tb.toUpperCase()+q5},BQ=(e=16,t=eJ.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function wQ(e){return!!(e&&Ri(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const WQ=e=>{const t=new Array(10),n=(r,o)=>{if(_f(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const i=Zd(r)?[]:{};return IA(r,(a,s)=>{const l=n(a,o+1);!LC(l)&&(i[s]=l)}),t[o]=void 0,i}}return r};return n(e,0)},RQ=Ya("AsyncFunction"),kQ=e=>e&&(_f(e)||Ri(e))&&Ri(e.then)&&Ri(e.catch),tJ=((e,t)=>e?setImmediate:t?((n,r)=>(Lg.addEventListener("message",({source:o,data:i})=>{o===Lg&&i===n&&r.length&&r.shift()()},!1),o=>{r.push(o),Lg.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ri(Lg.postMessage)),VQ=typeof queueMicrotask<"u"?queueMicrotask.bind(Lg):typeof process<"u"&&process.nextTick||tJ,Xe={isArray:Zd,isArrayBuffer:PX,isBuffer:Qj,isFormData:rQ,isArrayBufferView:Pj,isString:Oj,isNumber:OX,isBoolean:_j,isObject:_f,isPlainObject:dm,isReadableStream:iQ,isRequest:aQ,isResponse:sQ,isHeaders:lQ,isUndefined:LC,isDate:qj,isFile:$j,isBlob:eQ,isRegExp:yQ,isFunction:Ri,isStream:nQ,isURLSearchParams:oQ,isTypedArray:hQ,isFileList:tQ,forEach:IA,merge:iZ,extend:cQ,trim:gQ,stripBOM:IQ,inherits:dQ,toFlatObject:uQ,kindOf:Pf,kindOfTest:Ya,endsWith:CQ,toArray:AQ,forEachEntry:mQ,matchAll:pQ,isHTMLForm:fQ,hasOwnProperty:_5,hasOwnProp:_5,reduceDescriptors:$X,freezeMethods:ZQ,toObjectSet:vQ,toCamelCase:bQ,noop:GQ,toFiniteNumber:SQ,findKey:_X,global:Lg,isContextDefined:qX,ALPHABET:eJ,generateString:BQ,isSpecCompliantForm:wQ,toJSONObject:WQ,isAsyncFn:RQ,isThenable:kQ,setImmediate:tJ,asap:VQ};function jt(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}Xe.inherits(jt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Xe.toJSONObject(this.config),code:this.code,status:this.status}}});const nJ=jt.prototype,rJ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{rJ[e]={value:e}});Object.defineProperties(jt,rJ);Object.defineProperty(nJ,"isAxiosError",{value:!0});jt.from=(e,t,n,r,o,i)=>{const a=Object.create(nJ);return Xe.toFlatObject(e,a,function(l){return l!==Error.prototype},s=>s!=="isAxiosError"),jt.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const XQ=null;function aZ(e){return Xe.isPlainObject(e)||Xe.isArray(e)}function oJ(e){return Xe.endsWith(e,"[]")?e.slice(0,-2):e}function $5(e,t,n){return e?e.concat(t).map(function(o,i){return o=oJ(o),!n&&i?"["+o+"]":o}).join(n?".":""):t}function JQ(e){return Xe.isArray(e)&&!e.some(aZ)}const xQ=Xe.toFlatObject(Xe,{},null,function(t){return/^is[A-Z]/.test(t)});function qf(e,t,n){if(!Xe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Xe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,f){return!Xe.isUndefined(f[h])});const r=n.metaTokens,o=n.visitor||u,i=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Xe.isSpecCompliantForm(t);if(!Xe.isFunction(o))throw new TypeError("visitor must be a function");function c(C){if(C===null)return"";if(Xe.isDate(C))return C.toISOString();if(!l&&Xe.isBlob(C))throw new jt("Blob is not supported. Use a Buffer instead.");return Xe.isArrayBuffer(C)||Xe.isTypedArray(C)?l&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function u(C,h,f){let A=C;if(C&&!f&&typeof C=="object"){if(Xe.endsWith(h,"{}"))h=r?h:h.slice(0,-2),C=JSON.stringify(C);else if(Xe.isArray(C)&&JQ(C)||(Xe.isFileList(C)||Xe.endsWith(h,"[]"))&&(A=Xe.toArray(C)))return h=oJ(h),A.forEach(function(p,Z){!(Xe.isUndefined(p)||p===null)&&t.append(a===!0?$5([h],Z,i):a===null?h:h+"[]",c(p))}),!1}return aZ(C)?!0:(t.append($5(f,h,i),c(C)),!1)}const g=[],d=Object.assign(xQ,{defaultVisitor:u,convertValue:c,isVisitable:aZ});function I(C,h){if(!Xe.isUndefined(C)){if(g.indexOf(C)!==-1)throw Error("Circular reference detected in "+h.join("."));g.push(C),Xe.forEach(C,function(A,m){(!(Xe.isUndefined(A)||A===null)&&o.call(t,A,Xe.isString(m)?m.trim():m,h,d))===!0&&I(A,h?h.concat(m):[m])}),g.pop()}}if(!Xe.isObject(e))throw new TypeError("data must be an object");return I(e),t}function ew(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function KG(e,t){this._pairs=[],e&&qf(e,this,t)}const iJ=KG.prototype;iJ.append=function(t,n){this._pairs.push([t,n])};iJ.toString=function(t){const n=t?function(r){return t.call(this,r,ew)}:ew;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function YQ(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function aJ(e,t,n){if(!t)return e;const r=n&&n.encode||YQ,o=n&&n.serialize;let i;if(o?i=o(t,n):i=Xe.isURLSearchParams(t)?t.toString():new KG(t,n).toString(r),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class tw{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Xe.forEach(this.handlers,function(r){r!==null&&t(r)})}}const sJ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},NQ=typeof URLSearchParams<"u"?URLSearchParams:KG,HQ=typeof FormData<"u"?FormData:null,FQ=typeof Blob<"u"?Blob:null,KQ={isBrowser:!0,classes:{URLSearchParams:NQ,FormData:HQ,Blob:FQ},protocols:["http","https","file","blob","url","data"]},LG=typeof window<"u"&&typeof document<"u",sZ=typeof navigator=="object"&&navigator||void 0,LQ=LG&&(!sZ||["ReactNative","NativeScript","NS"].indexOf(sZ.product)<0),EQ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",MQ=LG&&window.location.href||"http://localhost",DQ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:LG,hasStandardBrowserEnv:LQ,hasStandardBrowserWebWorkerEnv:EQ,navigator:sZ,origin:MQ},Symbol.toStringTag,{value:"Module"})),ii={...DQ,...KQ};function zQ(e,t){return qf(e,new ii.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,i){return ii.isNode&&Xe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function TQ(e){return Xe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function UQ(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}function lJ(e){function t(n,r,o,i){let a=n[i++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),l=i>=n.length;return a=!a&&Xe.isArray(o)?o.length:a,l?(Xe.hasOwnProp(o,a)?o[a]=[o[a],r]:o[a]=r,!s):((!o[a]||!Xe.isObject(o[a]))&&(o[a]=[]),t(n,r,o[a],i)&&Xe.isArray(o[a])&&(o[a]=UQ(o[a])),!s)}if(Xe.isFormData(e)&&Xe.isFunction(e.entries)){const n={};return Xe.forEachEntry(e,(r,o)=>{t(TQ(r),o,n,0)}),n}return null}function jQ(e,t,n){if(Xe.isString(e))try{return(t||JSON.parse)(e),Xe.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(e)}const dA={transitional:sJ,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,i=Xe.isObject(t);if(i&&Xe.isHTMLForm(t)&&(t=new FormData(t)),Xe.isFormData(t))return o?JSON.stringify(lJ(t)):t;if(Xe.isArrayBuffer(t)||Xe.isBuffer(t)||Xe.isStream(t)||Xe.isFile(t)||Xe.isBlob(t)||Xe.isReadableStream(t))return t;if(Xe.isArrayBufferView(t))return t.buffer;if(Xe.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return zQ(t,this.formSerializer).toString();if((s=Xe.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return qf(s?{"files[]":t}:t,l&&new l,this.formSerializer)}}return i||o?(n.setContentType("application/json",!1),jQ(t)):t}],transformResponse:[function(t){const n=this.transitional||dA.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Xe.isResponse(t)||Xe.isReadableStream(t))return t;if(t&&Xe.isString(t)&&(r&&!this.responseType||o)){const a=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?jt.from(s,jt.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ii.classes.FormData,Blob:ii.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Xe.forEach(["delete","get","head","post","put","patch"],e=>{dA.headers[e]={}});const QQ=Xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PQ=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(a){o=a.indexOf(":"),n=a.substring(0,o).trim().toLowerCase(),r=a.substring(o+1).trim(),!(!n||t[n]&&QQ[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},nw=Symbol("internals");function vu(e){return e&&String(e).trim().toLowerCase()}function um(e){return e===!1||e==null?e:Xe.isArray(e)?e.map(um):String(e)}function OQ(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const _Q=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ub(e,t,n,r,o){if(Xe.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!Xe.isString(t)){if(Xe.isString(r))return t.indexOf(r)!==-1;if(Xe.isRegExp(r))return r.test(t)}}function qQ(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function $Q(e,t){const n=Xe.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,i,a){return this[r].call(this,t,o,i,a)},configurable:!0})})}class ai{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function i(s,l,c){const u=vu(l);if(!u)throw new Error("header name must be a non-empty string");const g=Xe.findKey(o,u);(!g||o[g]===void 0||c===!0||c===void 0&&o[g]!==!1)&&(o[g||l]=um(s))}const a=(s,l)=>Xe.forEach(s,(c,u)=>i(c,u,l));if(Xe.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(Xe.isString(t)&&(t=t.trim())&&!_Q(t))a(PQ(t),n);else if(Xe.isHeaders(t))for(const[s,l]of t.entries())i(l,s,r);else t!=null&&i(n,t,r);return this}get(t,n){if(t=vu(t),t){const r=Xe.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return OQ(o);if(Xe.isFunction(n))return n.call(this,o,r);if(Xe.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=vu(t),t){const r=Xe.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Ub(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function i(a){if(a=vu(a),a){const s=Xe.findKey(r,a);s&&(!n||Ub(r,r[s],s,n))&&(delete r[s],o=!0)}}return Xe.isArray(t)?t.forEach(i):i(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const i=n[r];(!t||Ub(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){const n=this,r={};return Xe.forEach(this,(o,i)=>{const a=Xe.findKey(r,i);if(a){n[a]=um(o),delete n[i];return}const s=t?qQ(i):String(i).trim();s!==i&&delete n[i],n[s]=um(o),r[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Xe.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&Xe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[nw]=this[nw]={accessors:{}}).accessors,o=this.prototype;function i(a){const s=vu(a);r[s]||($Q(o,a),r[s]=!0)}return Xe.isArray(t)?t.forEach(i):i(t),this}}ai.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Xe.reduceDescriptors(ai.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Xe.freezeMethods(ai);function jb(e,t){const n=this||dA,r=t||n,o=ai.from(r.headers);let i=r.data;return Xe.forEach(e,function(s){i=s.call(n,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function gJ(e){return!!(e&&e.__CANCEL__)}function vd(e,t,n){jt.call(this,e??"canceled",jt.ERR_CANCELED,t,n),this.name="CanceledError"}Xe.inherits(vd,jt,{__CANCEL__:!0});function cJ(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new jt("Request failed with status code "+n.status,[jt.ERR_BAD_REQUEST,jt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function eP(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function tP(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,i=0,a;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=r[i];a||(a=c),n[o]=l,r[o]=c;let g=i,d=0;for(;g!==o;)d+=n[g++],g=g%e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),c-a<t)return;const I=u&&c-u;return I?Math.round(d*1e3/I):void 0}}function nP(e,t){let n=0,r=1e3/t,o,i;const a=(c,u=Date.now())=>{n=u,o=null,i&&(clearTimeout(i),i=null),e.apply(null,c)};return[(...c)=>{const u=Date.now(),g=u-n;g>=r?a(c,u):(o=c,i||(i=setTimeout(()=>{i=null,a(o)},r-g)))},()=>o&&a(o)]}const lp=(e,t,n=3)=>{let r=0;const o=tP(50,250);return nP(i=>{const a=i.loaded,s=i.lengthComputable?i.total:void 0,l=a-r,c=o(l),u=a<=s;r=a;const g={loaded:a,total:s,progress:s?a/s:void 0,bytes:l,rate:c||void 0,estimated:c&&s&&u?(s-a)/c:void 0,event:i,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(g)},n)},rw=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},ow=e=>(...t)=>Xe.asap(()=>e(...t)),rP=ii.hasStandardBrowserEnv?function(){const t=ii.navigator&&/(msie|trident)/i.test(ii.navigator.userAgent),n=document.createElement("a");let r;function o(i){let a=i;return t&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=o(window.location.href),function(a){const s=Xe.isString(a)?o(a):a;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}(),oP=ii.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const a=[e+"="+encodeURIComponent(t)];Xe.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Xe.isString(r)&&a.push("path="+r),Xe.isString(o)&&a.push("domain="+o),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function iP(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function aP(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function IJ(e,t){return e&&!iP(t)?aP(e,t):t}const iw=e=>e instanceof ai?{...e}:e;function dc(e,t){t=t||{};const n={};function r(c,u,g){return Xe.isPlainObject(c)&&Xe.isPlainObject(u)?Xe.merge.call({caseless:g},c,u):Xe.isPlainObject(u)?Xe.merge({},u):Xe.isArray(u)?u.slice():u}function o(c,u,g){if(Xe.isUndefined(u)){if(!Xe.isUndefined(c))return r(void 0,c,g)}else return r(c,u,g)}function i(c,u){if(!Xe.isUndefined(u))return r(void 0,u)}function a(c,u){if(Xe.isUndefined(u)){if(!Xe.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function s(c,u,g){if(g in t)return r(c,u);if(g in e)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(c,u)=>o(iw(c),iw(u),!0)};return Xe.forEach(Object.keys(Object.assign({},e,t)),function(u){const g=l[u]||o,d=g(e[u],t[u],u);Xe.isUndefined(d)&&g!==s||(n[u]=d)}),n}const dJ=e=>{const t=dc({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:i,headers:a,auth:s}=t;t.headers=a=ai.from(a),t.url=aJ(IJ(t.baseURL,t.url),e.params,e.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let l;if(Xe.isFormData(n)){if(ii.hasStandardBrowserEnv||ii.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[c,...u]=l?l.split(";").map(g=>g.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...u].join("; "))}}if(ii.hasStandardBrowserEnv&&(r&&Xe.isFunction(r)&&(r=r(t)),r||r!==!1&&rP(t.url))){const c=o&&i&&oP.read(i);c&&a.set(o,c)}return t},sP=typeof XMLHttpRequest<"u",lP=sP&&function(e){return new Promise(function(n,r){const o=dJ(e);let i=o.data;const a=ai.from(o.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:c}=o,u,g,d,I,C;function h(){I&&I(),C&&C(),o.cancelToken&&o.cancelToken.unsubscribe(u),o.signal&&o.signal.removeEventListener("abort",u)}let f=new XMLHttpRequest;f.open(o.method.toUpperCase(),o.url,!0),f.timeout=o.timeout;function A(){if(!f)return;const p=ai.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),v={data:!s||s==="text"||s==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:p,config:e,request:f};cJ(function(B){n(B),h()},function(B){r(B),h()},v),f=null}"onloadend"in f?f.onloadend=A:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(A)},f.onabort=function(){f&&(r(new jt("Request aborted",jt.ECONNABORTED,e,f)),f=null)},f.onerror=function(){r(new jt("Network Error",jt.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let Z=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const v=o.transitional||sJ;o.timeoutErrorMessage&&(Z=o.timeoutErrorMessage),r(new jt(Z,v.clarifyTimeoutError?jt.ETIMEDOUT:jt.ECONNABORTED,e,f)),f=null},i===void 0&&a.setContentType(null),"setRequestHeader"in f&&Xe.forEach(a.toJSON(),function(Z,v){f.setRequestHeader(v,Z)}),Xe.isUndefined(o.withCredentials)||(f.withCredentials=!!o.withCredentials),s&&s!=="json"&&(f.responseType=o.responseType),c&&([d,C]=lp(c,!0),f.addEventListener("progress",d)),l&&f.upload&&([g,I]=lp(l),f.upload.addEventListener("progress",g),f.upload.addEventListener("loadend",I)),(o.cancelToken||o.signal)&&(u=p=>{f&&(r(!p||p.type?new vd(null,e,f):p),f.abort(),f=null)},o.cancelToken&&o.cancelToken.subscribe(u),o.signal&&(o.signal.aborted?u():o.signal.addEventListener("abort",u)));const m=eP(o.url);if(m&&ii.protocols.indexOf(m)===-1){r(new jt("Unsupported protocol "+m+":",jt.ERR_BAD_REQUEST,e));return}f.send(i||null)})},gP=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,o;const i=function(c){if(!o){o=!0,s();const u=c instanceof Error?c:this.reason;r.abort(u instanceof jt?u:new vd(u instanceof Error?u.message:u))}};let a=t&&setTimeout(()=>{a=null,i(new jt(`timeout ${t} of ms exceeded`,jt.ETIMEDOUT))},t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),e=null)};e.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>Xe.asap(s),l}},cP=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,o;for(;r<n;)o=r+t,yield e.slice(r,o),r=o},IP=async function*(e,t){for await(const n of dP(e))yield*cP(n,t)},dP=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},aw=(e,t,n,r)=>{const o=IP(e,t);let i=0,a,s=l=>{a||(a=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await o.next();if(c){s(),l.close();return}let g=u.byteLength;if(n){let d=i+=g;n(d)}l.enqueue(new Uint8Array(u))}catch(c){throw s(c),c}},cancel(l){return s(l),o.return()}},{highWaterMark:2})},$f=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",uJ=$f&&typeof ReadableStream=="function",uP=$f&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),CJ=(e,...t)=>{try{return!!e(...t)}catch{return!1}},CP=uJ&&CJ(()=>{let e=!1;const t=new Request(ii.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),sw=64*1024,lZ=uJ&&CJ(()=>Xe.isReadableStream(new Response("").body)),gp={stream:lZ&&(e=>e.body)};$f&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!gp[t]&&(gp[t]=Xe.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new jt(`Response type '${t}' is not supported`,jt.ERR_NOT_SUPPORT,r)})})})(new Response);const AP=async e=>{if(e==null)return 0;if(Xe.isBlob(e))return e.size;if(Xe.isSpecCompliantForm(e))return(await new Request(ii.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Xe.isArrayBufferView(e)||Xe.isArrayBuffer(e))return e.byteLength;if(Xe.isURLSearchParams(e)&&(e=e+""),Xe.isString(e))return(await uP(e)).byteLength},hP=async(e,t)=>{const n=Xe.toFiniteNumber(e.getContentLength());return n??AP(t)},mP=$f&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:a,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:u,withCredentials:g="same-origin",fetchOptions:d}=dJ(e);c=c?(c+"").toLowerCase():"text";let I=gP([o,i&&i.toAbortSignal()],a),C;const h=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let f;try{if(l&&CP&&n!=="get"&&n!=="head"&&(f=await hP(u,r))!==0){let v=new Request(t,{method:"POST",body:r,duplex:"half"}),k;if(Xe.isFormData(r)&&(k=v.headers.get("content-type"))&&u.setContentType(k),v.body){const[B,y]=rw(f,lp(ow(l)));r=aw(v.body,sw,B,y)}}Xe.isString(g)||(g=g?"include":"omit");const A="credentials"in Request.prototype;C=new Request(t,{...d,signal:I,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:A?g:void 0});let m=await fetch(C);const p=lZ&&(c==="stream"||c==="response");if(lZ&&(s||p&&h)){const v={};["status","statusText","headers"].forEach(W=>{v[W]=m[W]});const k=Xe.toFiniteNumber(m.headers.get("content-length")),[B,y]=s&&rw(k,lp(ow(s),!0))||[];m=new Response(aw(m.body,sw,B,()=>{y&&y(),h&&h()}),v)}c=c||"text";let Z=await gp[Xe.findKey(gp,c)||"text"](m,e);return!p&&h&&h(),await new Promise((v,k)=>{cJ(v,k,{data:Z,headers:ai.from(m.headers),status:m.status,statusText:m.statusText,config:e,request:C})})}catch(A){throw h&&h(),A&&A.name==="TypeError"&&/fetch/i.test(A.message)?Object.assign(new jt("Network Error",jt.ERR_NETWORK,e,C),{cause:A.cause||A}):jt.from(A,A&&A.code,e,C)}}),gZ={http:XQ,xhr:lP,fetch:mP};Xe.forEach(gZ,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const lw=e=>`- ${e}`,pP=e=>Xe.isFunction(e)||e===null||e===!1,AJ={getAdapter:e=>{e=Xe.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){n=e[i];let a;if(r=n,!pP(n)&&(r=gZ[(a=String(n)).toLowerCase()],r===void 0))throw new jt(`Unknown adapter '${a}'`);if(r)break;o[a||"#"+i]=r}if(!r){const i=Object.entries(o).map(([s,l])=>`adapter ${s} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(lw).join(`
`):" "+lw(i[0]):"as no adapter specified";throw new jt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:gZ};function Qb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new vd(null,e)}function gw(e){return Qb(e),e.headers=ai.from(e.headers),e.data=jb.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),AJ.getAdapter(e.adapter||dA.adapter)(e).then(function(r){return Qb(e),r.data=jb.call(e,e.transformResponse,r),r.headers=ai.from(r.headers),r},function(r){return gJ(r)||(Qb(e),r&&r.response&&(r.response.data=jb.call(e,e.transformResponse,r.response),r.response.headers=ai.from(r.response.headers))),Promise.reject(r)})}const hJ="1.7.7",EG={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{EG[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const cw={};EG.transitional=function(t,n,r){function o(i,a){return"[Axios v"+hJ+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,s)=>{if(t===!1)throw new jt(o(a," has been removed"+(n?" in "+n:"")),jt.ERR_DEPRECATED);return n&&!cw[a]&&(cw[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,a,s):!0}};function fP(e,t,n){if(typeof e!="object")throw new jt("options must be an object",jt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],a=t[i];if(a){const s=e[i],l=s===void 0||a(s,i,e);if(l!==!0)throw new jt("option "+i+" must be "+l,jt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new jt("Unknown option "+i,jt.ERR_BAD_OPTION)}}const cZ={assertOptions:fP,validators:EG},hl=cZ.validators;class qg{constructor(t){this.defaults=t,this.interceptors={request:new tw,response:new tw}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=dc(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:i}=n;r!==void 0&&cZ.assertOptions(r,{silentJSONParsing:hl.transitional(hl.boolean),forcedJSONParsing:hl.transitional(hl.boolean),clarifyTimeoutError:hl.transitional(hl.boolean)},!1),o!=null&&(Xe.isFunction(o)?n.paramsSerializer={serialize:o}:cZ.assertOptions(o,{encode:hl.function,serialize:hl.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&Xe.merge(i.common,i[n.method]);i&&Xe.forEach(["delete","get","head","post","put","patch","common"],C=>{delete i[C]}),n.headers=ai.concat(a,i);const s=[];let l=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(n)===!1||(l=l&&h.synchronous,s.unshift(h.fulfilled,h.rejected))});const c=[];this.interceptors.response.forEach(function(h){c.push(h.fulfilled,h.rejected)});let u,g=0,d;if(!l){const C=[gw.bind(this),void 0];for(C.unshift.apply(C,s),C.push.apply(C,c),d=C.length,u=Promise.resolve(n);g<d;)u=u.then(C[g++],C[g++]);return u}d=s.length;let I=n;for(g=0;g<d;){const C=s[g++],h=s[g++];try{I=C(I)}catch(f){h.call(this,f);break}}try{u=gw.call(this,I)}catch(C){return Promise.reject(C)}for(g=0,d=c.length;g<d;)u=u.then(c[g++],c[g++]);return u}getUri(t){t=dc(this.defaults,t);const n=IJ(t.baseURL,t.url);return aJ(n,t.params,t.paramsSerializer)}}Xe.forEach(["delete","get","head","options"],function(t){qg.prototype[t]=function(n,r){return this.request(dc(r||{},{method:t,url:n,data:(r||{}).data}))}});Xe.forEach(["post","put","patch"],function(t){function n(r){return function(i,a,s){return this.request(dc(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}qg.prototype[t]=n(),qg.prototype[t+"Form"]=n(!0)});class MG{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(o=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](o);r._listeners=null}),this.promise.then=o=>{let i;const a=new Promise(s=>{r.subscribe(s),i=s}).then(o);return a.cancel=function(){r.unsubscribe(i)},a},t(function(i,a,s){r.reason||(r.reason=new vd(i,a,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new MG(function(o){t=o}),cancel:t}}}function bP(e){return function(n){return e.apply(null,n)}}function yP(e){return Xe.isObject(e)&&e.isAxiosError===!0}const IZ={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(IZ).forEach(([e,t])=>{IZ[t]=e});function mJ(e){const t=new qg(e),n=QX(qg.prototype.request,t);return Xe.extend(n,qg.prototype,t,{allOwnKeys:!0}),Xe.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return mJ(dc(e,o))},n}const hn=mJ(dA);hn.Axios=qg;hn.CanceledError=vd;hn.CancelToken=MG;hn.isCancel=gJ;hn.VERSION=hJ;hn.toFormData=qf;hn.AxiosError=jt;hn.Cancel=hn.CanceledError;hn.all=function(t){return Promise.all(t)};hn.spread=bP;hn.isAxiosError=yP;hn.mergeConfig=dc;hn.AxiosHeaders=ai;hn.formToJSON=e=>lJ(Xe.isHTMLForm(e)?new FormData(e):e);hn.getAdapter=AJ.getAdapter;hn.HttpStatusCode=IZ;hn.default=hn;const Rs=hn.create({baseURL:"https://azure-reservation-app.azurewebsites.net/api"});class Ni{constructor(t){ji(this,"endpoint");ji(this,"post",t=>Rs.post(this.endpoint,t).then(n=>n.data));ji(this,"getAll",()=>(Rs.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),Rs.get(this.endpoint).then(t=>t.data)));ji(this,"delete",t=>(Rs.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),Rs.delete(`${this.endpoint}/${t}`).then(n=>n.data)));ji(this,"put",(t,n)=>(Rs.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),Rs.put(`${this.endpoint}/${n}`,t).then(r=>r.data)));ji(this,"getOne",t=>Rs.get(`${this.endpoint}/${t}`).then(n=>n.data));ji(this,"getMore",(t,n)=>Rs.get(`${this.endpoint}`,{params:{movieId:t,theaterId:n}}));this.endpoint=t}}const ZP=new Ni("/user"),pJ=e=>bc({queryKey:["user",e],queryFn:()=>ZP.getOne(e)}),vP="/assets/mainlogo-yQVlu-nS.png",GP=et(t4)({background:"#001529",boxShadow:"none",borderBottom:"1px solid rgba(255,255,255,0.1)"}),Pb=et(rn)({color:"rgba(255,255,255,0.85)",textTransform:"none",fontSize:"16px",padding:"8px 16px","&:hover":{color:"#FFB800",background:"transparent"}}),SP=et("img")({height:"40px"}),BP=et(tg)({padding:"4px"}),wP=et(rn)({color:"#fff",textTransform:"none",fontSize:"14px",padding:"6px 16px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)","&:hover":{backgroundColor:"rgba(255,255,255,0.1)",borderColor:"rgba(255,255,255,0.3)"}}),WP=()=>{const[e,t]=F.useState(null),[n,r]=F.useState(null),[o,i]=F.useState(null),[a,s]=F.useState(!1),l=sa(),c=v=>{t(v.currentTarget)},u=v=>{r(v.currentTarget)},g=()=>{l("/mybookings"),t(null)},d=()=>{l("/profile"),r(null)},I=()=>{f(),l("/signin")},C=v=>{if(v){const B=JSON.parse(v.text).bookingId;console.log("Booking ID:",B),B&&l(`/scannedbooking/${B}`),i(v),s(!1)}},h=v=>{console.error(v)},{logout:f,getCurrentUser:A}=gi(),m=A()._id,{data:p}=pJ(m);console.log("My data: ",p);const Z=A().role;return w.jsx(GP,{position:"fixed",children:w.jsx(bX,{maxWidth:!1,children:w.jsxs(BU,{disableGutters:!0,sx:{py:1.5},children:[w.jsxs(je,{sx:{display:"flex",alignItems:"center",flexGrow:1},children:[w.jsx(pi,{href:"/",sx:{display:"flex",alignItems:"center",mr:3},children:w.jsx(SP,{src:vP,alt:"Logo"})}),w.jsxs(je,{sx:{display:{xs:"none",md:"flex"},gap:2},children:[w.jsx(Pb,{onClick:g,children:"My Booking"}),w.jsx(Pb,{onClick:()=>l("/"),children:"Home"})]}),w.jsxs(je,{sx:{display:{xs:"flex",md:"none"}},children:[w.jsx(tg,{size:"large",onClick:c,color:"inherit",children:w.jsx(xU,{})}),w.jsxs(ip,{anchorEl:e,open:!!e,onClose:g,sx:{display:{xs:"block",md:"none"}},children:[w.jsx(is,{onClick:g,children:w.jsx(Ee,{textAlign:"center",children:"My Booking"})}),w.jsx(is,{onClick:()=>l("/"),children:w.jsx(Ee,{textAlign:"center",children:"Home"})})]})]})]}),w.jsxs(je,{sx:{display:"flex",alignItems:"center",gap:2},children:[Z==="admin"&&w.jsx(Pb,{onClick:()=>s(!0),children:"Scan QR"}),a&&w.jsx(je,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:9999},children:w.jsx(xG,{delay:300,onScan:C,onError:h,style:{width:"100%",height:"100%"}})}),w.jsx(wP,{startIcon:w.jsx(H5,{}),onClick:I,sx:{display:{xs:"none",sm:"flex"}},children:"Logout"}),w.jsx(BP,{onClick:u,children:w.jsx(AX,{alt:"User Name",src:p==null?void 0:p.picture,sx:{width:40,height:40,border:"2px solid #FFB800"}})}),w.jsxs(ip,{anchorEl:n,open:!!n,onClose:d,PaperProps:{sx:{background:"#001529",color:"#fff",border:"1px solid rgba(255,255,255,0.1)",minWidth:"200px"}},children:[w.jsxs(je,{sx:{p:2},children:[w.jsx(Ee,{variant:"subtitle1",sx:{fontWeight:500},children:p==null?void 0:p.name}),w.jsx(Ee,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},children:p==null?void 0:p.email})]}),w.jsx(qm,{sx:{borderColor:"rgba(255,255,255,0.1)"}}),w.jsxs(is,{onClick:d,children:[w.jsx(YU,{sx:{mr:1}})," Profile"]}),w.jsxs(is,{onClick:I,sx:{display:{sm:"none"}},children:[w.jsx(H5,{sx:{mr:1}})," Logout"]})]})]})]})})})},RP=Jn([w.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),w.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),kP=Jn(w.jsx("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents"),VP=Jn(w.jsx("path",{d:"m19.07 4.93-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07"}),"TrackChanges"),XP=Jn(w.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email"),JP=Jn(w.jsx("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"}),"Instagram"),xP=Jn(w.jsx("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn"),YP=e=>w.jsx(NC,{...e,children:w.jsx("path",{d:"M22 7h-7V5h7v2zm1.726 10c-.442 1.297-2.029 3-5.101 3-3.074 0-5.564-1.729-5.564-5.675 0-3.91 2.325-5.92 5.466-5.92 3.082 0 4.964 1.782 5.375 4.426.078.506.109 1.188.095 2.14H15.97c.13 3.211 3.483 3.312 4.588 2.029h3.168zm-7.686-4h4.965c-.105-1.547-1.136-2.219-2.477-2.219-1.466 0-2.277.768-2.488 2.219zm-9.574 6.988H0V5.021h6.953c5.476.081 5.58 5.444 2.72 6.906 3.461 1.26 3.577 8.061-3.207 8.061zM3 11h3.584c2.508 0 2.906-3-.312-3H3v3zm3.391 3H3v3.016h3.341c3.055 0 2.868-3.016.05-3.016z"})}),NP=et(je)({background:"#001529",color:"#fff",padding:"80px 0 40px",position:"relative",overflow:"hidden"}),Ob=et(je)({marginBottom:"40px","& .icon":{color:"#fff",fontSize:"40px",marginBottom:"20px"},"& .description":{color:"rgba(255, 255, 255, 0.7)",fontSize:"16px",lineHeight:"1.6"}}),HP=et(je)({background:"#FFB800",borderRadius:"16px",padding:"40px",margin:"60px 0",display:"flex",justifyContent:"space-between",alignItems:"center","@media (max-width: 768px)":{flexDirection:"column",gap:"20px",textAlign:"center"}}),FP=()=>w.jsx(NP,{children:w.jsxs(bX,{maxWidth:"lg",children:[w.jsx(Ee,{variant:"h2",sx:{mb:6,fontWeight:"bold",fontSize:{xs:"32px",md:"48px"}},children:"Why Book with Us?"}),w.jsxs(at,{container:!0,spacing:4,children:[w.jsx(at,{item:!0,xs:12,md:4,children:w.jsxs(Ob,{children:[w.jsx(RP,{className:"icon"}),w.jsx(Ee,{variant:"h5",sx:{mb:2,fontWeight:"500"},children:"Seamless Booking Experience"}),w.jsx(Ee,{className:"description",children:"Our platform ensures an easy and hassle-free booking process, allowing you to quickly find and reserve your spot at the best events with just a few clicks."})]})}),w.jsx(at,{item:!0,xs:12,md:4,children:w.jsxs(Ob,{children:[w.jsx(kP,{className:"icon"}),w.jsx(Ee,{variant:"h5",sx:{mb:2,fontWeight:"500"},children:"Curated Events"}),w.jsx(Ee,{className:"description",children:"We bring you a handpicked selection of top-rated events across various genres, ensuring you never miss out on the most exciting and exclusive experiences."})]})}),w.jsx(at,{item:!0,xs:12,md:4,children:w.jsxs(Ob,{children:[w.jsx(VP,{className:"icon"}),w.jsxs(Ee,{variant:"h5",sx:{mb:2,fontWeight:"500"},children:["Secure Payments"," "]}),w.jsx(Ee,{className:"description",children:"Your transactions are safe with us. We prioritize security by providing encrypted and reliable payment options for a worry-free booking experience."})]})})]}),w.jsxs(HP,{children:[w.jsx(Ee,{variant:"h3",sx:{color:"#000",fontWeight:"bold",fontSize:{xs:"24px",md:"32px"}},children:"Ready to Experience the Best Events?"}),w.jsx(rn,{variant:"contained",startIcon:w.jsx(XP,{}),sx:{backgroundColor:"#000",color:"#fff",padding:"12px 24px","&:hover":{backgroundColor:"#333"}},children:"Let’s get started on your next adventure."})]}),w.jsxs(at,{container:!0,spacing:4,sx:{mt:4},children:[w.jsxs(at,{item:!0,xs:12,md:3,children:[w.jsx(Ee,{variant:"h6",sx:{mb:2,fontWeight:"bold"},children:"ReserveNow"}),w.jsx(Ee,{sx:{color:"rgba(255, 255, 255, 0.7)"},children:"© 2024"})]}),w.jsxs(at,{item:!0,xs:12,md:3,children:[w.jsx(Ee,{variant:"h6",sx:{mb:2,fontWeight:"500"},children:"Services"}),w.jsxs(je,{component:"ul",sx:{listStyle:"none",p:0,m:0},children:[w.jsx("li",{children:w.jsx(pi,{href:"#",sx:{color:"rgba(255, 255, 255, 0.7)",textDecoration:"none",lineHeight:2,"&:hover":{color:"#FFB800"}},children:"Event Ticket Booking"})}),w.jsx("li",{children:w.jsx(pi,{href:"#",sx:{color:"rgba(255, 255, 255, 0.7)",textDecoration:"none",lineHeight:2,"&:hover":{color:"#FFB800"}},children:"VIP & Group Bookings"})}),w.jsx("li",{children:w.jsx(pi,{href:"#",sx:{color:"rgba(255, 255, 255, 0.7)",textDecoration:"none",lineHeight:2,"&:hover":{color:"#FFB800"}},children:"Venue Information"})}),w.jsx("li",{children:w.jsx(pi,{href:"#",sx:{color:"rgba(255, 255, 255, 0.7)",textDecoration:"none",lineHeight:2,"&:hover":{color:"#FFB800"}},children:"Event Promotions & Discounts"})})]})]}),w.jsxs(at,{item:!0,xs:12,md:3,children:[w.jsx(Ee,{variant:"h6",sx:{mb:2,fontWeight:"500"},children:"Company"}),w.jsxs(je,{component:"ul",sx:{listStyle:"none",p:0,m:0},children:[w.jsx("li",{children:w.jsx(pi,{href:"#",sx:{color:"rgba(255, 255, 255, 0.7)",textDecoration:"none",lineHeight:2,"&:hover":{color:"#FFB800"}},children:"About Us"})}),w.jsx("li",{children:w.jsx(pi,{href:"#",sx:{color:"rgba(255, 255, 255, 0.7)",textDecoration:"none",lineHeight:2,"&:hover":{color:"#FFB800"}},children:"Careers"})}),w.jsx("li",{children:w.jsx(pi,{href:"#",sx:{color:"rgba(255, 255, 255, 0.7)",textDecoration:"none",lineHeight:2,"&:hover":{color:"#FFB800"}},children:"Contact Us"})})]})]}),w.jsxs(at,{item:!0,xs:12,md:3,children:[w.jsx(Ee,{variant:"h6",sx:{mb:2,fontWeight:"500"},children:"Connect with Us"}),w.jsxs(je,{sx:{display:"flex",gap:2},children:[w.jsx(pi,{href:"#",sx:{color:"#FFB800","&:hover":{color:"#fff"}},children:w.jsx(YP,{sx:{fontSize:24}})}),w.jsx(pi,{href:"#",sx:{color:"#FFB800","&:hover":{color:"#fff"}},children:w.jsx(JP,{sx:{fontSize:24}})}),w.jsx(pi,{href:"#",sx:{color:"#FFB800","&:hover":{color:"#fff"}},children:w.jsx(xP,{sx:{fontSize:24}})})]})]})]}),w.jsxs(je,{sx:{mt:6,pt:4,borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[w.jsxs(je,{children:[w.jsx(pi,{href:"#",sx:{color:"rgba(255, 255, 255, 0.7)",textDecoration:"none",mr:3,"&:hover":{color:"#FFB800"}},children:"Terms & Conditions"}),w.jsx(pi,{href:"#",sx:{color:"rgba(255, 255, 255, 0.7)",textDecoration:"none","&:hover":{color:"#FFB800"}},children:"Privacy Policy"})]}),w.jsx(je,{component:"img",src:"../src/assets/mainlogo.png",alt:"B Corporation",sx:{height:40}})]})]})}),KP=()=>w.jsxs(w.Fragment,{children:[w.jsx(WP,{}),w.jsx(i9,{}),w.jsx(FP,{})]}),LP=new Ni("/movies"),EP=e=>bc({queryKey:["movies",e],queryFn:()=>LP.getOne(e)}),MP=new Ni("/seats"),DP=e=>bc({queryKey:["seats",e],queryFn:()=>MP.getOne(e),enabled:!!e}),zP=new Ni("/seats");class TP{CreateSeat(t){return zP.post(t)}}const UP=new TP,Iw=e=>{let t;const n=new Set,r=(c,u)=>{const g=typeof c=="function"?c(t):c;if(!Object.is(g,t)){const d=t;t=u??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(I=>I(t,d))}},o=()=>t,s={setState:r,getState:o,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=e(r,o,s);return s},jP=e=>e?Iw(e):Iw,QP=e=>e;function PP(e,t=QP){const n=qe.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return qe.useDebugValue(n),n}const dw=e=>{const t=jP(e),n=r=>PP(t,r);return Object.assign(n,t),n},OP=e=>e?dw(e):dw,Dr=OP(e=>({selectedDate:null,SetSelectedDate:t=>e({selectedDate:t}),selectedTheater:"66ff7c14b07228f8b1e63bae",SetSelectedTheater:t=>e({selectedTheater:t}),selectedTime:null,SetSelectedTime:t=>e({selectedTime:t}),selectedCard:null,SetSelectedCard:t=>e({selectedCard:t}),availableTime:null,SetaVailableTime:t=>e({availableTime:t})}));var fJ={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Yl,function(){var n=1e3,r=6e4,o=36e5,i="millisecond",a="second",s="minute",l="hour",c="day",u="week",g="month",d="quarter",I="year",C="date",h="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,A=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(x){var D=["th","st","nd","rd"],L=x%100;return"["+x+(D[(L-20)%10]||D[L]||D[0])+"]"}},p=function(x,D,L){var M=String(x);return!M||M.length>=D?x:""+Array(D+1-M.length).join(L)+x},Z={s:p,z:function(x){var D=-x.utcOffset(),L=Math.abs(D),M=Math.floor(L/60),K=L%60;return(D<=0?"+":"-")+p(M,2,"0")+":"+p(K,2,"0")},m:function x(D,L){if(D.date()<L.date())return-x(L,D);var M=12*(L.year()-D.year())+(L.month()-D.month()),K=D.clone().add(M,g),E=L-K<0,O=D.clone().add(M+(E?-1:1),g);return+(-(M+(L-K)/(E?K-O:O-K))||0)},a:function(x){return x<0?Math.ceil(x)||0:Math.floor(x)},p:function(x){return{M:g,y:I,w:u,d:c,D:C,h:l,m:s,s:a,ms:i,Q:d}[x]||String(x||"").toLowerCase().replace(/s$/,"")},u:function(x){return x===void 0}},v="en",k={};k[v]=m;var B="$isDayjsObject",y=function(x){return x instanceof X||!(!x||!x[B])},W=function x(D,L,M){var K;if(!D)return v;if(typeof D=="string"){var E=D.toLowerCase();k[E]&&(K=E),L&&(k[E]=L,K=E);var O=D.split("-");if(!K&&O.length>1)return x(O[0])}else{var re=D.name;k[re]=D,K=re}return!M&&K&&(v=K),K||!M&&v},G=function(x,D){if(y(x))return x.clone();var L=typeof D=="object"?D:{};return L.date=x,L.args=arguments,new X(L)},R=Z;R.l=W,R.i=y,R.w=function(x,D){return G(x,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var X=function(){function x(L){this.$L=W(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[B]=!0}var D=x.prototype;return D.parse=function(L){this.$d=function(M){var K=M.date,E=M.utc;if(K===null)return new Date(NaN);if(R.u(K))return new Date;if(K instanceof Date)return new Date(K);if(typeof K=="string"&&!/Z$/i.test(K)){var O=K.match(f);if(O){var re=O[2]-1||0,H=(O[7]||"0").substring(0,3);return E?new Date(Date.UTC(O[1],re,O[3]||1,O[4]||0,O[5]||0,O[6]||0,H)):new Date(O[1],re,O[3]||1,O[4]||0,O[5]||0,O[6]||0,H)}}return new Date(K)}(L),this.init()},D.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},D.$utils=function(){return R},D.isValid=function(){return this.$d.toString()!==h},D.isSame=function(L,M){var K=G(L);return this.startOf(M)<=K&&K<=this.endOf(M)},D.isAfter=function(L,M){return G(L)<this.startOf(M)},D.isBefore=function(L,M){return this.endOf(M)<G(L)},D.$g=function(L,M,K){return R.u(L)?this[M]:this.set(K,L)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(L,M){var K=this,E=!!R.u(M)||M,O=R.p(L),re=function(Ae,Ge){var We=R.w(K.$u?Date.UTC(K.$y,Ge,Ae):new Date(K.$y,Ge,Ae),K);return E?We:We.endOf(c)},H=function(Ae,Ge){return R.w(K.toDate()[Ae].apply(K.toDate("s"),(E?[0,0,0,0]:[23,59,59,999]).slice(Ge)),K)},z=this.$W,j=this.$M,$=this.$D,ee="set"+(this.$u?"UTC":"");switch(O){case I:return E?re(1,0):re(31,11);case g:return E?re(1,j):re(0,j+1);case u:var le=this.$locale().weekStart||0,Ie=(z<le?z+7:z)-le;return re(E?$-Ie:$+(6-Ie),j);case c:case C:return H(ee+"Hours",0);case l:return H(ee+"Minutes",1);case s:return H(ee+"Seconds",2);case a:return H(ee+"Milliseconds",3);default:return this.clone()}},D.endOf=function(L){return this.startOf(L,!1)},D.$set=function(L,M){var K,E=R.p(L),O="set"+(this.$u?"UTC":""),re=(K={},K[c]=O+"Date",K[C]=O+"Date",K[g]=O+"Month",K[I]=O+"FullYear",K[l]=O+"Hours",K[s]=O+"Minutes",K[a]=O+"Seconds",K[i]=O+"Milliseconds",K)[E],H=E===c?this.$D+(M-this.$W):M;if(E===g||E===I){var z=this.clone().set(C,1);z.$d[re](H),z.init(),this.$d=z.set(C,Math.min(this.$D,z.daysInMonth())).$d}else re&&this.$d[re](H);return this.init(),this},D.set=function(L,M){return this.clone().$set(L,M)},D.get=function(L){return this[R.p(L)]()},D.add=function(L,M){var K,E=this;L=Number(L);var O=R.p(M),re=function(j){var $=G(E);return R.w($.date($.date()+Math.round(j*L)),E)};if(O===g)return this.set(g,this.$M+L);if(O===I)return this.set(I,this.$y+L);if(O===c)return re(1);if(O===u)return re(7);var H=(K={},K[s]=r,K[l]=o,K[a]=n,K)[O]||1,z=this.$d.getTime()+L*H;return R.w(z,this)},D.subtract=function(L,M){return this.add(-1*L,M)},D.format=function(L){var M=this,K=this.$locale();if(!this.isValid())return K.invalidDate||h;var E=L||"YYYY-MM-DDTHH:mm:ssZ",O=R.z(this),re=this.$H,H=this.$m,z=this.$M,j=K.weekdays,$=K.months,ee=K.meridiem,le=function(Ge,We,Je,ze){return Ge&&(Ge[We]||Ge(M,E))||Je[We].slice(0,ze)},Ie=function(Ge){return R.s(re%12||12,Ge,"0")},Ae=ee||function(Ge,We,Je){var ze=Ge<12?"AM":"PM";return Je?ze.toLowerCase():ze};return E.replace(A,function(Ge,We){return We||function(Je){switch(Je){case"YY":return String(M.$y).slice(-2);case"YYYY":return R.s(M.$y,4,"0");case"M":return z+1;case"MM":return R.s(z+1,2,"0");case"MMM":return le(K.monthsShort,z,$,3);case"MMMM":return le($,z);case"D":return M.$D;case"DD":return R.s(M.$D,2,"0");case"d":return String(M.$W);case"dd":return le(K.weekdaysMin,M.$W,j,2);case"ddd":return le(K.weekdaysShort,M.$W,j,3);case"dddd":return j[M.$W];case"H":return String(re);case"HH":return R.s(re,2,"0");case"h":return Ie(1);case"hh":return Ie(2);case"a":return Ae(re,H,!0);case"A":return Ae(re,H,!1);case"m":return String(H);case"mm":return R.s(H,2,"0");case"s":return String(M.$s);case"ss":return R.s(M.$s,2,"0");case"SSS":return R.s(M.$ms,3,"0");case"Z":return O}return null}(Ge)||O.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(L,M,K){var E,O=this,re=R.p(M),H=G(L),z=(H.utcOffset()-this.utcOffset())*r,j=this-H,$=function(){return R.m(O,H)};switch(re){case I:E=$()/12;break;case g:E=$();break;case d:E=$()/3;break;case u:E=(j-z)/6048e5;break;case c:E=(j-z)/864e5;break;case l:E=j/o;break;case s:E=j/r;break;case a:E=j/n;break;default:E=j}return K?E:R.a(E)},D.daysInMonth=function(){return this.endOf(g).$D},D.$locale=function(){return k[this.$L]},D.locale=function(L,M){if(!L)return this.$L;var K=this.clone(),E=W(L,M,!0);return E&&(K.$L=E),K},D.clone=function(){return R.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},x}(),Y=X.prototype;return G.prototype=Y,[["$ms",i],["$s",a],["$m",s],["$H",l],["$W",c],["$M",g],["$y",I],["$D",C]].forEach(function(x){Y[x[1]]=function(D){return this.$g(D,x[0],x[1])}}),G.extend=function(x,D){return x.$i||(x(D,X,G),x.$i=!0),G},G.locale=W,G.isDayjs=y,G.unix=function(x){return G(1e3*x)},G.en=k[v],G.Ls=k,G.p={},G})})(fJ);var _P=fJ.exports;const qP=qC(_P);var bJ={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(self,()=>{return n={7629:(o,i,a)=>{const s=a(375),l=a(8571),c=a(9474),u=a(1687),g=a(8652),d=a(8160),I=a(3292),C=a(6354),h=a(8901),f=a(9708),A=a(6914),m=a(2294),p=a(6133),Z=a(1152),v=a(8863),k=a(2036),B={Base:class{constructor(y){this.type=y,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new m.Ids,this._preferences=null,this._refs=new p.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return s(typeof f.describe=="function","Manifest functionality disabled"),f.describe(this)}allow(...y){return d.verifyFlat(y,"allow"),this._values(y,"_valids")}alter(y){s(y&&typeof y=="object"&&!Array.isArray(y),"Invalid targets argument"),s(!this._inRuleset(),"Cannot set alterations inside a ruleset");const W=this.clone();W.$_terms.alterations=W.$_terms.alterations||[];for(const G in y){const R=y[G];s(typeof R=="function","Alteration adjuster for",G,"must be a function"),W.$_terms.alterations.push({target:G,adjuster:R})}return W.$_temp.ruleset=!1,W}artifact(y){return s(y!==void 0,"Artifact cannot be undefined"),s(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",y)}cast(y){return s(y===!1||typeof y=="string","Invalid to value"),s(y===!1||this._definition.cast[y],"Type",this.type,"does not support casting to",y),this.$_setFlag("cast",y===!1?void 0:y)}default(y,W){return this._default("default",y,W)}description(y){return s(y&&typeof y=="string","Description must be a non-empty string"),this.$_setFlag("description",y)}empty(y){const W=this.clone();return y!==void 0&&(y=W.$_compile(y,{override:!1})),W.$_setFlag("empty",y,{clone:!1})}error(y){return s(y,"Missing error"),s(y instanceof Error||typeof y=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",y)}example(y,W={}){return s(y!==void 0,"Missing example"),d.assertOptions(W,["override"]),this._inner("examples",y,{single:!0,override:W.override})}external(y,W){return typeof y=="object"&&(s(!W,"Cannot combine options with description"),W=y.description,y=y.method),s(typeof y=="function","Method must be a function"),s(W===void 0||W&&typeof W=="string","Description must be a non-empty string"),this._inner("externals",{method:y,description:W},{single:!0})}failover(y,W){return this._default("failover",y,W)}forbidden(){return this.presence("forbidden")}id(y){return y?(s(typeof y=="string","id must be a non-empty string"),s(/^[^\.]+$/.test(y),"id cannot contain period character"),this.$_setFlag("id",y)):this.$_setFlag("id",void 0)}invalid(...y){return this._values(y,"_invalids")}label(y){return s(y&&typeof y=="string","Label name must be a non-empty string"),this.$_setFlag("label",y)}meta(y){return s(y!==void 0,"Meta cannot be undefined"),this._inner("metas",y,{single:!0})}note(...y){s(y.length,"Missing notes");for(const W of y)s(W&&typeof W=="string","Notes must be non-empty strings");return this._inner("notes",y)}only(y=!0){return s(typeof y=="boolean","Invalid mode:",y),this.$_setFlag("only",y)}optional(){return this.presence("optional")}prefs(y){s(y,"Missing preferences"),s(y.context===void 0,"Cannot override context"),s(y.externals===void 0,"Cannot override externals"),s(y.warnings===void 0,"Cannot override warnings"),s(y.debug===void 0,"Cannot override debug"),d.checkPreferences(y);const W=this.clone();return W._preferences=d.preferences(W._preferences,y),W}presence(y){return s(["optional","required","forbidden"].includes(y),"Unknown presence mode",y),this.$_setFlag("presence",y)}raw(y=!0){return this.$_setFlag("result",y?"raw":void 0)}result(y){return s(["raw","strip"].includes(y),"Unknown result mode",y),this.$_setFlag("result",y)}required(){return this.presence("required")}strict(y){const W=this.clone(),G=y!==void 0&&!y;return W._preferences=d.preferences(W._preferences,{convert:G}),W}strip(y=!0){return this.$_setFlag("result",y?"strip":void 0)}tag(...y){s(y.length,"Missing tags");for(const W of y)s(W&&typeof W=="string","Tags must be non-empty strings");return this._inner("tags",y)}unit(y){return s(y&&typeof y=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",y)}valid(...y){d.verifyFlat(y,"valid");const W=this.allow(...y);return W.$_setFlag("only",!!W._valids,{clone:!1}),W}when(y,W){const G=this.clone();G.$_terms.whens||(G.$_terms.whens=[]);const R=I.when(G,y,W);if(!["any","link"].includes(G.type)){const X=R.is?[R]:R.switch;for(const Y of X)s(!Y.then||Y.then.type==="any"||Y.then.type===G.type,"Cannot combine",G.type,"with",Y.then&&Y.then.type),s(!Y.otherwise||Y.otherwise.type==="any"||Y.otherwise.type===G.type,"Cannot combine",G.type,"with",Y.otherwise&&Y.otherwise.type)}return G.$_terms.whens.push(R),G.$_mutateRebuild()}cache(y){s(!this._inRuleset(),"Cannot set caching inside a ruleset"),s(!this._cache,"Cannot override schema cache"),s(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const W=this.clone();return W._cache=y||g.provider.provision(),W.$_temp.ruleset=!1,W}clone(){const y=Object.create(Object.getPrototypeOf(this));return this._assign(y)}concat(y){s(d.isSchema(y),"Invalid schema object"),s(this.type==="any"||y.type==="any"||y.type===this.type,"Cannot merge type",this.type,"with another type:",y.type),s(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),s(!y._inRuleset(),"Cannot concatenate a schema with open ruleset");let W=this.clone();if(this.type==="any"&&y.type!=="any"){const G=y.clone();for(const R of Object.keys(W))R!=="type"&&(G[R]=W[R]);W=G}W._ids.concat(y._ids),W._refs.register(y,p.toSibling),W._preferences=W._preferences?d.preferences(W._preferences,y._preferences):y._preferences,W._valids=k.merge(W._valids,y._valids,y._invalids),W._invalids=k.merge(W._invalids,y._invalids,y._valids);for(const G of y._singleRules.keys())W._singleRules.has(G)&&(W._rules=W._rules.filter(R=>R.keep||R.name!==G),W._singleRules.delete(G));for(const G of y._rules)y._definition.rules[G.method].multi||W._singleRules.set(G.name,G),W._rules.push(G);if(W._flags.empty&&y._flags.empty){W._flags.empty=W._flags.empty.concat(y._flags.empty);const G=Object.assign({},y._flags);delete G.empty,u(W._flags,G)}else if(y._flags.empty){W._flags.empty=y._flags.empty;const G=Object.assign({},y._flags);delete G.empty,u(W._flags,G)}else u(W._flags,y._flags);for(const G in y.$_terms){const R=y.$_terms[G];R?W.$_terms[G]?W.$_terms[G]=W.$_terms[G].concat(R):W.$_terms[G]=R.slice():W.$_terms[G]||(W.$_terms[G]=R)}return this.$_root._tracer&&this.$_root._tracer._combine(W,[this,y]),W.$_mutateRebuild()}extend(y){return s(!y.base,"Cannot extend type with another base"),h.type(this,y)}extract(y){return y=Array.isArray(y)?y:y.split("."),this._ids.reach(y)}fork(y,W){s(!this._inRuleset(),"Cannot fork inside a ruleset");let G=this;for(let R of[].concat(y))R=Array.isArray(R)?R:R.split("."),G=G._ids.fork(R,W,G);return G.$_temp.ruleset=!1,G}rule(y){const W=this._definition;d.assertOptions(y,Object.keys(W.modifiers)),s(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const G=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;s(G>=0&&G<this._rules.length,"Cannot apply rules to empty ruleset");const R=this.clone();for(let X=G;X<R._rules.length;++X){const Y=R._rules[X],x=l(Y);for(const D in y)W.modifiers[D](x,y[D]),s(x.name===Y.name,"Cannot change rule name");R._rules[X]=x,R._singleRules.get(x.name)===Y&&R._singleRules.set(x.name,x)}return R.$_temp.ruleset=!1,R.$_mutateRebuild()}get ruleset(){s(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const y=this.clone();return y.$_temp.ruleset=y._rules.length,y}get $(){return this.ruleset}tailor(y){y=[].concat(y),s(!this._inRuleset(),"Cannot tailor inside a ruleset");let W=this;if(this.$_terms.alterations)for(const{target:G,adjuster:R}of this.$_terms.alterations)y.includes(G)&&(W=R(W),s(d.isSchema(W),"Alteration adjuster for",G,"failed to return a schema object"));return W=W.$_modify({each:G=>G.tailor(y),ref:!1}),W.$_temp.ruleset=!1,W.$_mutateRebuild()}tracer(){return Z.location?Z.location(this):this}validate(y,W){return v.entry(y,this,W)}validateAsync(y,W){return v.entryAsync(y,this,W)}$_addRule(y){typeof y=="string"&&(y={name:y}),s(y&&typeof y=="object","Invalid options"),s(y.name&&typeof y.name=="string","Invalid rule name");for(const Y in y)s(Y[0]!=="_","Cannot set private rule properties");const W=Object.assign({},y);W._resolve=[],W.method=W.method||W.name;const G=this._definition.rules[W.method],R=W.args;s(G,"Unknown rule",W.method);const X=this.clone();if(R){s(Object.keys(R).length===1||Object.keys(R).length===this._definition.rules[W.name].args.length,"Invalid rule definition for",this.type,W.name);for(const Y in R){let x=R[Y];if(G.argsByName){const D=G.argsByName.get(Y);if(D.ref&&d.isResolvable(x))W._resolve.push(Y),X.$_mutateRegister(x);else if(D.normalize&&(x=D.normalize(x),R[Y]=x),D.assert){const L=d.validateArg(x,Y,D);s(!L,L,"or reference")}}x!==void 0?R[Y]=x:delete R[Y]}}return G.multi||(X._ruleRemove(W.name,{clone:!1}),X._singleRules.set(W.name,W)),X.$_temp.ruleset===!1&&(X.$_temp.ruleset=null),G.priority?X._rules.unshift(W):X._rules.push(W),X}$_compile(y,W){return I.schema(this.$_root,y,W)}$_createError(y,W,G,R,X,Y={}){const x=Y.flags!==!1?this._flags:{},D=Y.messages?A.merge(this._definition.messages,Y.messages):this._definition.messages;return new C.Report(y,W,G,x,D,R,X)}$_getFlag(y){return this._flags[y]}$_getRule(y){return this._singleRules.get(y)}$_mapLabels(y){return y=Array.isArray(y)?y:y.split("."),this._ids.labels(y)}$_match(y,W,G,R){(G=Object.assign({},G)).abortEarly=!0,G._externals=!1,W.snapshot();const X=!v.validate(y,this,W,G,R).errors;return W.restore(),X}$_modify(y){return d.assertOptions(y,["each","once","ref","schema"]),m.schema(this,y)||this}$_mutateRebuild(){return s(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(y,{source:W,name:G,path:R,key:X})=>{const Y=this._definition[W][G]&&this._definition[W][G].register;Y!==!1&&this.$_mutateRegister(y,{family:Y,key:X})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(y,{family:W,key:G}={}){this._refs.register(y,W),this._ids.register(y,{key:G})}$_property(y){return this._definition.properties[y]}$_reach(y){return this._ids.reach(y)}$_rootReferences(){return this._refs.roots()}$_setFlag(y,W,G={}){s(y[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const R=this._definition.flags[y]||{};if(c(W,R.default)&&(W=void 0),c(W,this._flags[y]))return this;const X=G.clone!==!1?this.clone():this;return W!==void 0?(X._flags[y]=W,X.$_mutateRegister(W)):delete X._flags[y],y[0]!=="_"&&(X.$_temp.ruleset=!1),X}$_parent(y,...W){return this[y][d.symbols.parent].call(this,...W)}$_validate(y,W,G){return v.validate(y,this,W,G)}_assign(y){y.type=this.type,y.$_root=this.$_root,y.$_temp=Object.assign({},this.$_temp),y.$_temp.whens={},y._ids=this._ids.clone(),y._preferences=this._preferences,y._valids=this._valids&&this._valids.clone(),y._invalids=this._invalids&&this._invalids.clone(),y._rules=this._rules.slice(),y._singleRules=l(this._singleRules,{shallow:!0}),y._refs=this._refs.clone(),y._flags=Object.assign({},this._flags),y._cache=null,y.$_terms={};for(const W in this.$_terms)y.$_terms[W]=this.$_terms[W]?this.$_terms[W].slice():null;y.$_super={};for(const W in this.$_super)y.$_super[W]=this._super[W].bind(y);return y}_bare(){const y=this.clone();y._reset();const W=y._definition.terms;for(const G in W){const R=W[G];y.$_terms[G]=R.init}return y.$_mutateRebuild()}_default(y,W,G={}){return d.assertOptions(G,"literal"),s(W!==void 0,"Missing",y,"value"),s(typeof W=="function"||!G.literal,"Only function value supports literal option"),typeof W=="function"&&G.literal&&(W={[d.symbols.literal]:!0,literal:W}),this.$_setFlag(y,W)}_generate(y,W,G){if(!this.$_terms.whens)return{schema:this};const R=[],X=[];for(let D=0;D<this.$_terms.whens.length;++D){const L=this.$_terms.whens[D];if(L.concat){R.push(L.concat),X.push(`${D}.concat`);continue}const M=L.ref?L.ref.resolve(y,W,G):y,K=L.is?[L]:L.switch,E=X.length;for(let O=0;O<K.length;++O){const{is:re,then:H,otherwise:z}=K[O],j=`${D}${L.switch?"."+O:""}`;if(re.$_match(M,W.nest(re,`${j}.is`),G)){if(H){const $=W.localize([...W.path,`${j}.then`],W.ancestors,W.schemas),{schema:ee,id:le}=H._generate(y,$,G);R.push(ee),X.push(`${j}.then${le?`(${le})`:""}`);break}}else if(z){const $=W.localize([...W.path,`${j}.otherwise`],W.ancestors,W.schemas),{schema:ee,id:le}=z._generate(y,$,G);R.push(ee),X.push(`${j}.otherwise${le?`(${le})`:""}`);break}}if(L.break&&X.length>E)break}const Y=X.join(", ");if(W.mainstay.tracer.debug(W,"rule","when",Y),!Y)return{schema:this};if(!W.mainstay.tracer.active&&this.$_temp.whens[Y])return{schema:this.$_temp.whens[Y],id:Y};let x=this;this._definition.generate&&(x=this._definition.generate(this,y,W,G));for(const D of R)x=x.concat(D);return this.$_root._tracer&&this.$_root._tracer._combine(x,[this,...R]),this.$_temp.whens[Y]=x,{schema:x,id:Y}}_inner(y,W,G={}){s(!this._inRuleset(),`Cannot set ${y} inside a ruleset`);const R=this.clone();return R.$_terms[y]&&!G.override||(R.$_terms[y]=[]),G.single?R.$_terms[y].push(W):R.$_terms[y].push(...W),R.$_temp.ruleset=!1,R}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(y,W={}){if(!this._singleRules.has(y))return this;const G=W.clone!==!1?this.clone():this;G._singleRules.delete(y);const R=[];for(let X=0;X<G._rules.length;++X){const Y=G._rules[X];Y.name!==y||Y.keep?R.push(Y):G._inRuleset()&&X<G.$_temp.ruleset&&--G.$_temp.ruleset}return G._rules=R,G}_values(y,W){d.verifyFlat(y,W.slice(1,-1));const G=this.clone(),R=y[0]===d.symbols.override;if(R&&(y=y.slice(1)),!G[W]&&y.length?G[W]=new k:R&&(G[W]=y.length?new k:null,G.$_mutateRebuild()),!G[W])return G;R&&G[W].override();for(const X of y){s(X!==void 0,"Cannot call allow/valid/invalid with undefined"),s(X!==d.symbols.override,"Override must be the first value");const Y=W==="_invalids"?"_valids":"_invalids";G[Y]&&(G[Y].remove(X),G[Y].length||(s(W==="_valids"||!G._flags.only,"Setting invalid value",X,"leaves schema rejecting all values due to previous valid rule"),G[Y]=null)),G[W].add(X,G._refs)}return G}}};B.Base.prototype[d.symbols.any]={version:d.version,compile:I.compile,root:"$_root"},B.Base.prototype.isImmutable=!0,B.Base.prototype.deny=B.Base.prototype.invalid,B.Base.prototype.disallow=B.Base.prototype.invalid,B.Base.prototype.equal=B.Base.prototype.valid,B.Base.prototype.exist=B.Base.prototype.required,B.Base.prototype.not=B.Base.prototype.invalid,B.Base.prototype.options=B.Base.prototype.prefs,B.Base.prototype.preferences=B.Base.prototype.prefs,o.exports=new B.Base},8652:(o,i,a)=>{const s=a(375),l=a(8571),c=a(8160),u={max:1e3,supported:new Set(["undefined","boolean","number","string"])};i.provider={provision:g=>new u.Cache(g)},u.Cache=class{constructor(g={}){c.assertOptions(g,["max"]),s(g.max===void 0||g.max&&g.max>0&&isFinite(g.max),"Invalid max cache size"),this._max=g.max||u.max,this._map=new Map,this._list=new u.List}get length(){return this._map.size}set(g,d){if(g!==null&&!u.supported.has(typeof g))return;let I=this._map.get(g);if(I)return I.value=d,void this._list.first(I);I=this._list.unshift({key:g,value:d}),this._map.set(g,I),this._compact()}get(g){const d=this._map.get(g);if(d)return this._list.first(d),l(d.value)}_compact(){if(this._map.size>this._max){const g=this._list.pop();this._map.delete(g.key)}}},u.List=class{constructor(){this.tail=null,this.head=null}unshift(g){return g.next=null,g.prev=this.head,this.head&&(this.head.next=g),this.head=g,this.tail||(this.tail=g),g}first(g){g!==this.head&&(this._remove(g),this.unshift(g))}pop(){return this._remove(this.tail)}_remove(g){const{next:d,prev:I}=g;return d.prev=I,I&&(I.next=d),g===this.tail&&(this.tail=d),g.prev=null,g.next=null,g}}},8160:(o,i,a)=>{const s=a(375),l=a(7916),c=a(5934);let u,g;const d={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};i.version=c.version,i.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},i.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},i.assertOptions=function(I,C,h="Options"){s(I&&typeof I=="object"&&!Array.isArray(I),"Options must be of type object");const f=Object.keys(I).filter(A=>!C.includes(A));s(f.length===0,`${h} contain unknown keys: ${f}`)},i.checkPreferences=function(I){g=g||a(3378);const C=g.preferences.validate(I);if(C.error)throw new l([C.error.details[0].message])},i.compare=function(I,C,h){switch(h){case"=":return I===C;case">":return I>C;case"<":return I<C;case">=":return I>=C;case"<=":return I<=C}},i.default=function(I,C){return I===void 0?C:I},i.isIsoDate=function(I){return d.isoDate.test(I)},i.isNumber=function(I){return typeof I=="number"&&!isNaN(I)},i.isResolvable=function(I){return!!I&&(I[i.symbols.ref]||I[i.symbols.template])},i.isSchema=function(I,C={}){const h=I&&I[i.symbols.any];return!!h&&(s(C.legacy||h.version===i.version,"Cannot mix different versions of joi schemas"),!0)},i.isValues=function(I){return I[i.symbols.values]},i.limit=function(I){return Number.isSafeInteger(I)&&I>=0},i.preferences=function(I,C){u=u||a(6914),I=I||{},C=C||{};const h=Object.assign({},I,C);return C.errors&&I.errors&&(h.errors=Object.assign({},I.errors,C.errors),h.errors.wrap=Object.assign({},I.errors.wrap,C.errors.wrap)),C.messages&&(h.messages=u.compile(C.messages,I.messages)),delete h[i.symbols.prefs],h},i.tryWithPath=function(I,C,h={}){try{return I()}catch(f){throw f.path!==void 0?f.path=C+"."+f.path:f.path=C,h.append&&(f.message=`${f.message} (${f.path})`),f}},i.validateArg=function(I,C,{assert:h,message:f}){if(i.isSchema(h)){const A=h.validate(I);return A.error?A.error.message:void 0}if(!h(I))return C?`${C} ${f}`:f},i.verifyFlat=function(I,C){for(const h of I)s(!Array.isArray(h),"Method no longer accepts array arguments:",C)}},3292:(o,i,a)=>{const s=a(375),l=a(8160),c=a(6133),u={};i.schema=function(g,d,I={}){l.assertOptions(I,["appendPath","override"]);try{return u.schema(g,d,I)}catch(C){throw I.appendPath&&C.path!==void 0&&(C.message=`${C.message} (${C.path})`),C}},u.schema=function(g,d,I){s(d!==void 0,"Invalid undefined schema"),Array.isArray(d)&&(s(d.length,"Invalid empty array schema"),d.length===1&&(d=d[0]));const C=(h,...f)=>I.override!==!1?h.valid(g.override,...f):h.valid(...f);if(u.simple(d))return C(g,d);if(typeof d=="function")return g.custom(d);if(s(typeof d=="object","Invalid schema content:",typeof d),l.isResolvable(d))return C(g,d);if(l.isSchema(d))return d;if(Array.isArray(d)){for(const h of d)if(!u.simple(h))return g.alternatives().try(...d);return C(g,...d)}return d instanceof RegExp?g.string().regex(d):d instanceof Date?C(g.date(),d):(s(Object.getPrototypeOf(d)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),g.object().keys(d))},i.ref=function(g,d){return c.isRef(g)?g:c.create(g,d)},i.compile=function(g,d,I={}){l.assertOptions(I,["legacy"]);const C=d&&d[l.symbols.any];if(C)return s(I.legacy||C.version===l.version,"Cannot mix different versions of joi schemas:",C.version,l.version),d;if(typeof d!="object"||!I.legacy)return i.schema(g,d,{appendPath:!0});const h=u.walk(d);return h?h.compile(h.root,d):i.schema(g,d,{appendPath:!0})},u.walk=function(g){if(typeof g!="object")return null;if(Array.isArray(g)){for(const I of g){const C=u.walk(I);if(C)return C}return null}const d=g[l.symbols.any];if(d)return{root:g[d.root],compile:d.compile};s(Object.getPrototypeOf(g)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const I in g){const C=u.walk(g[I]);if(C)return C}return null},u.simple=function(g){return g===null||["boolean","string","number"].includes(typeof g)},i.when=function(g,d,I){if(I===void 0&&(s(d&&typeof d=="object","Missing options"),I=d,d=c.create(".")),Array.isArray(I)&&(I={switch:I}),l.assertOptions(I,["is","not","then","otherwise","switch","break"]),l.isSchema(d))return s(I.is===void 0,'"is" can not be used with a schema condition'),s(I.not===void 0,'"not" can not be used with a schema condition'),s(I.switch===void 0,'"switch" can not be used with a schema condition'),u.condition(g,{is:d,then:I.then,otherwise:I.otherwise,break:I.break});if(s(c.isRef(d)||typeof d=="string","Invalid condition:",d),s(I.not===void 0||I.is===void 0,'Cannot combine "is" with "not"'),I.switch===void 0){let h=I;I.not!==void 0&&(h={is:I.not,then:I.otherwise,otherwise:I.then,break:I.break});let f=h.is!==void 0?g.$_compile(h.is):g.$_root.invalid(null,!1,0,"").required();return s(h.then!==void 0||h.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),s(h.break===void 0||h.then===void 0||h.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),I.is===void 0||c.isRef(I.is)||l.isSchema(I.is)||(f=f.required()),u.condition(g,{ref:i.ref(d),is:f,then:h.then,otherwise:h.otherwise,break:h.break})}s(Array.isArray(I.switch),'"switch" must be an array'),s(I.is===void 0,'Cannot combine "switch" with "is"'),s(I.not===void 0,'Cannot combine "switch" with "not"'),s(I.then===void 0,'Cannot combine "switch" with "then"');const C={ref:i.ref(d),switch:[],break:I.break};for(let h=0;h<I.switch.length;++h){const f=I.switch[h],A=h===I.switch.length-1;l.assertOptions(f,A?["is","then","otherwise"]:["is","then"]),s(f.is!==void 0,'Switch statement missing "is"'),s(f.then!==void 0,'Switch statement missing "then"');const m={is:g.$_compile(f.is),then:g.$_compile(f.then)};if(c.isRef(f.is)||l.isSchema(f.is)||(m.is=m.is.required()),A){s(I.otherwise===void 0||f.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const p=I.otherwise!==void 0?I.otherwise:f.otherwise;p!==void 0&&(s(C.break===void 0,"Cannot specify both otherwise and break"),m.otherwise=g.$_compile(p))}C.switch.push(m)}return C},u.condition=function(g,d){for(const I of["then","otherwise"])d[I]===void 0?delete d[I]:d[I]=g.$_compile(d[I]);return d}},6354:(o,i,a)=>{const s=a(5688),l=a(8160),c=a(3328);i.Report=class{constructor(u,g,d,I,C,h,f){if(this.code=u,this.flags=I,this.messages=C,this.path=h.path,this.prefs=f,this.state=h,this.value=g,this.message=null,this.template=null,this.local=d||{},this.local.label=i.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const A=this.path[this.path.length-1];typeof A!="object"&&(this.local.key=A)}}_setTemplate(u){if(this.template=u,!this.flags.label&&this.path.length===0){const g=this._template(this.template,"root");g&&(this.local.label=g)}}toString(){if(this.message)return this.message;const u=this.code;if(!this.prefs.errors.render)return this.code;const g=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return g===void 0?`Error code "${u}" is not defined, your custom type is missing the correct messages definition`:(this.message=g.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(u,g){return i.template(this.value,u,g||this.code,this.state,this.prefs)}},i.path=function(u){let g="";for(const d of u)typeof d!="object"&&(typeof d=="string"?(g&&(g+="."),g+=d):g+=`[${d}]`);return g},i.template=function(u,g,d,I,C){if(!g)return;if(c.isTemplate(g))return d!=="root"?g:null;let h=C.errors.language;if(l.isResolvable(h)&&(h=h.resolve(u,I,C)),h&&g[h]){if(g[h][d]!==void 0)return g[h][d];if(g[h]["*"]!==void 0)return g[h]["*"]}return g[d]?g[d]:g["*"]},i.label=function(u,g,d,I){if(!d.errors.label)return"";if(u.label)return u.label;let C=g.path;return d.errors.label==="key"&&g.path.length>1&&(C=g.path.slice(-1)),i.path(C)||i.template(null,d.messages,"root",g,d)||I&&i.template(null,I,"root",g,d)||"value"},i.process=function(u,g,d){if(!u)return null;const{override:I,message:C,details:h}=i.details(u);if(I)return I;if(d.errors.stack)return new i.ValidationError(C,h,g);const f=Error.stackTraceLimit;Error.stackTraceLimit=0;const A=new i.ValidationError(C,h,g);return Error.stackTraceLimit=f,A},i.details=function(u,g={}){let d=[];const I=[];for(const C of u){if(C instanceof Error){if(g.override!==!1)return{override:C};const f=C.toString();d.push(f),I.push({message:f,type:"override",context:{error:C}});continue}const h=C.toString();d.push(h),I.push({message:h,path:C.path.filter(f=>typeof f!="object"),type:C.code,context:C.local})}return d.length>1&&(d=[...new Set(d)]),{message:d.join(". "),details:I}},i.ValidationError=class extends Error{constructor(u,g,d){super(u),this._original=d,this.details=g}static isError(u){return u instanceof i.ValidationError}},i.ValidationError.prototype.isJoi=!0,i.ValidationError.prototype.name="ValidationError",i.ValidationError.prototype.annotate=s.error},8901:(o,i,a)=>{const s=a(375),l=a(8571),c=a(8160),u=a(6914),g={};i.type=function(d,I){const C=Object.getPrototypeOf(d),h=l(C),f=d._assign(Object.create(h)),A=Object.assign({},I);delete A.base,h._definition=A;const m=C._definition||{};A.messages=u.merge(m.messages,A.messages),A.properties=Object.assign({},m.properties,A.properties),f.type=A.type,A.flags=Object.assign({},m.flags,A.flags);const p=Object.assign({},m.terms);if(A.terms)for(const B in A.terms){const y=A.terms[B];s(f.$_terms[B]===void 0,"Invalid term override for",A.type,B),f.$_terms[B]=y.init,p[B]=y}A.terms=p,A.args||(A.args=m.args),A.prepare=g.prepare(A.prepare,m.prepare),A.coerce&&(typeof A.coerce=="function"&&(A.coerce={method:A.coerce}),A.coerce.from&&!Array.isArray(A.coerce.from)&&(A.coerce={method:A.coerce.method,from:[].concat(A.coerce.from)})),A.coerce=g.coerce(A.coerce,m.coerce),A.validate=g.validate(A.validate,m.validate);const Z=Object.assign({},m.rules);if(A.rules)for(const B in A.rules){const y=A.rules[B];s(typeof y=="object","Invalid rule definition for",A.type,B);let W=y.method;if(W===void 0&&(W=function(){return this.$_addRule(B)}),W&&(s(!h[B],"Rule conflict in",A.type,B),h[B]=W),s(!Z[B],"Rule conflict in",A.type,B),Z[B]=y,y.alias){const G=[].concat(y.alias);for(const R of G)h[R]=y.method}y.args&&(y.argsByName=new Map,y.args=y.args.map(G=>(typeof G=="string"&&(G={name:G}),s(!y.argsByName.has(G.name),"Duplicated argument name",G.name),c.isSchema(G.assert)&&(G.assert=G.assert.strict().label(G.name)),y.argsByName.set(G.name,G),G)))}A.rules=Z;const v=Object.assign({},m.modifiers);if(A.modifiers)for(const B in A.modifiers){s(!h[B],"Rule conflict in",A.type,B);const y=A.modifiers[B];s(typeof y=="function","Invalid modifier definition for",A.type,B);const W=function(G){return this.rule({[B]:G})};h[B]=W,v[B]=y}if(A.modifiers=v,A.overrides){h._super=C,f.$_super={};for(const B in A.overrides)s(C[B],"Cannot override missing",B),A.overrides[B][c.symbols.parent]=C[B],f.$_super[B]=C[B].bind(f);Object.assign(h,A.overrides)}A.cast=Object.assign({},m.cast,A.cast);const k=Object.assign({},m.manifest,A.manifest);return k.build=g.build(A.manifest&&A.manifest.build,m.manifest&&m.manifest.build),A.manifest=k,A.rebuild=g.rebuild(A.rebuild,m.rebuild),f},g.build=function(d,I){return d&&I?function(C,h){return I(d(C,h),h)}:d||I},g.coerce=function(d,I){return d&&I?{from:d.from&&I.from?[...new Set([...d.from,...I.from])]:null,method(C,h){let f;if((!I.from||I.from.includes(typeof C))&&(f=I.method(C,h),f)){if(f.errors||f.value===void 0)return f;C=f.value}if(!d.from||d.from.includes(typeof C)){const A=d.method(C,h);if(A)return A}return f}}:d||I},g.prepare=function(d,I){return d&&I?function(C,h){const f=d(C,h);if(f){if(f.errors||f.value===void 0)return f;C=f.value}return I(C,h)||f}:d||I},g.rebuild=function(d,I){return d&&I?function(C){I(C),d(C)}:d||I},g.validate=function(d,I){return d&&I?function(C,h){const f=I(C,h);if(f){if(f.errors&&(!Array.isArray(f.errors)||f.errors.length))return f;C=f.value}return d(C,h)||f}:d||I}},5107:(o,i,a)=>{const s=a(375),l=a(8571),c=a(8652),u=a(8160),g=a(3292),d=a(6354),I=a(8901),C=a(9708),h=a(6133),f=a(3328),A=a(1152);let m;const p={types:{alternatives:a(4946),any:a(8068),array:a(546),boolean:a(4937),date:a(7500),function:a(390),link:a(8785),number:a(3832),object:a(8966),string:a(7417),symbol:a(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const Z={_types:new Set(Object.keys(p.types))};for(const v of Z._types)Z[v]=function(...k){return s(!k.length||["alternatives","link","object"].includes(v),"The",v,"type does not allow arguments"),p.generate(this,p.types[v],k)};for(const v of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])Z[v]=function(...k){return this.any()[v](...k)};Object.assign(Z,p.methods);for(const v in p.aliases){const k=p.aliases[v];Z[v]=Z[k]}return Z.x=Z.expression,A.setup&&A.setup(Z),Z}};p.methods={ValidationError:d.ValidationError,version:u.version,cache:c.provider,assert(Z,v,...k){p.assert(Z,v,!0,k)},attempt:(Z,v,...k)=>p.assert(Z,v,!1,k),build(Z){return s(typeof C.build=="function","Manifest functionality disabled"),C.build(this,Z)},checkPreferences(Z){u.checkPreferences(Z)},compile(Z,v){return g.compile(this,Z,v)},defaults(Z){s(typeof Z=="function","modifier must be a function");const v=Object.assign({},this);for(const k of v._types){const B=Z(v[k]());s(u.isSchema(B),"modifier must return a valid schema object"),v[k]=function(...y){return p.generate(this,B,y)}}return v},expression:(...Z)=>new f(...Z),extend(...Z){u.verifyFlat(Z,"extend"),m=m||a(3378),s(Z.length,"You need to provide at least one extension"),this.assert(Z,m.extensions);const v=Object.assign({},this);v._types=new Set(v._types);for(let k of Z){typeof k=="function"&&(k=k(v)),this.assert(k,m.extension);const B=p.expandExtension(k,v);for(const y of B){s(v[y.type]===void 0||v._types.has(y.type),"Cannot override name",y.type);const W=y.base||this.any(),G=I.type(W,y);v._types.add(y.type),v[y.type]=function(...R){return p.generate(this,G,R)}}}return v},isError:d.ValidationError.isError,isExpression:f.isTemplate,isRef:h.isRef,isSchema:u.isSchema,in:(...Z)=>h.in(...Z),override:u.symbols.override,ref:(...Z)=>h.create(...Z),types(){const Z={};for(const v of this._types)Z[v]=this[v]();for(const v in p.aliases)Z[v]=this[v]();return Z}},p.assert=function(Z,v,k,B){const y=B[0]instanceof Error||typeof B[0]=="string"?B[0]:null,W=y!==null?B[1]:B[0],G=v.validate(Z,u.preferences({errors:{stack:!0}},W||{}));let R=G.error;if(!R)return G.value;if(y instanceof Error)throw y;const X=k&&typeof R.annotate=="function"?R.annotate():R.message;throw R instanceof d.ValidationError==0&&(R=l(R)),R.message=y?`${y} ${X}`:X,R},p.generate=function(Z,v,k){return s(Z,"Must be invoked on a Joi instance."),v.$_root=Z,v._definition.args&&k.length?v._definition.args(v,...k):v},p.expandExtension=function(Z,v){if(typeof Z.type=="string")return[Z];const k=[];for(const B of v._types)if(Z.type.test(B)){const y=Object.assign({},Z);y.type=B,y.base=v[B](),k.push(y)}return k},o.exports=p.root()},6914:(o,i,a)=>{const s=a(375),l=a(8571),c=a(3328);i.compile=function(u,g){if(typeof u=="string")return s(!g,"Cannot set single message string"),new c(u);if(c.isTemplate(u))return s(!g,"Cannot set single message template"),u;s(typeof u=="object"&&!Array.isArray(u),"Invalid message options"),g=g?l(g):{};for(let d in u){const I=u[d];if(d==="root"||c.isTemplate(I)){g[d]=I;continue}if(typeof I=="string"){g[d]=new c(I);continue}s(typeof I=="object"&&!Array.isArray(I),"Invalid message for",d);const C=d;for(d in g[C]=g[C]||{},I){const h=I[d];d==="root"||c.isTemplate(h)?g[C][d]=h:(s(typeof h=="string","Invalid message for",d,"in",C),g[C][d]=new c(h))}}return g},i.decompile=function(u){const g={};for(let d in u){const I=u[d];if(d==="root"){g.root=I;continue}if(c.isTemplate(I)){g[d]=I.describe({compact:!0});continue}const C=d;for(d in g[C]={},I){const h=I[d];d!=="root"?g[C][d]=h.describe({compact:!0}):g[C].root=h}}return g},i.merge=function(u,g){if(!u)return i.compile(g);if(!g)return u;if(typeof g=="string")return new c(g);if(c.isTemplate(g))return g;const d=l(u);for(let I in g){const C=g[I];if(I==="root"||c.isTemplate(C)){d[I]=C;continue}if(typeof C=="string"){d[I]=new c(C);continue}s(typeof C=="object"&&!Array.isArray(C),"Invalid message for",I);const h=I;for(I in d[h]=d[h]||{},C){const f=C[I];I==="root"||c.isTemplate(f)?d[h][I]=f:(s(typeof f=="string","Invalid message for",I,"in",h),d[h][I]=new c(f))}}return d}},2294:(o,i,a)=>{const s=a(375),l=a(8160),c=a(6133),u={};i.Ids=u.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const g=new u.Ids;return g._byId=new Map(this._byId),g._byKey=new Map(this._byKey),g._schemaChain=this._schemaChain,g}concat(g){g._schemaChain&&(this._schemaChain=!0);for(const[d,I]of g._byId.entries())s(!this._byKey.has(d),"Schema id conflicts with existing key:",d),this._byId.set(d,I);for(const[d,I]of g._byKey.entries())s(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,I)}fork(g,d,I){const C=this._collect(g);C.push({schema:I});const h=C.shift();let f={id:h.id,schema:d(h.schema)};s(l.isSchema(f.schema),"adjuster function failed to return a joi schema type");for(const A of C)f={id:A.id,schema:u.fork(A.schema,f.id,f.schema)};return f.schema}labels(g,d=[]){const I=g[0],C=this._get(I);if(!C)return[...d,...g].join(".");const h=g.slice(1);return d=[...d,C.schema._flags.label||I],h.length?C.schema._ids.labels(h,d):d.join(".")}reach(g,d=[]){const I=g[0],C=this._get(I);s(C,"Schema does not contain path",[...d,...g].join("."));const h=g.slice(1);return h.length?C.schema._ids.reach(h,[...d,I]):C.schema}register(g,{key:d}={}){if(!g||!l.isSchema(g))return;(g.$_property("schemaChain")||g._ids._schemaChain)&&(this._schemaChain=!0);const I=g._flags.id;if(I){const C=this._byId.get(I);s(!C||C.schema===g,"Cannot add different schemas with the same id:",I),s(!this._byKey.has(I),"Schema id conflicts with existing key:",I),this._byId.set(I,{schema:g,id:I})}d&&(s(!this._byKey.has(d),"Schema already contains key:",d),s(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,{schema:g,id:d}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(g,d=[],I=[]){const C=g[0],h=this._get(C);s(h,"Schema does not contain path",[...d,...g].join(".")),I=[h,...I];const f=g.slice(1);return f.length?h.schema._ids._collect(f,[...d,C],I):I}_get(g){return this._byId.get(g)||this._byKey.get(g)}},u.fork=function(g,d,I){const C=i.schema(g,{each:(h,{key:f})=>{if(d===(h._flags.id||f))return I},ref:!1});return C?C.$_mutateRebuild():g},i.schema=function(g,d){let I;for(const C in g._flags){if(C[0]==="_")continue;const h=u.scan(g._flags[C],{source:"flags",name:C},d);h!==void 0&&(I=I||g.clone(),I._flags[C]=h)}for(let C=0;C<g._rules.length;++C){const h=g._rules[C],f=u.scan(h.args,{source:"rules",name:h.name},d);if(f!==void 0){I=I||g.clone();const A=Object.assign({},h);A.args=f,I._rules[C]=A,I._singleRules.get(h.name)===h&&I._singleRules.set(h.name,A)}}for(const C in g.$_terms){if(C[0]==="_")continue;const h=u.scan(g.$_terms[C],{source:"terms",name:C},d);h!==void 0&&(I=I||g.clone(),I.$_terms[C]=h)}return I},u.scan=function(g,d,I,C,h){const f=C||[];if(g===null||typeof g!="object")return;let A;if(Array.isArray(g)){for(let m=0;m<g.length;++m){const p=d.source==="terms"&&d.name==="keys"&&g[m].key,Z=u.scan(g[m],d,I,[m,...f],p);Z!==void 0&&(A=A||g.slice(),A[m]=Z)}return A}if(I.schema!==!1&&l.isSchema(g)||I.ref!==!1&&c.isRef(g)){const m=I.each(g,{...d,path:f,key:h});return m===g?void 0:m}for(const m in g){if(m[0]==="_")continue;const p=u.scan(g[m],d,I,[m,...f],h);p!==void 0&&(A=A||Object.assign({},g),A[m]=p)}return A}},6133:(o,i,a)=>{const s=a(375),l=a(8571),c=a(9621),u=a(8160);let g;const d={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};i.create=function(I,C={}){s(typeof I=="string","Invalid reference key:",I),u.assertOptions(C,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),s(!C.prefix||typeof C.prefix=="object","options.prefix must be of type object");const h=Object.assign({},d.defaults,C);delete h.prefix;const f=h.separator,A=d.context(I,f,C.prefix);if(h.type=A.type,I=A.key,h.type==="value")if(A.root&&(s(!f||I[0]!==f,"Cannot specify relative path with root prefix"),h.ancestor="root",I||(I=null)),f&&f===I)I=null,h.ancestor=0;else if(h.ancestor!==void 0)s(!f||!I||I[0]!==f,"Cannot combine prefix with ancestor option");else{const[m,p]=d.ancestor(I,f);p&&(I=I.slice(p))===""&&(I=null),h.ancestor=m}return h.path=f?I===null?[]:I.split(f):[I],new d.Ref(h)},i.in=function(I,C={}){return i.create(I,{...C,in:!0})},i.isRef=function(I){return!!I&&!!I[u.symbols.ref]},d.Ref=class{constructor(I){s(typeof I=="object","Invalid reference construction"),u.assertOptions(I,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),s([!1,void 0].includes(I.separator)||typeof I.separator=="string"&&I.separator.length===1,"Invalid separator"),s(!I.adjust||typeof I.adjust=="function","options.adjust must be a function"),s(!I.map||Array.isArray(I.map),"options.map must be an array"),s(!I.map||!I.adjust,"Cannot set both map and adjust options"),Object.assign(this,d.defaults,I),s(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(I,C,h,f,A={}){return s(!this.in||A.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(h.context,C,A):this.type==="local"?this._resolve(f,C,A):this.ancestor?this.ancestor==="root"?this._resolve(C.ancestors[C.ancestors.length-1],C,A):(s(this.ancestor<=C.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(C.ancestors[this.ancestor-1],C,A)):this._resolve(I,C,A)}_resolve(I,C,h){let f;if(this.type==="value"&&C.mainstay.shadow&&h.shadow!==!1&&(f=C.mainstay.shadow.get(this.absolute(C))),f===void 0&&(f=c(I,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(f=this.adjust(f)),this.map){const A=this.map.get(f);A!==void 0&&(f=A)}return C.mainstay&&C.mainstay.tracer.resolve(C,this,f),f}toString(){return this.display}absolute(I){return[...I.path.slice(0,-this.ancestor),...this.path]}clone(){return new d.Ref(this)}describe(){const I={path:this.path};this.type!=="value"&&(I.type=this.type),this.separator!=="."&&(I.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(I.ancestor=this.ancestor),this.map&&(I.map=[...this.map]);for(const C of["adjust","iterables","render"])this[C]!==null&&this[C]!==void 0&&(I[C]=this[C]);return this.in!==!1&&(I.in=!0),{ref:I}}updateDisplay(){const I=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${I}`);if(!this.separator)return void(this.display=`ref:${I}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${I}`);if(this.ancestor==="root")return void(this.display=`ref:root:${I}`);if(this.ancestor===1)return void(this.display=`ref:${I||".."}`);const C=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${C}${I||""}`}},d.Ref.prototype[u.symbols.ref]=!0,i.build=function(I){return(I=Object.assign({},d.defaults,I)).type==="value"&&I.ancestor===void 0&&(I.ancestor=1),new d.Ref(I)},d.context=function(I,C,h={}){if(I=I.trim(),h){const f=h.global===void 0?"$":h.global;if(f!==C&&I.startsWith(f))return{key:I.slice(f.length),type:"global"};const A=h.local===void 0?"#":h.local;if(A!==C&&I.startsWith(A))return{key:I.slice(A.length),type:"local"};const m=h.root===void 0?"/":h.root;if(m!==C&&I.startsWith(m))return{key:I.slice(m.length),type:"value",root:!0}}return{key:I,type:"value"}},d.ancestor=function(I,C){if(!C)return[1,0];if(I[0]!==C)return[1,0];if(I[1]!==C)return[0,1];let h=2;for(;I[h]===C;)++h;return[h-1,h]},i.toSibling=0,i.toParent=1,i.Manager=class{constructor(){this.refs=[]}register(I,C){if(I)if(C=C===void 0?i.toParent:C,Array.isArray(I))for(const h of I)this.register(h,C);else if(u.isSchema(I))for(const h of I._refs.refs)h.ancestor-C>=0&&this.refs.push({ancestor:h.ancestor-C,root:h.root});else i.isRef(I)&&I.type==="value"&&I.ancestor-C>=0&&this.refs.push({ancestor:I.ancestor-C,root:I.root}),g=g||a(3328),g.isTemplate(I)&&this.register(I.refs(),C)}get length(){return this.refs.length}clone(){const I=new i.Manager;return I.refs=l(this.refs),I}reset(){this.refs=[]}roots(){return this.refs.filter(I=>!I.ancestor).map(I=>I.root)}}},3378:(o,i,a)=>{const s=a(5107),l={};l.wrap=s.string().min(1).max(2).allow(!1),i.preferences=s.object({allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),context:s.object(),convert:s.boolean(),dateFormat:s.valid("date","iso","string","time","utc"),debug:s.boolean(),errors:{escapeHtml:s.boolean(),label:s.valid("path","key",!1),language:[s.string(),s.object().ref()],render:s.boolean(),stack:s.boolean(),wrap:{label:l.wrap,array:l.wrap,string:l.wrap}},externals:s.boolean(),messages:s.object(),noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:s.valid("required","optional","forbidden"),skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()}).strict(),l.nameRx=/^[a-zA-Z0-9]\w*$/,l.rule=s.object({alias:s.array().items(s.string().pattern(l.nameRx)).single(),args:s.array().items(s.string(),s.object({name:s.string().pattern(l.nameRx).required(),ref:s.boolean(),assert:s.alternatives([s.function(),s.object().schema()]).conditional("ref",{is:!0,then:s.required()}),normalize:s.function(),message:s.string().when("assert",{is:s.function(),then:s.required()})})),convert:s.boolean(),manifest:s.boolean(),method:s.function().allow(!1),multi:s.boolean(),validate:s.function()}),i.extension=s.object({type:s.alternatives([s.string(),s.object().regex()]).required(),args:s.function(),cast:s.object().pattern(l.nameRx,s.object({from:s.function().maxArity(1).required(),to:s.function().minArity(1).maxArity(2).required()})),base:s.object().schema().when("type",{is:s.object().regex(),then:s.forbidden()}),coerce:[s.function().maxArity(3),s.object({method:s.function().maxArity(3).required(),from:s.array().items(s.string()).single()})],flags:s.object().pattern(l.nameRx,s.object({setter:s.string(),default:s.any()})),manifest:{build:s.function().arity(2)},messages:[s.object(),s.string()],modifiers:s.object().pattern(l.nameRx,s.function().minArity(1).maxArity(2)),overrides:s.object().pattern(l.nameRx,s.function()),prepare:s.function().maxArity(3),rebuild:s.function().arity(1),rules:s.object().pattern(l.nameRx,l.rule),terms:s.object().pattern(l.nameRx,s.object({init:s.array().allow(null).required(),manifest:s.object().pattern(/.+/,[s.valid("schema","single"),s.object({mapped:s.object({from:s.string().required(),to:s.string().required()}).required()})])})),validate:s.function().maxArity(3)}).strict(),i.extensions=s.array().items(s.object(),s.function().arity(1)).strict(),l.desc={buffer:s.object({buffer:s.string()}),func:s.object({function:s.function().required(),options:{literal:!0}}),override:s.object({override:!0}),ref:s.object({ref:s.object({type:s.valid("value","global","local"),path:s.array().required(),separator:s.string().length(1).allow(!1),ancestor:s.number().min(0).integer().allow("root"),map:s.array().items(s.array().length(2)).min(1),adjust:s.function(),iterables:s.boolean(),in:s.boolean(),render:s.boolean()}).required()}),regex:s.object({regex:s.string().min(3)}),special:s.object({special:s.valid("deep").required()}),template:s.object({template:s.string().required(),options:s.object()}),value:s.object({value:s.alternatives([s.object(),s.array()]).required()})},l.desc.entity=s.alternatives([s.array().items(s.link("...")),s.boolean(),s.function(),s.number(),s.string(),l.desc.buffer,l.desc.func,l.desc.ref,l.desc.regex,l.desc.special,l.desc.template,l.desc.value,s.link("/")]),l.desc.values=s.array().items(null,s.boolean(),s.function(),s.number().allow(1/0,-1/0),s.string().allow(""),s.symbol(),l.desc.buffer,l.desc.func,l.desc.override,l.desc.ref,l.desc.regex,l.desc.template,l.desc.value),l.desc.messages=s.object().pattern(/.+/,[s.string(),l.desc.template,s.object().pattern(/.+/,[s.string(),l.desc.template])]),i.description=s.object({type:s.string().required(),flags:s.object({cast:s.string(),default:s.any(),description:s.string(),empty:s.link("/"),failover:l.desc.entity,id:s.string(),label:s.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:s.boolean(),unit:s.string()}).unknown(),preferences:{allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),convert:s.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:s.boolean(),label:["path","key"],language:[s.string(),l.desc.ref],wrap:{label:l.wrap,array:l.wrap}},externals:s.boolean(),messages:l.desc.messages,noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:["required","optional","forbidden"],skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()},allow:l.desc.values,invalid:l.desc.values,rules:s.array().min(1).items({name:s.string().required(),args:s.object().min(1),keep:s.boolean(),message:[s.string(),l.desc.messages],warn:s.boolean()}),keys:s.object().pattern(/.*/,s.link("/")),link:l.desc.ref}).pattern(/^[a-z]\w*$/,s.any())},493:(o,i,a)=>{const s=a(8571),l=a(9621),c=a(8160),u={value:Symbol("value")};o.exports=u.State=class{constructor(g,d,I){this.path=g,this.ancestors=d,this.mainstay=I.mainstay,this.schemas=I.schemas,this.debug=null}localize(g,d=null,I=null){const C=new u.State(g,d,this);return I&&C.schemas&&(C.schemas=[u.schemas(I),...C.schemas]),C}nest(g,d){const I=new u.State(this.path,this.ancestors,this);return I.schemas=I.schemas&&[u.schemas(g),...I.schemas],I.debug=d,I}shadow(g,d){this.mainstay.shadow=this.mainstay.shadow||new u.Shadow,this.mainstay.shadow.set(this.path,g,d)}snapshot(){this.mainstay.shadow&&(this._snapshot=s(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},u.schemas=function(g){return c.isSchema(g)?{schema:g}:g},u.Shadow=class{constructor(){this._values=null}set(g,d,I){if(!g.length||I==="strip"&&typeof g[g.length-1]=="number")return;this._values=this._values||new Map;let C=this._values;for(let h=0;h<g.length;++h){const f=g[h];let A=C.get(f);A||(A=new Map,C.set(f,A)),C=A}C[u.value]=d}get(g){const d=this.node(g);if(d)return d[u.value]}node(g){if(this._values)return l(this._values,g,{iterables:!0})}override(g,d){if(!this._values)return;const I=g.slice(0,-1),C=g[g.length-1],h=l(this._values,I,{iterables:!0});d?h.set(C,d):h&&h.delete(C)}}},3328:(o,i,a)=>{const s=a(375),l=a(8571),c=a(5277),u=a(1447),g=a(8160),d=a(6354),I=a(6133),C={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};o.exports=C.Template=class{constructor(h,f){if(s(typeof h=="string","Template source must be a string"),s(!h.includes("\0")&&!h.includes(""),"Template source cannot contain reserved control characters"),this.source=h,this.rendered=h,this._template=null,f){const{functions:A,...m}=f;this._settings=Object.keys(m).length?l(m):void 0,this._functions=A,this._functions&&(s(Object.keys(this._functions).every(p=>typeof p=="string"),"Functions keys must be strings"),s(Object.values(this._functions).every(p=>typeof p=="function"),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const h=C.encode(this.source),f=C.split(h);let A=!1;const m=[],p=f.shift();p&&m.push(p);for(const Z of f){const v=Z[0]!=="{",k=v?"}":"}}",B=Z.indexOf(k);if(B===-1||Z[1]==="{"){m.push(`{${C.decode(Z)}`);continue}let y=Z.slice(v?0:1,B);const W=y[0]===":";W&&(y=y.slice(1));const G=this._ref(C.decode(y),{raw:v,wrapped:W});m.push(G),typeof G!="string"&&(A=!0);const R=Z.slice(B+k.length);R&&m.push(C.decode(R))}A?this._template=m:this.rendered=m.join("")}static date(h,f){return C.dateFormat[f.dateFormat].call(h)}describe(h={}){if(!this._settings&&h.compact)return this.source;const f={template:this.source};return this._settings&&(f.options=this._settings),this._functions&&(f.functions=this._functions),f}static build(h){return new C.Template(h.template,h.options||h.functions?{...h.options,functions:h.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(h){return!!h&&!!h[g.symbols.template]}refs(){if(!this._template)return;const h=[];for(const f of this._template)typeof f!="string"&&h.push(...f.refs);return h}resolve(h,f,A,m){return this._template&&this._template.length===1?this._part(this._template[0],h,f,A,m,{}):this.render(h,f,A,m)}_part(h,...f){return h.ref?h.ref.resolve(...f):h.formula.evaluate(f)}render(h,f,A,m,p={}){if(!this.isDynamic())return this.rendered;const Z=[];for(const v of this._template)if(typeof v=="string")Z.push(v);else{const k=this._part(v,h,f,A,m,p),B=C.stringify(k,h,f,A,m,p);if(B!==void 0){const y=v.raw||(p.errors&&p.errors.escapeHtml)===!1?B:c(B);Z.push(C.wrap(y,v.wrapped&&A.errors.wrap.label))}}return Z.join("")}_ref(h,{raw:f,wrapped:A}){const m=[],p=v=>{const k=I.create(v,this._settings);return m.push(k),B=>{const y=k.resolve(...B);return y!==void 0?y:null}};try{const v=this._functions?{...C.functions,...this._functions}:C.functions;var Z=new u.Parser(h,{reference:p,functions:v,constants:C.constants})}catch(v){throw v.message=`Invalid template variable "${h}" fails due to: ${v.message}`,v}if(Z.single){if(Z.single.type==="reference"){const v=m[0];return{ref:v,raw:f,refs:m,wrapped:A||v.type==="local"&&v.key==="label"}}return C.stringify(Z.single.value)}return{formula:Z,raw:f,refs:m}}toString(){return this.source}},C.Template.prototype[g.symbols.template]=!0,C.Template.prototype.isImmutable=!0,C.encode=function(h){return h.replace(/\\(\{+)/g,(f,A)=>C.opens.slice(0,A.length)).replace(/\\(\}+)/g,(f,A)=>C.closes.slice(0,A.length))},C.decode=function(h){return h.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},C.split=function(h){const f=[];let A="";for(let m=0;m<h.length;++m){const p=h[m];if(p==="{"){let Z="";for(;m+1<h.length&&h[m+1]==="{";)Z+="{",++m;f.push(A),A=Z}else A+=p}return f.push(A),f},C.wrap=function(h,f){return f?f.length===1?`${f}${h}${f}`:`${f[0]}${h}${f[1]}`:h},C.stringify=function(h,f,A,m,p,Z={}){const v=typeof h,k=m&&m.errors&&m.errors.wrap||{};let B=!1;if(I.isRef(h)&&h.render&&(B=h.in,h=h.resolve(f,A,m,p,{in:h.in,...Z})),h===null)return"null";if(v==="string")return C.wrap(h,Z.arrayItems&&k.string);if(v==="number"||v==="function"||v==="symbol")return h.toString();if(v!=="object")return JSON.stringify(h);if(h instanceof Date)return C.Template.date(h,m);if(h instanceof Map){const W=[];for(const[G,R]of h.entries())W.push(`${G.toString()} -> ${R.toString()}`);h=W}if(!Array.isArray(h))return h.toString();const y=[];for(const W of h)y.push(C.stringify(W,f,A,m,p,{arrayItems:!0,...Z}));return C.wrap(y.join(", "),!B&&k.array)},C.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},C.functions={if:(h,f,A)=>h?f:A,length:h=>typeof h=="string"?h.length:h&&typeof h=="object"?Array.isArray(h)?h.length:Object.keys(h).length:null,msg(h){const[f,A,m,p,Z]=this,v=Z.messages;if(!v)return"";const k=d.template(f,v[0],h,A,m)||d.template(f,v[1],h,A,m);return k?k.render(f,A,m,p,Z):""},number:h=>typeof h=="number"?h:typeof h=="string"?parseFloat(h):typeof h=="boolean"?h?1:0:h instanceof Date?h.getTime():null}},4946:(o,i,a)=>{const s=a(375),l=a(1687),c=a(8068),u=a(8160),g=a(3292),d=a(6354),I=a(6133),C={};o.exports=c.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:I.toSibling}},args:(h,...f)=>f.length===1&&Array.isArray(f[0])?h.try(...f[0]):h.try(...f),validate(h,f){const{schema:A,error:m,state:p,prefs:Z}=f;if(A._flags.match){const k=[],B=[];for(let W=0;W<A.$_terms.matches.length;++W){const G=A.$_terms.matches[W],R=p.nest(G.schema,`match.${W}`);R.snapshot();const X=G.schema.$_validate(h,R,Z);X.errors?(B.push(X.errors),R.restore()):(k.push(X.value),R.commit())}if(k.length===0)return{errors:m("alternatives.any",{details:B.map(W=>d.details(W,{override:!1}))})};if(A._flags.match==="one")return k.length===1?{value:k[0]}:{errors:m("alternatives.one")};if(k.length!==A.$_terms.matches.length)return{errors:m("alternatives.all",{details:B.map(W=>d.details(W,{override:!1}))})};const y=W=>W.$_terms.matches.some(G=>G.schema.type==="object"||G.schema.type==="alternatives"&&y(G.schema));return y(A)?{value:k.reduce((W,G)=>l(W,G,{mergeArrays:!1}))}:{value:k[k.length-1]}}const v=[];for(let k=0;k<A.$_terms.matches.length;++k){const B=A.$_terms.matches[k];if(B.schema){const G=p.nest(B.schema,`match.${k}`);G.snapshot();const R=B.schema.$_validate(h,G,Z);if(!R.errors)return G.commit(),R;G.restore(),v.push({schema:B.schema,reports:R.errors});continue}const y=B.ref?B.ref.resolve(h,p,Z):h,W=B.is?[B]:B.switch;for(let G=0;G<W.length;++G){const R=W[G],{is:X,then:Y,otherwise:x}=R,D=`match.${k}${B.switch?"."+G:""}`;if(X.$_match(y,p.nest(X,`${D}.is`),Z)){if(Y)return Y.$_validate(h,p.nest(Y,`${D}.then`),Z)}else if(x)return x.$_validate(h,p.nest(x,`${D}.otherwise`),Z)}}return C.errors(v,f)},rules:{conditional:{method(h,f){s(!this._flags._endedSwitch,"Unreachable condition"),s(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),s(f.break===void 0,"Cannot use break option with alternatives conditional");const A=this.clone(),m=g.when(A,h,f),p=m.is?[m]:m.switch;for(const Z of p)if(Z.then&&Z.otherwise){A.$_setFlag("_endedSwitch",!0,{clone:!1});break}return A.$_terms.matches.push(m),A.$_mutateRebuild()}},match:{method(h){if(s(["any","one","all"].includes(h),"Invalid alternatives match mode",h),h!=="any")for(const f of this.$_terms.matches)s(f.schema,"Cannot combine match mode",h,"with conditional rules");return this.$_setFlag("match",h)}},try:{method(...h){s(h.length,"Missing alternative schemas"),u.verifyFlat(h,"try"),s(!this._flags._endedSwitch,"Unreachable condition");const f=this.clone();for(const A of h)f.$_terms.matches.push({schema:f.$_compile(A)});return f.$_mutateRebuild()}}},overrides:{label(h){return this.$_parent("label",h).$_modify({each:(f,A)=>A.path[0]!=="is"&&typeof f._flags.label!="string"?f.label(h):void 0,ref:!1})}},rebuild(h){h.$_modify({each:f=>{u.isSchema(f)&&f.type==="array"&&h.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(h,f){if(f.matches)for(const A of f.matches){const{schema:m,ref:p,is:Z,not:v,then:k,otherwise:B}=A;h=m?h.try(m):p?h.conditional(p,{is:Z,then:k,not:v,otherwise:B,switch:A.switch}):h.conditional(Z,{then:k,otherwise:B})}return h}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),C.errors=function(h,{error:f,state:A}){if(!h.length)return{errors:f("alternatives.any")};if(h.length===1)return{errors:h[0].reports};const m=new Set,p=[];for(const{reports:Z,schema:v}of h){if(Z.length>1)return C.unmatched(h,f);const k=Z[0];if(k instanceof d.Report==0)return C.unmatched(h,f);if(k.state.path.length!==A.path.length){p.push({type:v.type,report:k});continue}if(k.code==="any.only"){for(const W of k.local.valids)m.add(W);continue}const[B,y]=k.code.split(".");y!=="base"?p.push({type:v.type,report:k}):k.code==="object.base"?m.add(k.local.type):m.add(B)}return p.length?p.length===1?{errors:p[0].report}:C.unmatched(h,f):{errors:f("alternatives.types",{types:[...m]})}},C.unmatched=function(h,f){const A=[];for(const m of h)A.push(...m.reports);return{errors:f("alternatives.match",d.details(A,{override:!1}))}}},8068:(o,i,a)=>{const s=a(375),l=a(7629),c=a(8160),u=a(6914);o.exports=l.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(g,d){return s(typeof g=="function","Method must be a function"),s(d===void 0||d&&typeof d=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:g,description:d}})},validate(g,d,{method:I}){try{return I(g,d)}catch(C){return d.error("any.custom",{error:C})}},args:["method","description"],multi:!0},messages:{method(g){return this.prefs({messages:g})}},shared:{method(g){s(c.isSchema(g)&&g._flags.id,"Schema must be a schema with an id");const d=this.clone();return d.$_terms.shared=d.$_terms.shared||[],d.$_terms.shared.push(g),d.$_mutateRegister(g),d}},warning:{method(g,d){return s(g&&typeof g=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:g,local:d},warn:!0})},validate:(g,d,{code:I,local:C})=>d.error(I,C),args:["code","local"],multi:!0}},modifiers:{keep(g,d=!0){g.keep=d},message(g,d){g.message=u.compile(d)},warn(g,d=!0){g.warn=d}},manifest:{build(g,d){for(const I in d){const C=d[I];if(["examples","externals","metas","notes","tags"].includes(I))for(const h of C)g=g[I.slice(0,-1)](h);else if(I!=="alterations")if(I!=="whens"){if(I==="shared")for(const h of C)g=g.shared(h)}else for(const h of C){const{ref:f,is:A,not:m,then:p,otherwise:Z,concat:v}=h;g=v?g.concat(v):f?g.when(f,{is:A,not:m,then:p,otherwise:Z,switch:h.switch,break:h.break}):g.when(A,{then:p,otherwise:Z,break:h.break})}else{const h={};for(const{target:f,adjuster:A}of C)h[f]=A;g=g.alter(h)}}return g}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(o,i,a)=>{const s=a(375),l=a(9474),c=a(9621),u=a(8068),g=a(8160),d=a(3292),I={};o.exports=u.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(C,{schema:h,state:f,prefs:A}){if(!Array.isArray(C))return;const m=h.$_getRule("sort");return m?I.sort(h,C,m.args.options,f,A):void 0}},validate(C,{schema:h,error:f}){if(!Array.isArray(C)){if(h._flags.single){const A=[C];return A[g.symbols.arraySingle]=!0,{value:A}}return{errors:f("array.base")}}if(h.$_getRule("items")||h.$_terms.externals)return{value:C.slice()}},rules:{has:{method(C){C=this.$_compile(C,{appendPath:!0});const h=this.$_addRule({name:"has",args:{schema:C}});return h.$_mutateRegister(C),h},validate(C,{state:h,prefs:f,error:A},{schema:m}){const p=[C,...h.ancestors];for(let v=0;v<C.length;++v){const k=h.localize([...h.path,v],p,m);if(m.$_match(C[v],k,f))return C}const Z=m._flags.label;return Z?A("array.hasKnown",{patternLabel:Z}):A("array.hasUnknown",null)},multi:!0},items:{method(...C){g.verifyFlat(C,"items");const h=this.$_addRule("items");for(let f=0;f<C.length;++f){const A=g.tryWithPath(()=>this.$_compile(C[f]),f,{append:!0});h.$_terms.items.push(A)}return h.$_mutateRebuild()},validate(C,{schema:h,error:f,state:A,prefs:m,errorsArray:p}){const Z=h.$_terms._requireds.slice(),v=h.$_terms.ordered.slice(),k=[...h.$_terms._inclusions,...Z],B=!C[g.symbols.arraySingle];delete C[g.symbols.arraySingle];const y=p();let W=C.length;for(let G=0;G<W;++G){const R=C[G];let X=!1,Y=!1;const x=B?G:new Number(G),D=[...A.path,x];if(!h._flags.sparse&&R===void 0){if(y.push(f("array.sparse",{key:x,path:D,pos:G,value:void 0},A.localize(D))),m.abortEarly)return y;v.shift();continue}const L=[C,...A.ancestors];for(const O of h.$_terms._exclusions)if(O.$_match(R,A.localize(D,L,O),m,{presence:"ignore"})){if(y.push(f("array.excludes",{pos:G,value:R},A.localize(D))),m.abortEarly)return y;X=!0,v.shift();break}if(X)continue;if(h.$_terms.ordered.length){if(v.length){const O=v.shift(),re=O.$_validate(R,A.localize(D,L,O),m);if(re.errors){if(y.push(...re.errors),m.abortEarly)return y}else if(O._flags.result==="strip")I.fastSplice(C,G),--G,--W;else{if(!h._flags.sparse&&re.value===void 0){if(y.push(f("array.sparse",{key:x,path:D,pos:G,value:void 0},A.localize(D))),m.abortEarly)return y;continue}C[G]=re.value}continue}if(!h.$_terms.items.length){if(y.push(f("array.orderedLength",{pos:G,limit:h.$_terms.ordered.length})),m.abortEarly)return y;break}}const M=[];let K=Z.length;for(let O=0;O<K;++O){const re=A.localize(D,L,Z[O]);re.snapshot();const H=Z[O].$_validate(R,re,m);if(M[O]=H,!H.errors){if(re.commit(),C[G]=H.value,Y=!0,I.fastSplice(Z,O),--O,--K,!h._flags.sparse&&H.value===void 0&&(y.push(f("array.sparse",{key:x,path:D,pos:G,value:void 0},A.localize(D))),m.abortEarly))return y;break}re.restore()}if(Y)continue;const E=m.stripUnknown&&!!m.stripUnknown.arrays||!1;K=k.length;for(const O of k){let re;const H=Z.indexOf(O);if(H!==-1)re=M[H];else{const z=A.localize(D,L,O);if(z.snapshot(),re=O.$_validate(R,z,m),!re.errors){z.commit(),O._flags.result==="strip"?(I.fastSplice(C,G),--G,--W):h._flags.sparse||re.value!==void 0?C[G]=re.value:(y.push(f("array.sparse",{key:x,path:D,pos:G,value:void 0},A.localize(D))),X=!0),Y=!0;break}z.restore()}if(K===1){if(E){I.fastSplice(C,G),--G,--W,Y=!0;break}if(y.push(...re.errors),m.abortEarly)return y;X=!0;break}}if(!X&&(h.$_terms._inclusions.length||h.$_terms._requireds.length)&&!Y){if(E){I.fastSplice(C,G),--G,--W;continue}if(y.push(f("array.includes",{pos:G,value:R},A.localize(D))),m.abortEarly)return y}}return Z.length&&I.fillMissedErrors(h,y,Z,C,A,m),v.length&&(I.fillOrderedErrors(h,y,v,C,A,m),y.length||I.fillDefault(v,C,A,m)),y.length?y:C},priority:!0,manifest:!1},length:{method(C){return this.$_addRule({name:"length",args:{limit:C},operator:"="})},validate:(C,h,{limit:f},{name:A,operator:m,args:p})=>g.compare(C.length,f,m)?C:h.error("array."+A,{limit:p.limit,value:C}),args:[{name:"limit",ref:!0,assert:g.limit,message:"must be a positive integer"}]},max:{method(C){return this.$_addRule({name:"max",method:"length",args:{limit:C},operator:"<="})}},min:{method(C){return this.$_addRule({name:"min",method:"length",args:{limit:C},operator:">="})}},ordered:{method(...C){g.verifyFlat(C,"ordered");const h=this.$_addRule("items");for(let f=0;f<C.length;++f){const A=g.tryWithPath(()=>this.$_compile(C[f]),f,{append:!0});I.validateSingle(A,h),h.$_mutateRegister(A),h.$_terms.ordered.push(A)}return h.$_mutateRebuild()}},single:{method(C){const h=C===void 0||!!C;return s(!h||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",h)}},sort:{method(C={}){g.assertOptions(C,["by","order"]);const h={order:C.order||"ascending"};return C.by&&(h.by=d.ref(C.by,{ancestor:0}),s(!h.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:h}})},validate(C,{error:h,state:f,prefs:A,schema:m},{options:p}){const{value:Z,errors:v}=I.sort(m,C,p,f,A);if(v)return v;for(let k=0;k<C.length;++k)if(C[k]!==Z[k])return h("array.sort",{order:p.order,by:p.by?p.by.key:"value"});return C},convert:!0},sparse:{method(C){const h=C===void 0||!!C;return this._flags.sparse===h?this:(h?this.clone():this.$_addRule("items")).$_setFlag("sparse",h,{clone:!1})}},unique:{method(C,h={}){s(!C||typeof C=="function"||typeof C=="string","comparator must be a function or a string"),g.assertOptions(h,["ignoreUndefined","separator"]);const f={name:"unique",args:{options:h,comparator:C}};if(C)if(typeof C=="string"){const A=g.default(h.separator,".");f.path=A?C.split(A):[C]}else f.comparator=C;return this.$_addRule(f)},validate(C,{state:h,error:f,schema:A},{comparator:m,options:p},{comparator:Z,path:v}){const k={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},B=Z||l,y=p.ignoreUndefined;for(let W=0;W<C.length;++W){const G=v?c(C[W],v):C[W],R=Z?k.custom:k[typeof G];if(s(R,"Failed to find unique map container for type",typeof G),R instanceof Map){const X=R.entries();let Y;for(;!(Y=X.next()).done;)if(B(Y.value[0],G)){const x=h.localize([...h.path,W],[C,...h.ancestors]),D={pos:W,value:C[W],dupePos:Y.value[1],dupeValue:C[Y.value[1]]};return v&&(D.path=m),f("array.unique",D,x)}R.set(G,W)}else{if((!y||G!==void 0)&&R[G]!==void 0){const X={pos:W,value:C[W],dupePos:R[G],dupeValue:C[R[G]]};return v&&(X.path=m),f("array.unique",X,h.localize([...h.path,W],[C,...h.ancestors]))}R[G]=W}}return C},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(C,h)=>new Set(C)}},rebuild(C){C.$_terms._inclusions=[],C.$_terms._exclusions=[],C.$_terms._requireds=[];for(const h of C.$_terms.items)I.validateSingle(h,C),h._flags.presence==="required"?C.$_terms._requireds.push(h):h._flags.presence==="forbidden"?C.$_terms._exclusions.push(h):C.$_terms._inclusions.push(h);for(const h of C.$_terms.ordered)I.validateSingle(h,C)},manifest:{build:(C,h)=>(h.items&&(C=C.items(...h.items)),h.ordered&&(C=C.ordered(...h.ordered)),C)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),I.fillMissedErrors=function(C,h,f,A,m,p){const Z=[];let v=0;for(const k of f){const B=k._flags.label;B?Z.push(B):++v}Z.length?v?h.push(C.$_createError("array.includesRequiredBoth",A,{knownMisses:Z,unknownMisses:v},m,p)):h.push(C.$_createError("array.includesRequiredKnowns",A,{knownMisses:Z},m,p)):h.push(C.$_createError("array.includesRequiredUnknowns",A,{unknownMisses:v},m,p))},I.fillOrderedErrors=function(C,h,f,A,m,p){const Z=[];for(const v of f)v._flags.presence==="required"&&Z.push(v);Z.length&&I.fillMissedErrors(C,h,Z,A,m,p)},I.fillDefault=function(C,h,f,A){const m=[];let p=!0;for(let Z=C.length-1;Z>=0;--Z){const v=C[Z],k=[h,...f.ancestors],B=v.$_validate(void 0,f.localize(f.path,k,v),A).value;if(p){if(B===void 0)continue;p=!1}m.unshift(B)}m.length&&h.push(...m)},I.fastSplice=function(C,h){let f=h;for(;f<C.length;)C[f++]=C[f];--C.length},I.validateSingle=function(C,h){(C.type==="array"||C._flags._arrayItems)&&(s(!h._flags.single,"Cannot specify array item with single rule enabled"),h.$_setFlag("_arrayItems",!0,{clone:!1}))},I.sort=function(C,h,f,A,m){const p=f.order==="ascending"?1:-1,Z=-1*p,v=p,k=(B,y)=>{let W=I.compare(B,y,Z,v);if(W!==null||(f.by&&(B=f.by.resolve(B,A,m),y=f.by.resolve(y,A,m)),W=I.compare(B,y,Z,v),W!==null))return W;const G=typeof B;if(G!==typeof y)throw C.$_createError("array.sort.mismatching",h,null,A,m);if(G!=="number"&&G!=="string")throw C.$_createError("array.sort.unsupported",h,{type:G},A,m);return G==="number"?(B-y)*p:B<y?Z:v};try{return{value:h.slice().sort(k)}}catch(B){return{errors:B}}},I.compare=function(C,h,f,A){return C===h?0:C===void 0?1:h===void 0?-1:C===null?A:h===null?f:null}},4937:(o,i,a)=>{const s=a(375),l=a(8068),c=a(8160),u=a(2036),g={isBool:function(d){return typeof d=="boolean"}};o.exports=l.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(d,{schema:I}){if(typeof d!="boolean"){if(typeof d=="string"){const C=I._flags.sensitive?d:d.toLowerCase();d=C==="true"||C!=="false"&&d}return typeof d!="boolean"&&(d=I.$_terms.truthy&&I.$_terms.truthy.has(d,null,null,!I._flags.sensitive)||(!I.$_terms.falsy||!I.$_terms.falsy.has(d,null,null,!I._flags.sensitive))&&d),{value:d}}},validate(d,{error:I}){if(typeof d!="boolean")return{value:d,errors:I("boolean.base")}},rules:{truthy:{method(...d){c.verifyFlat(d,"truthy");const I=this.clone();I.$_terms.truthy=I.$_terms.truthy||new u;for(let C=0;C<d.length;++C){const h=d[C];s(h!==void 0,"Cannot call truthy with undefined"),I.$_terms.truthy.add(h)}return I}},falsy:{method(...d){c.verifyFlat(d,"falsy");const I=this.clone();I.$_terms.falsy=I.$_terms.falsy||new u;for(let C=0;C<d.length;++C){const h=d[C];s(h!==void 0,"Cannot call falsy with undefined"),I.$_terms.falsy.add(h)}return I}},sensitive:{method(d=!0){return this.$_setFlag("sensitive",d)}}},cast:{number:{from:g.isBool,to:(d,I)=>d?1:0},string:{from:g.isBool,to:(d,I)=>d?"true":"false"}},manifest:{build:(d,I)=>(I.truthy&&(d=d.truthy(...I.truthy)),I.falsy&&(d=d.falsy(...I.falsy)),d)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(o,i,a)=>{const s=a(375),l=a(8068),c=a(8160),u=a(3328),g={isDate:function(d){return d instanceof Date}};o.exports=l.extend({type:"date",coerce:{from:["number","string"],method:(d,{schema:I})=>({value:g.parse(d,I._flags.format)||d})},validate(d,{schema:I,error:C,prefs:h}){if(d instanceof Date&&!isNaN(d.getTime()))return;const f=I._flags.format;return h.convert&&f&&typeof d=="string"?{value:d,errors:C("date.format",{format:f})}:{value:d,errors:C("date.base")}},rules:{compare:{method:!1,validate(d,I,{date:C},{name:h,operator:f,args:A}){const m=C==="now"?Date.now():C.getTime();return c.compare(d.getTime(),m,f)?d:I.error("date."+h,{limit:A.date,value:d})},args:[{name:"date",ref:!0,normalize:d=>d==="now"?d:g.parse(d),assert:d=>d!==null,message:"must have a valid date format"}]},format:{method(d){return s(["iso","javascript","unix"].includes(d),"Unknown date format",d),this.$_setFlag("format",d)}},greater:{method(d){return this.$_addRule({name:"greater",method:"compare",args:{date:d},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(d){return this.$_addRule({name:"less",method:"compare",args:{date:d},operator:"<"})}},max:{method(d){return this.$_addRule({name:"max",method:"compare",args:{date:d},operator:"<="})}},min:{method(d){return this.$_addRule({name:"min",method:"compare",args:{date:d},operator:">="})}},timestamp:{method(d="javascript"){return s(["javascript","unix"].includes(d),'"type" must be one of "javascript, unix"'),this.format(d)}}},cast:{number:{from:g.isDate,to:(d,I)=>d.getTime()},string:{from:g.isDate,to:(d,{prefs:I})=>u.date(d,I)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),g.parse=function(d,I){if(d instanceof Date)return d;if(typeof d!="string"&&(isNaN(d)||!isFinite(d))||/^\s*$/.test(d))return null;if(I==="iso")return c.isIsoDate(d)?g.date(d.toString()):null;const C=d;if(typeof d=="string"&&/^[+-]?\d+(\.\d+)?$/.test(d)&&(d=parseFloat(d)),I){if(I==="javascript")return g.date(1*d);if(I==="unix")return g.date(1e3*d);if(typeof C=="string")return null}return g.date(d)},g.date=function(d){const I=new Date(d);return isNaN(I.getTime())?null:I}},390:(o,i,a)=>{const s=a(375),l=a(7824);o.exports=l.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(c){return s(Number.isSafeInteger(c)&&c>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:c}})},validate:(c,u,{n:g})=>c.length===g?c:u.error("function.arity",{n:g})},class:{method(){return this.$_addRule("class")},validate:(c,u)=>/^\s*class\s/.test(c.toString())?c:u.error("function.class",{value:c})},minArity:{method(c){return s(Number.isSafeInteger(c)&&c>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:c}})},validate:(c,u,{n:g})=>c.length>=g?c:u.error("function.minArity",{n:g})},maxArity:{method(c){return s(Number.isSafeInteger(c)&&c>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:c}})},validate:(c,u,{n:g})=>c.length<=g?c:u.error("function.maxArity",{n:g})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(o,i,a)=>{const s=a(978),l=a(375),c=a(8571),u=a(3652),g=a(8068),d=a(8160),I=a(3292),C=a(6354),h=a(6133),f=a(3328),A={renameDefaults:{alias:!1,multiple:!1,override:!1}};o.exports=g.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(m,p)=>m.keys(p),validate(m,{schema:p,error:Z,state:v,prefs:k}){if(!m||typeof m!==p.$_property("typeof")||Array.isArray(m))return{value:m,errors:Z("object.base",{type:p.$_property("typeof")})};if(!(p.$_terms.renames||p.$_terms.dependencies||p.$_terms.keys||p.$_terms.patterns||p.$_terms.externals))return;m=A.clone(m,k);const B=[];if(p.$_terms.renames&&!A.rename(p,m,v,k,B))return{value:m,errors:B};if(!p.$_terms.keys&&!p.$_terms.patterns&&!p.$_terms.dependencies)return{value:m,errors:B};const y=new Set(Object.keys(m));if(p.$_terms.keys){const W=[m,...v.ancestors];for(const G of p.$_terms.keys){const R=G.key,X=m[R];y.delete(R);const Y=v.localize([...v.path,R],W,G),x=G.schema.$_validate(X,Y,k);if(x.errors){if(k.abortEarly)return{value:m,errors:x.errors};x.value!==void 0&&(m[R]=x.value),B.push(...x.errors)}else G.schema._flags.result==="strip"||x.value===void 0&&X!==void 0?delete m[R]:x.value!==void 0&&(m[R]=x.value)}}if(y.size||p._flags._hasPatternMatch){const W=A.unknown(p,m,y,B,v,k);if(W)return W}if(p.$_terms.dependencies)for(const W of p.$_terms.dependencies){if(W.key!==null&&A.isPresent(W.options)(W.key.resolve(m,v,k,null,{shadow:!1}))===!1)continue;const G=A.dependencies[W.rel](p,W,m,v,k);if(G){const R=p.$_createError(G.code,m,G.context,v,k);if(k.abortEarly)return{value:m,errors:R};B.push(R)}}return{value:m,errors:B}},rules:{and:{method(...m){return d.verifyFlat(m,"and"),A.dependency(this,"and",null,m)}},append:{method(m){return m==null||Object.keys(m).length===0?this:this.keys(m)}},assert:{method(m,p,Z){f.isTemplate(m)||(m=I.ref(m)),l(Z===void 0||typeof Z=="string","Message must be a string"),p=this.$_compile(p,{appendPath:!0});const v=this.$_addRule({name:"assert",args:{subject:m,schema:p,message:Z}});return v.$_mutateRegister(m),v.$_mutateRegister(p),v},validate(m,{error:p,prefs:Z,state:v},{subject:k,schema:B,message:y}){const W=k.resolve(m,v,Z),G=h.isRef(k)?k.absolute(v):[];return B.$_match(W,v.localize(G,[m,...v.ancestors],B),Z)?m:p("object.assert",{subject:k,message:y})},args:["subject","schema","message"],multi:!0},instance:{method(m,p){return l(typeof m=="function","constructor must be a function"),p=p||m.name,this.$_addRule({name:"instance",args:{constructor:m,name:p}})},validate:(m,p,{constructor:Z,name:v})=>m instanceof Z?m:p.error("object.instance",{type:v,value:m}),args:["constructor","name"]},keys:{method(m){l(m===void 0||typeof m=="object","Object schema must be a valid object"),l(!d.isSchema(m),"Object schema cannot be a joi schema");const p=this.clone();if(m)if(Object.keys(m).length){p.$_terms.keys=p.$_terms.keys?p.$_terms.keys.filter(Z=>!m.hasOwnProperty(Z.key)):new A.Keys;for(const Z in m)d.tryWithPath(()=>p.$_terms.keys.push({key:Z,schema:this.$_compile(m[Z])}),Z)}else p.$_terms.keys=new A.Keys;else p.$_terms.keys=null;return p.$_mutateRebuild()}},length:{method(m){return this.$_addRule({name:"length",args:{limit:m},operator:"="})},validate:(m,p,{limit:Z},{name:v,operator:k,args:B})=>d.compare(Object.keys(m).length,Z,k)?m:p.error("object."+v,{limit:B.limit,value:m}),args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"}]},max:{method(m){return this.$_addRule({name:"max",method:"length",args:{limit:m},operator:"<="})}},min:{method(m){return this.$_addRule({name:"min",method:"length",args:{limit:m},operator:">="})}},nand:{method(...m){return d.verifyFlat(m,"nand"),A.dependency(this,"nand",null,m)}},or:{method(...m){return d.verifyFlat(m,"or"),A.dependency(this,"or",null,m)}},oxor:{method(...m){return A.dependency(this,"oxor",null,m)}},pattern:{method(m,p,Z={}){const v=m instanceof RegExp;v||(m=this.$_compile(m,{appendPath:!0})),l(p!==void 0,"Invalid rule"),d.assertOptions(Z,["fallthrough","matches"]),v&&l(!m.flags.includes("g")&&!m.flags.includes("y"),"pattern should not use global or sticky mode"),p=this.$_compile(p,{appendPath:!0});const k=this.clone();k.$_terms.patterns=k.$_terms.patterns||[];const B={[v?"regex":"schema"]:m,rule:p};return Z.matches&&(B.matches=this.$_compile(Z.matches),B.matches.type!=="array"&&(B.matches=B.matches.$_root.array().items(B.matches)),k.$_mutateRegister(B.matches),k.$_setFlag("_hasPatternMatch",!0,{clone:!1})),Z.fallthrough&&(B.fallthrough=!0),k.$_terms.patterns.push(B),k.$_mutateRegister(p),k}},ref:{method(){return this.$_addRule("ref")},validate:(m,p)=>h.isRef(m)?m:p.error("object.refType",{value:m})},regex:{method(){return this.$_addRule("regex")},validate:(m,p)=>m instanceof RegExp?m:p.error("object.regex",{value:m})},rename:{method(m,p,Z={}){l(typeof m=="string"||m instanceof RegExp,"Rename missing the from argument"),l(typeof p=="string"||p instanceof f,"Invalid rename to argument"),l(p!==m,"Cannot rename key to same name:",m),d.assertOptions(Z,["alias","ignoreUndefined","override","multiple"]);const v=this.clone();v.$_terms.renames=v.$_terms.renames||[];for(const k of v.$_terms.renames)l(k.from!==m,"Cannot rename the same key multiple times");return p instanceof f&&v.$_mutateRegister(p),v.$_terms.renames.push({from:m,to:p,options:s(A.renameDefaults,Z)}),v}},schema:{method(m="any"){return this.$_addRule({name:"schema",args:{type:m}})},validate:(m,p,{type:Z})=>!d.isSchema(m)||Z!=="any"&&m.type!==Z?p.error("object.schema",{type:Z}):m},unknown:{method(m){return this.$_setFlag("unknown",m!==!1)}},with:{method(m,p,Z={}){return A.dependency(this,"with",m,p,Z)}},without:{method(m,p,Z={}){return A.dependency(this,"without",m,p,Z)}},xor:{method(...m){return d.verifyFlat(m,"xor"),A.dependency(this,"xor",null,m)}}},overrides:{default(m,p){return m===void 0&&(m=d.symbols.deepDefault),this.$_parent("default",m,p)}},rebuild(m){if(m.$_terms.keys){const p=new u.Sorter;for(const Z of m.$_terms.keys)d.tryWithPath(()=>p.add(Z,{after:Z.schema.$_rootReferences(),group:Z.key}),Z.key);m.$_terms.keys=new A.Keys(...p.nodes)}},manifest:{build(m,p){if(p.keys&&(m=m.keys(p.keys)),p.dependencies)for(const{rel:Z,key:v=null,peers:k,options:B}of p.dependencies)m=A.dependency(m,Z,v,k,B);if(p.patterns)for(const{regex:Z,schema:v,rule:k,fallthrough:B,matches:y}of p.patterns)m=m.pattern(Z||v,k,{fallthrough:B,matches:y});if(p.renames)for(const{from:Z,to:v,options:k}of p.renames)m=m.rename(Z,v,k);return m}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),A.clone=function(m,p){if(typeof m=="object"){if(p.nonEnumerables)return c(m,{shallow:!0});const v=Object.create(Object.getPrototypeOf(m));return Object.assign(v,m),v}const Z=function(...v){return m.apply(this,v)};return Z.prototype=c(m.prototype),Object.defineProperty(Z,"name",{value:m.name,writable:!1}),Object.defineProperty(Z,"length",{value:m.length,writable:!1}),Object.assign(Z,m),Z},A.dependency=function(m,p,Z,v,k){l(Z===null||typeof Z=="string",p,"key must be a strings"),k||(k=v.length>1&&typeof v[v.length-1]=="object"?v.pop():{}),d.assertOptions(k,["separator","isPresent"]),v=[].concat(v);const B=d.default(k.separator,"."),y=[];for(const G of v)l(typeof G=="string",p,"peers must be strings"),y.push(I.ref(G,{separator:B,ancestor:0,prefix:!1}));Z!==null&&(Z=I.ref(Z,{separator:B,ancestor:0,prefix:!1}));const W=m.clone();return W.$_terms.dependencies=W.$_terms.dependencies||[],W.$_terms.dependencies.push(new A.Dependency(p,Z,y,v,k)),W},A.dependencies={and(m,p,Z,v,k){const B=[],y=[],W=p.peers.length,G=A.isPresent(p.options);for(const R of p.peers)G(R.resolve(Z,v,k,null,{shadow:!1}))===!1?B.push(R.key):y.push(R.key);if(B.length!==W&&y.length!==W)return{code:"object.and",context:{present:y,presentWithLabels:A.keysToLabels(m,y),missing:B,missingWithLabels:A.keysToLabels(m,B)}}},nand(m,p,Z,v,k){const B=[],y=A.isPresent(p.options);for(const R of p.peers)y(R.resolve(Z,v,k,null,{shadow:!1}))&&B.push(R.key);if(B.length!==p.peers.length)return;const W=p.paths[0],G=p.paths.slice(1);return{code:"object.nand",context:{main:W,mainWithLabel:A.keysToLabels(m,W),peers:G,peersWithLabels:A.keysToLabels(m,G)}}},or(m,p,Z,v,k){const B=A.isPresent(p.options);for(const y of p.peers)if(B(y.resolve(Z,v,k,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:p.paths,peersWithLabels:A.keysToLabels(m,p.paths)}}},oxor(m,p,Z,v,k){const B=[],y=A.isPresent(p.options);for(const G of p.peers)y(G.resolve(Z,v,k,null,{shadow:!1}))&&B.push(G.key);if(!B.length||B.length===1)return;const W={peers:p.paths,peersWithLabels:A.keysToLabels(m,p.paths)};return W.present=B,W.presentWithLabels=A.keysToLabels(m,B),{code:"object.oxor",context:W}},with(m,p,Z,v,k){const B=A.isPresent(p.options);for(const y of p.peers)if(B(y.resolve(Z,v,k,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:p.key.key,mainWithLabel:A.keysToLabels(m,p.key.key),peer:y.key,peerWithLabel:A.keysToLabels(m,y.key)}}},without(m,p,Z,v,k){const B=A.isPresent(p.options);for(const y of p.peers)if(B(y.resolve(Z,v,k,null,{shadow:!1})))return{code:"object.without",context:{main:p.key.key,mainWithLabel:A.keysToLabels(m,p.key.key),peer:y.key,peerWithLabel:A.keysToLabels(m,y.key)}}},xor(m,p,Z,v,k){const B=[],y=A.isPresent(p.options);for(const G of p.peers)y(G.resolve(Z,v,k,null,{shadow:!1}))&&B.push(G.key);if(B.length===1)return;const W={peers:p.paths,peersWithLabels:A.keysToLabels(m,p.paths)};return B.length===0?{code:"object.missing",context:W}:(W.present=B,W.presentWithLabels=A.keysToLabels(m,B),{code:"object.xor",context:W})}},A.keysToLabels=function(m,p){return Array.isArray(p)?p.map(Z=>m.$_mapLabels(Z)):m.$_mapLabels(p)},A.isPresent=function(m){return typeof m.isPresent=="function"?m.isPresent:p=>p!==void 0},A.rename=function(m,p,Z,v,k){const B={};for(const y of m.$_terms.renames){const W=[],G=typeof y.from!="string";if(G)for(const R in p){if(p[R]===void 0&&y.options.ignoreUndefined||R===y.to)continue;const X=y.from.exec(R);X&&W.push({from:R,to:y.to,match:X})}else!Object.prototype.hasOwnProperty.call(p,y.from)||p[y.from]===void 0&&y.options.ignoreUndefined||W.push(y);for(const R of W){const X=R.from;let Y=R.to;if(Y instanceof f&&(Y=Y.render(p,Z,v,R.match)),X!==Y){if(!y.options.multiple&&B[Y]&&(k.push(m.$_createError("object.rename.multiple",p,{from:X,to:Y,pattern:G},Z,v)),v.abortEarly)||Object.prototype.hasOwnProperty.call(p,Y)&&!y.options.override&&!B[Y]&&(k.push(m.$_createError("object.rename.override",p,{from:X,to:Y,pattern:G},Z,v)),v.abortEarly))return!1;p[X]===void 0?delete p[Y]:p[Y]=p[X],B[Y]=!0,y.options.alias||delete p[X]}}}return!0},A.unknown=function(m,p,Z,v,k,B){if(m.$_terms.patterns){let y=!1;const W=m.$_terms.patterns.map(R=>{if(R.matches)return y=!0,[]}),G=[p,...k.ancestors];for(const R of Z){const X=p[R],Y=[...k.path,R];for(let x=0;x<m.$_terms.patterns.length;++x){const D=m.$_terms.patterns[x];if(D.regex){const K=D.regex.test(R);if(k.mainstay.tracer.debug(k,"rule",`pattern.${x}`,K?"pass":"error"),!K)continue}else if(!D.schema.$_match(R,k.nest(D.schema,`pattern.${x}`),B))continue;Z.delete(R);const L=k.localize(Y,G,{schema:D.rule,key:R}),M=D.rule.$_validate(X,L,B);if(M.errors){if(B.abortEarly)return{value:p,errors:M.errors};v.push(...M.errors)}if(D.matches&&W[x].push(R),p[R]=M.value,!D.fallthrough)break}}if(y)for(let R=0;R<W.length;++R){const X=W[R];if(!X)continue;const Y=m.$_terms.patterns[R].matches,x=k.localize(k.path,G,Y),D=Y.$_validate(X,x,B);if(D.errors){const L=C.details(D.errors,{override:!1});L.matches=X;const M=m.$_createError("object.pattern.match",p,L,k,B);if(B.abortEarly)return{value:p,errors:M};v.push(M)}}}if(Z.size&&(m.$_terms.keys||m.$_terms.patterns)){if(B.stripUnknown&&m._flags.unknown===void 0||B.skipFunctions){const y=!(!B.stripUnknown||B.stripUnknown!==!0&&!B.stripUnknown.objects);for(const W of Z)y?(delete p[W],Z.delete(W)):typeof p[W]=="function"&&Z.delete(W)}if(!d.default(m._flags.unknown,B.allowUnknown))for(const y of Z){const W=k.localize([...k.path,y],[]),G=m.$_createError("object.unknown",p[y],{child:y},W,B,{flags:!1});if(B.abortEarly)return{value:p,errors:G};v.push(G)}}},A.Dependency=class{constructor(m,p,Z,v,k){this.rel=m,this.key=p,this.peers=Z,this.paths=v,this.options=k}describe(){const m={rel:this.rel,peers:this.paths};return this.key!==null&&(m.key=this.key.key),this.peers[0].separator!=="."&&(m.options={...m.options,separator:this.peers[0].separator}),this.options.isPresent&&(m.options={...m.options,isPresent:this.options.isPresent}),m}},A.Keys=class extends Array{concat(m){const p=this.slice(),Z=new Map;for(let v=0;v<p.length;++v)Z.set(p[v].key,v);for(const v of m){const k=v.key,B=Z.get(k);B!==void 0?p[B]={key:k,schema:p[B].schema.concat(v.schema)}:p.push(v)}return p}}},8785:(o,i,a)=>{const s=a(375),l=a(8068),c=a(8160),u=a(3292),g=a(6354),d={};o.exports=l.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(I,C)=>I.ref(C),validate(I,{schema:C,state:h,prefs:f}){s(C.$_terms.link,"Uninitialized link schema");const A=d.generate(C,I,h,f),m=C.$_terms.link[0].ref;return A.$_validate(I,h.nest(A,`link:${m.display}:${A.type}`),f)},generate:(I,C,h,f)=>d.generate(I,C,h,f),rules:{ref:{method(I){s(!this.$_terms.link,"Cannot reinitialize schema"),I=u.ref(I),s(I.type==="value"||I.type==="local","Invalid reference type:",I.type),s(I.type==="local"||I.ancestor==="root"||I.ancestor>0,"Link cannot reference itself");const C=this.clone();return C.$_terms.link=[{ref:I}],C}},relative:{method(I=!0){return this.$_setFlag("relative",I)}}},overrides:{concat(I){s(this.$_terms.link,"Uninitialized link schema"),s(c.isSchema(I),"Invalid schema object"),s(I.type!=="link","Cannot merge type link with another link");const C=this.clone();return C.$_terms.whens||(C.$_terms.whens=[]),C.$_terms.whens.push({concat:I}),C.$_mutateRebuild()}},manifest:{build:(I,C)=>(s(C.link,"Invalid link description missing link"),I.ref(C.link))}}),d.generate=function(I,C,h,f){let A=h.mainstay.links.get(I);if(A)return A._generate(C,h,f).schema;const m=I.$_terms.link[0].ref,{perspective:p,path:Z}=d.perspective(m,h);d.assert(p,"which is outside of schema boundaries",m,I,h,f);try{A=Z.length?p.$_reach(Z):p}catch{d.assert(!1,"to non-existing schema",m,I,h,f)}return d.assert(A.type!=="link","which is another link",m,I,h,f),I._flags.relative||h.mainstay.links.set(I,A),A._generate(C,h,f).schema},d.perspective=function(I,C){if(I.type==="local"){for(const{schema:h,key:f}of C.schemas){if((h._flags.id||f)===I.path[0])return{perspective:h,path:I.path.slice(1)};if(h.$_terms.shared){for(const A of h.$_terms.shared)if(A._flags.id===I.path[0])return{perspective:A,path:I.path.slice(1)}}}return{perspective:null,path:null}}return I.ancestor==="root"?{perspective:C.schemas[C.schemas.length-1].schema,path:I.path}:{perspective:C.schemas[I.ancestor]&&C.schemas[I.ancestor].schema,path:I.path}},d.assert=function(I,C,h,f,A,m){I||s(!1,`"${g.label(f._flags,A,m)}" contains link reference "${h.display}" ${C}`)}},3832:(o,i,a)=>{const s=a(375),l=a(8068),c=a(8160),u={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(g){const d=g.toString(),I=d.indexOf("."),C=d.indexOf("e");return(I<0?0:(C<0?d.length:C)-I-1)+(C<0?0:Math.max(0,-parseInt(d.slice(C+1))))}};o.exports=l.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(g,{schema:d,error:I}){if(!g.match(u.numberRx))return;g=g.trim();const C={value:parseFloat(g)};if(C.value===0&&(C.value=0),!d._flags.unsafe)if(g.match(/e/i)){if(u.extractSignificantDigits(g)!==u.extractSignificantDigits(String(C.value)))return C.errors=I("number.unsafe"),C}else{const h=C.value.toString();if(h.match(/e/i))return C;if(h!==u.normalizeDecimal(g))return C.errors=I("number.unsafe"),C}return C}},validate(g,{schema:d,error:I,prefs:C}){if(g===1/0||g===-1/0)return{value:g,errors:I("number.infinity")};if(!c.isNumber(g))return{value:g,errors:I("number.base")};const h={value:g};if(C.convert){const f=d.$_getRule("precision");if(f){const A=Math.pow(10,f.args.limit);h.value=Math.round(h.value*A)/A}}return h.value===0&&(h.value=0),!d._flags.unsafe&&(g>Number.MAX_SAFE_INTEGER||g<Number.MIN_SAFE_INTEGER)&&(h.errors=I("number.unsafe")),h},rules:{compare:{method:!1,validate:(g,d,{limit:I},{name:C,operator:h,args:f})=>c.compare(g,I,h)?g:d.error("number."+C,{limit:f.limit,value:g}),args:[{name:"limit",ref:!0,assert:c.isNumber,message:"must be a number"}]},greater:{method(g){return this.$_addRule({name:"greater",method:"compare",args:{limit:g},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(g,d)=>Math.trunc(g)-g==0?g:d.error("number.integer")},less:{method(g){return this.$_addRule({name:"less",method:"compare",args:{limit:g},operator:"<"})}},max:{method(g){return this.$_addRule({name:"max",method:"compare",args:{limit:g},operator:"<="})}},min:{method(g){return this.$_addRule({name:"min",method:"compare",args:{limit:g},operator:">="})}},multiple:{method(g){const d=typeof g=="number"?u.decimalPlaces(g):null,I=Math.pow(10,d);return this.$_addRule({name:"multiple",args:{base:g,baseDecimalPlace:d,pfactor:I}})},validate:(g,d,{base:I,baseDecimalPlace:C,pfactor:h},f)=>u.decimalPlaces(g)>C?d.error("number.multiple",{multiple:f.args.base,value:g}):Math.round(h*g)%Math.round(h*I)==0?g:d.error("number.multiple",{multiple:f.args.base,value:g}),args:[{name:"base",ref:!0,assert:g=>typeof g=="number"&&isFinite(g)&&g>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(g,d)=>Number.isSafeInteger(g)&&g>=0&&g<=65535?g:d.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(g){return s(Number.isSafeInteger(g),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:g}})},validate(g,d,{limit:I}){const C=g.toString().match(u.precisionRx);return Math.max((C[1]?C[1].length:0)-(C[2]?parseInt(C[2],10):0),0)<=I?g:d.error("number.precision",{limit:I,value:g})},convert:!0},sign:{method(g){return s(["negative","positive"].includes(g),"Invalid sign",g),this.$_addRule({name:"sign",args:{sign:g}})},validate:(g,d,{sign:I})=>I==="negative"&&g<0||I==="positive"&&g>0?g:d.error(`number.${I}`)},unsafe:{method(g=!0){return s(typeof g=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",g)}}},cast:{string:{from:g=>typeof g=="number",to:(g,d)=>g.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),u.extractSignificantDigits=function(g){return g.replace(u.exponentialPartRegex,"").replace(u.dotRegex,"").replace(u.trailingZerosRegex,"").replace(u.leadingSignAndZerosRegex,"")},u.normalizeDecimal=function(g){return(g=g.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&g.endsWith("0")&&(g=g.replace(/0+$/,"")),g==="-0"?"0":g}},8966:(o,i,a)=>{const s=a(7824);o.exports=s.extend({type:"object",cast:{map:{from:l=>l&&typeof l=="object",to:(l,c)=>new Map(Object.entries(l))}}})},7417:(o,i,a)=>{const s=a(375),l=a(5380),c=a(1745),u=a(9959),g=a(6064),d=a(9926),I=a(5752),C=a(8068),h=a(8160),f={tlds:d instanceof Set&&{tlds:{allow:d,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:u.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};o.exports=C.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(A,{schema:m,state:p,prefs:Z}){const v=m.$_getRule("normalize");v&&(A=A.normalize(v.args.form));const k=m.$_getRule("case");k&&(A=k.args.direction==="upper"?A.toLocaleUpperCase():A.toLocaleLowerCase());const B=m.$_getRule("trim");if(B&&B.args.enabled&&(A=A.trim()),m.$_terms.replacements)for(const W of m.$_terms.replacements)A=A.replace(W.pattern,W.replacement);const y=m.$_getRule("hex");if(y&&y.args.options.byteAligned&&A.length%2!=0&&(A=`0${A}`),m.$_getRule("isoDate")){const W=f.isoDate(A);W&&(A=W)}if(m._flags.truncate){const W=m.$_getRule("max");if(W){let G=W.args.limit;if(h.isResolvable(G)&&(G=G.resolve(A,p,Z),!h.limit(G)))return{value:A,errors:m.$_createError("any.ref",G,{ref:W.args.limit,arg:"limit",reason:"must be a positive integer"},p,Z)};A=A.slice(0,G)}}return{value:A}}},validate(A,{schema:m,error:p}){if(typeof A!="string")return{value:A,errors:p("string.base")};if(A===""){const Z=m.$_getRule("min");return Z&&Z.args.limit===0?void 0:{value:A,errors:p("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(A,m)=>/^[a-zA-Z0-9]+$/.test(A)?A:m.error("string.alphanum")},base64:{method(A={}){return h.assertOptions(A,["paddingRequired","urlSafe"]),A={urlSafe:!1,paddingRequired:!0,...A},s(typeof A.paddingRequired=="boolean","paddingRequired must be boolean"),s(typeof A.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:A}})},validate:(A,m,{options:p})=>f.base64Regex[p.paddingRequired][p.urlSafe].test(A)?A:m.error("string.base64")},case:{method(A){return s(["lower","upper"].includes(A),"Invalid case:",A),this.$_addRule({name:"case",args:{direction:A}})},validate:(A,m,{direction:p})=>p==="lower"&&A===A.toLocaleLowerCase()||p==="upper"&&A===A.toLocaleUpperCase()?A:m.error(`string.${p}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(A,m){let p=A.length,Z=0,v=1;for(;p--;){const k=A.charAt(p)*v;Z+=k-9*(k>9),v^=3}return Z>0&&Z%10==0?A:m.error("string.creditCard")}},dataUri:{method(A={}){return h.assertOptions(A,["paddingRequired"]),A={paddingRequired:!0,...A},s(typeof A.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:A}})},validate(A,m,{options:p}){const Z=A.match(f.dataUriRegex);return Z&&(!Z[2]||Z[2]!=="base64"||f.base64Regex[p.paddingRequired].false.test(Z[3]))?A:m.error("string.dataUri")}},domain:{method(A){A&&h.assertOptions(A,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const m=f.addressOptions(A);return this.$_addRule({name:"domain",args:{options:A},address:m})},validate:(A,m,p,{address:Z})=>l.isValid(A,Z)?A:m.error("string.domain")},email:{method(A={}){h.assertOptions(A,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),s(A.multiple===void 0||typeof A.multiple=="boolean","multiple option must be an boolean");const m=f.addressOptions(A),p=new RegExp(`\\s*[${A.separator?g(A.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:A},regex:p,address:m})},validate(A,m,{options:p},{regex:Z,address:v}){const k=p.multiple?A.split(Z):[A],B=[];for(const y of k)c.isValid(y,v)||B.push(y);return B.length?m.error("string.email",{value:A,invalids:B}):A}},guid:{alias:"uuid",method(A={}){h.assertOptions(A,["version","separator"]);let m="";if(A.version){const v=[].concat(A.version);s(v.length>=1,"version must have at least 1 valid version specified");const k=new Set;for(let B=0;B<v.length;++B){const y=v[B];s(typeof y=="string","version at position "+B+" must be a string");const W=f.guidVersions[y.toLowerCase()];s(W,"version at position "+B+" must be one of "+Object.keys(f.guidVersions).join(", ")),s(!k.has(W),"version at position "+B+" must not be a duplicate"),m+=W,k.add(W)}}s(f.guidSeparators.has(A.separator),'separator must be one of true, false, "-", or ":"');const p=A.separator===void 0?"[:-]?":A.separator===!0?"[:-]":A.separator===!1?"[]?":`\\${A.separator}`,Z=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${p})[0-9A-F]{4}\\2?[${m||"0-9A-F"}][0-9A-F]{3}\\2?[${m?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:A},regex:Z})},validate(A,m,p,{regex:Z}){const v=Z.exec(A);return v?f.guidBrackets[v[1]]!==v[v.length-1]?m.error("string.guid"):A:m.error("string.guid")}},hex:{method(A={}){return h.assertOptions(A,["byteAligned","prefix"]),A={byteAligned:!1,prefix:!1,...A},s(typeof A.byteAligned=="boolean","byteAligned must be boolean"),s(typeof A.prefix=="boolean"||A.prefix==="optional",'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:A}})},validate:(A,m,{options:p})=>(p.prefix==="optional"?f.hexRegex.withOptionalPrefix:p.prefix===!0?f.hexRegex.withPrefix:f.hexRegex.withoutPrefix).test(A)?p.byteAligned&&A.length%2!=0?m.error("string.hexAlign"):A:m.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(A,m)=>l.isValid(A,{minDomainSegments:1})||f.ipRegex.test(A)?A:m.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(A={}){h.assertOptions(A,["cidr","version"]);const{cidr:m,versions:p,regex:Z}=u.regex(A),v=A.version?p:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:m,version:v}},regex:Z})},validate:(A,m,{options:p},{regex:Z})=>Z.test(A)?A:p.version?m.error("string.ipVersion",{value:A,cidr:p.cidr,version:p.version}):m.error("string.ip",{value:A,cidr:p.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(A,{error:m})=>f.isoDate(A)?A:m("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(A,m)=>f.isoDurationRegex.test(A)?A:m.error("string.isoDuration")},length:{method(A,m){return f.length(this,"length",A,"=",m)},validate(A,m,{limit:p,encoding:Z},{name:v,operator:k,args:B}){const y=!Z&&A.length;return h.compare(y,p,k)?A:m.error("string."+v,{limit:B.limit,value:A,encoding:Z})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(A,m){return f.length(this,"max",A,"<=",m)},args:["limit","encoding"]},min:{method(A,m){return f.length(this,"min",A,">=",m)},args:["limit","encoding"]},normalize:{method(A="NFC"){return s(f.normalizationForms.includes(A),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:A}})},validate:(A,{error:m},{form:p})=>A===A.normalize(p)?A:m("string.normalize",{value:A,form:p}),convert:!0},pattern:{alias:"regex",method(A,m={}){s(A instanceof RegExp,"regex must be a RegExp"),s(!A.flags.includes("g")&&!A.flags.includes("y"),"regex should not use global or sticky mode"),typeof m=="string"&&(m={name:m}),h.assertOptions(m,["invert","name"]);const p=["string.pattern",m.invert?".invert":"",m.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:A,options:m},errorCode:p})},validate:(A,m,{regex:p,options:Z},{errorCode:v})=>p.test(A)^Z.invert?A:m.error(v,{name:Z.name,regex:p,value:A}),args:["regex","options"],multi:!0},replace:{method(A,m){typeof A=="string"&&(A=new RegExp(g(A),"g")),s(A instanceof RegExp,"pattern must be a RegExp"),s(typeof m=="string","replacement must be a String");const p=this.clone();return p.$_terms.replacements||(p.$_terms.replacements=[]),p.$_terms.replacements.push({pattern:A,replacement:m}),p}},token:{method(){return this.$_addRule("token")},validate:(A,m)=>/^\w+$/.test(A)?A:m.error("string.token")},trim:{method(A=!0){return s(typeof A=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:A}})},validate:(A,m,{enabled:p})=>p&&A!==A.trim()?m.error("string.trim"):A,convert:!0},truncate:{method(A=!0){return s(typeof A=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",A)}},uppercase:{method(){return this.case("upper")}},uri:{method(A={}){h.assertOptions(A,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),A.domain&&h.assertOptions(A.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:m,scheme:p}=I.regex(A),Z=A.domain?f.addressOptions(A.domain):null;return this.$_addRule({name:"uri",args:{options:A},regex:m,domain:Z,scheme:p})},validate(A,m,{options:p},{regex:Z,domain:v,scheme:k}){if(["http:/","https:/"].includes(A))return m.error("string.uri");let B=Z.exec(A);if(!B&&m.prefs.convert&&p.encodeUri){const y=encodeURI(A);B=Z.exec(y),B&&(A=y)}if(B){const y=B[1]||B[2];return!v||p.allowRelative&&!y||l.isValid(y,v)?A:m.error("string.domain",{value:y})}return p.relativeOnly?m.error("string.uriRelativeOnly"):p.scheme?m.error("string.uriCustomScheme",{scheme:k,value:A}):m.error("string.uri")}}},manifest:{build(A,m){if(m.replacements)for(const{pattern:p,replacement:Z}of m.replacements)A=A.replace(p,Z);return A}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(A){if(!A)return f.tlds||A;if(s(A.minDomainSegments===void 0||Number.isSafeInteger(A.minDomainSegments)&&A.minDomainSegments>0,"minDomainSegments must be a positive integer"),s(A.maxDomainSegments===void 0||Number.isSafeInteger(A.maxDomainSegments)&&A.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),A.tlds===!1)return A;if(A.tlds===!0||A.tlds===void 0)return s(f.tlds,"Built-in TLD list disabled"),Object.assign({},A,f.tlds);s(typeof A.tlds=="object","tlds must be true, false, or an object");const m=A.tlds.deny;if(m)return Array.isArray(m)&&(A=Object.assign({},A,{tlds:{deny:new Set(m)}})),s(A.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),s(!A.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(A.tlds.deny,"tlds.deny"),A;const p=A.tlds.allow;return p?p===!0?(s(f.tlds,"Built-in TLD list disabled"),Object.assign({},A,f.tlds)):(Array.isArray(p)&&(A=Object.assign({},A,{tlds:{allow:new Set(p)}})),s(A.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(A.tlds.allow,"tlds.allow"),A):A},f.validateTlds=function(A,m){for(const p of A)s(l.isValid(p,{minDomainSegments:1,maxDomainSegments:1}),`${m} must contain valid top level domain names`)},f.isoDate=function(A){if(!h.isIsoDate(A))return null;/.*T.*[+-]\d\d$/.test(A)&&(A+="00");const m=new Date(A);return isNaN(m.getTime())?null:m.toISOString()},f.length=function(A,m,p,Z,v){return s(!v||!1,"Invalid encoding:",v),A.$_addRule({name:m,method:"length",args:{limit:p,encoding:v},operator:Z})}},8826:(o,i,a)=>{const s=a(375),l=a(8068),c={};c.Map=class extends Map{slice(){return new c.Map(this)}},o.exports=l.extend({type:"symbol",terms:{map:{init:new c.Map}},coerce:{method(u,{schema:g,error:d}){const I=g.$_terms.map.get(u);return I&&(u=I),g._flags.only&&typeof u!="symbol"?{value:u,errors:d("symbol.map",{map:g.$_terms.map})}:{value:u}}},validate(u,{error:g}){if(typeof u!="symbol")return{value:u,errors:g("symbol.base")}},rules:{map:{method(u){u&&!u[Symbol.iterator]&&typeof u=="object"&&(u=Object.entries(u)),s(u&&u[Symbol.iterator],"Iterable must be an iterable or object");const g=this.clone(),d=[];for(const I of u){s(I&&I[Symbol.iterator],"Entry must be an iterable");const[C,h]=I;s(typeof C!="object"&&typeof C!="function"&&typeof C!="symbol","Key must not be of type object, function, or Symbol"),s(typeof h=="symbol","Value must be a Symbol"),g.$_terms.map.set(C,h),d.push(h)}return g.valid(...d)}}},manifest:{build:(u,g)=>(g.map&&(u=u.map(g.map)),u)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(o,i,a)=>{const s=a(375),l=a(8571),c=a(738),u=a(9621),g=a(8160),d=a(6354),I=a(493),C={result:Symbol("result")};i.entry=function(h,f,A){let m=g.defaults;A&&(s(A.warnings===void 0,"Cannot override warnings preference in synchronous validation"),s(A.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),m=g.preferences(g.defaults,A));const p=C.entry(h,f,m);s(!p.mainstay.externals.length,"Schema with external rules must use validateAsync()");const Z={value:p.value};return p.error&&(Z.error=p.error),p.mainstay.warnings.length&&(Z.warning=d.details(p.mainstay.warnings)),p.mainstay.debug&&(Z.debug=p.mainstay.debug),p.mainstay.artifacts&&(Z.artifacts=p.mainstay.artifacts),Z},i.entryAsync=async function(h,f,A){let m=g.defaults;A&&(m=g.preferences(g.defaults,A));const p=C.entry(h,f,m),Z=p.mainstay;if(p.error)throw Z.debug&&(p.error.debug=Z.debug),p.error;if(Z.externals.length){let k=p.value;const B=[];for(const y of Z.externals){const W=y.state.path,G=y.schema.type==="link"?Z.links.get(y.schema):null;let R,X,Y=k;const x=W.length?[k]:[],D=W.length?u(h,W):h;if(W.length){R=W[W.length-1];let L=k;for(const M of W.slice(0,-1))L=L[M],x.unshift(L);X=x[0],Y=X[R]}try{const L=(K,E)=>(G||y.schema).$_createError(K,Y,E,y.state,m),M=await y.method(Y,{schema:y.schema,linked:G,state:y.state,prefs:A,original:D,error:L,errorsArray:C.errorsArray,warn:(K,E)=>Z.warnings.push((G||y.schema).$_createError(K,Y,E,y.state,m)),message:(K,E)=>(G||y.schema).$_createError("external",Y,E,y.state,m,{messages:K})});if(M===void 0||M===Y)continue;if(M instanceof d.Report){if(Z.tracer.log(y.schema,y.state,"rule","external","error"),B.push(M),m.abortEarly)break;continue}if(Array.isArray(M)&&M[g.symbols.errors]){if(Z.tracer.log(y.schema,y.state,"rule","external","error"),B.push(...M),m.abortEarly)break;continue}X?(Z.tracer.value(y.state,"rule",Y,M,"external"),X[R]=M):(Z.tracer.value(y.state,"rule",k,M,"external"),k=M)}catch(L){throw m.errors.label&&(L.message+=` (${y.label})`),L}}if(p.value=k,B.length)throw p.error=d.process(B,h,m),Z.debug&&(p.error.debug=Z.debug),p.error}if(!m.warnings&&!m.debug&&!m.artifacts)return p.value;const v={value:p.value};return Z.warnings.length&&(v.warning=d.details(Z.warnings)),Z.debug&&(v.debug=Z.debug),Z.artifacts&&(v.artifacts=Z.artifacts),v},C.Mainstay=class{constructor(h,f,A){this.externals=[],this.warnings=[],this.tracer=h,this.debug=f,this.links=A,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const h=this._snapshots.pop();this.externals=h.externals,this.warnings=h.warnings}commit(){this._snapshots.pop()}},C.entry=function(h,f,A){const{tracer:m,cleanup:p}=C.tracer(f,A),Z=A.debug?[]:null,v=f._ids._schemaChain?new Map:null,k=new C.Mainstay(m,Z,v),B=f._ids._schemaChain?[{schema:f}]:null,y=new I([],[],{mainstay:k,schemas:B}),W=i.validate(h,f,y,A);p&&f.$_root.untrace();const G=d.process(W.errors,h,A);return{value:W.value,error:G,mainstay:k}},C.tracer=function(h,f){return h.$_root._tracer?{tracer:h.$_root._tracer._register(h)}:f.debug?(s(h.$_root.trace,"Debug mode not supported"),{tracer:h.$_root.trace()._register(h),cleanup:!0}):{tracer:C.ignore}},i.validate=function(h,f,A,m,p={}){if(f.$_terms.whens&&(f=f._generate(h,A,m).schema),f._preferences&&(m=C.prefs(f,m)),f._cache&&m.cache){const G=f._cache.get(h);if(A.mainstay.tracer.debug(A,"validate","cached",!!G),G)return G}const Z=(G,R,X)=>f.$_createError(G,h,R,X||A,m),v={original:h,prefs:m,schema:f,state:A,error:Z,errorsArray:C.errorsArray,warn:(G,R,X)=>A.mainstay.warnings.push(Z(G,R,X)),message:(G,R)=>f.$_createError("custom",h,R,A,m,{messages:G})};A.mainstay.tracer.entry(f,A);const k=f._definition;if(k.prepare&&h!==void 0&&m.convert){const G=k.prepare(h,v);if(G){if(A.mainstay.tracer.value(A,"prepare",h,G.value),G.errors)return C.finalize(G.value,[].concat(G.errors),v);h=G.value}}if(k.coerce&&h!==void 0&&m.convert&&(!k.coerce.from||k.coerce.from.includes(typeof h))){const G=k.coerce.method(h,v);if(G){if(A.mainstay.tracer.value(A,"coerced",h,G.value),G.errors)return C.finalize(G.value,[].concat(G.errors),v);h=G.value}}const B=f._flags.empty;B&&B.$_match(C.trim(h,f),A.nest(B),g.defaults)&&(A.mainstay.tracer.value(A,"empty",h,void 0),h=void 0);const y=p.presence||f._flags.presence||(f._flags._endedSwitch?null:m.presence);if(h===void 0){if(y==="forbidden")return C.finalize(h,null,v);if(y==="required")return C.finalize(h,[f.$_createError("any.required",h,null,A,m)],v);if(y==="optional"){if(f._flags.default!==g.symbols.deepDefault)return C.finalize(h,null,v);A.mainstay.tracer.value(A,"default",h,{}),h={}}}else if(y==="forbidden")return C.finalize(h,[f.$_createError("any.unknown",h,null,A,m)],v);const W=[];if(f._valids){const G=f._valids.get(h,A,m,f._flags.insensitive);if(G)return m.convert&&(A.mainstay.tracer.value(A,"valids",h,G.value),h=G.value),A.mainstay.tracer.filter(f,A,"valid",G),C.finalize(h,null,v);if(f._flags.only){const R=f.$_createError("any.only",h,{valids:f._valids.values({display:!0})},A,m);if(m.abortEarly)return C.finalize(h,[R],v);W.push(R)}}if(f._invalids){const G=f._invalids.get(h,A,m,f._flags.insensitive);if(G){A.mainstay.tracer.filter(f,A,"invalid",G);const R=f.$_createError("any.invalid",h,{invalids:f._invalids.values({display:!0})},A,m);if(m.abortEarly)return C.finalize(h,[R],v);W.push(R)}}if(k.validate){const G=k.validate(h,v);if(G&&(A.mainstay.tracer.value(A,"base",h,G.value),h=G.value,G.errors)){if(!Array.isArray(G.errors))return W.push(G.errors),C.finalize(h,W,v);if(G.errors.length)return W.push(...G.errors),C.finalize(h,W,v)}}return f._rules.length?C.rules(h,W,v):C.finalize(h,W,v)},C.rules=function(h,f,A){const{schema:m,state:p,prefs:Z}=A;for(const v of m._rules){const k=m._definition.rules[v.method];if(k.convert&&Z.convert){p.mainstay.tracer.log(m,p,"rule",v.name,"full");continue}let B,y=v.args;if(v._resolve.length){y=Object.assign({},y);for(const G of v._resolve){const R=k.argsByName.get(G),X=y[G].resolve(h,p,Z),Y=R.normalize?R.normalize(X):X,x=g.validateArg(Y,null,R);if(x){B=m.$_createError("any.ref",X,{arg:G,ref:y[G],reason:x},p,Z);break}y[G]=Y}}B=B||k.validate(h,A,y,v);const W=C.rule(B,v);if(W.errors){if(p.mainstay.tracer.log(m,p,"rule",v.name,"error"),v.warn){p.mainstay.warnings.push(...W.errors);continue}if(Z.abortEarly)return C.finalize(h,W.errors,A);f.push(...W.errors)}else p.mainstay.tracer.log(m,p,"rule",v.name,"pass"),p.mainstay.tracer.value(p,"rule",h,W.value,v.name),h=W.value}return C.finalize(h,f,A)},C.rule=function(h,f){return h instanceof d.Report?(C.error(h,f),{errors:[h],value:null}):Array.isArray(h)&&h[g.symbols.errors]?(h.forEach(A=>C.error(A,f)),{errors:h,value:null}):{errors:null,value:h}},C.error=function(h,f){return f.message&&h._setTemplate(f.message),h},C.finalize=function(h,f,A){f=f||[];const{schema:m,state:p,prefs:Z}=A;if(f.length){const k=C.default("failover",void 0,f,A);k!==void 0&&(p.mainstay.tracer.value(p,"failover",h,k),h=k,f=[])}if(f.length&&m._flags.error)if(typeof m._flags.error=="function"){f=m._flags.error(f),Array.isArray(f)||(f=[f]);for(const k of f)s(k instanceof Error||k instanceof d.Report,"error() must return an Error object")}else f=[m._flags.error];if(h===void 0){const k=C.default("default",h,f,A);p.mainstay.tracer.value(p,"default",h,k),h=k}if(m._flags.cast&&h!==void 0){const k=m._definition.cast[m._flags.cast];if(k.from(h)){const B=k.to(h,A);p.mainstay.tracer.value(p,"cast",h,B,m._flags.cast),h=B}}if(m.$_terms.externals&&Z.externals&&Z._externals!==!1)for(const{method:k}of m.$_terms.externals)p.mainstay.externals.push({method:k,schema:m,state:p,label:d.label(m._flags,p,Z)});const v={value:h,errors:f.length?f:null};return m._flags.result&&(v.value=m._flags.result==="strip"?void 0:A.original,p.mainstay.tracer.value(p,m._flags.result,h,v.value),p.shadow(h,m._flags.result)),m._cache&&Z.cache!==!1&&!m._refs.length&&m._cache.set(A.original,v),h===void 0||v.errors||m._flags.artifact===void 0||(p.mainstay.artifacts=p.mainstay.artifacts||new Map,p.mainstay.artifacts.has(m._flags.artifact)||p.mainstay.artifacts.set(m._flags.artifact,[]),p.mainstay.artifacts.get(m._flags.artifact).push(p.path)),v},C.prefs=function(h,f){const A=f===g.defaults;return A&&h._preferences[g.symbols.prefs]?h._preferences[g.symbols.prefs]:(f=g.preferences(f,h._preferences),A&&(h._preferences[g.symbols.prefs]=f),f)},C.default=function(h,f,A,m){const{schema:p,state:Z,prefs:v}=m,k=p._flags[h];if(v.noDefaults||k===void 0)return f;if(Z.mainstay.tracer.log(p,Z,"rule",h,"full"),!k)return k;if(typeof k=="function"){const B=k.length?[l(Z.ancestors[0]),m]:[];try{return k(...B)}catch(y){return void A.push(p.$_createError(`any.${h}`,null,{error:y},Z,v))}}return typeof k!="object"?k:k[g.symbols.literal]?k.literal:g.isResolvable(k)?k.resolve(f,Z,v):l(k)},C.trim=function(h,f){if(typeof h!="string")return h;const A=f.$_getRule("trim");return A&&A.args.enabled?h.trim():h},C.ignore={active:!1,debug:c,entry:c,filter:c,log:c,resolve:c,value:c},C.errorsArray=function(){const h=[];return h[g.symbols.errors]=!0,h}},2036:(o,i,a)=>{const s=a(375),l=a(9474),c=a(8160),u={};o.exports=u.Values=class{constructor(g,d){this._values=new Set(g),this._refs=new Set(d),this._lowercase=u.lowercases(g),this._override=!1}get length(){return this._values.size+this._refs.size}add(g,d){c.isResolvable(g)?this._refs.has(g)||(this._refs.add(g),d&&d.register(g)):this.has(g,null,null,!1)||(this._values.add(g),typeof g=="string"&&this._lowercase.set(g.toLowerCase(),g))}static merge(g,d,I){if(g=g||new u.Values,d){if(d._override)return d.clone();for(const C of[...d._values,...d._refs])g.add(C)}if(I)for(const C of[...I._values,...I._refs])g.remove(C);return g.length?g:null}remove(g){c.isResolvable(g)?this._refs.delete(g):(this._values.delete(g),typeof g=="string"&&this._lowercase.delete(g.toLowerCase()))}has(g,d,I,C){return!!this.get(g,d,I,C)}get(g,d,I,C){if(!this.length)return!1;if(this._values.has(g))return{value:g};if(typeof g=="string"&&g&&C){const h=this._lowercase.get(g.toLowerCase());if(h)return{value:h}}if(!this._refs.size&&typeof g!="object")return!1;if(typeof g=="object"){for(const h of this._values)if(l(h,g))return{value:h}}if(d)for(const h of this._refs){const f=h.resolve(g,d,I,null,{in:!0});if(f===void 0)continue;const A=h.in&&typeof f=="object"?Array.isArray(f)?f:Object.keys(f):[f];for(const m of A)if(typeof m==typeof g){if(C&&g&&typeof g=="string"){if(m.toLowerCase()===g.toLowerCase())return{value:m,ref:h}}else if(l(m,g))return{value:m,ref:h}}}return!1}override(){this._override=!0}values(g){if(g&&g.display){const d=[];for(const I of[...this._values,...this._refs])I!==void 0&&d.push(I);return d}return Array.from([...this._values,...this._refs])}clone(){const g=new u.Values(this._values,this._refs);return g._override=this._override,g}concat(g){s(!g._override,"Cannot concat override set of values");const d=new u.Values([...this._values,...g._values],[...this._refs,...g._refs]);return d._override=this._override,d}describe(){const g=[];this._override&&g.push({override:!0});for(const d of this._values.values())g.push(d&&typeof d=="object"?{value:d}:d);for(const d of this._refs.values())g.push(d.describe());return g}},u.Values.prototype[c.symbols.values]=!0,u.Values.prototype.slice=u.Values.prototype.clone,u.lowercases=function(g){const d=new Map;if(g)for(const I of g)typeof I=="string"&&d.set(I.toLowerCase(),I);return d}},978:(o,i,a)=>{const s=a(375),l=a(8571),c=a(1687),u=a(9621),g={};o.exports=function(d,I,C={}){if(s(d&&typeof d=="object","Invalid defaults value: must be an object"),s(!I||I===!0||typeof I=="object","Invalid source value: must be true, falsy or an object"),s(typeof C=="object","Invalid options: must be an object"),!I)return null;if(C.shallow)return g.applyToDefaultsWithShallow(d,I,C);const h=l(d);if(I===!0)return h;const f=C.nullOverride!==void 0&&C.nullOverride;return c(h,I,{nullOverride:f,mergeArrays:!1})},g.applyToDefaultsWithShallow=function(d,I,C){const h=C.shallow;s(Array.isArray(h),"Invalid keys");const f=new Map,A=I===!0?null:new Set;for(let Z of h){Z=Array.isArray(Z)?Z:Z.split(".");const v=u(d,Z);v&&typeof v=="object"?f.set(v,A&&u(I,Z)||v):A&&A.add(Z)}const m=l(d,{},f);if(!A)return m;for(const Z of A)g.reachCopy(m,I,Z);const p=C.nullOverride!==void 0&&C.nullOverride;return c(m,I,{nullOverride:p,mergeArrays:!1})},g.reachCopy=function(d,I,C){for(const A of C){if(!(A in I))return;const m=I[A];if(typeof m!="object"||m===null)return;I=m}const h=I;let f=d;for(let A=0;A<C.length-1;++A){const m=C[A];typeof f[m]!="object"&&(f[m]={}),f=f[m]}f[C[C.length-1]]=h}},375:(o,i,a)=>{const s=a(7916);o.exports=function(l,...c){if(!l)throw c.length===1&&c[0]instanceof Error?c[0]:new s(c)}},8571:(o,i,a)=>{const s=a(9621),l=a(4277),c=a(7043),u={needsProtoHack:new Set([l.set,l.map,l.weakSet,l.weakMap])};o.exports=u.clone=function(g,d={},I=null){if(typeof g!="object"||g===null)return g;let C=u.clone,h=I;if(d.shallow){if(d.shallow!==!0)return u.cloneWithShallow(g,d);C=p=>p}else if(h){const p=h.get(g);if(p)return p}else h=new Map;const f=l.getInternalProto(g);if(f===l.buffer)return!1;if(f===l.date)return new Date(g.getTime());if(f===l.regex)return new RegExp(g);const A=u.base(g,f,d);if(A===g)return g;if(h&&h.set(g,A),f===l.set)for(const p of g)A.add(C(p,d,h));else if(f===l.map)for(const[p,Z]of g)A.set(p,C(Z,d,h));const m=c.keys(g,d);for(const p of m){if(p==="__proto__")continue;if(f===l.array&&p==="length"){A.length=g.length;continue}const Z=Object.getOwnPropertyDescriptor(g,p);Z?Z.get||Z.set?Object.defineProperty(A,p,Z):Z.enumerable?A[p]=C(g[p],d,h):Object.defineProperty(A,p,{enumerable:!1,writable:!0,configurable:!0,value:C(g[p],d,h)}):Object.defineProperty(A,p,{enumerable:!0,writable:!0,configurable:!0,value:C(g[p],d,h)})}return A},u.cloneWithShallow=function(g,d){const I=d.shallow;(d=Object.assign({},d)).shallow=!1;const C=new Map;for(const h of I){const f=s(g,h);typeof f!="object"&&typeof f!="function"||C.set(f,f)}return u.clone(g,d,C)},u.base=function(g,d,I){if(I.prototype===!1)return u.needsProtoHack.has(d)?new d.constructor:d===l.array?[]:{};const C=Object.getPrototypeOf(g);if(C&&C.isImmutable)return g;if(d===l.array){const h=[];return C!==d&&Object.setPrototypeOf(h,C),h}if(u.needsProtoHack.has(d)){const h=new C.constructor;return C!==d&&Object.setPrototypeOf(h,C),h}return Object.create(C)}},9474:(o,i,a)=>{const s=a(4277),l={mismatched:null};o.exports=function(c,u,g){return g=Object.assign({prototype:!0},g),!!l.isDeepEqual(c,u,g,[])},l.isDeepEqual=function(c,u,g,d){if(c===u)return c!==0||1/c==1/u;const I=typeof c;if(I!==typeof u||c===null||u===null)return!1;if(I==="function"){if(!g.deepFunction||c.toString()!==u.toString())return!1}else if(I!=="object")return c!=c&&u!=u;const C=l.getSharedType(c,u,!!g.prototype);switch(C){case s.buffer:return!1;case s.promise:return c===u;case s.regex:return c.toString()===u.toString();case l.mismatched:return!1}for(let h=d.length-1;h>=0;--h)if(d[h].isSame(c,u))return!0;d.push(new l.SeenEntry(c,u));try{return!!l.isDeepEqualObj(C,c,u,g,d)}finally{d.pop()}},l.getSharedType=function(c,u,g){if(g)return Object.getPrototypeOf(c)!==Object.getPrototypeOf(u)?l.mismatched:s.getInternalProto(c);const d=s.getInternalProto(c);return d!==s.getInternalProto(u)?l.mismatched:d},l.valueOf=function(c){const u=c.valueOf;if(u===void 0)return c;try{return u.call(c)}catch(g){return g}},l.hasOwnEnumerableProperty=function(c,u){return Object.prototype.propertyIsEnumerable.call(c,u)},l.isSetSimpleEqual=function(c,u){for(const g of Set.prototype.values.call(c))if(!Set.prototype.has.call(u,g))return!1;return!0},l.isDeepEqualObj=function(c,u,g,d,I){const{isDeepEqual:C,valueOf:h,hasOwnEnumerableProperty:f}=l,{keys:A,getOwnPropertySymbols:m}=Object;if(c===s.array){if(!d.part){if(u.length!==g.length)return!1;for(let B=0;B<u.length;++B)if(!C(u[B],g[B],d,I))return!1;return!0}for(const B of u)for(const y of g)if(C(B,y,d,I))return!0}else if(c===s.set){if(u.size!==g.size)return!1;if(!l.isSetSimpleEqual(u,g)){const B=new Set(Set.prototype.values.call(g));for(const y of Set.prototype.values.call(u)){if(B.delete(y))continue;let W=!1;for(const G of B)if(C(y,G,d,I)){B.delete(G),W=!0;break}if(!W)return!1}}}else if(c===s.map){if(u.size!==g.size)return!1;for(const[B,y]of Map.prototype.entries.call(u))if(y===void 0&&!Map.prototype.has.call(g,B)||!C(y,Map.prototype.get.call(g,B),d,I))return!1}else if(c===s.error&&(u.name!==g.name||u.message!==g.message))return!1;const p=h(u),Z=h(g);if((u!==p||g!==Z)&&!C(p,Z,d,I))return!1;const v=A(u);if(!d.part&&v.length!==A(g).length&&!d.skip)return!1;let k=0;for(const B of v)if(d.skip&&d.skip.includes(B))g[B]===void 0&&++k;else if(!f(g,B)||!C(u[B],g[B],d,I))return!1;if(!d.part&&v.length-k!==A(g).length)return!1;if(d.symbols!==!1){const B=m(u),y=new Set(m(g));for(const W of B){if(!d.skip||!d.skip.includes(W)){if(f(u,W)){if(!f(g,W)||!C(u[W],g[W],d,I))return!1}else if(f(g,W))return!1}y.delete(W)}for(const W of y)if(f(g,W))return!1}return!0},l.SeenEntry=class{constructor(c,u){this.obj=c,this.ref=u}isSame(c,u){return this.obj===c&&this.ref===u}}},7916:(o,i,a)=>{const s=a(8761);o.exports=class extends Error{constructor(l){super(l.filter(c=>c!=="").map(c=>typeof c=="string"?c:c instanceof Error?c.message:s(c)).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,i.assert)}}},5277:o=>{const i={};o.exports=function(a){if(!a)return"";let s="";for(let l=0;l<a.length;++l){const c=a.charCodeAt(l);i.isSafe(c)?s+=a[l]:s+=i.escapeHtmlChar(c)}return s},i.escapeHtmlChar=function(a){return i.namedHtml.get(a)||(a>=256?"&#"+a+";":`&#x${a.toString(16).padStart(2,"0")};`)},i.isSafe=function(a){return i.safeCharCodes.has(a)},i.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),i.safeCharCodes=function(){const a=new Set;for(let s=32;s<123;++s)(s>=97||s>=65&&s<=90||s>=48&&s<=57||s===32||s===46||s===44||s===45||s===58||s===95)&&a.add(s);return a}()},6064:o=>{o.exports=function(i){return i.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:o=>{o.exports=function(){}},1687:(o,i,a)=>{const s=a(375),l=a(8571),c=a(7043),u={};o.exports=u.merge=function(g,d,I){if(s(g&&typeof g=="object","Invalid target value: must be an object"),s(d==null||typeof d=="object","Invalid source value: must be null, undefined, or an object"),!d)return g;if(I=Object.assign({nullOverride:!0,mergeArrays:!0},I),Array.isArray(d)){s(Array.isArray(g),"Cannot merge array onto an object"),I.mergeArrays||(g.length=0);for(let h=0;h<d.length;++h)g.push(l(d[h],{symbols:I.symbols}));return g}const C=c.keys(d,I);for(let h=0;h<C.length;++h){const f=C[h];if(f==="__proto__"||!Object.prototype.propertyIsEnumerable.call(d,f))continue;const A=d[f];if(A&&typeof A=="object"){if(g[f]===A)continue;!g[f]||typeof g[f]!="object"||Array.isArray(g[f])!==Array.isArray(A)||A instanceof Date||A instanceof RegExp?g[f]=l(A,{symbols:I.symbols}):u.merge(g[f],A,I)}else(A!=null||I.nullOverride)&&(g[f]=A)}return g}},9621:(o,i,a)=>{const s=a(375),l={};o.exports=function(c,u,g){if(u===!1||u==null)return c;typeof(g=g||{})=="string"&&(g={separator:g});const d=Array.isArray(u);s(!d||!g.separator,"Separator option is not valid for array-based chain");const I=d?u:u.split(g.separator||".");let C=c;for(let h=0;h<I.length;++h){let f=I[h];const A=g.iterables&&l.iterables(C);if(Array.isArray(C)||A==="set"){const m=Number(f);Number.isInteger(m)&&(f=m<0?C.length+m:m)}if(!C||typeof C=="function"&&g.functions===!1||!A&&C[f]===void 0){s(!g.strict||h+1===I.length,"Missing segment",f,"in reach path ",u),s(typeof C=="object"||g.functions===!0||typeof C!="function","Invalid segment",f,"in reach path ",u),C=g.default;break}C=A?A==="set"?[...C][f]:C.get(f):C[f]}return C},l.iterables=function(c){return c instanceof Set?"set":c instanceof Map?"map":void 0}},8761:o=>{o.exports=function(...i){try{return JSON.stringify(...i)}catch(a){return"[Cannot display object: "+a.message+"]"}}},4277:(o,i)=>{const a={};i=o.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},a.typeMap=new Map([["[object Error]",i.error],["[object Map]",i.map],["[object Promise]",i.promise],["[object Set]",i.set],["[object WeakMap]",i.weakMap],["[object WeakSet]",i.weakSet]]),i.getInternalProto=function(s){if(Array.isArray(s))return i.array;if(s instanceof Date)return i.date;if(s instanceof RegExp)return i.regex;if(s instanceof Error)return i.error;const l=Object.prototype.toString.call(s);return a.typeMap.get(l)||i.generic}},7043:(o,i)=>{i.keys=function(a,s={}){return s.symbols!==!1?Reflect.ownKeys(a):Object.getOwnPropertyNames(a)}},3652:(o,i,a)=>{const s=a(375),l={};i.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(c,u){const g=[].concat((u=u||{}).before||[]),d=[].concat(u.after||[]),I=u.group||"?",C=u.sort||0;s(!g.includes(I),`Item cannot come before itself: ${I}`),s(!g.includes("?"),"Item cannot come before unassociated items"),s(!d.includes(I),`Item cannot come after itself: ${I}`),s(!d.includes("?"),"Item cannot come after unassociated items"),Array.isArray(c)||(c=[c]);for(const h of c){const f={seq:this._items.length,sort:C,before:g,after:d,group:I,node:h};this._items.push(f)}if(!u.manual){const h=this._sort();s(h,"item",I!=="?"?`added into group ${I}`:"","created a dependencies error")}return this.nodes}merge(c){Array.isArray(c)||(c=[c]);for(const g of c)if(g)for(const d of g._items)this._items.push(Object.assign({},d));this._items.sort(l.mergeSort);for(let g=0;g<this._items.length;++g)this._items[g].seq=g;const u=this._sort();return s(u,"merge created a dependencies error"),this.nodes}sort(){const c=this._sort();return s(c,"sort created a dependencies error"),this.nodes}_sort(){const c={},u=Object.create(null),g=Object.create(null);for(const f of this._items){const A=f.seq,m=f.group;g[m]=g[m]||[],g[m].push(A),c[A]=f.before;for(const p of f.after)u[p]=u[p]||[],u[p].push(A)}for(const f in c){const A=[];for(const m in c[f]){const p=c[f][m];g[p]=g[p]||[],A.push(...g[p])}c[f]=A}for(const f in u)if(g[f])for(const A of g[f])c[A].push(...u[f]);const d={};for(const f in c){const A=c[f];for(const m of A)d[m]=d[m]||[],d[m].push(f)}const I={},C=[];for(let f=0;f<this._items.length;++f){let A=f;if(d[f]){A=null;for(let m=0;m<this._items.length;++m){if(I[m]===!0)continue;d[m]||(d[m]=[]);const p=d[m].length;let Z=0;for(let v=0;v<p;++v)I[d[m][v]]&&++Z;if(Z===p){A=m;break}}}A!==null&&(I[A]=!0,C.push(A))}if(C.length!==this._items.length)return!1;const h={};for(const f of this._items)h[f.seq]=f;this._items=[],this.nodes=[];for(const f of C){const A=h[f];this.nodes.push(A.node),this._items.push(A)}return!0}},l.mergeSort=(c,u)=>c.sort===u.sort?0:c.sort<u.sort?-1:1},5380:(o,i,a)=>{const s=a(443),l=a(2178),c={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:s.URL||URL};i.analyze=function(u,g={}){if(!u)return l.code("DOMAIN_NON_EMPTY_STRING");if(typeof u!="string")throw new Error("Invalid input: domain must be a string");if(u.length>256)return l.code("DOMAIN_TOO_LONG");if(c.nonAsciiRx.test(u)){if(g.allowUnicode===!1)return l.code("DOMAIN_INVALID_UNICODE_CHARS");u=u.normalize("NFC")}if(c.domainControlRx.test(u))return l.code("DOMAIN_INVALID_CHARS");u=c.punycode(u),g.allowFullyQualified&&u[u.length-1]==="."&&(u=u.slice(0,-1));const d=g.minDomainSegments||c.minDomainSegments,I=u.split(".");if(I.length<d)return l.code("DOMAIN_SEGMENTS_COUNT");if(g.maxDomainSegments&&I.length>g.maxDomainSegments)return l.code("DOMAIN_SEGMENTS_COUNT_MAX");const C=g.tlds;if(C){const h=I[I.length-1].toLowerCase();if(C.deny&&C.deny.has(h)||C.allow&&!C.allow.has(h))return l.code("DOMAIN_FORBIDDEN_TLDS")}for(let h=0;h<I.length;++h){const f=I[h];if(!f.length)return l.code("DOMAIN_EMPTY_SEGMENT");if(f.length>63)return l.code("DOMAIN_LONG_SEGMENT");if(h<I.length-1){if(!c.domainSegmentRx.test(f))return l.code("DOMAIN_INVALID_CHARS")}else if(!c.tldSegmentRx.test(f))return l.code("DOMAIN_INVALID_TLDS_CHARS")}return null},i.isValid=function(u,g){return!i.analyze(u,g)},c.punycode=function(u){u.includes("%")&&(u=u.replace(/%/g,"%25"));try{return new c.URL(`http://${u}`).host}catch{return u}}},1745:(o,i,a)=>{const s=a(9848),l=a(5380),c=a(2178),u={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(s.TextEncoder||TextEncoder)};i.analyze=function(g,d){return u.email(g,d)},i.isValid=function(g,d){return!u.email(g,d)},u.email=function(g,d={}){if(typeof g!="string")throw new Error("Invalid input: email must be a string");if(!g)return c.code("EMPTY_STRING");const I=!u.nonAsciiRx.test(g);if(!I){if(d.allowUnicode===!1)return c.code("FORBIDDEN_UNICODE");g=g.normalize("NFC")}const C=g.split("@");if(C.length!==2)return C.length>2?c.code("MULTIPLE_AT_CHAR"):c.code("MISSING_AT_CHAR");const[h,f]=C;if(!h)return c.code("EMPTY_LOCAL");if(!d.ignoreLength){if(g.length>254)return c.code("ADDRESS_TOO_LONG");if(u.encoder.encode(h).length>64)return c.code("LOCAL_TOO_LONG")}return u.local(h,I)||l.analyze(f,d)},u.local=function(g,d){const I=g.split(".");for(const C of I){if(!C.length)return c.code("EMPTY_LOCAL_SEGMENT");if(d){if(!u.atextRx.test(C))return c.code("INVALID_LOCAL_CHARS")}else for(const h of C){if(u.atextRx.test(h))continue;const f=u.binary(h);if(!u.atomRx.test(f))return c.code("INVALID_LOCAL_CHARS")}}},u.binary=function(g){return Array.from(u.encoder.encode(g)).map(d=>String.fromCharCode(d)).join("")},u.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,u.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(o,i)=>{i.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},i.code=function(a){return{code:a,error:i.codes[a]}}},9959:(o,i,a)=>{const s=a(375),l=a(5752);i.regex=function(c={}){s(c.cidr===void 0||typeof c.cidr=="string","options.cidr must be a string");const u=c.cidr?c.cidr.toLowerCase():"optional";s(["required","optional","forbidden"].includes(u),"options.cidr must be one of required, optional, forbidden"),s(c.version===void 0||typeof c.version=="string"||Array.isArray(c.version),"options.version must be a string or an array of string");let g=c.version||["ipv4","ipv6","ipvfuture"];Array.isArray(g)||(g=[g]),s(g.length>=1,"options.version must have at least 1 version specified");for(let C=0;C<g.length;++C)s(typeof g[C]=="string","options.version must only contain strings"),g[C]=g[C].toLowerCase(),s(["ipv4","ipv6","ipvfuture"].includes(g[C]),"options.version contains unknown version "+g[C]+" - must be one of ipv4, ipv6, ipvfuture");g=Array.from(new Set(g));const d=`(?:${g.map(C=>{if(u==="forbidden")return l.ip[C];const h=`\\/${C==="ipv4"?l.ip.v4Cidr:l.ip.v6Cidr}`;return u==="required"?`${l.ip[C]}${h}`:`${l.ip[C]}(?:${h})?`}).join("|")})`,I=new RegExp(`^${d}$`);return{cidr:u,versions:g,regex:I,raw:d}}},5752:(o,i,a)=>{const s=a(375),l=a(6064),c={generate:function(){const u={},g="\\dA-Fa-f",d="["+g+"]",I="\\w-\\.~",C="!\\$&'\\(\\)\\*\\+,;=",h="%"+g,f=I+h+C+":@",A="["+f+"]",m="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";u.ipv4address="(?:"+m+"\\.){3}"+m;const p=d+"{1,4}",Z="(?:"+p+":"+p+"|"+u.ipv4address+")",v="(?:"+p+":){6}"+Z,k="::(?:"+p+":){5}"+Z,B="(?:"+p+")?::(?:"+p+":){4}"+Z,y="(?:(?:"+p+":){0,1}"+p+")?::(?:"+p+":){3}"+Z,W="(?:(?:"+p+":){0,2}"+p+")?::(?:"+p+":){2}"+Z,G="(?:(?:"+p+":){0,3}"+p+")?::"+p+":"+Z,R="(?:(?:"+p+":){0,4}"+p+")?::"+Z,X="(?:(?:"+p+":){0,5}"+p+")?::"+p,Y="(?:(?:"+p+":){0,6}"+p+")?::";u.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",u.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",u.ipv6address="(?:"+v+"|"+k+"|"+B+"|"+y+"|"+W+"|"+G+"|"+R+"|"+X+"|"+Y+")",u.ipvFuture="v"+d+"+\\.["+I+C+":]+",u.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",u.schemeRegex=new RegExp(u.scheme);const x="["+I+h+C+":]*",D="["+I+h+C+"]{1,255}",L="(?:\\[(?:"+u.ipv6address+"|"+u.ipvFuture+")\\]|"+u.ipv4address+"|"+D+")",M="(?:"+x+"@)?"+L+"(?::\\d*)?",K="(?:"+x+"@)?("+L+")(?::\\d*)?",E=A+"*",O=A+"+",re="(?:\\/"+E+")*",H="\\/(?:"+O+re+")?",z=O+re,j="["+I+h+C+"@]+"+re,$="(?:\\/\\/\\/"+E+re+")";return u.hierPart="(?:(?:\\/\\/"+M+re+")|"+H+"|"+z+"|"+$+")",u.hierPartCapture="(?:(?:\\/\\/"+K+re+")|"+H+"|"+z+")",u.relativeRef="(?:(?:\\/\\/"+M+re+")|"+H+"|"+j+"|)",u.relativeRefCapture="(?:(?:\\/\\/"+K+re+")|"+H+"|"+j+"|)",u.query="["+f+"\\/\\?]*(?=#|$)",u.queryWithSquareBrackets="["+f+"\\[\\]\\/\\?]*(?=#|$)",u.fragment="["+f+"\\/\\?]*",u}};c.rfc3986=c.generate(),i.ip={v4Cidr:c.rfc3986.ipv4Cidr,v6Cidr:c.rfc3986.ipv6Cidr,ipv4:c.rfc3986.ipv4address,ipv6:c.rfc3986.ipv6address,ipvfuture:c.rfc3986.ipvFuture},c.createRegex=function(u){const g=c.rfc3986,d="(?:\\?"+(u.allowQuerySquareBrackets?g.queryWithSquareBrackets:g.query)+")?(?:#"+g.fragment+")?",I=u.domain?g.relativeRefCapture:g.relativeRef;if(u.relativeOnly)return c.wrap(I+d);let C="";if(u.scheme){s(u.scheme instanceof RegExp||typeof u.scheme=="string"||Array.isArray(u.scheme),"scheme must be a RegExp, String, or Array");const A=[].concat(u.scheme);s(A.length>=1,"scheme must have at least 1 scheme specified");const m=[];for(let p=0;p<A.length;++p){const Z=A[p];s(Z instanceof RegExp||typeof Z=="string","scheme at position "+p+" must be a RegExp or String"),Z instanceof RegExp?m.push(Z.source.toString()):(s(g.schemeRegex.test(Z),"scheme at position "+p+" must be a valid scheme"),m.push(l(Z)))}C=m.join("|")}const h="(?:"+(C?"(?:"+C+")":g.scheme)+":"+(u.domain?g.hierPartCapture:g.hierPart)+")",f=u.allowRelative?"(?:"+h+"|"+I+")":h;return c.wrap(f+d,C)},c.wrap=function(u,g){return{raw:u=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${u}`,regex:new RegExp(`^${u}$`),scheme:g}},c.uriRegex=c.createRegex({}),i.regex=function(u={}){return u.scheme||u.allowRelative||u.relativeOnly||u.allowQuerySquareBrackets||u.domain?c.createRegex(u):c.uriRegex}},1447:(o,i)=>{const a={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};i.Parser=class{constructor(s,l={}){if(!l[a.settings]&&l.constants)for(const c in l.constants){const u=l.constants[c];if(u!==null&&!["boolean","number","string"].includes(typeof u))throw new Error(`Formula constant ${c} contains invalid ${typeof u} value type`)}this.settings=l[a.settings]?l:Object.assign({[a.settings]:!0,constants:{},functions:{}},l),this.single=null,this._parts=null,this._parse(s)}_parse(s){let l=[],c="",u=0,g=!1;const d=C=>{if(u)throw new Error("Formula missing closing parenthesis");const h=l.length?l[l.length-1]:null;if(g||c||C){if(h&&h.type==="reference"&&C===")")return h.type="function",h.value=this._subFormula(c,h.value),void(c="");if(C===")"){const f=new i.Parser(c,this.settings);l.push({type:"segment",value:f})}else if(g){if(g==="]")return l.push({type:"reference",value:c}),void(c="");l.push({type:"literal",value:c})}else if(a.operatorCharacters.includes(c))h&&h.type==="operator"&&a.operators.includes(h.value+c)?h.value+=c:l.push({type:"operator",value:c});else if(c.match(a.numberRx))l.push({type:"constant",value:parseFloat(c)});else if(this.settings.constants[c]!==void 0)l.push({type:"constant",value:this.settings.constants[c]});else{if(!c.match(a.tokenRx))throw new Error(`Formula contains invalid token: ${c}`);l.push({type:"reference",value:c})}c=""}};for(const C of s)g?C===g?(d(),g=!1):c+=C:u?C==="("?(c+=C,++u):C===")"?(--u,u?c+=C:d(C)):c+=C:C in a.literals?g=a.literals[C]:C==="("?(d(),++u):a.operatorCharacters.includes(C)?(d(),c=C,d()):C!==" "?c+=C:d();d(),l=l.map((C,h)=>C.type!=="operator"||C.value!=="-"||h&&l[h-1].type!=="operator"?C:{type:"operator",value:"n"});let I=!1;for(const C of l){if(C.type==="operator"){if(a.operatorsPrefix.includes(C.value))continue;if(!I)throw new Error("Formula contains an operator in invalid position");if(!a.operators.includes(C.value))throw new Error(`Formula contains an unknown operator ${C.value}`)}else if(I)throw new Error("Formula missing expected operator");I=!I}if(!I)throw new Error("Formula contains invalid trailing operator");l.length===1&&["reference","literal","constant"].includes(l[0].type)&&(this.single={type:l[0].type==="reference"?"reference":"value",value:l[0].value}),this._parts=l.map(C=>{if(C.type==="operator")return a.operatorsPrefix.includes(C.value)?C:C.value;if(C.type!=="reference")return C.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(C.value))throw new Error(`Formula contains invalid reference ${C.value}`);return this.settings.reference?this.settings.reference(C.value):a.reference(C.value)})}_subFormula(s,l){const c=this.settings.functions[l];if(typeof c!="function")throw new Error(`Formula contains unknown function ${l}`);let u=[];if(s){let g="",d=0,I=!1;const C=()=>{if(!g)throw new Error(`Formula contains function ${l} with invalid arguments ${s}`);u.push(g),g=""};for(let h=0;h<s.length;++h){const f=s[h];I?(g+=f,f===I&&(I=!1)):f in a.literals&&!d?(g+=f,I=a.literals[f]):f!==","||d?(g+=f,f==="("?++d:f===")"&&--d):C()}C()}return u=u.map(g=>new i.Parser(g,this.settings)),function(g){const d=[];for(const I of u)d.push(I.evaluate(g));return c.call(g,...d)}}evaluate(s){const l=this._parts.slice();for(let c=l.length-2;c>=0;--c){const u=l[c];if(u&&u.type==="operator"){const g=l[c+1];l.splice(c+1,1);const d=a.evaluate(g,s);l[c]=a.single(u.value,d)}}return a.operatorsOrder.forEach(c=>{for(let u=1;u<l.length-1;)if(c.includes(l[u])){const g=l[u],d=a.evaluate(l[u-1],s),I=a.evaluate(l[u+1],s);l.splice(u,2);const C=a.calculate(g,d,I);l[u-1]=C===0?0:C}else u+=2}),a.evaluate(l[0],s)}},i.Parser.prototype[a.symbol]=!0,a.reference=function(s){return function(l){return l&&l[s]!==void 0?l[s]:null}},a.evaluate=function(s,l){return s===null?null:typeof s=="function"?s(l):s[a.symbol]?s.evaluate(l):s},a.single=function(s,l){if(s==="!")return!l;const c=-l;return c===0?0:c},a.calculate=function(s,l,c){if(s==="??")return a.exists(l)?l:c;if(typeof l=="string"||typeof c=="string"){if(s==="+")return(l=a.exists(l)?l:"")+(a.exists(c)?c:"")}else switch(s){case"^":return Math.pow(l,c);case"*":return l*c;case"/":return l/c;case"%":return l%c;case"+":return l+c;case"-":return l-c}switch(s){case"<":return l<c;case"<=":return l<=c;case">":return l>c;case">=":return l>=c;case"==":return l===c;case"!=":return l!==c;case"&&":return l&&c;case"||":return l||c}return null},a.exists=function(s){return s!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:o=>{o.exports=JSON.parse('{"version":"17.13.3"}')}},r={},function o(i){var a=r[i];if(a!==void 0)return a.exports;var s=r[i]={exports:{}};return n[i](s,s.exports,o),s.exports}(5107);var n,r})})(bJ);var $P=bJ.exports;const Kr=qC($P),uw={VIP:15,Standard:10},e8=e=>qP(e).format("YYYY-MM-DD"),t8=Kr.object({theater:Kr.string().required(),seats:Kr.array().items(Kr.string()).required(),customerName:Kr.string().min(1).required(),customerEmail:Kr.string().pattern(/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/).required(),totalAmount:Kr.number().greater(0).required(),bookingDate:Kr.string().isoDate().required(),bookingTime:Kr.string().required(),event:Kr.string().required()}),DG=()=>{const e=Dr(X=>X.selectedTheater),{data:t,isLoading:n,isError:r}=DP(e),[o,i]=F.useState({}),[a,s]=F.useState([]),[l,c]=F.useState(!1),[u,g]=F.useState(0),d=Um("(max-width:600px)"),I=Um("(max-width:960px)"),C=Dr(X=>X.selectedDate),h=Dr(X=>X.selectedTime),f=Dr(X=>X.selectedCard),{getCurrentUser:A}=gi(),{_id:m,name:p,email:Z}=A();console.log("Current User :",m,p,Z),F.useEffect(()=>{if(t){const X={};t.forEach(Y=>{const{section:x,row:D,number:L,isAvailable:M}=Y;X[x]||(X[x]=[]);const K=D;X[x][K]||(X[x][K]=[]),X[x][K][L]=M}),i(X)}},[t]);const v=(X,Y,x)=>{const D=`${X}-${Y}-${x}`;a.includes(D)?(s(a.filter(L=>L!==D)),k(D,"remove")):(s([...a,D]),k(D,"add"))},k=(X,Y)=>{const[x]=X.split("-"),D=uw[x];g(Y==="add"?u+D:u-D)},B=()=>{c(!1)},y=sa(),W=async()=>{if(a.length>0){const X=e8(C),Y={theater:e,seats:a,customerName:p,customerEmail:Z,totalAmount:u,bookingDate:X,bookingTime:h,event:f._id};console.log("Booking data:",Y);const{error:x}=t8.validate(Y);if(x){console.error("Validation Error:",x.details);return}localStorage.setItem("bookingData",JSON.stringify(Y)),y("/bookingdetails"),c(!0)}};if(n)return w.jsx(Ee,{children:"Loading seats..."});if(r)return w.jsx(Ee,{children:"Error loading seats!"});const G=d?18:I?25:30,R=()=>Object.keys(o).map(X=>w.jsxs(je,{sx:{mb:4,borderRadius:"12px",padding:"20px",backgroundColor:"background.paper",boxShadow:1,transition:"all 0.3s ease","&:hover":{boxShadow:3}},children:[w.jsxs(Ee,{sx:{mb:2,fontSize:"16px",fontWeight:"bold",color:"text.primary"},children:[X," Seats - $",uw[X]]}),w.jsx(at,{container:!0,justifyContent:"center",sx:{mb:2},children:Object.keys(o[X]).map(Y=>{const x=o[X][Y],D=Y;return w.jsxs(at,{container:!0,justifyContent:"center",sx:{mb:1,flexWrap:"nowrap"},children:[w.jsx(at,{item:!0,sx:{mr:1,alignSelf:"center"},children:w.jsx(Ee,{variant:"subtitle1",sx:{fontWeight:"medium",color:"text.secondary"},children:D})}),x.map((L,M)=>{const K=`${X}-${D}-${M}`,E=a.includes(K);return w.jsx(je,{onClick:()=>v(X,Y,M),disabled:!L,sx:{width:G,height:G,margin:.3,backgroundColor:L?E?"primary.main":"primary.light":"action.disabledBackground",opacity:L?1:.5,transition:"all 0.2s ease",cursor:L?"pointer":"not-allowed","&:hover":{backgroundColor:L&&!E?"primary.dark":"",transform:L?"scale(1.05)":"none"},borderRadius:"8px"}},M)})]},Y)})})]},X));return w.jsxs(je,{sx:{textAlign:"center",padding:3,backgroundColor:"background.default",borderRadius:"16px",margin:"20px",boxShadow:2},children:[w.jsx(Ee,{variant:"h4",sx:{mb:4,fontWeight:"bold",color:"text.primary"},children:"Select Your Seats"}),R(),w.jsxs(Ee,{variant:"h6",sx:{mt:4,color:"text.primary",fontWeight:"medium"},children:["Total Price: $",u]}),w.jsx(rn,{variant:"contained",onClick:W,disabled:a.length===0,sx:{mt:4,px:4,py:1.5,backgroundColor:"primary.main",color:"primary.contrastText",borderRadius:"8px",transition:"all 0.3s ease","&:hover":{backgroundColor:"primary.dark",transform:"translateY(-2px)"},"&:disabled":{backgroundColor:"action.disabledBackground"}},children:"Confirm Selection"}),w.jsx(oU,{open:l,autoHideDuration:3e3,onClose:B,message:`Seats selected: ${a.join(", ")}, Total Price: $${u}`})]})},n8=Jn(w.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),r8=Jn(w.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),o8=Jn(w.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),i8=Jn(w.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),yJ=Jn(w.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload"),a8=Jn(w.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),s8=Jn(w.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}),"KeyboardArrowDown"),_b=Jn(w.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),l8=Jn(w.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),g8=Jn(w.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),c8=Jn(w.jsx("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),I8=Jn(w.jsx("path",{d:"M19 13H5v-2h14z"}),"Remove"),d8=Jn(w.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"}),"Upload"),u8=new Ni("/movies"),C8=()=>bc({queryKey:["movies"],queryFn:()=>u8.getAll(),staleTime:24*60*60*1e3});function A8(e){const t=new Date(e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${n}-${r}-${o}T00:00:00.000+00:00`}const h8=()=>{const[e,t]=F.useState(null),[n,r]=F.useState(0),[o,i]=F.useState([]),[a,s]=F.useState(!0),[l,c]=F.useState(null),u=Dr(A=>A.selectedTheater),g=Dr(A=>A.selectedDate),d=Dr(A=>A.SetSelectedTime),I=A8(g);F.useEffect(()=>{u&&(async()=>{try{const m=await hn.get("https://azure-reservation-app.azurewebsites.net/api/showtimes",{params:{theater:u,date:I}});i(m.data)}catch(m){c(m)}finally{s(!1)}})()},[u,g]);const C=A=>{t(A),d(A)},h=()=>{r(A=>Math.max(A-1,0))},f=()=>{r(A=>Math.min(A+1,o.flatMap(m=>m.times).length-1))};return a?w.jsx(vG,{}):l?w.jsx(Ee,{color:"error",children:"Error fetching showtimes"}):w.jsxs(je,{display:"flex",alignItems:"center",sx:{width:{xs:"90%",sm:"80%",md:"80%"},margin:"20px auto",backgroundColor:"#E5D9F2",borderRadius:"10px",padding:{xs:2,sm:3}},children:[w.jsx(rn,{onClick:h,disabled:n===0,children:w.jsx(r8,{})}),w.jsx(je,{display:"flex",sx:{overflowX:"auto",scrollBehavior:"smooth",width:"85%",padding:"10px","::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"},children:o.length>0?o.flatMap(A=>A.times).slice(n,n+5).map((A,m)=>w.jsx(rn,{onClick:()=>C(A),variant:e===A?"contained":"outlined",sx:{minWidth:{xs:"80px",sm:"100px"},marginRight:"10px",whiteSpace:"nowrap",fontSize:{xs:"12px",sm:"14px"}},children:A},`${A}-${m}`)):w.jsx(Ee,{children:"Choose date for relevant times"})}),w.jsx(rn,{onClick:f,disabled:n>=o.flatMap(A=>A.times).length-5,children:w.jsx(o8,{})})]})},m8=()=>{const{id:e}=IV(),{data:t}=EP(e);return console.log(t),w.jsxs(w.Fragment,{children:[w.jsx(pX,{sx:{maxWidth:900,margin:"20px auto",padding:2},children:w.jsxs(at,{container:!0,spacing:2,children:[w.jsx(at,{item:!0,xs:12,md:4,children:w.jsx(_4,{component:"img",height:"400",image:t==null?void 0:t.imageUrl,alt:"Deadpool & Wolverine",sx:{objectFit:"cover",borderRadius:2}})}),w.jsx(at,{item:!0,xs:12,md:8,children:w.jsxs(fX,{children:[w.jsx(Ee,{variant:"h4",component:"h2",gutterBottom:!0,children:t==null?void 0:t.title}),w.jsxs(Ee,{variant:"body1",gutterBottom:!0,children:[w.jsx("strong",{children:"Rating: "})," ",t==null?void 0:t.rating]}),w.jsxs(Ee,{variant:"body1",gutterBottom:!0,children:[w.jsx("strong",{children:"Description:"})," ",t==null?void 0:t.description]}),w.jsxs(Ee,{variant:"body1",gutterBottom:!0,children:[w.jsx("strong",{children:"Release Date:"})," ",t==null?void 0:t.releaseDate]}),w.jsxs(Ee,{variant:"body1",gutterBottom:!0,children:[w.jsx("strong",{children:"Running Time:"})," ",t==null?void 0:t.duration," minutes"]}),w.jsxs(Ee,{variant:"body1",gutterBottom:!0,children:[w.jsx("strong",{children:"Director:"})," ",t==null?void 0:t.director]}),w.jsxs(Ee,{variant:"body1",gutterBottom:!0,children:[w.jsx("strong",{children:"Cast:"})," ",t==null?void 0:t.cast]})]})})]})}),w.jsx(h8,{}),w.jsx(DG,{})]})};var uA=e=>e.type==="checkbox",SI=e=>e instanceof Date,Ho=e=>e==null;const ZJ=e=>typeof e=="object";var Yr=e=>!Ho(e)&&!Array.isArray(e)&&ZJ(e)&&!SI(e),vJ=e=>Yr(e)&&e.target?uA(e.target)?e.target.checked:e.target.value:e,p8=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,GJ=(e,t)=>e.has(p8(t)),f8=e=>{const t=e.constructor&&e.constructor.prototype;return Yr(t)&&t.hasOwnProperty("isPrototypeOf")},zG=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Fr(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(zG&&(e instanceof Blob||e instanceof FileList))&&(n||Yr(e)))if(t=n?[]:{},!n&&!f8(e))t=e;else for(const r in e)e.hasOwnProperty(r)&&(t[r]=Fr(e[r]));else return e;return t}var CA=e=>Array.isArray(e)?e.filter(Boolean):[],Dn=e=>e===void 0,ot=(e,t,n)=>{if(!t||!Yr(e))return n;const r=CA(t.split(/[,[\].]+?/)).reduce((o,i)=>Ho(o)?o:o[i],e);return Dn(r)||r===e?Dn(e[t])?n:e[t]:r},_i=e=>typeof e=="boolean",TG=e=>/^\w*$/.test(e),SJ=e=>CA(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Vn=(e,t,n)=>{let r=-1;const o=TG(t)?[t]:SJ(t),i=o.length,a=i-1;for(;++r<i;){const s=o[r];let l=n;if(r!==a){const c=e[s];l=Yr(c)||Array.isArray(c)?c:isNaN(+o[r+1])?{}:[]}if(s==="__proto__")return;e[s]=l,e=e[s]}return e};const cp={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ta={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ks={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},b8=qe.createContext(null),e0=()=>qe.useContext(b8);var BJ=(e,t,n,r=!0)=>{const o={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(o,i,{get:()=>{const a=i;return t._proxyFormState[a]!==ta.all&&(t._proxyFormState[a]=!r||ta.all),n&&(n[a]=!0),e[a]}});return o},Yo=e=>Yr(e)&&!Object.keys(e).length,wJ=(e,t,n,r)=>{n(e);const{name:o,...i}=e;return Yo(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(a=>t[a]===(!r||ta.all))},ei=e=>Array.isArray(e)?e:[e],WJ=(e,t,n)=>!e||!t||e===t||ei(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r)));function t0(e){const t=qe.useRef(e);t.current=e,qe.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}function y8(e){const t=e0(),{control:n=t.control,disabled:r,name:o,exact:i}=e||{},[a,s]=qe.useState(n._formState),l=qe.useRef(!0),c=qe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=qe.useRef(o);return u.current=o,t0({disabled:r,next:g=>l.current&&WJ(u.current,g.name,i)&&wJ(g,c.current,n._updateFormState)&&s({...n._formState,...g}),subject:n._subjects.state}),qe.useEffect(()=>(l.current=!0,c.current.isValid&&n._updateValid(!0),()=>{l.current=!1}),[n]),BJ(a,n,c.current,!1)}var as=e=>typeof e=="string",RJ=(e,t,n,r,o)=>as(e)?(r&&t.watch.add(e),ot(n,e,o)):Array.isArray(e)?e.map(i=>(r&&t.watch.add(i),ot(n,i))):(r&&(t.watchAll=!0),n);function Z8(e){const t=e0(),{control:n=t.control,name:r,defaultValue:o,disabled:i,exact:a}=e||{},s=qe.useRef(r);s.current=r,t0({disabled:i,subject:n._subjects.values,next:u=>{WJ(s.current,u.name,a)&&c(Fr(RJ(s.current,n._names,u.values||n._formValues,!1,o)))}});const[l,c]=qe.useState(n._getWatch(r,o));return qe.useEffect(()=>n._removeUnmounted()),l}function v8(e){const t=e0(),{name:n,disabled:r,control:o=t.control,shouldUnregister:i}=e,a=GJ(o._names.array,n),s=Z8({control:o,name:n,defaultValue:ot(o._formValues,n,ot(o._defaultValues,n,e.defaultValue)),exact:!0}),l=y8({control:o,name:n,exact:!0}),c=qe.useRef(o.register(n,{...e.rules,value:s,..._i(e.disabled)?{disabled:e.disabled}:{}}));return qe.useEffect(()=>{const u=o._options.shouldUnregister||i,g=(d,I)=>{const C=ot(o._fields,d);C&&C._f&&(C._f.mount=I)};if(g(n,!0),u){const d=Fr(ot(o._options.defaultValues,n));Vn(o._defaultValues,n,d),Dn(ot(o._formValues,n))&&Vn(o._formValues,n,d)}return()=>{(a?u&&!o._state.action:u)?o.unregister(n):g(n,!1)}},[n,o,a,i]),qe.useEffect(()=>{ot(o._fields,n)&&o._updateDisabledField({disabled:r,fields:o._fields,name:n,value:ot(o._fields,n)._f.value})},[r,n,o]),{field:{name:n,value:s,..._i(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:qe.useCallback(u=>c.current.onChange({target:{value:vJ(u),name:n},type:cp.CHANGE}),[n]),onBlur:qe.useCallback(()=>c.current.onBlur({target:{value:ot(o._formValues,n),name:n},type:cp.BLUR}),[n,o]),ref:qe.useCallback(u=>{const g=ot(o._fields,n);g&&u&&(g._f.ref={focus:()=>u.focus(),select:()=>u.select(),setCustomValidity:d=>u.setCustomValidity(d),reportValidity:()=>u.reportValidity()})},[o._fields,n])},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ot(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!ot(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!ot(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!ot(l.validatingFields,n)},error:{enumerable:!0,get:()=>ot(l.errors,n)}})}}const qb=e=>e.render(v8(e));var G8=(e,t,n,r,o)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:o||!0}}:{},ml=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(Math.random()*16+e)%16|0;return(t=="x"?n:n&3|8).toString(16)})},$b=(e,t,n={})=>n.shouldFocus||Dn(n.shouldFocus)?n.focusName||`${e}.${Dn(n.focusIndex)?t:n.focusIndex}.`:"",rC=e=>({isOnSubmit:!e||e===ta.onSubmit,isOnBlur:e===ta.onBlur,isOnChange:e===ta.onChange,isOnAll:e===ta.all,isOnTouch:e===ta.onTouched}),dZ=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const HI=(e,t,n,r)=>{for(const o of n||Object.keys(e)){const i=ot(e,o);if(i){const{_f:a,...s}=i;if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],o)&&!r)return!0;if(a.ref&&t(a.ref,a.name)&&!r)return!0;if(HI(s,t))break}else if(Yr(s)&&HI(s,t))break}}};var kJ=(e,t,n)=>{const r=ei(ot(e,n));return Vn(r,"root",t[n]),Vn(e,n,r),e},UG=e=>e.type==="file",Ls=e=>typeof e=="function",Ip=e=>{if(!zG)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Cm=e=>as(e),jG=e=>e.type==="radio",dp=e=>e instanceof RegExp;const Cw={value:!1,isValid:!1},Aw={value:!0,isValid:!0};var VJ=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Dn(e[0].attributes.value)?Dn(e[0].value)||e[0].value===""?Aw:{value:e[0].value,isValid:!0}:Aw:Cw}return Cw};const hw={isValid:!1,value:null};var XJ=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,hw):hw;function mw(e,t,n="validate"){if(Cm(e)||Array.isArray(e)&&e.every(Cm)||_i(e)&&!e)return{type:n,message:Cm(e)?e:"",ref:t}}var oI=e=>Yr(e)&&!dp(e)?e:{value:e,message:""},uZ=async(e,t,n,r,o)=>{const{ref:i,refs:a,required:s,maxLength:l,minLength:c,min:u,max:g,pattern:d,validate:I,name:C,valueAsNumber:h,mount:f,disabled:A}=e._f,m=ot(t,C);if(!f||A)return{};const p=a?a[0]:i,Z=X=>{r&&p.reportValidity&&(p.setCustomValidity(_i(X)?"":X||""),p.reportValidity())},v={},k=jG(i),B=uA(i),y=k||B,W=(h||UG(i))&&Dn(i.value)&&Dn(m)||Ip(i)&&i.value===""||m===""||Array.isArray(m)&&!m.length,G=G8.bind(null,C,n,v),R=(X,Y,x,D=ks.maxLength,L=ks.minLength)=>{const M=X?Y:x;v[C]={type:X?D:L,message:M,ref:i,...G(X?D:L,M)}};if(o?!Array.isArray(m)||!m.length:s&&(!y&&(W||Ho(m))||_i(m)&&!m||B&&!VJ(a).isValid||k&&!XJ(a).isValid)){const{value:X,message:Y}=Cm(s)?{value:!!s,message:s}:oI(s);if(X&&(v[C]={type:ks.required,message:Y,ref:p,...G(ks.required,Y)},!n))return Z(Y),v}if(!W&&(!Ho(u)||!Ho(g))){let X,Y;const x=oI(g),D=oI(u);if(!Ho(m)&&!isNaN(m)){const L=i.valueAsNumber||m&&+m;Ho(x.value)||(X=L>x.value),Ho(D.value)||(Y=L<D.value)}else{const L=i.valueAsDate||new Date(m),M=O=>new Date(new Date().toDateString()+" "+O),K=i.type=="time",E=i.type=="week";as(x.value)&&m&&(X=K?M(m)>M(x.value):E?m>x.value:L>new Date(x.value)),as(D.value)&&m&&(Y=K?M(m)<M(D.value):E?m<D.value:L<new Date(D.value))}if((X||Y)&&(R(!!X,x.message,D.message,ks.max,ks.min),!n))return Z(v[C].message),v}if((l||c)&&!W&&(as(m)||o&&Array.isArray(m))){const X=oI(l),Y=oI(c),x=!Ho(X.value)&&m.length>+X.value,D=!Ho(Y.value)&&m.length<+Y.value;if((x||D)&&(R(x,X.message,Y.message),!n))return Z(v[C].message),v}if(d&&!W&&as(m)){const{value:X,message:Y}=oI(d);if(dp(X)&&!m.match(X)&&(v[C]={type:ks.pattern,message:Y,ref:i,...G(ks.pattern,Y)},!n))return Z(Y),v}if(I){if(Ls(I)){const X=await I(m,t),Y=mw(X,p);if(Y&&(v[C]={...Y,...G(ks.validate,Y.message)},!n))return Z(Y.message),v}else if(Yr(I)){let X={};for(const Y in I){if(!Yo(X)&&!n)break;const x=mw(await I[Y](m,t),p,Y);x&&(X={...x,...G(Y,x.message)},Z(x.message),n&&(v[C]=X))}if(!Yo(X)&&(v[C]={ref:p,...X},!n))return v}}return Z(!0),v},ey=(e,t)=>[...e,...ei(t)],ty=e=>Array.isArray(e)?e.map(()=>{}):void 0;function ny(e,t,n){return[...e.slice(0,t),...ei(n),...e.slice(t)]}var ry=(e,t,n)=>Array.isArray(e)?(Dn(e[n])&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]),e):[],oy=(e,t)=>[...ei(t),...ei(e)];function S8(e,t){let n=0;const r=[...e];for(const o of t)r.splice(o-n,1),n++;return CA(r).length?r:[]}var iy=(e,t)=>Dn(t)?[]:S8(e,ei(t).sort((n,r)=>n-r)),ay=(e,t,n)=>{[e[t],e[n]]=[e[n],e[t]]};function B8(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Dn(e)?r++:e[t[r++]];return e}function w8(e){for(const t in e)if(e.hasOwnProperty(t)&&!Dn(e[t]))return!1;return!0}function Wr(e,t){const n=Array.isArray(t)?t:TG(t)?[t]:SJ(t),r=n.length===1?e:B8(e,n),o=n.length-1,i=n[o];return r&&delete r[i],o!==0&&(Yr(r)&&Yo(r)||Array.isArray(r)&&w8(r))&&Wr(e,n.slice(0,-1)),e}var pw=(e,t,n)=>(e[t]=n,e);function JJ(e){const t=e0(),{control:n=t.control,name:r,keyName:o="id",shouldUnregister:i}=e,[a,s]=qe.useState(n._getFieldArray(r)),l=qe.useRef(n._getFieldArray(r).map(ml)),c=qe.useRef(a),u=qe.useRef(r),g=qe.useRef(!1);u.current=r,c.current=a,n._names.array.add(r),e.rules&&n.register(r,e.rules),t0({next:({values:v,name:k})=>{if(k===u.current||!k){const B=ot(v,u.current);Array.isArray(B)&&(s(B),l.current=B.map(ml))}},subject:n._subjects.array});const d=qe.useCallback(v=>{g.current=!0,n._updateFieldArray(r,v)},[n,r]),I=(v,k)=>{const B=ei(Fr(v)),y=ey(n._getFieldArray(r),B);n._names.focus=$b(r,y.length-1,k),l.current=ey(l.current,B.map(ml)),d(y),s(y),n._updateFieldArray(r,y,ey,{argA:ty(v)})},C=(v,k)=>{const B=ei(Fr(v)),y=oy(n._getFieldArray(r),B);n._names.focus=$b(r,0,k),l.current=oy(l.current,B.map(ml)),d(y),s(y),n._updateFieldArray(r,y,oy,{argA:ty(v)})},h=v=>{const k=iy(n._getFieldArray(r),v);l.current=iy(l.current,v),d(k),s(k),n._updateFieldArray(r,k,iy,{argA:v})},f=(v,k,B)=>{const y=ei(Fr(k)),W=ny(n._getFieldArray(r),v,y);n._names.focus=$b(r,v,B),l.current=ny(l.current,v,y.map(ml)),d(W),s(W),n._updateFieldArray(r,W,ny,{argA:v,argB:ty(k)})},A=(v,k)=>{const B=n._getFieldArray(r);ay(B,v,k),ay(l.current,v,k),d(B),s(B),n._updateFieldArray(r,B,ay,{argA:v,argB:k},!1)},m=(v,k)=>{const B=n._getFieldArray(r);ry(B,v,k),ry(l.current,v,k),d(B),s(B),n._updateFieldArray(r,B,ry,{argA:v,argB:k},!1)},p=(v,k)=>{const B=Fr(k),y=pw(n._getFieldArray(r),v,B);l.current=[...y].map((W,G)=>!W||G===v?ml():l.current[G]),d(y),s([...y]),n._updateFieldArray(r,y,pw,{argA:v,argB:B},!0,!1)},Z=v=>{const k=ei(Fr(v));l.current=k.map(ml),d([...k]),s([...k]),n._updateFieldArray(r,[...k],B=>B,{},!0,!1)};return qe.useEffect(()=>{if(n._state.action=!1,dZ(r,n._names)&&n._subjects.state.next({...n._formState}),g.current&&(!rC(n._options.mode).isOnSubmit||n._formState.isSubmitted))if(n._options.resolver)n._executeSchema([r]).then(v=>{const k=ot(v.errors,r),B=ot(n._formState.errors,r);(B?!k&&B.type||k&&(B.type!==k.type||B.message!==k.message):k&&k.type)&&(k?Vn(n._formState.errors,r,k):Wr(n._formState.errors,r),n._subjects.state.next({errors:n._formState.errors}))});else{const v=ot(n._fields,r);v&&v._f&&!(rC(n._options.reValidateMode).isOnSubmit&&rC(n._options.mode).isOnSubmit)&&uZ(v,n._formValues,n._options.criteriaMode===ta.all,n._options.shouldUseNativeValidation,!0).then(k=>!Yo(k)&&n._subjects.state.next({errors:kJ(n._formState.errors,k,r)}))}n._subjects.values.next({name:r,values:{...n._formValues}}),n._names.focus&&HI(n._fields,(v,k)=>{if(n._names.focus&&k.startsWith(n._names.focus)&&v.focus)return v.focus(),1}),n._names.focus="",n._updateValid(),g.current=!1},[a,r,n]),qe.useEffect(()=>(!ot(n._formValues,r)&&n._updateFieldArray(r),()=>{(n._options.shouldUnregister||i)&&n.unregister(r)}),[r,n,o,i]),{swap:qe.useCallback(A,[d,r,n]),move:qe.useCallback(m,[d,r,n]),prepend:qe.useCallback(C,[d,r,n]),append:qe.useCallback(I,[d,r,n]),remove:qe.useCallback(h,[d,r,n]),insert:qe.useCallback(f,[d,r,n]),update:qe.useCallback(p,[d,r,n]),replace:qe.useCallback(Z,[d,r,n]),fields:qe.useMemo(()=>a.map((v,k)=>({...v,[o]:l.current[k]||ml()})),[a,o])}}var sy=()=>{let e=[];return{get observers(){return e},next:o=>{for(const i of e)i.next&&i.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(i=>i!==o)}}),unsubscribe:()=>{e=[]}}},up=e=>Ho(e)||!ZJ(e);function wl(e,t){if(up(e)||up(t))return e===t;if(SI(e)&&SI(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n){const i=e[o];if(!r.includes(o))return!1;if(o!=="ref"){const a=t[o];if(SI(i)&&SI(a)||Yr(i)&&Yr(a)||Array.isArray(i)&&Array.isArray(a)?!wl(i,a):i!==a)return!1}}return!0}var xJ=e=>e.type==="select-multiple",W8=e=>jG(e)||uA(e),ly=e=>Ip(e)&&e.isConnected,YJ=e=>{for(const t in e)if(Ls(e[t]))return!0;return!1};function Cp(e,t={}){const n=Array.isArray(e);if(Yr(e)||n)for(const r in e)Array.isArray(e[r])||Yr(e[r])&&!YJ(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Cp(e[r],t[r])):Ho(e[r])||(t[r]=!0);return t}function NJ(e,t,n){const r=Array.isArray(e);if(Yr(e)||r)for(const o in e)Array.isArray(e[o])||Yr(e[o])&&!YJ(e[o])?Dn(t)||up(n[o])?n[o]=Array.isArray(e[o])?Cp(e[o],[]):{...Cp(e[o])}:NJ(e[o],Ho(t)?{}:t[o],n[o]):n[o]=!wl(e[o],t[o]);return n}var Hh=(e,t)=>NJ(e,t,Cp(t)),HJ=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Dn(e)?e:t?e===""?NaN:e&&+e:n&&as(e)?new Date(e):r?r(e):e;function gy(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return UG(t)?t.files:jG(t)?XJ(e.refs).value:xJ(t)?[...t.selectedOptions].map(({value:n})=>n):uA(t)?VJ(e.refs).value:HJ(Dn(t.value)?e.ref.value:t.value,e)}var R8=(e,t,n,r)=>{const o={};for(const i of e){const a=ot(t,i);a&&Vn(o,i,a._f)}return{criteriaMode:n,names:[...e],fields:o,shouldUseNativeValidation:r}},Gu=e=>Dn(e)?e:dp(e)?e.source:Yr(e)?dp(e.value)?e.value.source:e.value:e;const fw="AsyncFunction";var k8=e=>(!e||!e.validate)&&!!(Ls(e.validate)&&e.validate.constructor.name===fw||Yr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===fw)),V8=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function bw(e,t,n){const r=ot(e,n);if(r||TG(n))return{error:r,name:n};const o=n.split(".");for(;o.length;){const i=o.join("."),a=ot(t,i),s=ot(e,i);if(a&&!Array.isArray(a)&&n!==i)return{name:n};if(s&&s.type)return{name:i,error:s};o.pop()}return{name:n}}var X8=(e,t,n,r,o)=>o.isOnAll?!1:!n&&o.isOnTouch?!(t||e):(n?r.isOnBlur:o.isOnBlur)?!e:(n?r.isOnChange:o.isOnChange)?e:!0,J8=(e,t)=>!CA(ot(e,t)).length&&Wr(e,t);const x8={mode:ta.onSubmit,reValidateMode:ta.onChange,shouldFocusError:!0};function Y8(e={}){let t={...x8,...e},n={submitCount:0,isDirty:!1,isLoading:Ls(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},o=Yr(t.defaultValues)||Yr(t.values)?Fr(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Fr(o),a={action:!1,mount:!1,watch:!1},s={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={values:sy(),array:sy(),state:sy()},d=rC(t.mode),I=rC(t.reValidateMode),C=t.criteriaMode===ta.all,h=te=>ie=>{clearTimeout(c),c=setTimeout(te,ie)},f=async te=>{if(u.isValid||te){const ie=t.resolver?Yo((await y()).errors):await G(r,!0);ie!==n.isValid&&g.state.next({isValid:ie})}},A=(te,ie)=>{(u.isValidating||u.validatingFields)&&((te||Array.from(s.mount)).forEach(ge=>{ge&&(ie?Vn(n.validatingFields,ge,ie):Wr(n.validatingFields,ge))}),g.state.next({validatingFields:n.validatingFields,isValidating:!Yo(n.validatingFields)}))},m=(te,ie=[],ge,be,Ze=!0,he=!0)=>{if(be&&ge){if(a.action=!0,he&&Array.isArray(ot(r,te))){const Ne=ge(ot(r,te),be.argA,be.argB);Ze&&Vn(r,te,Ne)}if(he&&Array.isArray(ot(n.errors,te))){const Ne=ge(ot(n.errors,te),be.argA,be.argB);Ze&&Vn(n.errors,te,Ne),J8(n.errors,te)}if(u.touchedFields&&he&&Array.isArray(ot(n.touchedFields,te))){const Ne=ge(ot(n.touchedFields,te),be.argA,be.argB);Ze&&Vn(n.touchedFields,te,Ne)}u.dirtyFields&&(n.dirtyFields=Hh(o,i)),g.state.next({name:te,isDirty:X(te,ie),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Vn(i,te,ie)},p=(te,ie)=>{Vn(n.errors,te,ie),g.state.next({errors:n.errors})},Z=te=>{n.errors=te,g.state.next({errors:n.errors,isValid:!1})},v=(te,ie,ge,be)=>{const Ze=ot(r,te);if(Ze){const he=ot(i,te,Dn(ge)?ot(o,te):ge);Dn(he)||be&&be.defaultChecked||ie?Vn(i,te,ie?he:gy(Ze._f)):D(te,he),a.mount&&f()}},k=(te,ie,ge,be,Ze)=>{let he=!1,Ne=!1;const rt={name:te},st=!!(ot(r,te)&&ot(r,te)._f&&ot(r,te)._f.disabled);if(!ge||be){u.isDirty&&(Ne=n.isDirty,n.isDirty=rt.isDirty=X(),he=Ne!==rt.isDirty);const $e=st||wl(ot(o,te),ie);Ne=!!(!st&&ot(n.dirtyFields,te)),$e||st?Wr(n.dirtyFields,te):Vn(n.dirtyFields,te,!0),rt.dirtyFields=n.dirtyFields,he=he||u.dirtyFields&&Ne!==!$e}if(ge){const $e=ot(n.touchedFields,te);$e||(Vn(n.touchedFields,te,ge),rt.touchedFields=n.touchedFields,he=he||u.touchedFields&&$e!==ge)}return he&&Ze&&g.state.next(rt),he?rt:{}},B=(te,ie,ge,be)=>{const Ze=ot(n.errors,te),he=u.isValid&&_i(ie)&&n.isValid!==ie;if(e.delayError&&ge?(l=h(()=>p(te,ge)),l(e.delayError)):(clearTimeout(c),l=null,ge?Vn(n.errors,te,ge):Wr(n.errors,te)),(ge?!wl(Ze,ge):Ze)||!Yo(be)||he){const Ne={...be,...he&&_i(ie)?{isValid:ie}:{},errors:n.errors,name:te};n={...n,...Ne},g.state.next(Ne)}},y=async te=>{A(te,!0);const ie=await t.resolver(i,t.context,R8(te||s.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return A(te),ie},W=async te=>{const{errors:ie}=await y(te);if(te)for(const ge of te){const be=ot(ie,ge);be?Vn(n.errors,ge,be):Wr(n.errors,ge)}else n.errors=ie;return ie},G=async(te,ie,ge={valid:!0})=>{for(const be in te){const Ze=te[be];if(Ze){const{_f:he,...Ne}=Ze;if(he){const rt=s.array.has(he.name),st=Ze._f&&k8(Ze._f);st&&u.validatingFields&&A([be],!0);const $e=await uZ(Ze,i,C,t.shouldUseNativeValidation&&!ie,rt);if(st&&u.validatingFields&&A([be]),$e[he.name]&&(ge.valid=!1,ie))break;!ie&&(ot($e,he.name)?rt?kJ(n.errors,$e,he.name):Vn(n.errors,he.name,$e[he.name]):Wr(n.errors,he.name))}!Yo(Ne)&&await G(Ne,ie,ge)}}return ge.valid},R=()=>{for(const te of s.unMount){const ie=ot(r,te);ie&&(ie._f.refs?ie._f.refs.every(ge=>!ly(ge)):!ly(ie._f.ref))&&ee(te)}s.unMount=new Set},X=(te,ie)=>(te&&ie&&Vn(i,te,ie),!wl(re(),o)),Y=(te,ie,ge)=>RJ(te,s,{...a.mount?i:Dn(ie)?o:as(te)?{[te]:ie}:ie},ge,ie),x=te=>CA(ot(a.mount?i:o,te,e.shouldUnregister?ot(o,te,[]):[])),D=(te,ie,ge={})=>{const be=ot(r,te);let Ze=ie;if(be){const he=be._f;he&&(!he.disabled&&Vn(i,te,HJ(ie,he)),Ze=Ip(he.ref)&&Ho(ie)?"":ie,xJ(he.ref)?[...he.ref.options].forEach(Ne=>Ne.selected=Ze.includes(Ne.value)):he.refs?uA(he.ref)?he.refs.length>1?he.refs.forEach(Ne=>(!Ne.defaultChecked||!Ne.disabled)&&(Ne.checked=Array.isArray(Ze)?!!Ze.find(rt=>rt===Ne.value):Ze===Ne.value)):he.refs[0]&&(he.refs[0].checked=!!Ze):he.refs.forEach(Ne=>Ne.checked=Ne.value===Ze):UG(he.ref)?he.ref.value="":(he.ref.value=Ze,he.ref.type||g.values.next({name:te,values:{...i}})))}(ge.shouldDirty||ge.shouldTouch)&&k(te,Ze,ge.shouldTouch,ge.shouldDirty,!0),ge.shouldValidate&&O(te)},L=(te,ie,ge)=>{for(const be in ie){const Ze=ie[be],he=`${te}.${be}`,Ne=ot(r,he);(s.array.has(te)||!up(Ze)||Ne&&!Ne._f)&&!SI(Ze)?L(he,Ze,ge):D(he,Ze,ge)}},M=(te,ie,ge={})=>{const be=ot(r,te),Ze=s.array.has(te),he=Fr(ie);Vn(i,te,he),Ze?(g.array.next({name:te,values:{...i}}),(u.isDirty||u.dirtyFields)&&ge.shouldDirty&&g.state.next({name:te,dirtyFields:Hh(o,i),isDirty:X(te,he)})):be&&!be._f&&!Ho(he)?L(te,he,ge):D(te,he,ge),dZ(te,s)&&g.state.next({...n}),g.values.next({name:a.mount?te:void 0,values:{...i}})},K=async te=>{a.mount=!0;const ie=te.target;let ge=ie.name,be=!0;const Ze=ot(r,ge),he=()=>ie.type?gy(Ze._f):vJ(te),Ne=rt=>{be=Number.isNaN(rt)||wl(rt,ot(i,ge,rt))};if(Ze){let rt,st;const $e=he(),ht=te.type===cp.BLUR||te.type===cp.FOCUS_OUT,dt=!V8(Ze._f)&&!t.resolver&&!ot(n.errors,ge)&&!Ze._f.deps||X8(ht,ot(n.touchedFields,ge),n.isSubmitted,I,d),Zt=dZ(ge,s,ht);Vn(i,ge,$e),ht?(Ze._f.onBlur&&Ze._f.onBlur(te),l&&l(0)):Ze._f.onChange&&Ze._f.onChange(te);const Ke=k(ge,$e,ht,!1),mn=!Yo(Ke)||Zt;if(!ht&&g.values.next({name:ge,type:te.type,values:{...i}}),dt)return u.isValid&&(e.mode==="onBlur"?ht&&f():f()),mn&&g.state.next({name:ge,...Zt?{}:Ke});if(!ht&&Zt&&g.state.next({...n}),t.resolver){const{errors:Rt}=await y([ge]);if(Ne($e),be){const mt=bw(n.errors,r,ge),pt=bw(Rt,r,mt.name||ge);rt=pt.error,ge=pt.name,st=Yo(Rt)}}else A([ge],!0),rt=(await uZ(Ze,i,C,t.shouldUseNativeValidation))[ge],A([ge]),Ne($e),be&&(rt?st=!1:u.isValid&&(st=await G(r,!0)));be&&(Ze._f.deps&&O(Ze._f.deps),B(ge,st,rt,Ke))}},E=(te,ie)=>{if(ot(n.errors,ie)&&te.focus)return te.focus(),1},O=async(te,ie={})=>{let ge,be;const Ze=ei(te);if(t.resolver){const he=await W(Dn(te)?te:Ze);ge=Yo(he),be=te?!Ze.some(Ne=>ot(he,Ne)):ge}else te?(be=(await Promise.all(Ze.map(async he=>{const Ne=ot(r,he);return await G(Ne&&Ne._f?{[he]:Ne}:Ne)}))).every(Boolean),!(!be&&!n.isValid)&&f()):be=ge=await G(r);return g.state.next({...!as(te)||u.isValid&&ge!==n.isValid?{}:{name:te},...t.resolver||!te?{isValid:ge}:{},errors:n.errors}),ie.shouldFocus&&!be&&HI(r,E,te?Ze:s.mount),be},re=te=>{const ie={...a.mount?i:o};return Dn(te)?ie:as(te)?ot(ie,te):te.map(ge=>ot(ie,ge))},H=(te,ie)=>({invalid:!!ot((ie||n).errors,te),isDirty:!!ot((ie||n).dirtyFields,te),error:ot((ie||n).errors,te),isValidating:!!ot(n.validatingFields,te),isTouched:!!ot((ie||n).touchedFields,te)}),z=te=>{te&&ei(te).forEach(ie=>Wr(n.errors,ie)),g.state.next({errors:te?n.errors:{}})},j=(te,ie,ge)=>{const be=(ot(r,te,{_f:{}})._f||{}).ref,Ze=ot(n.errors,te)||{},{ref:he,message:Ne,type:rt,...st}=Ze;Vn(n.errors,te,{...st,...ie,ref:be}),g.state.next({name:te,errors:n.errors,isValid:!1}),ge&&ge.shouldFocus&&be&&be.focus&&be.focus()},$=(te,ie)=>Ls(te)?g.values.subscribe({next:ge=>te(Y(void 0,ie),ge)}):Y(te,ie,!0),ee=(te,ie={})=>{for(const ge of te?ei(te):s.mount)s.mount.delete(ge),s.array.delete(ge),ie.keepValue||(Wr(r,ge),Wr(i,ge)),!ie.keepError&&Wr(n.errors,ge),!ie.keepDirty&&Wr(n.dirtyFields,ge),!ie.keepTouched&&Wr(n.touchedFields,ge),!ie.keepIsValidating&&Wr(n.validatingFields,ge),!t.shouldUnregister&&!ie.keepDefaultValue&&Wr(o,ge);g.values.next({values:{...i}}),g.state.next({...n,...ie.keepDirty?{isDirty:X()}:{}}),!ie.keepIsValid&&f()},le=({disabled:te,name:ie,field:ge,fields:be,value:Ze})=>{if(_i(te)&&a.mount||te){const he=te?void 0:Dn(Ze)?gy(ge?ge._f:ot(be,ie)._f):Ze;Vn(i,ie,he),k(ie,he,!1,!1,!0)}},Ie=(te,ie={})=>{let ge=ot(r,te);const be=_i(ie.disabled)||_i(e.disabled);return Vn(r,te,{...ge||{},_f:{...ge&&ge._f?ge._f:{ref:{name:te}},name:te,mount:!0,...ie}}),s.mount.add(te),ge?le({field:ge,disabled:_i(ie.disabled)?ie.disabled:e.disabled,name:te,value:ie.value}):v(te,!0,ie.value),{...be?{disabled:ie.disabled||e.disabled}:{},...t.progressive?{required:!!ie.required,min:Gu(ie.min),max:Gu(ie.max),minLength:Gu(ie.minLength),maxLength:Gu(ie.maxLength),pattern:Gu(ie.pattern)}:{},name:te,onChange:K,onBlur:K,ref:Ze=>{if(Ze){Ie(te,ie),ge=ot(r,te);const he=Dn(Ze.value)&&Ze.querySelectorAll&&Ze.querySelectorAll("input,select,textarea")[0]||Ze,Ne=W8(he),rt=ge._f.refs||[];if(Ne?rt.find(st=>st===he):he===ge._f.ref)return;Vn(r,te,{_f:{...ge._f,...Ne?{refs:[...rt.filter(ly),he,...Array.isArray(ot(o,te))?[{}]:[]],ref:{type:he.type,name:te}}:{ref:he}}}),v(te,!1,void 0,he)}else ge=ot(r,te,{}),ge._f&&(ge._f.mount=!1),(t.shouldUnregister||ie.shouldUnregister)&&!(GJ(s.array,te)&&a.action)&&s.unMount.add(te)}}},Ae=()=>t.shouldFocusError&&HI(r,E,s.mount),Ge=te=>{_i(te)&&(g.state.next({disabled:te}),HI(r,(ie,ge)=>{const be=ot(r,ge);be&&(ie.disabled=be._f.disabled||te,Array.isArray(be._f.refs)&&be._f.refs.forEach(Ze=>{Ze.disabled=be._f.disabled||te}))},0,!1))},We=(te,ie)=>async ge=>{let be;ge&&(ge.preventDefault&&ge.preventDefault(),ge.persist&&ge.persist());let Ze=Fr(i);if(g.state.next({isSubmitting:!0}),t.resolver){const{errors:he,values:Ne}=await y();n.errors=he,Ze=Ne}else await G(r);if(Wr(n.errors,"root"),Yo(n.errors)){g.state.next({errors:{}});try{await te(Ze,ge)}catch(he){be=he}}else ie&&await ie({...n.errors},ge),Ae(),setTimeout(Ae);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Yo(n.errors)&&!be,submitCount:n.submitCount+1,errors:n.errors}),be)throw be},Je=(te,ie={})=>{ot(r,te)&&(Dn(ie.defaultValue)?M(te,Fr(ot(o,te))):(M(te,ie.defaultValue),Vn(o,te,Fr(ie.defaultValue))),ie.keepTouched||Wr(n.touchedFields,te),ie.keepDirty||(Wr(n.dirtyFields,te),n.isDirty=ie.defaultValue?X(te,Fr(ot(o,te))):X()),ie.keepError||(Wr(n.errors,te),u.isValid&&f()),g.state.next({...n}))},ze=(te,ie={})=>{const ge=te?Fr(te):o,be=Fr(ge),Ze=Yo(te),he=Ze?o:be;if(ie.keepDefaultValues||(o=ge),!ie.keepValues){if(ie.keepDirtyValues)for(const Ne of s.mount)ot(n.dirtyFields,Ne)?Vn(he,Ne,ot(i,Ne)):M(Ne,ot(he,Ne));else{if(zG&&Dn(te))for(const Ne of s.mount){const rt=ot(r,Ne);if(rt&&rt._f){const st=Array.isArray(rt._f.refs)?rt._f.refs[0]:rt._f.ref;if(Ip(st)){const $e=st.closest("form");if($e){$e.reset();break}}}}r={}}i=e.shouldUnregister?ie.keepDefaultValues?Fr(o):{}:Fr(he),g.array.next({values:{...he}}),g.values.next({values:{...he}})}s={mount:ie.keepDirtyValues?s.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!u.isValid||!!ie.keepIsValid||!!ie.keepDirtyValues,a.watch=!!e.shouldUnregister,g.state.next({submitCount:ie.keepSubmitCount?n.submitCount:0,isDirty:Ze?!1:ie.keepDirty?n.isDirty:!!(ie.keepDefaultValues&&!wl(te,o)),isSubmitted:ie.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ze?{}:ie.keepDirtyValues?ie.keepDefaultValues&&i?Hh(o,i):n.dirtyFields:ie.keepDefaultValues&&te?Hh(o,te):ie.keepDirty?n.dirtyFields:{},touchedFields:ie.keepTouched?n.touchedFields:{},errors:ie.keepErrors?n.errors:{},isSubmitSuccessful:ie.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},ke=(te,ie)=>ze(Ls(te)?te(i):te,ie);return{control:{register:Ie,unregister:ee,getFieldState:H,handleSubmit:We,setError:j,_executeSchema:y,_getWatch:Y,_getDirty:X,_updateValid:f,_removeUnmounted:R,_updateFieldArray:m,_updateDisabledField:le,_getFieldArray:x,_reset:ze,_resetDefaultValues:()=>Ls(t.defaultValues)&&t.defaultValues().then(te=>{ke(te,t.resetOptions),g.state.next({isLoading:!1})}),_updateFormState:te=>{n={...n,...te}},_disableForm:Ge,_subjects:g,_proxyFormState:u,_setErrors:Z,get _fields(){return r},get _formValues(){return i},get _state(){return a},set _state(te){a=te},get _defaultValues(){return o},get _names(){return s},set _names(te){s=te},get _formState(){return n},set _formState(te){n=te},get _options(){return t},set _options(te){t={...t,...te}}},trigger:O,register:Ie,handleSubmit:We,watch:$,setValue:M,getValues:re,reset:ke,resetField:Je,clearErrors:z,unregister:ee,setError:j,setFocus:(te,ie={})=>{const ge=ot(r,te),be=ge&&ge._f;if(be){const Ze=be.refs?be.refs[0]:be.ref;Ze.focus&&(Ze.focus(),ie.shouldSelect&&Ze.select())}},getFieldState:H}}function QG(e={}){const t=qe.useRef(),n=qe.useRef(),[r,o]=qe.useState({isDirty:!1,isValidating:!1,isLoading:Ls(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Ls(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Y8(e),formState:r});const i=t.current.control;return i._options=e,t0({subject:i._subjects.state,next:a=>{wJ(a,i._proxyFormState,i._updateFormState,!0)&&o({...i._formState})}}),qe.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),qe.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==r.isDirty&&i._subjects.state.next({isDirty:a})}},[i,r.isDirty]),qe.useEffect(()=>{e.values&&!wl(e.values,n.current)?(i._reset(e.values,i._options.resetOptions),n.current=e.values,o(a=>({...a}))):i._resetDefaultValues()},[e.values,i]),qe.useEffect(()=>{e.errors&&i._setErrors(e.errors)},[e.errors,i]),qe.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),qe.useEffect(()=>{e.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[e.shouldUnregister,i]),t.current.formState=BJ(r,i),t.current}const N8=new Ni("/movies");class H8{CreateMovie(t){return N8.post(t)}}const F8=new H8,EC=e=>typeof e=="number"&&!isNaN(e),$g=e=>typeof e=="string",Si=e=>typeof e=="function",Am=e=>$g(e)||Si(e)?e:null,CZ=e=>F.isValidElement(e)||$g(e)||Si(e)||EC(e);function K8(e,t,n){n===void 0&&(n=300);const{scrollHeight:r,style:o}=e;requestAnimationFrame(()=>{o.minHeight="initial",o.height=r+"px",o.transition=`all ${n}ms`,requestAnimationFrame(()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(t,n)})})}function n0(e){let{enter:t,exit:n,appendPosition:r=!1,collapse:o=!0,collapseDuration:i=300}=e;return function(a){let{children:s,position:l,preventExitTransition:c,done:u,nodeRef:g,isIn:d,playToast:I}=a;const C=r?`${t}--${l}`:t,h=r?`${n}--${l}`:n,f=F.useRef(0);return F.useLayoutEffect(()=>{const A=g.current,m=C.split(" "),p=Z=>{Z.target===g.current&&(I(),A.removeEventListener("animationend",p),A.removeEventListener("animationcancel",p),f.current===0&&Z.type!=="animationcancel"&&A.classList.remove(...m))};A.classList.add(...m),A.addEventListener("animationend",p),A.addEventListener("animationcancel",p)},[]),F.useEffect(()=>{const A=g.current,m=()=>{A.removeEventListener("animationend",m),o?K8(A,u,i):u()};d||(c?m():(f.current=1,A.className+=` ${h}`,A.addEventListener("animationend",m)))},[d]),qe.createElement(qe.Fragment,null,s)}}function yw(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const Fo=new Map;let MC=[];const AZ=new Set,L8=e=>AZ.forEach(t=>t(e)),FJ=()=>Fo.size>0;function KJ(e,t){var n;if(t)return!((n=Fo.get(t))==null||!n.isToastActive(e));let r=!1;return Fo.forEach(o=>{o.isToastActive(e)&&(r=!0)}),r}function LJ(e,t){CZ(e)&&(FJ()||MC.push({content:e,options:t}),Fo.forEach(n=>{n.buildToast(e,t)}))}function Zw(e,t){Fo.forEach(n=>{t!=null&&t!=null&&t.containerId?(t==null?void 0:t.containerId)===n.id&&n.toggle(e,t==null?void 0:t.id):n.toggle(e,t==null?void 0:t.id)})}function E8(e){const{subscribe:t,getSnapshot:n,setProps:r}=F.useRef(function(i){const a=i.containerId||1;return{subscribe(s){const l=function(u,g,d){let I=1,C=0,h=[],f=[],A=[],m=g;const p=new Map,Z=new Set,v=()=>{A=Array.from(p.values()),Z.forEach(y=>y())},k=y=>{f=y==null?[]:f.filter(W=>W!==y),v()},B=y=>{const{toastId:W,onOpen:G,updateId:R,children:X}=y.props,Y=R==null;y.staleId&&p.delete(y.staleId),p.set(W,y),f=[...f,y.props.toastId].filter(x=>x!==y.staleId),v(),d(yw(y,Y?"added":"updated")),Y&&Si(G)&&G(F.isValidElement(X)&&X.props)};return{id:u,props:m,observe:y=>(Z.add(y),()=>Z.delete(y)),toggle:(y,W)=>{p.forEach(G=>{W!=null&&W!==G.props.toastId||Si(G.toggle)&&G.toggle(y)})},removeToast:k,toasts:p,clearQueue:()=>{C-=h.length,h=[]},buildToast:(y,W)=>{if((H=>{let{containerId:z,toastId:j,updateId:$}=H;const ee=z?z!==u:u!==1,le=p.has(j)&&$==null;return ee||le})(W))return;const{toastId:G,updateId:R,data:X,staleId:Y,delay:x}=W,D=()=>{k(G)},L=R==null;L&&C++;const M={...m,style:m.toastStyle,key:I++,...Object.fromEntries(Object.entries(W).filter(H=>{let[z,j]=H;return j!=null})),toastId:G,updateId:R,data:X,closeToast:D,isIn:!1,className:Am(W.className||m.toastClassName),bodyClassName:Am(W.bodyClassName||m.bodyClassName),progressClassName:Am(W.progressClassName||m.progressClassName),autoClose:!W.isLoading&&(K=W.autoClose,E=m.autoClose,K===!1||EC(K)&&K>0?K:E),deleteToast(){const H=p.get(G),{onClose:z,children:j}=H.props;Si(z)&&z(F.isValidElement(j)&&j.props),d(yw(H,"removed")),p.delete(G),C--,C<0&&(C=0),h.length>0?B(h.shift()):v()}};var K,E;M.closeButton=m.closeButton,W.closeButton===!1||CZ(W.closeButton)?M.closeButton=W.closeButton:W.closeButton===!0&&(M.closeButton=!CZ(m.closeButton)||m.closeButton);let O=y;F.isValidElement(y)&&!$g(y.type)?O=F.cloneElement(y,{closeToast:D,toastProps:M,data:X}):Si(y)&&(O=y({closeToast:D,toastProps:M,data:X}));const re={content:O,props:M,staleId:Y};m.limit&&m.limit>0&&C>m.limit&&L?h.push(re):EC(x)?setTimeout(()=>{B(re)},x):B(re)},setProps(y){m=y},setToggle:(y,W)=>{p.get(y).toggle=W},isToastActive:y=>f.some(W=>W===y),getSnapshot:()=>m.newestOnTop?A.reverse():A}}(a,i,L8);Fo.set(a,l);const c=l.observe(s);return MC.forEach(u=>LJ(u.content,u.options)),MC=[],()=>{c(),Fo.delete(a)}},setProps(s){var l;(l=Fo.get(a))==null||l.setProps(s)},getSnapshot(){var s;return(s=Fo.get(a))==null?void 0:s.getSnapshot()}}}(e)).current;r(e);const o=F.useSyncExternalStore(t,n,n);return{getToastToRender:function(i){if(!o)return[];const a=new Map;return o.forEach(s=>{const{position:l}=s.props;a.has(l)||a.set(l,[]),a.get(l).push(s)}),Array.from(a,s=>i(s[0],s[1]))},isToastActive:KJ,count:o==null?void 0:o.length}}function M8(e){const[t,n]=F.useState(!1),[r,o]=F.useState(!1),i=F.useRef(null),a=F.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:s,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:g}=e;var d,I;function C(){n(!0)}function h(){n(!1)}function f(p){const Z=i.current;a.canDrag&&Z&&(a.didMove=!0,t&&h(),a.delta=e.draggableDirection==="x"?p.clientX-a.start:p.clientY-a.start,a.start!==p.clientX&&(a.canCloseOnClick=!1),Z.style.transform=`translate3d(${e.draggableDirection==="x"?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`},0)`,Z.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance)))}function A(){document.removeEventListener("pointermove",f),document.removeEventListener("pointerup",A);const p=i.current;if(a.canDrag&&a.didMove&&p){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return o(!0),e.closeToast(),void e.collapseAll();p.style.transition="transform 0.2s, opacity 0.2s",p.style.removeProperty("transform"),p.style.removeProperty("opacity")}}(I=Fo.get((d={id:e.toastId,containerId:e.containerId,fn:n}).containerId||1))==null||I.setToggle(d.id,d.fn),F.useEffect(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||h(),window.addEventListener("focus",C),window.addEventListener("blur",h),()=>{window.removeEventListener("focus",C),window.removeEventListener("blur",h)}},[e.pauseOnFocusLoss]);const m={onPointerDown:function(p){if(e.draggable===!0||e.draggable===p.pointerType){a.didMove=!1,document.addEventListener("pointermove",f),document.addEventListener("pointerup",A);const Z=i.current;a.canCloseOnClick=!0,a.canDrag=!0,Z.style.transition="none",e.draggableDirection==="x"?(a.start=p.clientX,a.removalDistance=Z.offsetWidth*(e.draggablePercent/100)):(a.start=p.clientY,a.removalDistance=Z.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(p){const{top:Z,bottom:v,left:k,right:B}=i.current.getBoundingClientRect();p.nativeEvent.type!=="touchend"&&e.pauseOnHover&&p.clientX>=k&&p.clientX<=B&&p.clientY>=Z&&p.clientY<=v?h():C()}};return s&&l&&(m.onMouseEnter=h,e.stacked||(m.onMouseLeave=C)),g&&(m.onClick=p=>{u&&u(p),a.canCloseOnClick&&c()}),{playToast:C,pauseToast:h,isRunning:t,preventExitTransition:r,toastRef:i,eventHandlers:m}}function D8(e){let{delay:t,isRunning:n,closeToast:r,type:o="default",hide:i,className:a,style:s,controlledProgress:l,progress:c,rtl:u,isIn:g,theme:d}=e;const I=i||l&&c===0,C={...s,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused"};l&&(C.transform=`scaleX(${c})`);const h=nt("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${o}`,{"Toastify__progress-bar--rtl":u}),f=Si(a)?a({rtl:u,type:o,defaultClassName:h}):nt(h,a),A={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{g&&r()}};return qe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":I},qe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${o}`}),qe.createElement("div",{role:"progressbar","aria-hidden":I?"true":"false","aria-label":"notification timer",className:f,style:C,...A}))}let z8=1;const EJ=()=>""+z8++;function T8(e){return e&&($g(e.toastId)||EC(e.toastId))?e.toastId:EJ()}function oC(e,t){return LJ(e,t),t.toastId}function Ap(e,t){return{...t,type:t&&t.type||e,toastId:T8(t)}}function Fh(e){return(t,n)=>oC(t,Ap(e,n))}function un(e,t){return oC(e,Ap("default",t))}un.loading=(e,t)=>oC(e,Ap("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),un.promise=function(e,t,n){let r,{pending:o,error:i,success:a}=t;o&&(r=$g(o)?un.loading(o,n):un.loading(o.render,{...n,...o}));const s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,g,d)=>{if(g==null)return void un.dismiss(r);const I={type:u,...s,...n,data:d},C=$g(g)?{render:g}:g;return r?un.update(r,{...I,...C}):un(C.render,{...I,...C}),d},c=Si(e)?e():e;return c.then(u=>l("success",a,u)).catch(u=>l("error",i,u)),c},un.success=Fh("success"),un.info=Fh("info"),un.error=Fh("error"),un.warning=Fh("warning"),un.warn=un.warning,un.dark=(e,t)=>oC(e,Ap("default",{theme:"dark",...t})),un.dismiss=function(e){(function(t){var n;if(FJ()){if(t==null||$g(n=t)||EC(n))Fo.forEach(r=>{r.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){const r=Fo.get(t.containerId);r?r.removeToast(t.id):Fo.forEach(o=>{o.removeToast(t.id)})}}else MC=MC.filter(r=>t!=null&&r.options.toastId!==t)})(e)},un.clearWaitingQueue=function(e){e===void 0&&(e={}),Fo.forEach(t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()})},un.isActive=KJ,un.update=function(e,t){t===void 0&&(t={});const n=((r,o)=>{var i;let{containerId:a}=o;return(i=Fo.get(a||1))==null?void 0:i.toasts.get(r)})(e,t);if(n){const{props:r,content:o}=n,i={delay:100,...r,...t,toastId:t.toastId||e,updateId:EJ()};i.toastId!==e&&(i.staleId=e);const a=i.render||o;delete i.render,oC(a,i)}},un.done=e=>{un.update(e,{progress:1})},un.onChange=function(e){return AZ.add(e),()=>{AZ.delete(e)}},un.play=e=>Zw(!0,e),un.pause=e=>Zw(!1,e);const U8=typeof window<"u"?F.useLayoutEffect:F.useEffect,Kh=e=>{let{theme:t,type:n,isLoading:r,...o}=e;return qe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...o})},cy={info:function(e){return qe.createElement(Kh,{...e},qe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return qe.createElement(Kh,{...e},qe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return qe.createElement(Kh,{...e},qe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return qe.createElement(Kh,{...e},qe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return qe.createElement("div",{className:"Toastify__spinner"})}},j8=e=>{const{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:o,playToast:i}=M8(e),{closeButton:a,children:s,autoClose:l,onClick:c,type:u,hideProgressBar:g,closeToast:d,transition:I,position:C,className:h,style:f,bodyClassName:A,bodyStyle:m,progressClassName:p,progressStyle:Z,updateId:v,role:k,progress:B,rtl:y,toastId:W,deleteToast:G,isIn:R,isLoading:X,closeOnClick:Y,theme:x}=e,D=nt("Toastify__toast",`Toastify__toast-theme--${x}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":y},{"Toastify__toast--close-on-click":Y}),L=Si(h)?h({rtl:y,position:C,type:u,defaultClassName:D}):nt(D,h),M=function(re){let{theme:H,type:z,isLoading:j,icon:$}=re,ee=null;const le={theme:H,type:z};return $===!1||(Si($)?ee=$({...le,isLoading:j}):F.isValidElement($)?ee=F.cloneElement($,le):j?ee=cy.spinner():(Ie=>Ie in cy)(z)&&(ee=cy[z](le))),ee}(e),K=!!B||!l,E={closeToast:d,type:u,theme:x};let O=null;return a===!1||(O=Si(a)?a(E):F.isValidElement(a)?F.cloneElement(a,E):function(re){let{closeToast:H,theme:z,ariaLabel:j="close"}=re;return qe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${z}`,type:"button",onClick:$=>{$.stopPropagation(),H($)},"aria-label":j},qe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},qe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(E)),qe.createElement(I,{isIn:R,done:G,position:C,preventExitTransition:n,nodeRef:r,playToast:i},qe.createElement("div",{id:W,onClick:c,"data-in":R,className:L,...o,style:f,ref:r},qe.createElement("div",{...R&&{role:k},className:Si(A)?A({type:u}):nt("Toastify__toast-body",A),style:m},M!=null&&qe.createElement("div",{className:nt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!X})},M),qe.createElement("div",null,s)),O,qe.createElement(D8,{...v&&!K?{key:`pb-${v}`}:{},rtl:y,theme:x,delay:l,isRunning:t,isIn:R,closeToast:d,hide:g,type:u,style:Z,className:p,controlledProgress:K,progress:B||0})))},r0=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},ng=n0(r0("bounce",!0));n0(r0("slide",!0));n0(r0("zoom"));n0(r0("flip"));const Q8={position:"top-right",transition:ng,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function Gd(e){let t={...Q8,...e};const n=e.stacked,[r,o]=F.useState(!0),i=F.useRef(null),{getToastToRender:a,isToastActive:s,count:l}=E8(t),{className:c,style:u,rtl:g,containerId:d}=t;function I(h){const f=nt("Toastify__toast-container",`Toastify__toast-container--${h}`,{"Toastify__toast-container--rtl":g});return Si(c)?c({position:h,rtl:g,defaultClassName:f}):nt(f,Am(c))}function C(){n&&(o(!0),un.play())}return U8(()=>{if(n){var h;const f=i.current.querySelectorAll('[data-in="true"]'),A=12,m=(h=t.position)==null?void 0:h.includes("top");let p=0,Z=0;Array.from(f).reverse().forEach((v,k)=>{const B=v;B.classList.add("Toastify__toast--stacked"),k>0&&(B.dataset.collapsed=`${r}`),B.dataset.pos||(B.dataset.pos=m?"top":"bot");const y=p*(r?.2:1)+(r?0:A*k);B.style.setProperty("--y",`${m?y:-1*y}px`),B.style.setProperty("--g",`${A}`),B.style.setProperty("--s",""+(1-(r?Z:0))),p+=B.offsetHeight,Z+=.025})}},[r,l,n]),qe.createElement("div",{ref:i,className:"Toastify",id:d,onMouseEnter:()=>{n&&(o(!1),un.pause())},onMouseLeave:C},a((h,f)=>{const A=f.length?{...u}:{...u,pointerEvents:"none"};return qe.createElement("div",{className:I(h),style:A,key:`container-${h}`},f.map(m=>{let{content:p,props:Z}=m;return qe.createElement(j8,{...Z,stacked:n,collapseAll:C,isIn:s(Z.toastId,Z.containerId),style:Z.style,key:`toast-${Z.key}`},p)}))}))}const P8=new Ni("/theaters"),o0=()=>bc({queryKey:["theaters"],queryFn:()=>P8.getAll()}),O8=et(je)({background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",padding:"30px",width:"100%",maxWidth:"800px",margin:"20px auto",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"}),Sg=et(Vr)({"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.02)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.1)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&.Mui-focused fieldset":{borderColor:"#5C2FC2"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#5C2FC2"}},"& .MuiInputBase-input":{color:"#e2e8f0"},marginBottom:"20px"}),_8=et(gA)({backgroundColor:"rgba(255, 255, 255, 0.02)",color:"#e2e8f0","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.1)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.2)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#5C2FC2"}}),q8=et(rn)({backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#e2e8f0",padding:"12px 24px",marginTop:"20px",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)",transform:"translateY(-2px)"}}),$8=et("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),MJ=()=>{var m;const{register:e,handleSubmit:t,formState:{errors:n}}=QG(),[r,o]=qe.useState(""),[i,a]=qe.useState([]),[s,l]=qe.useState([]),[c,u]=F.useState(""),g=sa(),{data:d}=o0(),I=["G","PG","PG-13","R","NC-17"],C=p=>{const Z=p.target.files[0],v=new FileReader;v.readAsDataURL(Z),v.onload=()=>{o(v.result)}},h=p=>{a(p.target.value.split(","))},f=p=>{l(p.target.value.split(","))},A=async p=>{const Z={...p,theater:c,cast:i,genre:s,image:r};console.log(Z);try{await F8.CreateMovie(Z),un.success("Movie added successfully!",{position:"top-right",theme:"dark",transition:ng}),g("/Dashboard")}catch{un.error("Error adding movie",{position:"top-right",theme:"dark"})}};return w.jsxs(je,{sx:{background:"linear-gradient(135deg, #1e2a38 0%, #181818 100%)",minHeight:"100vh",padding:"20px"},children:[w.jsx(Gd,{}),w.jsxs(O8,{children:[w.jsx(Ee,{variant:"h4",sx:{color:"#e2e8f0",mb:4,fontWeight:500,textAlign:"center"},children:"Publish Event"}),w.jsxs(at,{container:!0,spacing:3,component:"form",onSubmit:t(A),children:[w.jsx(at,{item:!0,xs:12,children:w.jsx(Sg,{label:"Event Title",...e("title",{required:"Title is required"}),error:!!n.title,helperText:(m=n.title)==null?void 0:m.message,fullWidth:!0})}),w.jsx(at,{item:!0,xs:12,children:w.jsxs(ep,{fullWidth:!0,sx:{mb:2,"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.02)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.1)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiSelect-icon":{color:"rgba(255, 255, 255, 0.7)"}},children:[w.jsx(rp,{children:"Theater Type"}),w.jsx(gA,{value:c,onChange:p=>u(p.target.value),label:"Theater",sx:{color:"#e2e8f0"},children:d.map(p=>w.jsx(is,{value:p._id,children:p.name}))})]})}),w.jsx(at,{item:!0,xs:12,children:w.jsx(Sg,{label:"Description",...e("description"),multiline:!0,rows:4,fullWidth:!0})}),w.jsx(at,{item:!0,xs:12,md:6,children:w.jsx(Sg,{label:"Date",type:"date",InputLabelProps:{shrink:!0},...e("releaseDate"),fullWidth:!0})}),w.jsx(at,{item:!0,xs:12,md:6,children:w.jsx(Sg,{label:"Duration (minutes)",type:"number",...e("duration"),fullWidth:!0})}),w.jsx(at,{item:!0,xs:12,md:6,children:w.jsx(Sg,{label:"Organizer",...e("director"),fullWidth:!0})}),w.jsx(at,{item:!0,xs:12,md:6,children:w.jsxs(ep,{fullWidth:!0,children:[w.jsx(rp,{sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Rating"}),w.jsx(_8,{...e("rating"),defaultValue:"",children:I.map(p=>w.jsx(is,{value:p,children:p},p))})]})}),w.jsx(at,{item:!0,xs:12,children:w.jsx(Sg,{label:"Cast (comma separated)",value:i.join(", "),onChange:h,fullWidth:!0})}),w.jsx(at,{item:!0,xs:12,children:w.jsx(Sg,{label:"Genre (comma separated)",value:s.join(", "),onChange:f,fullWidth:!0})}),w.jsx(at,{item:!0,xs:12,children:w.jsxs(q8,{component:"label",startIcon:w.jsx(yJ,{}),fullWidth:!0,children:["Upload Event Poster",w.jsx($8,{onChange:C,type:"file",accept:".jpg, .jpeg"})]})}),w.jsx(at,{item:!0,xs:12,children:w.jsx(rn,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2,backgroundColor:"#5C2FC2",color:"#fff",padding:"12px",transition:"all 0.3s ease","&:hover":{backgroundColor:"#4925A3",transform:"translateY(-2px)"}},children:"Publish Event"})})]})]})]})},Iy=new Ni("/user");class eO{Create(t){return Iy.post(t)}Delete(t){return Iy.delete(t)}Update(t,n){return Iy.put(t,n)}}const tO=new eO,nO="/assets/googleIcon-D5dv26vT.png",rO=et(rn)({width:"100%",backgroundColor:"#002548",color:"#fff",border:"1px solid rgba(79, 158, 255, 0.3)",padding:"10px 16px",textTransform:"none",fontSize:"14px",fontWeight:500,display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginTop:"20px",borderRadius:"8px",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(79, 158, 255, 0.1)",borderColor:"rgba(79, 158, 255, 0.5)",transform:"translateY(-2px)"}}),oO=et(je)({width:"30px",height:"30px",backgroundColor:"#fff",borderRadius:"50%",padding:"2px",display:"flex",alignItems:"center",justifyContent:"center"}),DJ=()=>{const e=mc(),t=sa(),{login:n}=gi();F.useEffect(()=>{const i=new URLSearchParams(e.search).get("token");i&&(n(i),t("/"))},[e,t]);const r=()=>{window.location.href="https://azure-reservation-app.azurewebsites.net/api/auth/google"};return w.jsx(je,{sx:{width:"100%"},children:w.jsx(rO,{onClick:r,startIcon:w.jsx(oO,{component:"img",src:nO,alt:"Google logo"}),children:"Sign in with Google"})})},iO="/assets/facebook-ejnf6rkB.png",aO=et(rn)({width:"100%",backgroundColor:"#002548",color:"#fff",border:"1px solid rgba(79, 158, 255, 0.3)",padding:"10px 16px",textTransform:"none",fontSize:"14px",fontWeight:500,display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginTop:"20px",borderRadius:"8px",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(79, 158, 255, 0.1)",borderColor:"rgba(79, 158, 255, 0.5)",transform:"translateY(-2px)"}}),sO=et(je)({width:"30px",height:"30px",backgroundColor:"#fff",borderRadius:"50%",padding:"2px",display:"flex",alignItems:"center",justifyContent:"center"}),lO=()=>{const e=mc(),t=sa();F.useEffect(()=>{const o=new URLSearchParams(e.search).get("token");o&&(localStorage.setItem("token",o),t("/"))},[e,t]);const n=()=>{window.location.href="https://azure-reservation-app.azurewebsites.net/api/auth/facebook"};return w.jsx(je,{sx:{width:"100%"},children:w.jsx(aO,{onClick:n,startIcon:w.jsx(sO,{component:"img",src:iO,alt:"Facebook logo"}),children:"Sign in with Facebook"})})},gO=et(je)({padding:"60px",backgroundColor:"#001529",borderRadius:"20px",width:"100%",maxWidth:"500px",margin:"30px auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"}),cO=et(je)({backgroundImage:"url(../src/assets/Register.png)",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",width:"50px",height:"50px",margin:"0 auto 20px"}),dy=et(Vr)({marginBottom:"20px","& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(79, 158, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(79, 158, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#4f9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiInputBase-input":{color:"#fff"},"& .MuiFormHelperText-root":{color:"#ff4d4d"}}),IO=et(rn)({backgroundColor:"#4f9eff",color:"#fff",height:"50px",borderRadius:"8px",marginTop:"20px","&:hover":{backgroundColor:"#3a7bd5",transform:"translateY(-2px)"},transition:"all 0.3s ease"}),dO=et(AV)({textDecoration:"none","& .MuiTypography-root":{color:"#4f9eff",marginTop:"10px","&:hover":{color:"#3a7bd5"}}}),vw=Kr.object({name:Kr.string().min(2).required().label("Name"),email:Kr.string().email({tlds:{allow:!1}}).required().label("Email"),password:Kr.string().min(8).pattern(new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$")).required().label("Password").messages({"string.pattern.base":"Password must be at least 8 characters long, and include at least one uppercase letter, one lowercase letter, one number, and one special character."})}),uO=()=>{const[e,t]=F.useState({}),[n,r]=F.useState({}),{login:o,authToken:i}=gi(),a=sa(),s=(g,d)=>{const I=Kr.object({[g]:vw.extract(g)}),{error:C}=I.validate({[g]:d});return C?C.details[0].message:null},l=g=>{const{name:d,value:I}=g.target;t(h=>({...h,[d]:I}));const C=s(d,I);r(h=>({...h,[d]:C}))},c=()=>{const{error:g}=vw.validate(e,{abortEarly:!1});if(!g)return null;const d={};return g.details.forEach(I=>{d[I.path[0]]=I.message}),d},u=g=>{g.preventDefault(),console.log("Form Data: ",e);const d=c();r(d||{}),d?console.log("Form contains errors."):(console.log("Form Data: ",e),tO.Create(e).then(I=>{console.log("Register successfully: ",I),un.success("Register successfully!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:ng}),o(I),a("/")}).catch(I=>{r(I.response.data)}))};return w.jsxs(w.Fragment,{children:[w.jsx(Gd,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark",transition:ng}),i&&w.jsx(Up,{to:"/",replace:!0}),w.jsxs(gO,{children:[w.jsxs(je,{sx:{textAlign:"center",mb:4},children:[w.jsx(cO,{}),w.jsx(Ee,{variant:"h5",sx:{color:"#4f9eff",fontWeight:600},children:"Sign Up"})]}),w.jsxs("form",{onSubmit:u,children:[w.jsx(dy,{fullWidth:!0,label:"Name",variant:"outlined",name:"name",value:e.name||"",onChange:l,error:!!n.name,helperText:n.name,onKeyPress:g=>{const d=String.fromCharCode(g.keyCode||g.which);/^[a-zA-Z\s]*$/.test(d)||g.preventDefault()}}),w.jsx(dy,{fullWidth:!0,label:"Email",variant:"outlined",type:"email",name:"email",value:e.email||"",onChange:l,error:!!n.email,helperText:n.email,onKeyPress:g=>{const d=String.fromCharCode(g.keyCode||g.which);/^[a-zA-Z0-9.@]*$/.test(d)||g.preventDefault()}}),w.jsx(dy,{fullWidth:!0,label:"Password",variant:"outlined",type:"password",name:"password",value:e.password||"",onChange:l,error:!!n.password,helperText:n.password}),w.jsx(dO,{to:"/signin",children:w.jsx(Ee,{variant:"subtitle2",children:"Already have an account? Sign In"})}),n&&typeof n=="string"&&w.jsx(Ee,{sx:{color:"#ff4d4d",mt:2,textAlign:"center"},children:n}),w.jsx(IO,{fullWidth:!0,type:"submit",children:"Register"})]}),w.jsx(DJ,{}),w.jsx(lO,{})]})]})},CO=new Ni("/auth");class AO{AuthenticateUser(t){return CO.post(t)}}const hO=new AO,mO=et(je)({padding:"60px",backgroundColor:"#001529",borderRadius:"20px",width:"100%",maxWidth:"500px",margin:"30px auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"}),pO=et(je)({backgroundImage:"url(../src/assets/login.png)",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",width:"50px",height:"50px",margin:"0 auto 20px"}),Gw=et(Vr)({marginBottom:"20px","& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(79, 158, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(79, 158, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#4f9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiInputBase-input":{color:"#fff"},"& .MuiFormHelperText-root":{color:"#ff4d4d"}}),fO=et(rn)({backgroundColor:"#4f9eff",color:"#fff",height:"50px",borderRadius:"8px",marginTop:"20px","&:hover":{backgroundColor:"#3a7bd5",transform:"translateY(-2px)"},transition:"all 0.3s ease"}),bO=et(AV)({textDecoration:"none","& .MuiTypography-root":{color:"#4f9eff",marginTop:"10px","&:hover":{color:"#3a7bd5"}}}),Sw=Kr.object({email:Kr.string().required().label("Email"),password:Kr.string().required().label("Password")}),yO=()=>{const[e,t]=F.useState({}),[n,r]=F.useState({}),o=sa(),{authToken:i,login:a,getCurrentUser:s}=gi(),l=(d,I)=>{const C=Kr.object({[d]:Sw.extract(d)}),{error:h}=C.validate({[d]:I});return h?h.details[0].message:null},c=d=>{const{name:I,value:C}=d.target;t(f=>({...f,[I]:C}));const h=l(I,C);r(f=>({...f,[I]:h}))},u=()=>{const{error:d}=Sw.validate(e,{abortEarly:!1});if(!d)return null;const I={};return d.details.forEach(C=>{I[C.path[0]]=C.message}),I},g=async d=>{var C;d.preventDefault();const I=u();if(r(I||{}),!I)try{const h=await hO.AuthenticateUser(e);un.success("Signin successful!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:ng}),a(h),console.log("Storage error",s().role),s().role==="admin"?o("/Dashboard"):o("/")}catch(h){r((C=h.response)==null?void 0:C.data)}};return i?w.jsx(Up,{to:"/",replace:!0}):w.jsxs(w.Fragment,{children:[w.jsx(Gd,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark",transition:ng}),w.jsxs(mO,{children:[w.jsxs(je,{sx:{textAlign:"center",mb:4},children:[w.jsx(pO,{}),w.jsx(Ee,{variant:"h5",sx:{color:"#4f9eff",fontWeight:600},children:"Sign In"})]}),w.jsxs("form",{onSubmit:g,children:[w.jsx(Gw,{fullWidth:!0,label:"Email",variant:"outlined",type:"email",name:"email",value:e.email||"",onChange:c,error:!!n.email,helperText:n.email}),w.jsx(Gw,{fullWidth:!0,label:"Password",variant:"outlined",type:"password",name:"password",value:e.password||"",onChange:c,error:!!n.password,helperText:n.password}),w.jsx(bO,{to:"/signup",children:w.jsx(Ee,{variant:"subtitle2",children:"Don't have an account? Sign Up"})}),n&&typeof n=="string"&&w.jsx(Ee,{sx:{color:"#ff4d4d",mt:2,textAlign:"center"},children:n}),w.jsx(fO,{fullWidth:!0,type:"submit",children:"Sign In"})]})]})]})},zJ=F.createContext(),ZO=()=>F.useContext(zJ),vO=({children:e,renderContent:t})=>w.jsx(zJ.Provider,{value:t,children:e});var oo=[];for(var uy=0;uy<256;++uy)oo.push((uy+256).toString(16).slice(1));function GO(e,t=0){return(oo[e[t+0]]+oo[e[t+1]]+oo[e[t+2]]+oo[e[t+3]]+"-"+oo[e[t+4]]+oo[e[t+5]]+"-"+oo[e[t+6]]+oo[e[t+7]]+"-"+oo[e[t+8]]+oo[e[t+9]]+"-"+oo[e[t+10]]+oo[e[t+11]]+oo[e[t+12]]+oo[e[t+13]]+oo[e[t+14]]+oo[e[t+15]]).toLowerCase()}var Lh,SO=new Uint8Array(16);function BO(){if(!Lh&&(Lh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Lh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Lh(SO)}var wO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Bw={randomUUID:wO};function WO(e,t,n){if(Bw.randomUUID&&!t&&!e)return Bw.randomUUID();e=e||{};var r=e.random||(e.rng||BO)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,GO(r)}const RO=et("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),kO=()=>{const[e,t]=F.useState(""),[n,r]=F.useState(""),[o,i]=F.useState([]),[a,s]=F.useState(""),[l,c]=F.useState(0),[u,g]=F.useState(0),[d,I]=F.useState(null),h=Um("(max-width:600px)")?30:50,f=Z=>{let v=new FileReader;v.readAsDataURL(Z.target.files[0]),v.onload=()=>{I(v.result)},v.onerror=k=>{console.log("Error:",k)}},A=()=>{if(a&&l>0&&u>0){const Z={id:WO(),name:a,rows:l,cols:u,layout:Array(l).fill(null).map(()=>Array(u).fill(!0))};i([...o,Z]),s(""),c(0),g(0)}},m=(Z,v,k)=>{const B=o.map(y=>{if(y.id===Z){const W=[...y.layout];return W[v][k]=!W[v][k],{...y,layout:W}}return y});i(B)},p=async()=>{try{const Z={location:n,theater:e,sections:o,image:d};console.log(Z);const v=await hn.post("https://azure-reservation-app.azurewebsites.net/api/seats/create",Z);un.success("Theater added successfully!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:ng}),console.log(v)}catch(Z){console.error("Error uploading seats:",Z)}};return w.jsxs(je,{sx:{padding:"24px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",width:"100%",marginBottom:"24px"},children:[w.jsx(Gd,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark","transition:Bounce":!0}),w.jsx(Ee,{variant:"h4",sx:{mb:4,color:"#e2e8f0",fontWeight:"600",fontSize:"2rem"},children:"Theater Seat Configurator"}),w.jsxs(je,{sx:{mb:4},children:[w.jsx(Vr,{label:"Theater Name",value:e,onChange:Z=>t(Z.target.value),fullWidth:!0,sx:{mb:2,"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.02)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.1)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiInputBase-input":{color:"#e2e8f0"}}}),w.jsx(Vr,{label:"Theater Location",value:n,onChange:Z=>r(Z.target.value),fullWidth:!0,sx:{mb:2,"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.02)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.1)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiInputBase-input":{color:"#e2e8f0"}}}),w.jsx(Vr,{label:"Section Name",value:a,onChange:Z=>s(Z.target.value),fullWidth:!0,sx:{mb:2,"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.02)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.1)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiInputBase-input":{color:"#e2e8f0"}}}),w.jsxs(at,{container:!0,spacing:2,children:[w.jsx(at,{item:!0,xs:6,children:w.jsx(Vr,{label:"Number of Rows",type:"number",value:l,onChange:Z=>c(Number(Z.target.value)),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.02)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.1)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiInputBase-input":{color:"#e2e8f0"}}})}),w.jsx(at,{item:!0,xs:6,children:w.jsx(Vr,{label:"Number of Columns",type:"number",value:u,onChange:Z=>g(Number(Z.target.value)),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.02)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.1)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiInputBase-input":{color:"#e2e8f0"}}})})]}),w.jsx(rn,{variant:"contained",onClick:A,sx:{mt:2,mb:4,backgroundColor:"#5C2FC2",color:"white","&:hover":{backgroundColor:"#4925A3"}},children:"Add Section"})]}),o.map(Z=>w.jsxs(je,{sx:{mb:4,padding:"24px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[w.jsxs(Ee,{variant:"h6",sx:{mb:2,color:"#e2e8f0",fontWeight:"500"},children:[Z.name," Section"]}),w.jsx(at,{container:!0,justifyContent:"center",children:Z.layout.map((v,k)=>w.jsx(at,{container:!0,justifyContent:"center",sx:{mb:1},children:v.map((B,y)=>w.jsx(je,{onClick:()=>m(Z.id,k,y),sx:{width:h,height:h,margin:.5,backgroundColor:B?"#5C2FC2":"rgba(255, 255, 255, 0.1)","&:hover":{backgroundColor:B?"#4925A3":"rgba(255, 255, 255, 0.15)"},borderRadius:"5px",cursor:"pointer",transition:"background-color 0.2s"}},y))},k))})]},Z.id)),w.jsxs(je,{sx:{display:"flex",gap:2},children:[w.jsxs(rn,{component:"label",variant:"contained",startIcon:w.jsx(yJ,{}),sx:{backgroundColor:"#5C2FC2",color:"white","&:hover":{backgroundColor:"#4925A3"}},children:["Upload file",w.jsx(RO,{onChange:f,type:"file",accept:".jpg, .jpeg",id:"avatar"})]}),w.jsx(rn,{variant:"contained",onClick:p,sx:{backgroundColor:"#5C2FC2",color:"white","&:hover":{backgroundColor:"#4925A3"}},children:"Confirm Configuration"})]})]})},Cy=new Ni("/showtimes");class VO{Create(t){return Cy.post(t)}Delete(t){return Cy.delete(t)}Update(t,n){return Cy.put(t,n)}}const TJ=new VO,XO=et(je)({padding:"24px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",marginTop:"20px",marginRight:"24px",marginBottom:"40px"}),Ay=et(Vr)({"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.02)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.1)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&.Mui-focused fieldset":{borderColor:"#5C2FC2"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiInputBase-input":{color:"#e2e8f0"},"& .MuiSelect-icon":{color:"rgba(255, 255, 255, 0.7)"}}),JO=et(rn)({backgroundColor:"#5C2FC2",color:"#fff","&:hover":{backgroundColor:"#4925A3",transform:"translateY(-2px)"},transition:"all 0.3s ease"}),xO=()=>{const{control:e,handleSubmit:t,reset:n,watch:r}=QG({defaultValues:{theater:"",date:"",times:[{time:""}]}}),{data:o}=o0(),{fields:i,append:a,remove:s}=JJ({control:e,name:"times"}),l=new Date().toISOString().split("T")[0],c=new Date().toTimeString().split(" ")[0].substring(0,5),g=r("date")===l?c:"00:00",d=async I=>{try{const C={...I,times:I.times.map(h=>h.time)};await TJ.Create(C),un.success("Times added successfully!",{position:"top-right",theme:"dark",transition:ng}),n()}catch{un.error("Error adding showtimes",{position:"top-right",theme:"dark"})}};return w.jsxs(XO,{component:"form",onSubmit:t(d),children:[w.jsx(Gd,{}),w.jsx(Ee,{variant:"h4",sx:{mb:4,color:"#e2e8f0",fontWeight:"600",letterSpacing:"0.5px"},children:"Create Showtimes"}),w.jsx(qb,{name:"theater",control:e,render:({field:I})=>w.jsx(Ay,{...I,select:!0,label:"Select Theater",fullWidth:!0,margin:"normal",required:!0,children:o==null?void 0:o.map(C=>w.jsx(is,{value:C._id,children:C.name},C._id))})}),w.jsx(qb,{name:"date",control:e,render:({field:I})=>w.jsx(Ay,{...I,type:"date",label:"Date",fullWidth:!0,margin:"normal",required:!0,InputLabelProps:{shrink:!0},inputProps:{min:l}})}),w.jsxs(je,{sx:{mb:4,mt:3},children:[w.jsx(Ee,{variant:"h6",sx:{color:"#e2e8f0",mb:2},children:"Show Times"}),i.map((I,C)=>w.jsxs(je,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[w.jsx(qb,{name:`times[${C}].time`,control:e,render:({field:h})=>w.jsx(Ay,{...h,label:`Time ${C+1}`,fullWidth:!0,type:"time",required:!0,inputProps:{min:g}})}),w.jsx(tg,{onClick:()=>s(C),sx:{color:"rgba(255, 255, 255, 0.7)","&:hover":{color:"#ff4444"}},children:w.jsx(I8,{})})]},I.id)),w.jsx(rn,{onClick:()=>a({time:""}),startIcon:w.jsx(n8,{}),sx:{color:"#e2e8f0",borderColor:"rgba(255, 255, 255, 0.1)","&:hover":{borderColor:"#5C2FC2",backgroundColor:"rgba(92, 47, 194, 0.1)"}},children:"Add Time"})]}),w.jsx(JO,{type:"submit",variant:"contained",fullWidth:!0,children:"Submit Showtimes"})]})},YO="modulepreload",NO=function(e){return"/"+e},ww={},hZ=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(n.map(l=>{if(l=NO(l),l in ww)return;ww[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":YO,c||(g.as="script"),g.crossOrigin="",g.href=l,s&&g.setAttribute("nonce",s),document.head.appendChild(g),c)return new Promise((d,I)=>{g.addEventListener("load",d),g.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return o.then(a=>{for(const s of a||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})};var Go=Uint8Array,Bi=Uint16Array,PG=Int32Array,i0=new Go([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a0=new Go([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mZ=new Go([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),UJ=function(e,t){for(var n=new Bi(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var o=new PG(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)o[i]=i-n[r]<<5|r;return{b:n,r:o}},jJ=UJ(i0,2),QJ=jJ.b,pZ=jJ.r;QJ[28]=258,pZ[258]=28;var PJ=UJ(a0,0),HO=PJ.b,Ww=PJ.r,fZ=new Bi(32768);for(var Qn=0;Qn<32768;++Qn){var pl=(Qn&43690)>>1|(Qn&21845)<<1;pl=(pl&52428)>>2|(pl&13107)<<2,pl=(pl&61680)>>4|(pl&3855)<<4,fZ[Qn]=((pl&65280)>>8|(pl&255)<<8)>>1}var Is=function(e,t,n){for(var r=e.length,o=0,i=new Bi(t);o<r;++o)e[o]&&++i[e[o]-1];var a=new Bi(t);for(o=1;o<t;++o)a[o]=a[o-1]+i[o-1]<<1;var s;if(n){s=new Bi(1<<t);var l=15-t;for(o=0;o<r;++o)if(e[o])for(var c=o<<4|e[o],u=t-e[o],g=a[e[o]-1]++<<u,d=g|(1<<u)-1;g<=d;++g)s[fZ[g]>>l]=c}else for(s=new Bi(r),o=0;o<r;++o)e[o]&&(s[o]=fZ[a[e[o]-1]++]>>15-e[o]);return s},rg=new Go(288);for(var Qn=0;Qn<144;++Qn)rg[Qn]=8;for(var Qn=144;Qn<256;++Qn)rg[Qn]=9;for(var Qn=256;Qn<280;++Qn)rg[Qn]=7;for(var Qn=280;Qn<288;++Qn)rg[Qn]=8;var DC=new Go(32);for(var Qn=0;Qn<32;++Qn)DC[Qn]=5;var FO=Is(rg,9,0),KO=Is(rg,9,1),LO=Is(DC,5,0),EO=Is(DC,5,1),hy=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ba=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},my=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},OG=function(e){return(e+7)/8|0},OJ=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Go(e.subarray(t,n))},MO=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],va=function(e,t,n){var r=new Error(t||MO[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,va),!n)throw r;return r},DO=function(e,t,n,r){var o=e.length,i=0;if(!o||t.f&&!t.l)return n||new Go(0);var a=!n,s=a||t.i!=2,l=t.i;a&&(n=new Go(o*3));var c=function(We){var Je=n.length;if(We>Je){var ze=new Go(Math.max(Je*2,We));ze.set(n),n=ze}},u=t.f||0,g=t.p||0,d=t.b||0,I=t.l,C=t.d,h=t.m,f=t.n,A=o*8;do{if(!I){u=ba(e,g,1);var m=ba(e,g+1,3);if(g+=3,m)if(m==1)I=KO,C=EO,h=9,f=5;else if(m==2){var k=ba(e,g,31)+257,B=ba(e,g+10,15)+4,y=k+ba(e,g+5,31)+1;g+=14;for(var W=new Go(y),G=new Go(19),R=0;R<B;++R)G[mZ[R]]=ba(e,g+R*3,7);g+=B*3;for(var X=hy(G),Y=(1<<X)-1,x=Is(G,X,1),R=0;R<y;){var D=x[ba(e,g,Y)];g+=D&15;var p=D>>4;if(p<16)W[R++]=p;else{var L=0,M=0;for(p==16?(M=3+ba(e,g,3),g+=2,L=W[R-1]):p==17?(M=3+ba(e,g,7),g+=3):p==18&&(M=11+ba(e,g,127),g+=7);M--;)W[R++]=L}}var K=W.subarray(0,k),E=W.subarray(k);h=hy(K),f=hy(E),I=Is(K,h,1),C=Is(E,f,1)}else va(1);else{var p=OG(g)+4,Z=e[p-4]|e[p-3]<<8,v=p+Z;if(v>o){l&&va(0);break}s&&c(d+Z),n.set(e.subarray(p,v),d),t.b=d+=Z,t.p=g=v*8,t.f=u;continue}if(g>A){l&&va(0);break}}s&&c(d+131072);for(var O=(1<<h)-1,re=(1<<f)-1,H=g;;H=g){var L=I[my(e,g)&O],z=L>>4;if(g+=L&15,g>A){l&&va(0);break}if(L||va(2),z<256)n[d++]=z;else if(z==256){H=g,I=null;break}else{var j=z-254;if(z>264){var R=z-257,$=i0[R];j=ba(e,g,(1<<$)-1)+QJ[R],g+=$}var ee=C[my(e,g)&re],le=ee>>4;ee||va(3),g+=ee&15;var E=HO[le];if(le>3){var $=a0[le];E+=my(e,g)&(1<<$)-1,g+=$}if(g>A){l&&va(0);break}s&&c(d+131072);var Ie=d+j;if(d<E){var Ae=i-E,Ge=Math.min(E,Ie);for(Ae+d<0&&va(3);d<Ge;++d)n[d]=r[Ae+d]}for(;d<Ie;++d)n[d]=n[d-E]}}t.l=I,t.p=H,t.b=d,t.f=u,I&&(u=1,t.m=h,t.d=C,t.n=f)}while(!u);return d!=n.length&&a?OJ(n,0,d):n.subarray(0,d)},Vs=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Su=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},py=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,i=n.slice();if(!o)return{t:qJ,l:0};if(o==1){var a=new Go(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(v,k){return v.f-k.f}),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,u=1,g=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};u!=o-1;)s=n[n[c].f<n[g].f?c++:g++],l=n[c!=u&&n[c].f<n[g].f?c++:g++],n[u++]={s:-1,f:s.f+l.f,l:s,r:l};for(var d=i[0].s,r=1;r<o;++r)i[r].s>d&&(d=i[r].s);var I=new Bi(d+1),C=bZ(n[u-1],I,0);if(C>t){var r=0,h=0,f=C-t,A=1<<f;for(i.sort(function(k,B){return I[B.s]-I[k.s]||k.f-B.f});r<o;++r){var m=i[r].s;if(I[m]>t)h+=A-(1<<C-I[m]),I[m]=t;else break}for(h>>=f;h>0;){var p=i[r].s;I[p]<t?h-=1<<t-I[p]++-1:++r}for(;r>=0&&h;--r){var Z=i[r].s;I[Z]==t&&(--I[Z],++h)}C=t}return{t:new Go(I),l:C}},bZ=function(e,t,n){return e.s==-1?Math.max(bZ(e.l,t,n+1),bZ(e.r,t,n+1)):t[e.s]=n},Rw=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Bi(++t),r=0,o=e[0],i=1,a=function(l){n[r++]=l},s=1;s<=t;++s)if(e[s]==o&&s!=t)++i;else{if(!o&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(o),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(o);i=1,o=e[s]}return{c:n.subarray(0,r),n:t}},Bu=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},_J=function(e,t,n){var r=n.length,o=OG(t+2);e[o]=r&255,e[o+1]=r>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var i=0;i<r;++i)e[o+i+4]=n[i];return(o+4+r)*8},kw=function(e,t,n,r,o,i,a,s,l,c,u){Vs(t,u++,n),++o[256];for(var g=py(o,15),d=g.t,I=g.l,C=py(i,15),h=C.t,f=C.l,A=Rw(d),m=A.c,p=A.n,Z=Rw(h),v=Z.c,k=Z.n,B=new Bi(19),y=0;y<m.length;++y)++B[m[y]&31];for(var y=0;y<v.length;++y)++B[v[y]&31];for(var W=py(B,7),G=W.t,R=W.l,X=19;X>4&&!G[mZ[X-1]];--X);var Y=c+5<<3,x=Bu(o,rg)+Bu(i,DC)+a,D=Bu(o,d)+Bu(i,h)+a+14+3*X+Bu(B,G)+2*B[16]+3*B[17]+7*B[18];if(l>=0&&Y<=x&&Y<=D)return _J(t,u,e.subarray(l,l+c));var L,M,K,E;if(Vs(t,u,1+(D<x)),u+=2,D<x){L=Is(d,I,0),M=d,K=Is(h,f,0),E=h;var O=Is(G,R,0);Vs(t,u,p-257),Vs(t,u+5,k-1),Vs(t,u+10,X-4),u+=14;for(var y=0;y<X;++y)Vs(t,u+3*y,G[mZ[y]]);u+=3*X;for(var re=[m,v],H=0;H<2;++H)for(var z=re[H],y=0;y<z.length;++y){var j=z[y]&31;Vs(t,u,O[j]),u+=G[j],j>15&&(Vs(t,u,z[y]>>5&127),u+=z[y]>>12)}}else L=FO,M=rg,K=LO,E=DC;for(var y=0;y<s;++y){var $=r[y];if($>255){var j=$>>18&31;Su(t,u,L[j+257]),u+=M[j+257],j>7&&(Vs(t,u,$>>23&31),u+=i0[j]);var ee=$&31;Su(t,u,K[ee]),u+=E[ee],ee>3&&(Su(t,u,$>>5&8191),u+=a0[ee])}else Su(t,u,L[$]),u+=M[$]}return Su(t,u,L[256]),u+M[256]},zO=new PG([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),qJ=new Go(0),TO=function(e,t,n,r,o,i){var a=i.z||e.length,s=new Go(r+a+5*(1+Math.ceil(a/7e3))+o),l=s.subarray(r,s.length-o),c=i.l,u=(i.r||0)&7;if(t){u&&(l[0]=i.r>>3);for(var g=zO[t-1],d=g>>13,I=g&8191,C=(1<<n)-1,h=i.p||new Bi(32768),f=i.h||new Bi(C+1),A=Math.ceil(n/3),m=2*A,p=function(ke){return(e[ke]^e[ke+1]<<A^e[ke+2]<<m)&C},Z=new PG(25e3),v=new Bi(288),k=new Bi(32),B=0,y=0,W=i.i||0,G=0,R=i.w||0,X=0;W+2<a;++W){var Y=p(W),x=W&32767,D=f[Y];if(h[x]=D,f[Y]=x,R<=W){var L=a-W;if((B>7e3||G>24576)&&(L>423||!c)){u=kw(e,l,0,Z,v,k,y,G,X,W-X,u),G=B=y=0,X=W;for(var M=0;M<286;++M)v[M]=0;for(var M=0;M<30;++M)k[M]=0}var K=2,E=0,O=I,re=x-D&32767;if(L>2&&Y==p(W-re))for(var H=Math.min(d,L)-1,z=Math.min(32767,W),j=Math.min(258,L);re<=z&&--O&&x!=D;){if(e[W+K]==e[W+K-re]){for(var $=0;$<j&&e[W+$]==e[W+$-re];++$);if($>K){if(K=$,E=re,$>H)break;for(var ee=Math.min(re,$-2),le=0,M=0;M<ee;++M){var Ie=W-re+M&32767,Ae=h[Ie],Ge=Ie-Ae&32767;Ge>le&&(le=Ge,D=Ie)}}}x=D,D=h[x],re+=x-D&32767}if(E){Z[G++]=268435456|pZ[K]<<18|Ww[E];var We=pZ[K]&31,Je=Ww[E]&31;y+=i0[We]+a0[Je],++v[257+We],++k[Je],R=W+K,++B}else Z[G++]=e[W],++v[e[W]]}}for(W=Math.max(W,R);W<a;++W)Z[G++]=e[W],++v[e[W]];u=kw(e,l,c,Z,v,k,y,G,X,W-X,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=f,i.p=h,i.i=W,i.w=R)}else{for(var W=i.w||0;W<a+c;W+=65535){var ze=W+65535;ze>=a&&(l[u/8|0]=c,ze=a),u=_J(l,u+1,e.subarray(W,ze))}i.i=a}return OJ(s,0,r+OG(u)+o)},$J=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,i=n.length|0,a=0;a!=i;){for(var s=Math.min(a+2655,i);a<s;++a)o+=r+=n[a];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}e=r,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},UO=function(e,t,n,r,o){if(!o&&(o={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),a=new Go(i.length+e.length);a.set(i),a.set(e,i.length),e=a,o.w=i.length}return TO(e,t.level==null?6:t.level,t.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,o)},ex=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},jO=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var o=$J();o.p(t.dictionary),ex(e,2,o.d())}},QO=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&va(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&va(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function yZ(e,t){t||(t={});var n=$J();n.p(e);var r=UO(e,t,t.dictionary?6:2,4);return jO(r,t),ex(r,r.length-4,n.d()),r}function PO(e,t){return DO(e.subarray(QO(e,t),-4),{i:2},t,t)}var OO=typeof TextDecoder<"u"&&new TextDecoder,_O=0;try{OO.decode(qJ,{stream:!0}),_O=1}catch{}var xt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function fy(){xt.console&&typeof xt.console.log=="function"&&xt.console.log.apply(xt.console,arguments)}var Ln={log:fy,warn:function(e){xt.console&&(typeof xt.console.warn=="function"?xt.console.warn.apply(xt.console,arguments):fy.call(null,arguments))},error:function(e){xt.console&&(typeof xt.console.error=="function"?xt.console.error.apply(xt.console,arguments):fy(e))}};function by(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Xg(r.response,t,n)},r.onerror=function(){Ln.error("could not download file")},r.send()}function Vw(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Eh(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var iC,ZZ,Xg=xt.saveAs||((typeof window>"u"?"undefined":An(window))!=="object"||window!==xt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=xt.URL||xt.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?Vw(o.href)?by(e,t,n):Eh(o,o.target="_blank"):Eh(o)):(o.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Eh(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(Vw(e))by(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Eh(r)})}else navigator.msSaveOrOpenBlob(function(o,i){return i===void 0?i={autoBom:!1}:An(i)!=="object"&&(Ln.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return by(e,t,n);var o=e.type==="application/octet-stream",i=/constructor/i.test(xt.HTMLElement)||xt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||o&&i)&&(typeof FileReader>"u"?"undefined":An(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var u=s.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},s.readAsDataURL(e)}else{var l=xt.URL||xt.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function tx(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<n.length;r++){var o=n[r].re,i=n[r].process,a=o.exec(e);a&&(t=i(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+s+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function yy(e,t){var n=e[0],r=e[1],o=e[2],i=e[3];n=mo(n,r,o,i,t[0],7,-680876936),i=mo(i,n,r,o,t[1],12,-389564586),o=mo(o,i,n,r,t[2],17,606105819),r=mo(r,o,i,n,t[3],22,-1044525330),n=mo(n,r,o,i,t[4],7,-176418897),i=mo(i,n,r,o,t[5],12,1200080426),o=mo(o,i,n,r,t[6],17,-1473231341),r=mo(r,o,i,n,t[7],22,-45705983),n=mo(n,r,o,i,t[8],7,1770035416),i=mo(i,n,r,o,t[9],12,-1958414417),o=mo(o,i,n,r,t[10],17,-42063),r=mo(r,o,i,n,t[11],22,-1990404162),n=mo(n,r,o,i,t[12],7,1804603682),i=mo(i,n,r,o,t[13],12,-40341101),o=mo(o,i,n,r,t[14],17,-1502002290),n=po(n,r=mo(r,o,i,n,t[15],22,1236535329),o,i,t[1],5,-165796510),i=po(i,n,r,o,t[6],9,-1069501632),o=po(o,i,n,r,t[11],14,643717713),r=po(r,o,i,n,t[0],20,-373897302),n=po(n,r,o,i,t[5],5,-701558691),i=po(i,n,r,o,t[10],9,38016083),o=po(o,i,n,r,t[15],14,-660478335),r=po(r,o,i,n,t[4],20,-405537848),n=po(n,r,o,i,t[9],5,568446438),i=po(i,n,r,o,t[14],9,-1019803690),o=po(o,i,n,r,t[3],14,-187363961),r=po(r,o,i,n,t[8],20,1163531501),n=po(n,r,o,i,t[13],5,-1444681467),i=po(i,n,r,o,t[2],9,-51403784),o=po(o,i,n,r,t[7],14,1735328473),n=fo(n,r=po(r,o,i,n,t[12],20,-1926607734),o,i,t[5],4,-378558),i=fo(i,n,r,o,t[8],11,-2022574463),o=fo(o,i,n,r,t[11],16,1839030562),r=fo(r,o,i,n,t[14],23,-35309556),n=fo(n,r,o,i,t[1],4,-1530992060),i=fo(i,n,r,o,t[4],11,1272893353),o=fo(o,i,n,r,t[7],16,-155497632),r=fo(r,o,i,n,t[10],23,-1094730640),n=fo(n,r,o,i,t[13],4,681279174),i=fo(i,n,r,o,t[0],11,-358537222),o=fo(o,i,n,r,t[3],16,-722521979),r=fo(r,o,i,n,t[6],23,76029189),n=fo(n,r,o,i,t[9],4,-640364487),i=fo(i,n,r,o,t[12],11,-421815835),o=fo(o,i,n,r,t[15],16,530742520),n=bo(n,r=fo(r,o,i,n,t[2],23,-995338651),o,i,t[0],6,-198630844),i=bo(i,n,r,o,t[7],10,1126891415),o=bo(o,i,n,r,t[14],15,-1416354905),r=bo(r,o,i,n,t[5],21,-57434055),n=bo(n,r,o,i,t[12],6,1700485571),i=bo(i,n,r,o,t[3],10,-1894986606),o=bo(o,i,n,r,t[10],15,-1051523),r=bo(r,o,i,n,t[1],21,-2054922799),n=bo(n,r,o,i,t[8],6,1873313359),i=bo(i,n,r,o,t[15],10,-30611744),o=bo(o,i,n,r,t[6],15,-1560198380),r=bo(r,o,i,n,t[13],21,1309151649),n=bo(n,r,o,i,t[4],6,-145523070),i=bo(i,n,r,o,t[11],10,-1120210379),o=bo(o,i,n,r,t[2],15,718787259),r=bo(r,o,i,n,t[9],21,-343485551),e[0]=Kl(n,e[0]),e[1]=Kl(r,e[1]),e[2]=Kl(o,e[2]),e[3]=Kl(i,e[3])}function s0(e,t,n,r,o,i){return t=Kl(Kl(t,e),Kl(r,i)),Kl(t<<o|t>>>32-o,n)}function mo(e,t,n,r,o,i,a){return s0(t&n|~t&r,e,t,o,i,a)}function po(e,t,n,r,o,i,a){return s0(t&r|n&~r,e,t,o,i,a)}function fo(e,t,n,r,o,i,a){return s0(t^n^r,e,t,o,i,a)}function bo(e,t,n,r,o,i,a){return s0(n^(t|~r),e,t,o,i,a)}function nx(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)yy(r,qO(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(yy(r,o),t=0;t<16;t++)o[t]=0;return o[14]=8*n,yy(r,o),r}function qO(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}iC=xt.atob.bind(xt),ZZ=xt.btoa.bind(xt);var Xw="0123456789abcdef".split("");function $O(e){for(var t="",n=0;n<4;n++)t+=Xw[e>>8*n+4&15]+Xw[e>>8*n&15];return t}function e7(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function vZ(e){return nx(e).map(e7).join("")}var t7=function(e){for(var t=0;t<e.length;t++)e[t]=$O(e[t]);return e.join("")}(nx("hello"))!="5d41402abc4b2a76b9719d911017c592";function Kl(e,t){if(t7){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function GZ(e,t){var n,r,o,i;if(e!==n){for(var a=(o=e,i=1+(256/e.length>>0),new Array(i+1).join(o)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var u=s[l];c=(c+u+a.charCodeAt(l))%256,s[l]=s[c],s[c]=u}n=e,r=s}else s=r;var g=t.length,d=0,I=0,C="";for(l=0;l<g;l++)I=(I+(u=s[d=(d+1)%256]))%256,s[d]=s[I],s[I]=u,a=s[(s[d]+s[I])%256],C+=String.fromCharCode(t.charCodeAt(l)^a);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Jw={print:4,modify:8,copy:16,"annot-forms":32};function gI(e,t,n,r){this.v=1,this.r=2;var o=192;e.forEach(function(s){if(Jw.perm!==void 0)throw new Error("Invalid permission: "+s);o+=Jw[s]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^o)),this.encryptionKey=vZ(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=GZ(this.encryptionKey,this.padding)}function cI(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var o=e.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?t+="#"+("0"+o.toString(16)).slice(-2):t+=e[r]}return t}function xw(e){if(An(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,o){if(o=o||!1,typeof n!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var i=Math.random().toString(35);return t[n][i]=[r,!!o],i},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var i in t[n]){var a=t[n][i];try{a[0].apply(e,r)}catch(s){xt.console&&Ln.error("jsPDF PubSub Error",s.message,s)}a[1]&&o.push(i)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function zC(e){if(!(this instanceof zC))return new zC(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function rx(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Wl(e,t,n,r,o){if(!(this instanceof Wl))return new Wl(e,t,n,r,o);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,rx.call(this,r,o)}function Eg(e,t,n,r,o){if(!(this instanceof Eg))return new Eg(e,t,n,r,o);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,rx.call(this,r,o)}function Wt(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],i=arguments[3],a=[],s=1,l=16,c="S",u=null;An(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,o=e.format||o,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),s=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),a=e.filters||(i===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var g=e.putOnlyUsedFonts||!1,d={},I={internal:{},__private__:{}};I.__private__.PubSub=xw;var C="1.3",h=I.__private__.getPdfVersion=function(){return C};I.__private__.setPdfVersion=function(V){C=V};var f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};I.__private__.getPageFormats=function(){return f};var A=I.__private__.getPageFormat=function(V){return f[V]};o=o||"a4";var m={COMPAT:"compat",ADVANCED:"advanced"},p=m.COMPAT;function Z(){this.saveGraphicsState(),oe(new St(Ke,0,0,-Ke,0,nl()*Ke).toString()+" cm"),this.setFontSize(this.getFontSize()/Ke),c="n",p=m.ADVANCED}function v(){this.restoreGraphicsState(),c="S",p=m.COMPAT}var k=I.__private__.combineFontStyleAndFontWeight=function(V,U){if(V=="bold"&&U=="normal"||V=="bold"&&U==400||V=="normal"&&U=="italic"||V=="bold"&&U=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return U&&(V=U==400||U==="normal"?V==="italic"?"italic":"normal":U!=700&&U!=="bold"||V!=="normal"?(U==700?"bold":U)+""+V:"bold"),V};I.advancedAPI=function(V){var U=p===m.COMPAT;return U&&Z.call(this),typeof V!="function"||(V(this),U&&v.call(this)),this},I.compatAPI=function(V){var U=p===m.ADVANCED;return U&&v.call(this),typeof V!="function"||(V(this),U&&Z.call(this)),this},I.isAdvancedAPI=function(){return p===m.ADVANCED};var B,y=function(V){if(p!==m.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},W=I.roundToPrecision=I.__private__.roundToPrecision=function(V,U){var ae=t||U;if(isNaN(V)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(ae).replace(/0+$/,"")};B=I.hpf=I.__private__.hpf=typeof l=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return W(V,l)}:l==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return W(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return W(V,16)};var G=I.f2=I.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return W(V,2)},R=I.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return W(V,3)},X=I.scale=I.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return p===m.COMPAT?V*Ke:p===m.ADVANCED?V:void 0},Y=function(V){return p===m.COMPAT?nl()-V:p===m.ADVANCED?V:void 0},x=function(V){return X(Y(V))};I.__private__.setPrecision=I.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(t=parseInt(V,10))};var D,L="00000000000000000000000000000000",M=I.__private__.getFileId=function(){return L},K=I.__private__.setFileId=function(V){return L=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():L.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(uo=new gI(u.userPermissions,u.userPassword,u.ownerPassword,L)),L};I.setFileId=function(V){return K(V),this},I.getFileId=function(){return M()};var E=I.__private__.convertDateToPDFDate=function(V){var U=V.getTimezoneOffset(),ae=U<0?"+":"-",ce=Math.floor(Math.abs(U/60)),ve=Math.abs(U%60),xe=[ae,j(ce),"'",j(ve),"'"].join("");return["D:",V.getFullYear(),j(V.getMonth()+1),j(V.getDate()),j(V.getHours()),j(V.getMinutes()),j(V.getSeconds()),xe].join("")},O=I.__private__.convertPDFDateToDate=function(V){var U=parseInt(V.substr(2,4),10),ae=parseInt(V.substr(6,2),10)-1,ce=parseInt(V.substr(8,2),10),ve=parseInt(V.substr(10,2),10),xe=parseInt(V.substr(12,2),10),Qe=parseInt(V.substr(14,2),10);return new Date(U,ae,ce,ve,xe,Qe,0)},re=I.__private__.setCreationDate=function(V){var U;if(V===void 0&&(V=new Date),V instanceof Date)U=E(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");U=V}return D=U},H=I.__private__.getCreationDate=function(V){var U=D;return V==="jsDate"&&(U=O(D)),U};I.setCreationDate=function(V){return re(V),this},I.getCreationDate=function(V){return H(V)};var z,j=I.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},$=I.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},ee=0,le=[],Ie=[],Ae=0,Ge=[],We=[],Je=!1,ze=Ie,ke=function(){ee=0,Ae=0,Ie=[],le=[],Ge=[],Fe=se(),it=se()};I.__private__.setCustomOutputDestination=function(V){Je=!0,ze=V};var ye=function(V){Je||(ze=V)};I.__private__.resetCustomOutputDestination=function(){Je=!1,ze=Ie};var oe=I.__private__.out=function(V){return V=V.toString(),Ae+=V.length+1,ze.push(V),ze},ct=I.__private__.write=function(V){return oe(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},te=I.__private__.getArrayBuffer=function(V){for(var U=V.length,ae=new ArrayBuffer(U),ce=new Uint8Array(ae);U--;)ce[U]=V.charCodeAt(U);return ae},ie=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];I.__private__.getStandardFonts=function(){return ie};var ge=e.fontSize||16;I.__private__.setFontSize=I.setFontSize=function(V){return ge=p===m.ADVANCED?V/Ke:V,this};var be,Ze=I.__private__.getFontSize=I.getFontSize=function(){return p===m.COMPAT?ge:ge*Ke},he=e.R2L||!1;I.__private__.setR2L=I.setR2L=function(V){return he=V,this},I.__private__.getR2L=I.getR2L=function(){return he};var Ne,rt=I.__private__.setZoomMode=function(V){var U=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))be=V;else if(isNaN(V)){if(U.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');be=V}else be=parseInt(V,10)};I.__private__.getZoomMode=function(){return be};var st,$e=I.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Ne=V};I.__private__.getPageMode=function(){return Ne};var ht=I.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');st=V};I.__private__.getLayoutMode=function(){return st},I.__private__.setDisplayMode=I.setDisplayMode=function(V,U,ae){return rt(V),ht(U),$e(ae),this};var dt={title:"",subject:"",author:"",keywords:"",creator:""};I.__private__.getDocumentProperty=function(V){if(Object.keys(dt).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return dt[V]},I.__private__.getDocumentProperties=function(){return dt},I.__private__.setDocumentProperties=I.setProperties=I.setDocumentProperties=function(V){for(var U in dt)dt.hasOwnProperty(U)&&V[U]&&(dt[U]=V[U]);return this},I.__private__.setDocumentProperty=function(V,U){if(Object.keys(dt).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return dt[V]=U};var Zt,Ke,mn,Rt,mt,pt={},Nt={},er=[],Ot={},Ia={},Rn={},zr={},Wo=null,Qt=0,yt=[],qt=new xw(I),cn=e.hotfixes||[],pn={},Do={},eo=[],St=function V(U,ae,ce,ve,xe,Qe){if(!(this instanceof V))return new V(U,ae,ce,ve,xe,Qe);isNaN(U)&&(U=1),isNaN(ae)&&(ae=0),isNaN(ce)&&(ce=0),isNaN(ve)&&(ve=1),isNaN(xe)&&(xe=0),isNaN(Qe)&&(Qe=0),this._matrix=[U,ae,ce,ve,xe,Qe]};Object.defineProperty(St.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(St.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(St.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(St.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(St.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(St.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(St.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(St.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(St.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(St.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(St.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(St.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(St.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(St.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(St.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(St.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),St.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(B).join(V)},St.prototype.multiply=function(V){var U=V.sx*this.sx+V.shy*this.shx,ae=V.sx*this.shy+V.shy*this.sy,ce=V.shx*this.sx+V.sy*this.shx,ve=V.shx*this.shy+V.sy*this.sy,xe=V.tx*this.sx+V.ty*this.shx+this.tx,Qe=V.tx*this.shy+V.ty*this.sy+this.ty;return new St(U,ae,ce,ve,xe,Qe)},St.prototype.decompose=function(){var V=this.sx,U=this.shy,ae=this.shx,ce=this.sy,ve=this.tx,xe=this.ty,Qe=Math.sqrt(V*V+U*U),ut=(V/=Qe)*ae+(U/=Qe)*ce;ae-=V*ut,ce-=U*ut;var Bt=Math.sqrt(ae*ae+ce*ce);return ut/=Bt,V*(ce/=Bt)<U*(ae/=Bt)&&(V=-V,U=-U,ut=-ut,Qe=-Qe),{scale:new St(Qe,0,0,Bt,0,0),translate:new St(1,0,0,1,ve,xe),rotate:new St(V,U,-U,V,0,0),skew:new St(1,0,ut,1,0,0)}},St.prototype.toString=function(V){return this.join(" ")},St.prototype.inversed=function(){var V=this.sx,U=this.shy,ae=this.shx,ce=this.sy,ve=this.tx,xe=this.ty,Qe=1/(V*ce-U*ae),ut=ce*Qe,Bt=-U*Qe,zt=-ae*Qe,Mt=V*Qe;return new St(ut,Bt,zt,Mt,-ut*ve-zt*xe,-Bt*ve-Mt*xe)},St.prototype.applyToPoint=function(V){var U=V.x*this.sx+V.y*this.shx+this.tx,ae=V.x*this.shy+V.y*this.sy+this.ty;return new Xc(U,ae)},St.prototype.applyToRectangle=function(V){var U=this.applyToPoint(V),ae=this.applyToPoint(new Xc(V.x+V.w,V.y+V.h));return new Kd(U.x,U.y,ae.x-U.x,ae.y-U.y)},St.prototype.clone=function(){var V=this.sx,U=this.shy,ae=this.shx,ce=this.sy,ve=this.tx,xe=this.ty;return new St(V,U,ae,ce,ve,xe)},I.Matrix=St;var Nr=I.matrixMult=function(V,U){return U.multiply(V)},to=new St(1,0,0,1,0,0);I.unitMatrix=I.identityMatrix=to;var Ar=function(V,U){if(!Ia[V]){var ae=(U instanceof Wl?"Sh":"P")+(Object.keys(Ot).length+1).toString(10);U.id=ae,Ia[V]=ae,Ot[ae]=U,qt.publish("addPattern",U)}};I.ShadingPattern=Wl,I.TilingPattern=Eg,I.addShadingPattern=function(V,U){return y("addShadingPattern()"),Ar(V,U),this},I.beginTilingPattern=function(V){y("beginTilingPattern()"),FA(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},I.endTilingPattern=function(V,U){y("endTilingPattern()"),U.stream=We[z].join(`
`),Ar(V,U),qt.publish("endTilingPattern",U),eo.pop().restore()};var Un=I.__private__.newObject=function(){var V=se();return de(V,!0),V},se=I.__private__.newObjectDeferred=function(){return ee++,le[ee]=function(){return Ae},ee},de=function(V,U){return U=typeof U=="boolean"&&U,le[V]=Ae,U&&oe(V+" 0 obj"),V},we=I.__private__.newAdditionalObject=function(){var V={objId:se(),content:""};return Ge.push(V),V},Fe=se(),it=se(),At=I.__private__.decodeColorString=function(V){var U=V.split(" ");if(U.length!==2||U[1]!=="g"&&U[1]!=="G")U.length===5&&(U[4]==="k"||U[4]==="K")&&(U=[(1-U[0])*(1-U[3]),(1-U[1])*(1-U[3]),(1-U[2])*(1-U[3]),"r"]);else{var ae=parseFloat(U[0]);U=[ae,ae,ae,"r"]}for(var ce="#",ve=0;ve<3;ve++)ce+=("0"+Math.floor(255*parseFloat(U[ve])).toString(16)).slice(-2);return ce},Gt=I.__private__.encodeColorString=function(V){var U;typeof V=="string"&&(V={ch1:V});var ae=V.ch1,ce=V.ch2,ve=V.ch3,xe=V.ch4,Qe=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var ut=new tx(ae);if(ut.ok)ae=ut.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var Bt=parseInt(ae.substr(1),16);ae=Bt>>16&255,ce=Bt>>8&255,ve=255&Bt}if(ce===void 0||xe===void 0&&ae===ce&&ce===ve)if(typeof ae=="string")U=ae+" "+Qe[0];else switch(V.precision){case 2:U=G(ae/255)+" "+Qe[0];break;case 3:default:U=R(ae/255)+" "+Qe[0]}else if(xe===void 0||An(xe)==="object"){if(xe&&!isNaN(xe.a)&&xe.a===0)return U=["1.","1.","1.",Qe[1]].join(" ");if(typeof ae=="string")U=[ae,ce,ve,Qe[1]].join(" ");else switch(V.precision){case 2:U=[G(ae/255),G(ce/255),G(ve/255),Qe[1]].join(" ");break;default:case 3:U=[R(ae/255),R(ce/255),R(ve/255),Qe[1]].join(" ")}}else if(typeof ae=="string")U=[ae,ce,ve,xe,Qe[2]].join(" ");else switch(V.precision){case 2:U=[G(ae),G(ce),G(ve),G(xe),Qe[2]].join(" ");break;case 3:default:U=[R(ae),R(ce),R(ve),R(xe),Qe[2]].join(" ")}return U},He=I.__private__.getFilters=function(){return a},tt=I.__private__.putStream=function(V){var U=(V=V||{}).data||"",ae=V.filters||He(),ce=V.alreadyAppliedFilters||[],ve=V.addLength1||!1,xe=U.length,Qe=V.objectId,ut=function(Co){return Co};if(u!==null&&Qe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(ut=uo.encryptor(Qe,0));var Bt={};ae===!0&&(ae=["FlateEncode"]);var zt=V.additionalKeyValues||[],Mt=(Bt=Wt.API.processDataByFilters!==void 0?Wt.API.processDataByFilters(U,ae):{data:U,reverseChain:[]}).reverseChain+(Array.isArray(ce)?ce.join(" "):ce.toString());if(Bt.data.length!==0&&(zt.push({key:"Length",value:Bt.data.length}),ve===!0&&zt.push({key:"Length1",value:xe})),Mt.length!=0)if(Mt.split("/").length-1==1)zt.push({key:"Filter",value:Mt});else{zt.push({key:"Filter",value:"["+Mt+"]"});for(var gn=0;gn<zt.length;gn+=1)if(zt[gn].key==="DecodeParms"){for(var nr=[],sr=0;sr<Bt.reverseChain.split("/").length-1;sr+=1)nr.push("null");nr.push(zt[gn].value),zt[gn].value="["+nr.join(" ")+"]"}}oe("<<");for(var Sr=0;Sr<zt.length;Sr++)oe("/"+zt[Sr].key+" "+zt[Sr].value);oe(">>"),Bt.data.length!==0&&(oe("stream"),oe(ut(Bt.data)),oe("endstream"))},_e=I.__private__.putPage=function(V){var U=V.number,ae=V.data,ce=V.objId,ve=V.contentsObjId;de(ce,!0),oe("<</Type /Page"),oe("/Parent "+V.rootDictionaryObjId+" 0 R"),oe("/Resources "+V.resourceDictionaryObjId+" 0 R"),oe("/MediaBox ["+parseFloat(B(V.mediaBox.bottomLeftX))+" "+parseFloat(B(V.mediaBox.bottomLeftY))+" "+B(V.mediaBox.topRightX)+" "+B(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&oe("/CropBox ["+B(V.cropBox.bottomLeftX)+" "+B(V.cropBox.bottomLeftY)+" "+B(V.cropBox.topRightX)+" "+B(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&oe("/BleedBox ["+B(V.bleedBox.bottomLeftX)+" "+B(V.bleedBox.bottomLeftY)+" "+B(V.bleedBox.topRightX)+" "+B(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&oe("/TrimBox ["+B(V.trimBox.bottomLeftX)+" "+B(V.trimBox.bottomLeftY)+" "+B(V.trimBox.topRightX)+" "+B(V.trimBox.topRightY)+"]"),V.artBox!==null&&oe("/ArtBox ["+B(V.artBox.bottomLeftX)+" "+B(V.artBox.bottomLeftY)+" "+B(V.artBox.topRightX)+" "+B(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&oe("/UserUnit "+V.userUnit),qt.publish("putPage",{objId:ce,pageContext:yt[U],pageNumber:U,page:ae}),oe("/Contents "+ve+" 0 R"),oe(">>"),oe("endobj");var xe=ae.join(`
`);return p===m.ADVANCED&&(xe+=`
Q`),de(ve,!0),tt({data:xe,filters:He(),objectId:ve}),oe("endobj"),ce},gt=I.__private__.putPages=function(){var V,U,ae=[];for(V=1;V<=Qt;V++)yt[V].objId=se(),yt[V].contentsObjId=se();for(V=1;V<=Qt;V++)ae.push(_e({number:V,data:We[V],objId:yt[V].objId,contentsObjId:yt[V].contentsObjId,mediaBox:yt[V].mediaBox,cropBox:yt[V].cropBox,bleedBox:yt[V].bleedBox,trimBox:yt[V].trimBox,artBox:yt[V].artBox,userUnit:yt[V].userUnit,rootDictionaryObjId:Fe,resourceDictionaryObjId:it}));de(Fe,!0),oe("<</Type /Pages");var ce="/Kids [";for(U=0;U<Qt;U++)ce+=ae[U]+" 0 R ";oe(ce+"]"),oe("/Count "+Qt),oe(">>"),oe("endobj"),qt.publish("postPutPages")},Xt=function(V){qt.publish("putFont",{font:V,out:oe,newObject:Un,putStream:tt}),V.isAlreadyPutted!==!0&&(V.objectNumber=Un(),oe("<<"),oe("/Type /Font"),oe("/BaseFont /"+cI(V.postScriptName)),oe("/Subtype /Type1"),typeof V.encoding=="string"&&oe("/Encoding /"+V.encoding),oe("/FirstChar 32"),oe("/LastChar 255"),oe(">>"),oe("endobj"))},_t=function(){for(var V in pt)pt.hasOwnProperty(V)&&(g===!1||g===!0&&d.hasOwnProperty(V))&&Xt(pt[V])},ln=function(V){V.objectNumber=Un();var U=[];U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Form"}),U.push({key:"BBox",value:"["+[B(V.x),B(V.y),B(V.x+V.width),B(V.y+V.height)].join(" ")+"]"}),U.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var ae=V.pages[1].join(`
`);tt({data:ae,additionalKeyValues:U,objectId:V.objectNumber}),oe("endobj")},Tt=function(){for(var V in pn)pn.hasOwnProperty(V)&&ln(pn[V])},tr=function(V,U){var ae,ce=[],ve=1/(U-1);for(ae=0;ae<1;ae+=ve)ce.push(ae);if(ce.push(1),V[0].offset!=0){var xe={offset:0,color:V[0].color};V.unshift(xe)}if(V[V.length-1].offset!=1){var Qe={offset:1,color:V[V.length-1].color};V.push(Qe)}for(var ut="",Bt=0,zt=0;zt<ce.length;zt++){for(ae=ce[zt];ae>V[Bt+1].offset;)Bt++;var Mt=V[Bt].offset,gn=(ae-Mt)/(V[Bt+1].offset-Mt),nr=V[Bt].color,sr=V[Bt+1].color;ut+=$(Math.round((1-gn)*nr[0]+gn*sr[0]).toString(16))+$(Math.round((1-gn)*nr[1]+gn*sr[1]).toString(16))+$(Math.round((1-gn)*nr[2]+gn*sr[2]).toString(16))}return ut.trim()},On=function(V,U){U||(U=21);var ae=Un(),ce=tr(V.colors,U),ve=[];ve.push({key:"FunctionType",value:"0"}),ve.push({key:"Domain",value:"[0.0 1.0]"}),ve.push({key:"Size",value:"["+U+"]"}),ve.push({key:"BitsPerSample",value:"8"}),ve.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ve.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tt({data:ce,additionalKeyValues:ve,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),oe("endobj"),V.objectNumber=Un(),oe("<< /ShadingType "+V.type),oe("/ColorSpace /DeviceRGB");var xe="/Coords ["+B(parseFloat(V.coords[0]))+" "+B(parseFloat(V.coords[1]))+" ";V.type===2?xe+=B(parseFloat(V.coords[2]))+" "+B(parseFloat(V.coords[3])):xe+=B(parseFloat(V.coords[2]))+" "+B(parseFloat(V.coords[3]))+" "+B(parseFloat(V.coords[4]))+" "+B(parseFloat(V.coords[5])),oe(xe+="]"),V.matrix&&oe("/Matrix ["+V.matrix.toString()+"]"),oe("/Function "+ae+" 0 R"),oe("/Extend [true true]"),oe(">>"),oe("endobj")},ms=function(V,U){var ae=se(),ce=Un();U.push({resourcesOid:ae,objectOid:ce}),V.objectNumber=ce;var ve=[];ve.push({key:"Type",value:"/Pattern"}),ve.push({key:"PatternType",value:"1"}),ve.push({key:"PaintType",value:"1"}),ve.push({key:"TilingType",value:"1"}),ve.push({key:"BBox",value:"["+V.boundingBox.map(B).join(" ")+"]"}),ve.push({key:"XStep",value:B(V.xStep)}),ve.push({key:"YStep",value:B(V.yStep)}),ve.push({key:"Resources",value:ae+" 0 R"}),V.matrix&&ve.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),tt({data:V.stream,additionalKeyValues:ve,objectId:V.objectNumber}),oe("endobj")},Io=function(V){var U;for(U in Ot)Ot.hasOwnProperty(U)&&(Ot[U]instanceof Wl?On(Ot[U]):Ot[U]instanceof Eg&&ms(Ot[U],V))},da=function(V){for(var U in V.objectNumber=Un(),oe("<<"),V)switch(U){case"opacity":oe("/ca "+G(V[U]));break;case"stroke-opacity":oe("/CA "+G(V[U]))}oe(">>"),oe("endobj")},Ki=function(){var V;for(V in Rn)Rn.hasOwnProperty(V)&&da(Rn[V])},Ka=function(){for(var V in oe("/XObject <<"),pn)pn.hasOwnProperty(V)&&pn[V].objectNumber>=0&&oe("/"+V+" "+pn[V].objectNumber+" 0 R");qt.publish("putXobjectDict"),oe(">>")},ui=function(){uo.oid=Un(),oe("<<"),oe("/Filter /Standard"),oe("/V "+uo.v),oe("/R "+uo.r),oe("/U <"+uo.toHexString(uo.U)+">"),oe("/O <"+uo.toHexString(uo.O)+">"),oe("/P "+uo.P),oe(">>"),oe("endobj")},ps=function(){for(var V in oe("/Font <<"),pt)pt.hasOwnProperty(V)&&(g===!1||g===!0&&d.hasOwnProperty(V))&&oe("/"+V+" "+pt[V].objectNumber+" 0 R");oe(">>")},qs=function(){if(Object.keys(Ot).length>0){for(var V in oe("/Shading <<"),Ot)Ot.hasOwnProperty(V)&&Ot[V]instanceof Wl&&Ot[V].objectNumber>=0&&oe("/"+V+" "+Ot[V].objectNumber+" 0 R");qt.publish("putShadingPatternDict"),oe(">>")}},ua=function(V){if(Object.keys(Ot).length>0){for(var U in oe("/Pattern <<"),Ot)Ot.hasOwnProperty(U)&&Ot[U]instanceof I.TilingPattern&&Ot[U].objectNumber>=0&&Ot[U].objectNumber<V&&oe("/"+U+" "+Ot[U].objectNumber+" 0 R");qt.publish("putTilingPatternDict"),oe(">>")}},Lt=function(){if(Object.keys(Rn).length>0){var V;for(V in oe("/ExtGState <<"),Rn)Rn.hasOwnProperty(V)&&Rn[V].objectNumber>=0&&oe("/"+V+" "+Rn[V].objectNumber+" 0 R");qt.publish("putGStateDict"),oe(">>")}},Et=function(V){de(V.resourcesOid,!0),oe("<<"),oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ps(),qs(),ua(V.objectOid),Lt(),Ka(),oe(">>"),oe("endobj")},Tr=function(){var V=[];_t(),Ki(),Tt(),Io(V),qt.publish("putResources"),V.forEach(Et),Et({resourcesOid:it,objectOid:Number.MAX_SAFE_INTEGER}),qt.publish("postPutResources")},Nn=function(){qt.publish("putAdditionalObjects");for(var V=0;V<Ge.length;V++){var U=Ge[V];de(U.objId,!0),oe(U.content),oe("endobj")}qt.publish("postPutAdditionalObjects")},zo=function(V){Nt[V.fontName]=Nt[V.fontName]||{},Nt[V.fontName][V.fontStyle]=V.id},$s=function(V,U,ae,ce,ve){var xe={id:"F"+(Object.keys(pt).length+1).toString(10),postScriptName:V,fontName:U,fontStyle:ae,encoding:ce,isStandardFont:ve||!1,metadata:{}};return qt.publish("addFont",{font:xe,instance:this}),pt[xe.id]=xe,zo(xe),xe.id},kd=function(V){for(var U=0,ae=ie.length;U<ae;U++){var ce=$s.call(this,V[U][0],V[U][1],V[U][2],ie[U][3],!0);g===!1&&(d[ce]=!0);var ve=V[U][0].split("-");zo({id:ce,fontName:ve[0],fontStyle:ve[1]||""})}qt.publish("addFonts",{fonts:pt,dictionary:Nt})},Ca=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(ce){var U=ce.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var ae="Error in function "+U.split(`
`)[0].split("<")[0]+": "+ce.message;if(!xt.console)throw new Error(ae);xt.console.error(ae,ce),xt.alert&&alert(ae)}},V.foo.bar=V,V.foo},Bc=function(V,U){var ae,ce,ve,xe,Qe,ut,Bt,zt,Mt;if(ve=(U=U||{}).sourceEncoding||"Unicode",Qe=U.outputEncoding,(U.autoencode||Qe)&&pt[Zt].metadata&&pt[Zt].metadata[ve]&&pt[Zt].metadata[ve].encoding&&(xe=pt[Zt].metadata[ve].encoding,!Qe&&pt[Zt].encoding&&(Qe=pt[Zt].encoding),!Qe&&xe.codePages&&(Qe=xe.codePages[0]),typeof Qe=="string"&&(Qe=xe[Qe]),Qe)){for(Bt=!1,ut=[],ae=0,ce=V.length;ae<ce;ae++)(zt=Qe[V.charCodeAt(ae)])?ut.push(String.fromCharCode(zt)):ut.push(V[ae]),ut[ae].charCodeAt(0)>>8&&(Bt=!0);V=ut.join("")}for(ae=V.length;Bt===void 0&&ae!==0;)V.charCodeAt(ae-1)>>8&&(Bt=!0),ae--;if(!Bt)return V;for(ut=U.noBOM?[]:[254,255],ae=0,ce=V.length;ae<ce;ae++){if((Mt=(zt=V.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ut.push(Mt),ut.push(zt-(Mt<<8))}return String.fromCharCode.apply(void 0,ut)},To=I.__private__.pdfEscape=I.pdfEscape=function(V,U){return Bc(V,U).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vd=I.__private__.beginPage=function(V){We[++Qt]=[],yt[Qt]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},wA(Qt),ye(We[z])},BA=function(V,U){var ae,ce,ve;switch(n=U||n,typeof V=="string"&&(ae=A(V.toLowerCase()),Array.isArray(ae)&&(ce=ae[0],ve=ae[1])),Array.isArray(V)&&(ce=V[0]*Ke,ve=V[1]*Ke),isNaN(ce)&&(ce=o[0],ve=o[1]),(ce>14400||ve>14400)&&(Ln.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ce=Math.min(14400,ce),ve=Math.min(14400,ve)),o=[ce,ve],n.substr(0,1)){case"l":ve>ce&&(o=[ve,ce]);break;case"p":ce>ve&&(o=[ve,ce])}Vd(o),JA(Yd),oe(Aa),Hd!==0&&oe(Hd+" J"),Fd!==0&&oe(Fd+" j"),qt.publish("addPage",{pageNumber:Qt})},b0=function(V){V>0&&V<=Qt&&(We.splice(V,1),yt.splice(V,1),Qt--,z>Qt&&(z=Qt),this.setPage(z))},wA=function(V){V>0&&V<=Qt&&(z=V)},y0=I.__private__.getNumberOfPages=I.getNumberOfPages=function(){return We.length-1},WA=function(V,U,ae){var ce,ve=void 0;return ae=ae||{},V=V!==void 0?V:pt[Zt].fontName,U=U!==void 0?U:pt[Zt].fontStyle,ce=V.toLowerCase(),Nt[ce]!==void 0&&Nt[ce][U]!==void 0?ve=Nt[ce][U]:Nt[V]!==void 0&&Nt[V][U]!==void 0?ve=Nt[V][U]:ae.disableWarning===!1&&Ln.warn("Unable to look up font label for font '"+V+"', '"+U+"'. Refer to getFontList() for available fonts."),ve||ae.noFallback||(ve=Nt.times[U])==null&&(ve=Nt.times.normal),ve},Z0=I.__private__.putInfo=function(){var V=Un(),U=function(ce){return ce};for(var ae in u!==null&&(U=uo.encryptor(V,0)),oe("<<"),oe("/Producer ("+To(U("jsPDF "+Wt.version))+")"),dt)dt.hasOwnProperty(ae)&&dt[ae]&&oe("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+To(U(dt[ae]))+")");oe("/CreationDate ("+To(U(D))+")"),oe(">>"),oe("endobj")},Xd=I.__private__.putCatalog=function(V){var U=(V=V||{}).rootDictionaryObjId||Fe;switch(Un(),oe("<<"),oe("/Type /Catalog"),oe("/Pages "+U+" 0 R"),be||(be="fullwidth"),be){case"fullwidth":oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":oe("/OpenAction [3 0 R /Fit]");break;case"original":oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+be;ae.substr(ae.length-1)==="%"&&(be=parseInt(be)/100),typeof be=="number"&&oe("/OpenAction [3 0 R /XYZ null null "+G(be)+"]")}switch(st||(st="continuous"),st){case"continuous":oe("/PageLayout /OneColumn");break;case"single":oe("/PageLayout /SinglePage");break;case"two":case"twoleft":oe("/PageLayout /TwoColumnLeft");break;case"tworight":oe("/PageLayout /TwoColumnRight")}Ne&&oe("/PageMode /"+Ne),qt.publish("putCatalog"),oe(">>"),oe("endobj")},v0=I.__private__.putTrailer=function(){oe("trailer"),oe("<<"),oe("/Size "+(ee+1)),oe("/Root "+ee+" 0 R"),oe("/Info "+(ee-1)+" 0 R"),u!==null&&oe("/Encrypt "+uo.oid+" 0 R"),oe("/ID [ <"+L+"> <"+L+"> ]"),oe(">>")},G0=I.__private__.putHeader=function(){oe("%PDF-"+C),oe("%ºß¬à")},S0=I.__private__.putXRef=function(){var V="0000000000";oe("xref"),oe("0 "+(ee+1)),oe("0000000000 65535 f ");for(var U=1;U<=ee;U++)typeof le[U]=="function"?oe((V+le[U]()).slice(-10)+" 00000 n "):le[U]!==void 0?oe((V+le[U]).slice(-10)+" 00000 n "):oe("0000000000 00000 n ")},fs=I.__private__.buildDocument=function(){ke(),ye(Ie),qt.publish("buildDocument"),G0(),gt(),Nn(),Tr(),u!==null&&ui(),Z0(),Xd();var V=Ae;return S0(),v0(),oe("startxref"),oe(""+V),oe("%%EOF"),ye(We[z]),Ie.join(`
`)},wc=I.__private__.getBlob=function(V){return new Blob([te(V)],{type:"application/pdf"})},Wc=I.output=I.__private__.output=Ca(function(V,U){switch(typeof(U=U||{})=="string"?U={filename:U}:U.filename=U.filename||"generated.pdf",V){case void 0:return fs();case"save":I.save(U.filename);break;case"arraybuffer":return te(fs());case"blob":return wc(fs());case"bloburi":case"bloburl":if(xt.URL!==void 0&&typeof xt.URL.createObjectURL=="function")return xt.URL&&xt.URL.createObjectURL(wc(fs()))||void 0;Ln.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",ce=fs();try{ae=ZZ(ce)}catch{ae=ZZ(unescape(encodeURIComponent(ce)))}return"data:application/pdf;filename="+U.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(xt)==="[object Window]"){var ve="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';U.pdfObjectUrl&&(ve=U.pdfObjectUrl,xe="");var Qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ve+'"'+xe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(U)+");<\/script></body></html>",ut=xt.open();return ut!==null&&ut.document.write(Qe),ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(xt)==="[object Window]"){var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(U.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+U.filename+'" width="500px" height="400px" /></body></html>',zt=xt.open();if(zt!==null){zt.document.write(Bt);var Mt=this;zt.document.documentElement.querySelector("#pdfViewer").onload=function(){zt.document.title=U.filename,zt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Mt.output("bloburl"))}}return zt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(xt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var gn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",U)+'"></iframe></body></html>',nr=xt.open();if(nr!==null&&(nr.document.write(gn),nr.document.title=U.filename),nr||typeof safari>"u")return nr;break;case"datauri":case"dataurl":return xt.document.location.href=this.output("datauristring",U);default:return null}}),RA=function(V){return Array.isArray(cn)===!0&&cn.indexOf(V)>-1};switch(r){case"pt":Ke=1;break;case"mm":Ke=72/25.4;break;case"cm":Ke=72/2.54;break;case"in":Ke=72;break;case"px":Ke=RA("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ke=12;break;case"ex":Ke=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ke=r}var uo=null;re(),K();var B0=function(V){return u!==null?uo.encryptor(V,0):function(U){return U}},kA=I.__private__.getPageInfo=I.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:yt[V].objId,pageNumber:V,pageContext:yt[V]}},Ft=I.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var U in yt)if(yt[U].objId===V)break;return kA(U)},w0=I.__private__.getCurrentPageInfo=I.getCurrentPageInfo=function(){return{objId:yt[z].objId,pageNumber:z,pageContext:yt[z]}};I.addPage=function(){return BA.apply(this,arguments),this},I.setPage=function(){return wA.apply(this,arguments),ye.call(this,We[z]),this},I.insertPage=function(V){return this.addPage(),this.movePage(z,V),this},I.movePage=function(V,U){var ae,ce;if(V>U){ae=We[V],ce=yt[V];for(var ve=V;ve>U;ve--)We[ve]=We[ve-1],yt[ve]=yt[ve-1];We[U]=ae,yt[U]=ce,this.setPage(U)}else if(V<U){ae=We[V],ce=yt[V];for(var xe=V;xe<U;xe++)We[xe]=We[xe+1],yt[xe]=yt[xe+1];We[U]=ae,yt[U]=ce,this.setPage(U)}return this},I.deletePage=function(){return b0.apply(this,arguments),this},I.__private__.text=I.text=function(V,U,ae,ce,ve){var xe,Qe,ut,Bt,zt,Mt,gn,nr,sr,Sr=(ce=ce||{}).scope||this;if(typeof V=="number"&&typeof U=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Co=ae;ae=U,U=V,V=Co}if(arguments[3]instanceof St?(y("The transform parameter of text() with a Matrix value"),sr=ve):(ut=arguments[4],Bt=arguments[5],An(gn=arguments[3])==="object"&&gn!==null||(typeof ut=="string"&&(Bt=ut,ut=null),typeof gn=="string"&&(Bt=gn,gn=null),typeof gn=="number"&&(ut=gn,gn=null),ce={flags:gn,angle:ut,align:Bt})),isNaN(U)||isNaN(ae)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return Sr;var Ur="",ha=!1,Ci=typeof ce.lineHeightFactor=="number"?ce.lineHeightFactor:Ag,Ma=Sr.internal.scaleFactor;function KA(En){return En=En.split("	").join(Array(ce.TabLen||9).join(" ")),To(En,gn)}function Dd(En){for(var Mn,mr=En.concat(),Hr=[],Gs=mr.length;Gs--;)typeof(Mn=mr.shift())=="string"?Hr.push(Mn):Array.isArray(En)&&(Mn.length===1||Mn[1]===void 0&&Mn[2]===void 0)?Hr.push(Mn[0]):Hr.push([Mn[0],Mn[1],Mn[2]]);return Hr}function zd(En,Mn){var mr;if(typeof En=="string")mr=Mn(En)[0];else if(Array.isArray(En)){for(var Hr,Gs,qd=En.concat(),Dc=[],zA=qd.length;zA--;)typeof(Hr=qd.shift())=="string"?Dc.push(Mn(Hr)[0]):Array.isArray(Hr)&&typeof Hr[0]=="string"&&(Gs=Mn(Hr[0],Hr[1],Hr[2]),Dc.push([Gs[0],Gs[1],Gs[2]]));mr=Dc}return mr}var xc=!1,Td=!0;if(typeof V=="string")xc=!0;else if(Array.isArray(V)){var Ud=V.concat();Qe=[];for(var Yc,no=Ud.length;no--;)(typeof(Yc=Ud.shift())!="string"||Array.isArray(Yc)&&typeof Yc[0]!="string")&&(Td=!1);xc=Td}if(xc===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var Nc=ge/Sr.internal.scaleFactor,Hc=Nc*(Ci-1);switch(ce.baseline){case"bottom":ae-=Hc;break;case"top":ae+=Nc-Hc;break;case"hanging":ae+=Nc-2*Hc;break;case"middle":ae+=Nc/2-Hc}if((Mt=ce.maxWidth||0)>0&&(typeof V=="string"?V=Sr.splitTextToSize(V,Mt):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(En,Mn){return En.concat(Sr.splitTextToSize(Mn,Mt))},[]))),xe={text:V,x:U,y:ae,options:ce,mutex:{pdfEscape:To,activeFontKey:Zt,fonts:pt,activeFontSize:ge}},qt.publish("preProcessText",xe),V=xe.text,ut=(ce=xe.options).angle,!(sr instanceof St)&&ut&&typeof ut=="number"){ut*=Math.PI/180,ce.rotationDirection===0&&(ut=-ut),p===m.ADVANCED&&(ut=-ut);var Fc=Math.cos(ut),jd=Math.sin(ut);sr=new St(Fc,jd,-jd,Fc,0,0)}else ut&&ut instanceof St&&(sr=ut);p!==m.ADVANCED||sr||(sr=to),(zt=ce.charSpace||Vc)!==void 0&&(Ur+=B(X(zt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(nr=ce.horizontalScale)!==void 0&&(Ur+=B(100*nr)+` Tz
`),ce.lang;var Uo=-1,H0=ce.renderingMode!==void 0?ce.renderingMode:ce.stroke,Qd=Sr.internal.getCurrentPageInfo().pageContext;switch(H0){case 0:case!1:case"fill":Uo=0;break;case 1:case!0:case"stroke":Uo=1;break;case 2:case"fillThenStroke":Uo=2;break;case 3:case"invisible":Uo=3;break;case 4:case"fillAndAddForClipping":Uo=4;break;case 5:case"strokeAndAddPathForClipping":Uo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Uo=6;break;case 7:case"addToPathForClipping":Uo=7}var LA=Qd.usedRenderingMode!==void 0?Qd.usedRenderingMode:-1;Uo!==-1?Ur+=Uo+` Tr
`:LA!==-1&&(Ur+=`0 Tr
`),Uo!==-1&&(Qd.usedRenderingMode=Uo),Bt=ce.align||"left";var Li,Kc=ge*Ci,EA=Sr.internal.pageSize.getWidth(),MA=pt[Zt];zt=ce.charSpace||Vc,Mt=ce.maxWidth||0,gn=Object.assign({autoencode:!0,noBOM:!0},ce.flags);var rl=[],pg=function(En){return Sr.getStringUnitWidth(En,{font:MA,charSpace:zt,fontSize:ge,doKerning:!1})*ge/Ma};if(Object.prototype.toString.call(V)==="[object Array]"){var jo;Qe=Dd(V),Bt!=="left"&&(Li=Qe.map(pg));var Ro,ol=0;if(Bt==="right"){U-=Li[0],V=[],no=Qe.length;for(var ys=0;ys<no;ys++)ys===0?(Ro=Ea(U),jo=bs(ae)):(Ro=X(ol-Li[ys]),jo=-Kc),V.push([Qe[ys],Ro,jo]),ol=Li[ys]}else if(Bt==="center"){U-=Li[0]/2,V=[],no=Qe.length;for(var Zs=0;Zs<no;Zs++)Zs===0?(Ro=Ea(U),jo=bs(ae)):(Ro=X((ol-Li[Zs])/2),jo=-Kc),V.push([Qe[Zs],Ro,jo]),ol=Li[Zs]}else if(Bt==="left"){V=[],no=Qe.length;for(var Lc=0;Lc<no;Lc++)V.push(Qe[Lc])}else if(Bt==="justify"&&MA.encoding==="Identity-H"){V=[],no=Qe.length,Mt=Mt!==0?Mt:EA;for(var vs=0,hr=0;hr<no;hr++)if(jo=hr===0?bs(ae):-Kc,Ro=hr===0?Ea(U):vs,hr<no-1){var Pd=X((Mt-Li[hr])/(Qe[hr].split(" ").length-1)),ko=Qe[hr].split(" ");V.push([ko[0]+" ",Ro,jo]),vs=0;for(var Ei=1;Ei<ko.length;Ei++){var Ec=(pg(ko[Ei-1]+" "+ko[Ei])-pg(ko[Ei]))*Ma+Pd;Ei==ko.length-1?V.push([ko[Ei],Ec,0]):V.push([ko[Ei]+" ",Ec,0]),vs-=Ec}}else V.push([Qe[hr],Ro,jo]);V.push(["",vs,0])}else{if(Bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],no=Qe.length,Mt=Mt!==0?Mt:EA,hr=0;hr<no;hr++)jo=hr===0?bs(ae):-Kc,Ro=hr===0?Ea(U):0,hr<no-1?rl.push(B(X((Mt-Li[hr])/(Qe[hr].split(" ").length-1)))):rl.push(0),V.push([Qe[hr],Ro,jo])}}var DA=typeof ce.R2L=="boolean"?ce.R2L:he;DA===!0&&(V=zd(V,function(En,Mn,mr){return[En.split("").reverse().join(""),Mn,mr]})),xe={text:V,x:U,y:ae,options:ce,mutex:{pdfEscape:To,activeFontKey:Zt,fonts:pt,activeFontSize:ge}},qt.publish("postProcessText",xe),V=xe.text,ha=xe.mutex.isHex||!1;var Od=pt[Zt].encoding;Od!=="WinAnsiEncoding"&&Od!=="StandardEncoding"||(V=zd(V,function(En,Mn,mr){return[KA(En),Mn,mr]})),Qe=Dd(V),V=[];for(var fg,bg,il,yg=0,Mc=1,Zg=Array.isArray(Qe[0])?Mc:yg,al="",_d=function(En,Mn,mr){var Hr="";return mr instanceof St?(mr=typeof ce.angle=="number"?Nr(mr,new St(1,0,0,1,En,Mn)):Nr(new St(1,0,0,1,En,Mn),mr),p===m.ADVANCED&&(mr=Nr(new St(1,0,0,-1,0,0),mr)),Hr=mr.join(" ")+` Tm
`):Hr=B(En)+" "+B(Mn)+` Td
`,Hr},Mi=0;Mi<Qe.length;Mi++){switch(al="",Zg){case Mc:il=(ha?"<":"(")+Qe[Mi][0]+(ha?">":")"),fg=parseFloat(Qe[Mi][1]),bg=parseFloat(Qe[Mi][2]);break;case yg:il=(ha?"<":"(")+Qe[Mi]+(ha?">":")"),fg=Ea(U),bg=bs(ae)}rl!==void 0&&rl[Mi]!==void 0&&(al=rl[Mi]+` Tw
`),Mi===0?V.push(al+_d(fg,bg,sr)+il):Zg===yg?V.push(al+il):Zg===Mc&&V.push(al+_d(fg,bg,sr)+il)}V=Zg===yg?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Di=`BT
/`;return Di+=Zt+" "+ge+` Tf
`,Di+=B(ge*Ci)+` TL
`,Di+=hg+`
`,Di+=Ur,Di+=V,oe(Di+="ET"),d[Zt]=!0,Sr};var W0=I.__private__.clip=I.clip=function(V){return oe(V==="evenodd"?"W*":"W"),this};I.clipEvenOdd=function(){return W0("evenodd")},I.__private__.discardPath=I.discardPath=function(){return oe("n"),this};var La=I.__private__.isValidStyle=function(V){var U=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(U=!0),U};I.__private__.setDefaultPathOperation=I.setDefaultPathOperation=function(V){return La(V)&&(c=V),this};var VA=I.__private__.getStyle=I.getStyle=function(V){var U=c;switch(V){case"D":case"S":U="S";break;case"F":U="f";break;case"FD":case"DF":U="B";break;case"f":case"f*":case"B":case"B*":U=V}return U},XA=I.close=function(){return oe("h"),this};I.stroke=function(){return oe("S"),this},I.fill=function(V){return Rc("f",V),this},I.fillEvenOdd=function(V){return Rc("f*",V),this},I.fillStroke=function(V){return Rc("B",V),this},I.fillStrokeEvenOdd=function(V){return Rc("B*",V),this};var Rc=function(V,U){An(U)==="object"?k0(U,V):oe(V)},Jd=function(V){V===null||p===m.ADVANCED&&V===void 0||(V=VA(V),oe(V))};function R0(V,U,ae,ce,ve){var xe=new Eg(U||this.boundingBox,ae||this.xStep,ce||this.yStep,this.gState,ve||this.matrix);xe.stream=this.stream;var Qe=V+"$$"+this.cloneIndex+++"$$";return Ar(Qe,xe),xe}var k0=function(V,U){var ae=Ia[V.key],ce=Ot[ae];if(ce instanceof Wl)oe("q"),oe(V0(U)),ce.gState&&I.setGState(ce.gState),oe(V.matrix.toString()+" cm"),oe("/"+ae+" sh"),oe("Q");else if(ce instanceof Eg){var ve=new St(1,0,0,-1,0,nl());V.matrix&&(ve=ve.multiply(V.matrix||to),ae=R0.call(ce,V.key,V.boundingBox,V.xStep,V.yStep,ve).id),oe("q"),oe("/Pattern cs"),oe("/"+ae+" scn"),ce.gState&&I.setGState(ce.gState),oe(U),oe("Q")}},V0=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},xd=I.moveTo=function(V,U){return oe(B(X(V))+" "+B(x(U))+" m"),this},Cg=I.lineTo=function(V,U){return oe(B(X(V))+" "+B(x(U))+" l"),this},el=I.curveTo=function(V,U,ae,ce,ve,xe){return oe([B(X(V)),B(x(U)),B(X(ae)),B(x(ce)),B(X(ve)),B(x(xe)),"c"].join(" ")),this};I.__private__.line=I.line=function(V,U,ae,ce,ve){if(isNaN(V)||isNaN(U)||isNaN(ae)||isNaN(ce)||!La(ve))throw new Error("Invalid arguments passed to jsPDF.line");return p===m.COMPAT?this.lines([[ae-V,ce-U]],V,U,[1,1],ve||"S"):this.lines([[ae-V,ce-U]],V,U,[1,1]).stroke()},I.__private__.lines=I.lines=function(V,U,ae,ce,ve,xe){var Qe,ut,Bt,zt,Mt,gn,nr,sr,Sr,Co,Ur,ha;if(typeof V=="number"&&(ha=ae,ae=U,U=V,V=ha),ce=ce||[1,1],xe=xe||!1,isNaN(U)||isNaN(ae)||!Array.isArray(V)||!Array.isArray(ce)||!La(ve)||typeof xe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xd(U,ae),Qe=ce[0],ut=ce[1],zt=V.length,Co=U,Ur=ae,Bt=0;Bt<zt;Bt++)(Mt=V[Bt]).length===2?(Co=Mt[0]*Qe+Co,Ur=Mt[1]*ut+Ur,Cg(Co,Ur)):(gn=Mt[0]*Qe+Co,nr=Mt[1]*ut+Ur,sr=Mt[2]*Qe+Co,Sr=Mt[3]*ut+Ur,Co=Mt[4]*Qe+Co,Ur=Mt[5]*ut+Ur,el(gn,nr,sr,Sr,Co,Ur));return xe&&XA(),Jd(ve),this},I.path=function(V){for(var U=0;U<V.length;U++){var ae=V[U],ce=ae.c;switch(ae.op){case"m":xd(ce[0],ce[1]);break;case"l":Cg(ce[0],ce[1]);break;case"c":el.apply(this,ce);break;case"h":XA()}}return this},I.__private__.rect=I.rect=function(V,U,ae,ce,ve){if(isNaN(V)||isNaN(U)||isNaN(ae)||isNaN(ce)||!La(ve))throw new Error("Invalid arguments passed to jsPDF.rect");return p===m.COMPAT&&(ce=-ce),oe([B(X(V)),B(x(U)),B(X(ae)),B(X(ce)),"re"].join(" ")),Jd(ve),this},I.__private__.triangle=I.triangle=function(V,U,ae,ce,ve,xe,Qe){if(isNaN(V)||isNaN(U)||isNaN(ae)||isNaN(ce)||isNaN(ve)||isNaN(xe)||!La(Qe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-V,ce-U],[ve-ae,xe-ce],[V-ve,U-xe]],V,U,[1,1],Qe,!0),this},I.__private__.roundedRect=I.roundedRect=function(V,U,ae,ce,ve,xe,Qe){if(isNaN(V)||isNaN(U)||isNaN(ae)||isNaN(ce)||isNaN(ve)||isNaN(xe)||!La(Qe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ut=4/3*(Math.SQRT2-1);return ve=Math.min(ve,.5*ae),xe=Math.min(xe,.5*ce),this.lines([[ae-2*ve,0],[ve*ut,0,ve,xe-xe*ut,ve,xe],[0,ce-2*xe],[0,xe*ut,-ve*ut,xe,-ve,xe],[2*ve-ae,0],[-ve*ut,0,-ve,-xe*ut,-ve,-xe],[0,2*xe-ce],[0,-xe*ut,ve*ut,-xe,ve,-xe]],V+ve,U,[1,1],Qe,!0),this},I.__private__.ellipse=I.ellipse=function(V,U,ae,ce,ve){if(isNaN(V)||isNaN(U)||isNaN(ae)||isNaN(ce)||!La(ve))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xe=4/3*(Math.SQRT2-1)*ae,Qe=4/3*(Math.SQRT2-1)*ce;return xd(V+ae,U),el(V+ae,U-Qe,V+xe,U-ce,V,U-ce),el(V-xe,U-ce,V-ae,U-Qe,V-ae,U),el(V-ae,U+Qe,V-xe,U+ce,V,U+ce),el(V+xe,U+ce,V+ae,U+Qe,V+ae,U),Jd(ve),this},I.__private__.circle=I.circle=function(V,U,ae,ce){if(isNaN(V)||isNaN(U)||isNaN(ae)||!La(ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,U,ae,ae,ce)},I.setFont=function(V,U,ae){return ae&&(U=k(U,ae)),Zt=WA(V,U,{disableWarning:!1}),this};var X0=I.__private__.getFont=I.getFont=function(){return pt[WA.apply(I,arguments)]};I.__private__.getFontList=I.getFontList=function(){var V,U,ae={};for(V in Nt)if(Nt.hasOwnProperty(V))for(U in ae[V]=[],Nt[V])Nt[V].hasOwnProperty(U)&&ae[V].push(U);return ae},I.addFont=function(V,U,ae,ce,ve){var xe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xe.indexOf(arguments[3])!==-1?ve=arguments[3]:arguments[3]&&xe.indexOf(arguments[3])==-1&&(ae=k(ae,ce)),ve=ve||"Identity-H",$s.call(this,V,U,ae,ve)};var Ag,Yd=e.lineWidth||.200025,kc=I.__private__.getLineWidth=I.getLineWidth=function(){return Yd},JA=I.__private__.setLineWidth=I.setLineWidth=function(V){return Yd=V,oe(B(X(V))+" w"),this};I.__private__.setLineDash=Wt.API.setLineDash=Wt.API.setLineDashPattern=function(V,U){if(V=V||[],U=U||0,isNaN(U)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(ae){return B(X(ae))}).join(" "),U=B(X(U)),oe("["+V+"] "+U+" d"),this};var xA=I.__private__.getLineHeight=I.getLineHeight=function(){return ge*Ag};I.__private__.getLineHeight=I.getLineHeight=function(){return ge*Ag};var YA=I.__private__.setLineHeightFactor=I.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(Ag=V),this},NA=I.__private__.getLineHeightFactor=I.getLineHeightFactor=function(){return Ag};YA(e.lineHeight);var Ea=I.__private__.getHorizontalCoordinate=function(V){return X(V)},bs=I.__private__.getVerticalCoordinate=function(V){return p===m.ADVANCED?V:yt[z].mediaBox.topRightY-yt[z].mediaBox.bottomLeftY-X(V)},J0=I.__private__.getHorizontalCoordinateString=I.getHorizontalCoordinateString=function(V){return B(Ea(V))},tl=I.__private__.getVerticalCoordinateString=I.getVerticalCoordinateString=function(V){return B(bs(V))},Aa=e.strokeColor||"0 G";I.__private__.getStrokeColor=I.getDrawColor=function(){return At(Aa)},I.__private__.setStrokeColor=I.setDrawColor=function(V,U,ae,ce){return Aa=Gt({ch1:V,ch2:U,ch3:ae,ch4:ce,pdfColorType:"draw",precision:2}),oe(Aa),this};var Nd=e.fillColor||"0 g";I.__private__.getFillColor=I.getFillColor=function(){return At(Nd)},I.__private__.setFillColor=I.setFillColor=function(V,U,ae,ce){return Nd=Gt({ch1:V,ch2:U,ch3:ae,ch4:ce,pdfColorType:"fill",precision:2}),oe(Nd),this};var hg=e.textColor||"0 g",x0=I.__private__.getTextColor=I.getTextColor=function(){return At(hg)};I.__private__.setTextColor=I.setTextColor=function(V,U,ae,ce){return hg=Gt({ch1:V,ch2:U,ch3:ae,ch4:ce,pdfColorType:"text",precision:3}),this};var Vc=e.charSpace,Y0=I.__private__.getCharSpace=I.getCharSpace=function(){return parseFloat(Vc||0)};I.__private__.setCharSpace=I.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Vc=V,this};var Hd=0;I.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},I.__private__.setLineCap=I.setLineCap=function(V){var U=I.CapJoinStyles[V];if(U===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hd=U,oe(U+" J"),this};var Fd=0;I.__private__.setLineJoin=I.setLineJoin=function(V){var U=I.CapJoinStyles[V];if(U===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fd=U,oe(U+" j"),this},I.__private__.setLineMiterLimit=I.__private__.setMiterLimit=I.setLineMiterLimit=I.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return oe(B(X(V))+" M"),this},I.GState=zC,I.setGState=function(V){(V=typeof V=="string"?Rn[zr[V]]:HA(null,V)).equals(Wo)||(oe("/"+V.id+" gs"),Wo=V)};var HA=function(V,U){if(!V||!zr[V]){var ae=!1;for(var ce in Rn)if(Rn.hasOwnProperty(ce)&&Rn[ce].equals(U)){ae=!0;break}if(ae)U=Rn[ce];else{var ve="GS"+(Object.keys(Rn).length+1).toString(10);Rn[ve]=U,U.id=ve}return V&&(zr[V]=U.id),qt.publish("addGState",U),U}};I.addGState=function(V,U){return HA(V,U),this},I.saveGraphicsState=function(){return oe("q"),er.push({key:Zt,size:ge,color:hg}),this},I.restoreGraphicsState=function(){oe("Q");var V=er.pop();return Zt=V.key,ge=V.size,hg=V.color,Wo=null,this},I.setCurrentTransformationMatrix=function(V){return oe(V.toString()+" cm"),this},I.comment=function(V){return oe("#"+V),this};var Xc=function(V,U){var ae=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(xe){isNaN(xe)||(ae=parseFloat(xe))}});var ce=U||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ce},set:function(xe){isNaN(xe)||(ce=parseFloat(xe))}});var ve="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ve},set:function(xe){ve=xe.toString()}}),this},Kd=function(V,U,ae,ce){Xc.call(this,V,U),this.type="rect";var ve=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ve},set:function(Qe){isNaN(Qe)||(ve=parseFloat(Qe))}});var xe=ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xe},set:function(Qe){isNaN(Qe)||(xe=parseFloat(Qe))}}),this},Ld=function(){this.page=Qt,this.currentPage=z,this.pages=We.slice(0),this.pagesContext=yt.slice(0),this.x=mn,this.y=Rt,this.matrix=mt,this.width=mg(z),this.height=nl(z),this.outputDestination=ze,this.id="",this.objectNumber=-1};Ld.prototype.restore=function(){Qt=this.page,z=this.currentPage,yt=this.pagesContext,We=this.pages,mn=this.x,Rt=this.y,mt=this.matrix,Ed(z,this.width),Md(z,this.height),ze=this.outputDestination};var FA=function(V,U,ae,ce,ve){eo.push(new Ld),Qt=z=0,We=[],mn=V,Rt=U,mt=ve,Vd([ae,ce])},N0=function(V){if(Do[V])eo.pop().restore();else{var U=new Ld,ae="Xo"+(Object.keys(pn).length+1).toString(10);U.id=ae,Do[V]=ae,pn[ae]=U,qt.publish("addFormObject",U),eo.pop().restore()}};for(var Jc in I.beginFormObject=function(V,U,ae,ce,ve){return FA(V,U,ae,ce,ve),this},I.endFormObject=function(V){return N0(V),this},I.doFormObject=function(V,U){var ae=pn[Do[V]];return oe("q"),oe(U.toString()+" cm"),oe("/"+ae.id+" Do"),oe("Q"),this},I.getFormObject=function(V){var U=pn[Do[V]];return{x:U.x,y:U.y,width:U.width,height:U.height,matrix:U.matrix}},I.save=function(V,U){return V=V||"generated.pdf",(U=U||{}).returnPromise=U.returnPromise||!1,U.returnPromise===!1?(Xg(wc(fs()),V),typeof Xg.unload=="function"&&xt.setTimeout&&setTimeout(Xg.unload,911),this):new Promise(function(ae,ce){try{var ve=Xg(wc(fs()),V);typeof Xg.unload=="function"&&xt.setTimeout&&setTimeout(Xg.unload,911),ae(ve)}catch(xe){ce(xe.message)}})},Wt.API)Wt.API.hasOwnProperty(Jc)&&(Jc==="events"&&Wt.API.events.length?function(V,U){var ae,ce,ve;for(ve=U.length-1;ve!==-1;ve--)ae=U[ve][0],ce=U[ve][1],V.subscribe.apply(V,[ae].concat(typeof ce=="function"?[ce]:ce))}(qt,Wt.API.events):I[Jc]=Wt.API[Jc]);var mg=I.getPageWidth=function(V){return(yt[V=V||z].mediaBox.topRightX-yt[V].mediaBox.bottomLeftX)/Ke},Ed=I.setPageWidth=function(V,U){yt[V].mediaBox.topRightX=U*Ke+yt[V].mediaBox.bottomLeftX},nl=I.getPageHeight=function(V){return(yt[V=V||z].mediaBox.topRightY-yt[V].mediaBox.bottomLeftY)/Ke},Md=I.setPageHeight=function(V,U){yt[V].mediaBox.topRightY=U*Ke+yt[V].mediaBox.bottomLeftY};return I.internal={pdfEscape:To,getStyle:VA,getFont:X0,getFontSize:Ze,getCharSpace:Y0,getTextColor:x0,getLineHeight:xA,getLineHeightFactor:NA,getLineWidth:kc,write:ct,getHorizontalCoordinate:Ea,getVerticalCoordinate:bs,getCoordinateString:J0,getVerticalCoordinateString:tl,collections:{},newObject:Un,newAdditionalObject:we,newObjectDeferred:se,newObjectDeferredBegin:de,getFilters:He,putStream:tt,events:qt,scaleFactor:Ke,pageSize:{getWidth:function(){return mg(z)},setWidth:function(V){Ed(z,V)},getHeight:function(){return nl(z)},setHeight:function(V){Md(z,V)}},encryptionOptions:u,encryption:uo,getEncryptor:B0,output:Wc,getNumberOfPages:y0,pages:We,out:oe,f2:G,f3:R,getPageInfo:kA,getPageInfoByObjId:Ft,getCurrentPageInfo:w0,getPDFVersion:h,Point:Xc,Rectangle:Kd,Matrix:St,hasHotfix:RA},Object.defineProperty(I.internal.pageSize,"width",{get:function(){return mg(z)},set:function(V){Ed(z,V)},enumerable:!0,configurable:!0}),Object.defineProperty(I.internal.pageSize,"height",{get:function(){return nl(z)},set:function(V){Md(z,V)},enumerable:!0,configurable:!0}),kd.call(I,ie),Zt="F1",BA(o,n),qt.publish("initialized"),I}gI.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},gI.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gI.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},gI.prototype.processOwnerPassword=function(e,t){return GZ(vZ(t).substr(0,5),e)},gI.prototype.encryptor=function(e,t){var n=vZ(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return GZ(n,r)}},zC.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||An(e)!==An(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Wt.API={events:[]},Wt.version="2.5.2";var dr=Wt.API,_G=1,yc=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},iI=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Dt=function(e){return e.toFixed(2)},fl=function(e){return e.toFixed(5)};dr.__acroform__={};var ci=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Yw=function(e){return e*_G},Qa=function(e){var t=new ix,n=bt.internal.getHeight(e)||0,r=bt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Dt(r)),Number(Dt(n))],t},n7=dr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},r7=dr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},o7=dr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},br=dr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return o7(e,t-1)},yr=dr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return n7(e,t-1)},Zr=dr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return r7(e,t-1)},i7=dr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,o=e[0],i=e[1],a=e[2],s=e[3],l={};return l.lowerLeft_X=n(o)||0,l.lowerLeft_Y=r(i+s)||0,l.upperRight_X=n(o+a)||0,l.upperRight_Y=r(i)||0,[Number(Dt(l.lowerLeft_X)),Number(Dt(l.lowerLeft_Y)),Number(Dt(l.upperRight_X)),Number(Dt(l.upperRight_Y))]},a7=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=SZ(e,n),o=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+o+" "+Dt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Qa(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},SZ=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},o=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");o=e.multiline?o.map(function(R){return R.split(`
`)}):o.map(function(R){return[R]});var i=n,a=bt.internal.getHeight(e)||0;a=a<0?-a:a;var s=bt.internal.getWidth(e)||0;s=s<0?-s:s;var l=function(R,X,Y){if(R+1<o.length){var x=X+" "+o[R+1][0];return Mh(x,e,Y).width<=s-4}return!1};i++;e:for(;i>0;){t="",i--;var c,u,g=Mh("3",e,i).height,d=e.multiline?a-i:(a-g)/2,I=d+=2,C=0,h=0,f=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Mh(t,e,i=12).width+", FieldWidth:"+s+`
`;break}for(var A="",m=0,p=0;p<o.length;p++)if(o.hasOwnProperty(p)){var Z=!1;if(o[p].length!==1&&f!==o[p].length-1){if((g+2)*(m+2)+2>a)continue e;A+=o[p][f],Z=!0,h=p,p--}else{A=(A+=o[p][f]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var v=parseInt(p),k=l(v,A,i),B=p>=o.length-1;if(k&&!B){A+=" ",f=0;continue}if(k||B){if(B)h=v;else if(e.multiline&&(g+2)*(m+2)+2>a)continue e}else{if(!e.multiline||(g+2)*(m+2)+2>a)continue e;h=v}}for(var y="",W=C;W<=h;W++){var G=o[W];if(e.multiline){if(W===h){y+=G[f]+" ",f=(f+1)%G.length;continue}if(W===C){y+=G[G.length-1]+" ";continue}}y+=G[0]+" "}switch(y=y.substr(y.length-1)==" "?y.substr(0,y.length-1):y,u=Mh(y,e,i).width,e.textAlign){case"right":c=s-u-2;break;case"center":c=(s-u)/2;break;case"left":default:c=2}t+=Dt(c)+" "+Dt(I)+` Td
`,t+="("+yc(y)+`) Tj
`,t+=-Dt(c)+` 0 Td
`,I=-(i+2),u=0,C=Z?h:h+1,m++,A=""}break}return r.text=t,r.fontSize=i,r},Mh=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),o=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},s7={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},l7=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},g7=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,o=e[n];t.internal.newObjectDeferredBegin(o.objId,!0),An(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete e[r]}},c7=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Na.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(s7)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");_G=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ax,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var i=r[o];i.objId=void 0,i.hasAnnotation&&l7(i,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,o){var i=!r;for(var a in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var s=r[a],l=[],c=s.Rect;if(s.Rect&&(s.Rect=i7(s.Rect,o)),o.internal.newObjectDeferredBegin(s.objId,!0),s.DA=bt.createDefaultAppearanceStream(s),An(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=c,s.hasAppearanceStream&&!s.appearanceStreamContent){var u=a7(s);l.push({key:"AP",value:"<</N "+u+">>"}),o.internal.acroformPlugin.xForms.push(u)}if(s.appearanceStreamContent){var g="";for(var d in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(d)){var I=s.appearanceStreamContent[d];if(g+="/"+d+" ",g+="<<",Object.keys(I).length>=1||Array.isArray(I)){for(var a in I)if(I.hasOwnProperty(a)){var C=I[a];typeof C=="function"&&(C=C.call(o,s)),g+="/"+a+" "+C+" ",o.internal.acroformPlugin.xForms.indexOf(C)>=0||o.internal.acroformPlugin.xForms.push(C)}}else typeof(C=I)=="function"&&(C=C.call(o,s)),g+="/"+a+" "+C,o.internal.acroformPlugin.xForms.indexOf(C)>=0||o.internal.acroformPlugin.xForms.push(C);g+=">>"}l.push({key:"AP",value:`<<
`+g+">>"})}o.internal.putStream({additionalKeyValues:l,objectId:s.objId}),o.internal.out("endobj")}i&&g7(o.internal.acroformPlugin.xForms,o)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},ox=dr.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(a){return a};if(Array.isArray(e)){for(var o="[",i=0;i<e.length;i++)switch(i!==0&&(o+=" "),An(e[i])){case"boolean":case"number":case"object":o+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),o+="("+yc(r(e[i].toString()))+")"):o+=e[i].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Zy=function(e,t,n){var r=function(o){return o};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+yc(r(e))+")"},ss=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ss.prototype.toString=function(){return this.objId+" 0 R"},ss.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ss.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],o=this[r];o&&(Array.isArray(o)?e.push({key:r,value:ox(o,this.objId,this.scope)}):o instanceof ss?(o.scope=this.scope,e.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&e.push({key:r,value:o}))}return e};var ix=function(){ss.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};ci(ix,ss);var ax=function(){ss.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+yc(n(e))+")"}},set:function(n){e=n}})};ci(ax,ss);var Na=function e(){ss.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');t=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!br(t,3)},set:function(A){A?this.F=yr(t,3):this.F=Zr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');n=A}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(A){r=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(A){r[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(A){r[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(A){r[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(A){r[3]=A}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof hp)return;i="FieldObject"+e.FieldNum++}var A=function(m){return m};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+yc(A(i))+")"},set:function(A){i=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(A){i=A}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(A){a=A}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(A){s=A}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(A){l=A}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/_G:c},set:function(A){c=A}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof hp||this instanceof Ol))return Zy(g,this.objId,this.scope)},set:function(A){A=A.toString(),g=A}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Er?d:Zy(d,this.objId,this.scope)},set:function(A){A=A.toString(),d=this instanceof Er?A:A.substr(0,1)==="("?iI(A.substr(1,A.length-2)):iI(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Er?iI(d.substr(1,d.length-1)):d},set:function(A){A=A.toString(),d=this instanceof Er?"/"+A:A}});var I=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(I)return I},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(I)return this instanceof Er?I:Zy(I,this.objId,this.scope)},set:function(A){A=A.toString(),I=this instanceof Er?A:A.substr(0,1)==="("?iI(A.substr(1,A.length-2)):iI(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Er?iI(I.substr(1,I.length-1)):I},set:function(A){A=A.toString(),I=this instanceof Er?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,h=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return h},set:function(A){A=!!A,h=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(A){C=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,1)},set:function(A){A?this.Ff=yr(this.Ff,1):this.Ff=Zr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,2)},set:function(A){A?this.Ff=yr(this.Ff,2):this.Ff=Zr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,3)},set:function(A){A?this.Ff=yr(this.Ff,3):this.Ff=Zr(this.Ff,3)}});var f=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(f!==null)return f},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');f=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(f){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:f=2;break;case"center":case 1:f=1;break;case"left":case 0:default:f=0}}})};ci(Na,ss);var ec=function(){Na.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ox(t,this.objId,this.scope)},set:function(n){var r,o;o=[],typeof(r=n)=="string"&&(o=function(i,a,s){s||(s=1);for(var l,c=[];l=a.exec(i);)c.push(l[s]);return c}(r,/\((.*?)\)/g)),t=o}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,18)},set:function(n){n?this.Ff=yr(this.Ff,18):this.Ff=Zr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=yr(this.Ff,19):this.Ff=Zr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,20)},set:function(n){n?(this.Ff=yr(this.Ff,20),t.sort()):this.Ff=Zr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,22)},set:function(n){n?this.Ff=yr(this.Ff,22):this.Ff=Zr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,23)},set:function(n){n?this.Ff=yr(this.Ff,23):this.Ff=Zr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,27)},set:function(n){n?this.Ff=yr(this.Ff,27):this.Ff=Zr(this.Ff,27)}}),this.hasAppearanceStream=!1};ci(ec,Na);var tc=function(){ec.call(this),this.fontName="helvetica",this.combo=!1};ci(tc,ec);var nc=function(){tc.call(this),this.combo=!0};ci(nc,tc);var aC=function(){nc.call(this),this.edit=!0};ci(aC,nc);var Er=function(){Na.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,15)},set:function(n){n?this.Ff=yr(this.Ff,15):this.Ff=Zr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,16)},set:function(n){n?this.Ff=yr(this.Ff,16):this.Ff=Zr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,17)},set:function(n){n?this.Ff=yr(this.Ff,17):this.Ff=Zr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,26)},set:function(n){n?this.Ff=yr(this.Ff,26):this.Ff=Zr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,o=[];for(r in o.push("<<"),t)o.push("/"+r+" ("+yc(n(t[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){An(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};ci(Er,Na);var sC=function(){Er.call(this),this.pushButton=!0};ci(sC,Er);var rc=function(){Er.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ci(rc,Er);var hp=function(){var e,t;Na.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(o){t=o}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(s){return s};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),r)a.push("/"+i+" ("+yc(o(r[i]))+")");return a.push(">>"),a.join(`
`)},set:function(o){An(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ci(hp,Na),rc.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},rc.prototype.createOption=function(e){var t=new hp;return t.Parent=this,t.optionName=e,this.Kids.push(t),I7.call(this.scope,t),t};var lC=function(){Er.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bt.CheckBox.createAppearanceStream()};ci(lC,Er);var Ol=function(){Na.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,13)},set:function(t){t?this.Ff=yr(this.Ff,13):this.Ff=Zr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,21)},set:function(t){t?this.Ff=yr(this.Ff,21):this.Ff=Zr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,23)},set:function(t){t?this.Ff=yr(this.Ff,23):this.Ff=Zr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,24)},set:function(t){t?this.Ff=yr(this.Ff,24):this.Ff=Zr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,25)},set:function(t){t?this.Ff=yr(this.Ff,25):this.Ff=Zr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,26)},set:function(t){t?this.Ff=yr(this.Ff,26):this.Ff=Zr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ci(Ol,Na);var gC=function(){Ol.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,14)},set:function(e){e?this.Ff=yr(this.Ff,14):this.Ff=Zr(this.Ff,14)}}),this.password=!0};ci(gC,Ol);var bt={CheckBox:{createAppearanceStream:function(){return{N:{On:bt.CheckBox.YesNormal},D:{On:bt.CheckBox.YesPushDown,Off:bt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Qa(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),i=SZ(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Dt(bt.internal.getWidth(e))+" "+Dt(bt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Dt(i.fontSize)+" Tf "+o),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Qa(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),o=[],i=bt.internal.getHeight(e),a=bt.internal.getWidth(e),s=SZ(e,e.caption);return o.push("1 g"),o.push("0 0 "+Dt(a)+" "+Dt(i)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Dt(a-1)+" "+Dt(i-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Dt(s.fontSize)+" Tf "+r),o.push(s.text),o.push("ET"),o.push("Q"),t.stream=o.join(`
`),t},OffPushDown:function(e){var t=Qa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Dt(bt.internal.getWidth(e))+" "+Dt(bt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:bt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=bt.RadioButton.Circle.YesNormal,t.D[e]=bt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Qa(e);t.scope=e.scope;var n=[],r=bt.internal.getWidth(e)<=bt.internal.getHeight(e)?bt.internal.getWidth(e)/4:bt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=bt.internal.Bezier_C,i=Number((r*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+fl(bt.internal.getWidth(e)/2)+" "+fl(bt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Qa(e);t.scope=e.scope;var n=[],r=bt.internal.getWidth(e)<=bt.internal.getHeight(e)?bt.internal.getWidth(e)/4:bt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),i=Number((o*bt.internal.Bezier_C).toFixed(5)),a=Number((r*bt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+fl(bt.internal.getWidth(e)/2)+" "+fl(bt.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+i+" "+i+" "+o+" 0 "+o+" c"),n.push("-"+i+" "+o+" -"+o+" "+i+" -"+o+" 0 c"),n.push("-"+o+" -"+i+" -"+i+" -"+o+" 0 -"+o+" c"),n.push(i+" -"+o+" "+o+" -"+i+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+fl(bt.internal.getWidth(e)/2)+" "+fl(bt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Qa(e);t.scope=e.scope;var n=[],r=bt.internal.getWidth(e)<=bt.internal.getHeight(e)?bt.internal.getWidth(e)/4:bt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),i=Number((o*bt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+fl(bt.internal.getWidth(e)/2)+" "+fl(bt.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+i+" "+i+" "+o+" 0 "+o+" c"),n.push("-"+i+" "+o+" -"+o+" "+i+" -"+o+" 0 c"),n.push("-"+o+" -"+i+" -"+i+" -"+o+" 0 -"+o+" c"),n.push(i+" -"+o+" "+o+" -"+i+" "+o+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:bt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=bt.RadioButton.Cross.YesNormal,t.D[e]=bt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Qa(e);t.scope=e.scope;var n=[],r=bt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Dt(bt.internal.getWidth(e)-2)+" "+Dt(bt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Dt(r.x1.x)+" "+Dt(r.x1.y)+" m"),n.push(Dt(r.x2.x)+" "+Dt(r.x2.y)+" l"),n.push(Dt(r.x4.x)+" "+Dt(r.x4.y)+" m"),n.push(Dt(r.x3.x)+" "+Dt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Qa(e);t.scope=e.scope;var n=bt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Dt(bt.internal.getWidth(e))+" "+Dt(bt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Dt(bt.internal.getWidth(e)-2)+" "+Dt(bt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Dt(n.x1.x)+" "+Dt(n.x1.y)+" m"),r.push(Dt(n.x2.x)+" "+Dt(n.x2.y)+" l"),r.push(Dt(n.x4.x)+" "+Dt(n.x4.y)+" m"),r.push(Dt(n.x3.x)+" "+Dt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Qa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Dt(bt.internal.getWidth(e))+" "+Dt(bt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};bt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=bt.internal.getWidth(e),n=bt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},bt.internal.getWidth=function(e){var t=0;return An(e)==="object"&&(t=Yw(e.Rect[2])),t},bt.internal.getHeight=function(e){var t=0;return An(e)==="object"&&(t=Yw(e.Rect[3])),t};var I7=dr.addField=function(e){if(c7(this,e),!(e instanceof Na))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};dr.AcroFormChoiceField=ec,dr.AcroFormListBox=tc,dr.AcroFormComboBox=nc,dr.AcroFormEditBox=aC,dr.AcroFormButton=Er,dr.AcroFormPushButton=sC,dr.AcroFormRadioButton=rc,dr.AcroFormCheckBox=lC,dr.AcroFormTextField=Ol,dr.AcroFormPasswordField=gC,dr.AcroFormAppearance=bt,dr.AcroForm={ChoiceField:ec,ListBox:tc,ComboBox:nc,EditBox:aC,Button:Er,PushButton:sC,RadioButton:rc,CheckBox:lC,TextField:Ol,PasswordField:gC,Appearance:bt},Wt.AcroForm={ChoiceField:ec,ListBox:tc,ComboBox:nc,EditBox:aC,Button:Er,PushButton:sC,RadioButton:rc,CheckBox:lC,TextField:Ol,PasswordField:gC,Appearance:bt};var d7=Wt.AcroForm;function sx(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(R,X){var Y,x,D,L,M,K=t;if((X=X||t)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(k(R))for(M in n)for(D=n[M],Y=0;Y<D.length;Y+=1){for(L=!0,x=0;x<D[Y].length;x+=1)if(D[Y][x]!==void 0&&D[Y][x]!==R[x]){L=!1;break}if(L===!0){K=M;break}}else for(M in n)for(D=n[M],Y=0;Y<D.length;Y+=1){for(L=!0,x=0;x<D[Y].length;x+=1)if(D[Y][x]!==void 0&&D[Y][x]!==R.charCodeAt(x)){L=!1;break}if(L===!0){K=M;break}}return K===t&&X!==t&&(K=X),K},o=function R(X){for(var Y=this.internal.write,x=this.internal.putStream,D=(0,this.internal.getFilters)();D.indexOf("FlateEncode")!==-1;)D.splice(D.indexOf("FlateEncode"),1);X.objectId=this.internal.newObject();var L=[];if(L.push({key:"Type",value:"/XObject"}),L.push({key:"Subtype",value:"/Image"}),L.push({key:"Width",value:X.width}),L.push({key:"Height",value:X.height}),X.colorSpace===f.INDEXED?L.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(X.palette.length/3-1)+" "+("sMask"in X&&X.sMask!==void 0?X.objectId+2:X.objectId+1)+" 0 R]"}):(L.push({key:"ColorSpace",value:"/"+X.colorSpace}),X.colorSpace===f.DEVICE_CMYK&&L.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),L.push({key:"BitsPerComponent",value:X.bitsPerComponent}),"decodeParameters"in X&&X.decodeParameters!==void 0&&L.push({key:"DecodeParms",value:"<<"+X.decodeParameters+">>"}),"transparency"in X&&Array.isArray(X.transparency)){for(var M="",K=0,E=X.transparency.length;K<E;K++)M+=X.transparency[K]+" "+X.transparency[K]+" ";L.push({key:"Mask",value:"["+M+"]"})}X.sMask!==void 0&&L.push({key:"SMask",value:X.objectId+1+" 0 R"});var O=X.filter!==void 0?["/"+X.filter]:void 0;if(x({data:X.data,additionalKeyValues:L,alreadyAppliedFilters:O,objectId:X.objectId}),Y("endobj"),"sMask"in X&&X.sMask!==void 0){var re="/Predictor "+X.predictor+" /Colors 1 /BitsPerComponent "+X.bitsPerComponent+" /Columns "+X.width,H={width:X.width,height:X.height,colorSpace:"DeviceGray",bitsPerComponent:X.bitsPerComponent,decodeParameters:re,data:X.sMask};"filter"in X&&(H.filter=X.filter),R.call(this,H)}if(X.colorSpace===f.INDEXED){var z=this.internal.newObject();x({data:y(new Uint8Array(X.palette)),objectId:z}),Y("endobj")}},i=function(){var R=this.internal.collections.addImage_images;for(var X in R)o.call(this,R[X])},a=function(){var R,X=this.internal.collections.addImage_images,Y=this.internal.write;for(var x in X)Y("/I"+(R=X[x]).index,R.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var R=this.internal.collections.addImage_images;return s.call(this),R},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(R){return typeof e["process"+R.toUpperCase()]=="function"},g=function(R){return An(R)==="object"&&R.nodeType===1},d=function(R,X){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var Y=""+R.getAttribute("src");if(Y.indexOf("data:image/")===0)return iC(unescape(Y).split("base64,").pop());var x=e.loadFile(Y,!0);if(x!==void 0)return x}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var D;switch(X){case"PNG":D="image/png";break;case"WEBP":D="image/webp";break;case"JPEG":case"JPG":default:D="image/jpeg"}return iC(R.toDataURL(D,1).split("base64,").pop())}},I=function(R){var X=this.internal.collections.addImage_images;if(X){for(var Y in X)if(R===X[Y].alias)return X[Y]}},C=function(R,X,Y){return R||X||(R=-96,X=-96),R<0&&(R=-1*Y.width*72/R/this.internal.scaleFactor),X<0&&(X=-1*Y.height*72/X/this.internal.scaleFactor),R===0&&(R=X*Y.width/Y.height),X===0&&(X=R*Y.height/Y.width),[R,X]},h=function(R,X,Y,x,D,L){var M=C.call(this,Y,x,D),K=this.internal.getCoordinateString,E=this.internal.getVerticalCoordinateString,O=l.call(this);if(Y=M[0],x=M[1],O[D.index]=D,L){L*=Math.PI/180;var re=Math.cos(L),H=Math.sin(L),z=function($){return $.toFixed(4)},j=[z(re),z(H),z(-1*H),z(re),0,0,"cm"]}this.internal.write("q"),L?(this.internal.write([1,"0","0",1,K(R),E(X+x),"cm"].join(" ")),this.internal.write(j.join(" ")),this.internal.write([K(Y),"0","0",K(x),"0","0","cm"].join(" "))):this.internal.write([K(Y),"0","0",K(x),K(R),E(X+x),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+D.index+" Do"),this.internal.write("Q")},f=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},m=e.__addimage__.sHashCode=function(R){var X,Y,x=0;if(typeof R=="string")for(Y=R.length,X=0;X<Y;X++)x=(x<<5)-x+R.charCodeAt(X),x|=0;else if(k(R))for(Y=R.byteLength/2,X=0;X<Y;X++)x=(x<<5)-x+R[X],x|=0;return x},p=e.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var X=!0;return R.length===0&&(X=!1),R.length%4!=0&&(X=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(X=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(X=!1),X},Z=e.__addimage__.extractImageFromDataUrl=function(R){var X=(R=R||"").split("base64,"),Y=null;if(X.length===2){var x=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(X[0]);Array.isArray(x)&&(Y={mimeType:x[1],charset:x[2],data:X[1]})}return Y},v=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(R){return v()&&R instanceof ArrayBuffer};var k=e.__addimage__.isArrayBufferView=function(R){return v()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},B=e.__addimage__.binaryStringToUint8Array=function(R){for(var X=R.length,Y=new Uint8Array(X),x=0;x<X;x++)Y[x]=R.charCodeAt(x);return Y},y=e.__addimage__.arrayBufferToBinaryString=function(R){for(var X="",Y=k(R)?R:new Uint8Array(R),x=0;x<Y.length;x+=8192)X+=String.fromCharCode.apply(null,Y.subarray(x,x+8192));return X};e.addImage=function(){var R,X,Y,x,D,L,M,K,E;if(typeof arguments[1]=="number"?(X=t,Y=arguments[1],x=arguments[2],D=arguments[3],L=arguments[4],M=arguments[5],K=arguments[6],E=arguments[7]):(X=arguments[1],Y=arguments[2],x=arguments[3],D=arguments[4],L=arguments[5],M=arguments[6],K=arguments[7],E=arguments[8]),An(R=arguments[0])==="object"&&!g(R)&&"imageData"in R){var O=R;R=O.imageData,X=O.format||X||t,Y=O.x||Y||0,x=O.y||x||0,D=O.w||O.width||D,L=O.h||O.height||L,M=O.alias||M,K=O.compression||K,E=O.rotation||O.angle||E}var re=this.internal.getFilters();if(K===void 0&&re.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(Y)||isNaN(x))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var H=W.call(this,R,X,M,K);return h.call(this,Y,x,D,L,H,E),this};var W=function(R,X,Y,x){var D,L,M;if(typeof R=="string"&&r(R)===t){R=unescape(R);var K=G(R,!1);(K!==""||(K=e.loadFile(R,!0))!==void 0)&&(R=K)}if(g(R)&&(R=d(R,X)),X=r(R,X),!u(X))throw new Error("addImage does not support files of type '"+X+"', please ensure that a plugin for '"+X+"' support is added.");if(((M=Y)==null||M.length===0)&&(Y=function(E){return typeof E=="string"||k(E)?m(E):k(E.data)?m(E.data):null}(R)),(D=I.call(this,Y))||(v()&&(R instanceof Uint8Array||X==="RGBA"||(L=R,R=B(R))),D=this["process"+X.toUpperCase()](R,c.call(this),Y,function(E){return E&&typeof E=="string"&&(E=E.toUpperCase()),E in e.image_compression?E:A.NONE}(x),L)),!D)throw new Error("An unknown error occurred whilst processing the image.");return D},G=e.__addimage__.convertBase64ToBinaryString=function(R,X){var Y;X=typeof X!="boolean"||X;var x,D="";if(typeof R=="string"){x=(Y=Z(R))!==null?Y.data:R;try{D=iC(x)}catch(L){if(X)throw p(x)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+L.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return D};e.getImageProperties=function(R){var X,Y,x="";if(g(R)&&(R=d(R)),typeof R=="string"&&r(R)===t&&((x=G(R,!1))===""&&(x=e.loadFile(R)||""),R=x),Y=r(R),!u(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(!v()||R instanceof Uint8Array||(R=B(R)),!(X=this["process"+Y.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return X.fileType=Y,X}})(Wt.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Wt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,o,i,a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,g=0;g<c.length&&!u;g++)switch((r=c[g]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var d=0;d<c.length;d++){r=c[d];var I=this.internal.pdfEscape,C=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var h=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(h.objId),m=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(o="/Rect ["+a(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+I(A(r.contents))+")",i+=" /Popup "+f.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+I(A(m))+") >>",h.content=i;var p=h.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+a(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+p,r.open&&(i+=" /Open true"),i+=" >>",f.content=i,this.internal.write(h.objId,"0 R",f.objId,"0 R");break;case"freetext":o="/Rect ["+a(r.bounds.x)+" "+s(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var Z=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+I(C(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Z+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var v=this.annotations._nameMap[r.options.name];r.options.pageNumber=v.page,r.options.top=v.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+I(C(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var k=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+k+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,o,i,a){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+o),h:c(r+i)},options:a,type:"link"})},e.textWithLink=function(n,r,o,i){var a,s,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){s=i.maxWidth;var u=this.splitTextToSize(n,s).length;a=Math.ceil(c*u)}else s=l,a=c;return this.text(n,r,o,i),o+=.2*c,i.align==="center"&&(r-=l/2),i.align==="right"&&(r-=l),this.link(r,o-c,s,a,i),l},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Wt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(h){return t[h.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(h){return typeof h=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(h)},s=e.__arabicParser__.isArabicEndLetter=function(h){return a(h)&&i(h)&&t[h.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(h){return a(h)&&o.indexOf(h.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(h){return a(h)&&i(h)&&t[h.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(h){return a(h)&&i(h)&&t[h.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(h){return a(h)&&i(h)&&t[h.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(h){return a(h)&&i(h)&&t[h.charCodeAt(0)].length==4},g=e.__arabicParser__.resolveLigatures=function(h){var f=0,A=n,m="",p=0;for(f=0;f<h.length;f+=1)A[h.charCodeAt(f)]!==void 0?(p++,typeof(A=A[h.charCodeAt(f)])=="number"&&(m+=String.fromCharCode(A),A=n,p=0),f===h.length-1&&(A=n,m+=h.charAt(f-(p-1)),f-=p-1,p=0)):(A=n,m+=h.charAt(f-p),f-=p,p=0);return m};e.__arabicParser__.isArabicDiacritic=function(h){return h!==void 0&&r[h.charCodeAt(0)]!==void 0};var d=e.__arabicParser__.getCorrectForm=function(h,f,A){return a(h)?i(h)===!1?-1:!c(h)||!a(f)&&!a(A)||!a(A)&&s(f)||s(h)&&!a(f)||s(h)&&l(f)||s(h)&&s(f)?0:u(h)&&a(f)&&!s(f)&&a(A)&&c(A)?3:s(h)||!a(A)?1:2:-1},I=function(h){var f=0,A=0,m=0,p="",Z="",v="",k=(h=h||"").split("\\s+"),B=[];for(f=0;f<k.length;f+=1){for(B.push(""),A=0;A<k[f].length;A+=1)p=k[f][A],Z=k[f][A-1],v=k[f][A+1],a(p)?(m=d(p,Z,v),B[f]+=m!==-1?String.fromCharCode(t[p.charCodeAt(0)][m]):p):B[f]+=p;B[f]=g(B[f])}return B.join(" ")},C=e.__arabicParser__.processArabic=e.processArabic=function(){var h,f=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(f)){var m=0;for(A=[],m=0;m<f.length;m+=1)Array.isArray(f[m])?A.push([I(f[m][0]),f[m][1],f[m][2]]):A.push([I(f[m])]);h=A}else h=I(f);return typeof arguments[0]=="string"?h:(arguments[0].text=h,arguments[0])};e.events.push(["preProcessText",C])}(Wt.API),Wt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(s){n=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(s){o=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(s){i=s}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var o;if((n=n||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Wt.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(h){l=h}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(h){c=h}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(h){u=h}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(h){g=h}});var d=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return d},set:function(h){d=h}});var I=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return I},set:function(h){I=h}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(h){C=h}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),g=c.font||this.getFont(),d=c.scaleFactor||this.internal.scaleFactor,I=0,C=0,h=0,f=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var A=c.maxWidth;A>0?typeof l=="string"?l=this.splitTextToSize(l,A):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(p,Z){return p.concat(f.splitTextToSize(Z,A))},[])):l=Array.isArray(l)?l:[l];for(var m=0;m<l.length;m++)I<(h=this.getStringUnitWidth(l[m],{font:g})*u)&&(I=h);return I!==0&&(C=l.length),{w:I/=d,h:Math.max((C*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/d,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,g=this.internal.__cell__.margins||t,d=this.internal.__cell__.tableHeaderRow,I=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=g.top,I&&d&&(this.printHeaderRow(l.lineNumber,!0),l.y+=d[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};e.table=function(l,c,u,g,d){if(r.call(this),!u)throw new Error("No data for PDF table.");var I,C,h,f,A=[],m=[],p=[],Z={},v={},k=[],B=[],y=(d=d||{}).autoSize||!1,W=d.printHeaders!==!1,G=d.css&&d.css["font-size"]!==void 0?16*d.css["font-size"]:d.fontSize||12,R=d.margins||Object.assign({width:this.getPageWidth()},t),X=typeof d.padding=="number"?d.padding:3,Y=d.headerBackgroundColor||"#c8c8c8",x=d.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=W,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=G,this.internal.__cell__.padding=X,this.internal.__cell__.headerBackgroundColor=Y,this.internal.__cell__.headerTextColor=x,this.setFontSize(G),g==null)m=A=Object.keys(u[0]),p=A.map(function(){return"left"});else if(Array.isArray(g)&&An(g[0])==="object")for(A=g.map(function(O){return O.name}),m=g.map(function(O){return O.prompt||O.name||""}),p=g.map(function(O){return O.align||"left"}),I=0;I<g.length;I+=1)v[g[I].name]=g[I].width*(19.049976/25.4);else Array.isArray(g)&&typeof g[0]=="string"&&(m=A=g,p=A.map(function(){return"left"}));if(y||Array.isArray(g)&&typeof g[0]=="string")for(I=0;I<A.length;I+=1){for(Z[f=A[I]]=u.map(function(O){return O[f]}),this.setFont(void 0,"bold"),k.push(this.getTextDimensions(m[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=Z[f],this.setFont(void 0,"normal"),h=0;h<C.length;h+=1)k.push(this.getTextDimensions(C[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);v[f]=Math.max.apply(null,k)+X+X,k=[]}if(W){var D={};for(I=0;I<A.length;I+=1)D[A[I]]={},D[A[I]].text=m[I],D[A[I]].align=p[I];var L=s.call(this,D,v);B=A.map(function(O){return new i(l,c,v[O],L,D[O].text,void 0,D[O].align)}),this.setTableHeaderRow(B),this.printHeaderRow(1,!1)}var M=g.reduce(function(O,re){return O[re.name]=re.align,O},{});for(I=0;I<u.length;I+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:I,data:u[I]},this);var K=s.call(this,u[I],v);for(h=0;h<A.length;h+=1){var E=u[I][A[h]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:I,col:h,data:E},this),a.call(this,new i(l,c,v[A[h]],K,E,I+2,M[A[h]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var s=function(l,c){var u=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,d=this.internal.scaleFactor;return Object.keys(l).map(function(I){var C=l[I];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,c[I]-u-u)},this).map(function(I){return this.getLineHeightFactor()*I.length*g/d+u+u},this).reduce(function(I,C){return Math.max(I,C)},0)};e.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var d=[],I=0;I<this.internal.__cell__.tableHeaderRow.length;I+=1){u=this.internal.__cell__.tableHeaderRow[I].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,d.push(u)),u.lineNumber=l;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(C)}d.length>0&&this.setTableHeaderRow(d),this.setFont(void 0,"normal"),n=!1}}(Wt.API);var lx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},gx=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],BZ=sx(gx),cx=[100,200,300,400,500,600,700,800,900],u7=sx(cx);function wZ(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return lx[i=i||"normal"]?i:"normal"}(e.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),o=function(i){return typeof BZ[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:o,src:e.src||[],ref:e.ref||{name:t,style:[o,n,r].join(" ")}}}function Nw(e,t,n,r){var o;for(o=n;o>=0&&o<t.length;o+=r)if(e[t[o]])return e[t[o]];for(o=n;o>=0&&o<t.length;o-=r)if(e[t[o]])return e[t[o]]}var C7={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Hw={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Fw(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function A7(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},C7,n.genericFontFamilies||{}),i=null,a=null,s=0;s<t.length;++s)if(o[(i=wZ(t[s])).family]&&(i.family=o[i.family]),e.hasOwnProperty(i.family)){a=e[i.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+Fw(i)+"' and default family '"+r+"'.");if(a=function(l,c){if(c[l])return c[l];var u=BZ[l],g=u<=BZ.normal?-1:1,d=Nw(c,gx,u,g);if(!d)throw new Error("Could not find a matching font-stretch value for "+l);return d}(i.stretch,a),a=function(l,c){if(c[l])return c[l];for(var u=lx[l],g=0;g<u.length;++g)if(c[u[g]])return c[u[g]];throw new Error("Could not find a matching font-style for "+l)}(i.style,a),!(a=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=u7[l],g=Nw(c,cx,u,l<400?-1:1);if(!g)throw new Error("Could not find a matching font-weight for value "+l);return g}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Fw(i)+"'.");return a}function Kw(e){return e.trimLeft()}function h7(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function m7(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Dh,Lw,Ew,vy=["times"];(function(e){var t,n,r,o,i,a,s,l,c,u=function(H){return H=H||{},this.isStrokeTransparent=H.isStrokeTransparent||!1,this.strokeOpacity=H.strokeOpacity||1,this.strokeStyle=H.strokeStyle||"#000000",this.fillStyle=H.fillStyle||"#000000",this.isFillTransparent=H.isFillTransparent||!1,this.fillOpacity=H.fillOpacity||1,this.font=H.font||"10px sans-serif",this.textBaseline=H.textBaseline||"alphabetic",this.textAlign=H.textAlign||"left",this.lineWidth=H.lineWidth||1,this.lineJoin=H.lineJoin||"miter",this.lineCap=H.lineCap||"butt",this.path=H.path||[],this.transform=H.transform!==void 0?H.transform.clone():new l,this.globalCompositeOperation=H.globalCompositeOperation||"normal",this.globalAlpha=H.globalAlpha||1,this.clip_path=H.clip_path||[],this.currentPoint=H.currentPoint||new a,this.miterLimit=H.miterLimit||10,this.lastPoint=H.lastPoint||new a,this.lineDashOffset=H.lineDashOffset||0,this.lineDash=H.lineDash||[],this.margin=H.margin||[0,0,0,0],this.prevPageLastElemOffset=H.prevPageLastElemOffset||0,this.ignoreClearRect=typeof H.ignoreClearRect!="boolean"||H.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new g(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var g=function(H){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=H;Object.defineProperty(this,"pdf",{get:function(){return z}});var j=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return j},set:function(ye){j=!!ye}});var $=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return $},set:function(ye){$=!!ye}});var ee=0;Object.defineProperty(this,"posX",{get:function(){return ee},set:function(ye){isNaN(ye)||(ee=ye)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(ye){isNaN(ye)||(le=ye)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ye){var oe;typeof ye=="number"?oe=[ye,ye,ye,ye]:((oe=new Array(4))[0]=ye[0],oe[1]=ye.length>=2?ye[1]:oe[0],oe[2]=ye.length>=3?ye[2]:oe[0],oe[3]=ye.length>=4?ye[3]:oe[1]),c.margin=oe}});var Ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ie},set:function(ye){Ie=ye}});var Ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ae},set:function(ye){Ae=ye}});var Ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ge},set:function(ye){Ge=ye}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ye){ye instanceof u&&(c=ye)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ye){c.path=ye}});var We=[];Object.defineProperty(this,"ctxStack",{get:function(){return We},set:function(ye){We=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var oe;oe=d(ye),this.ctx.fillStyle=oe.style,this.ctx.isFillTransparent=oe.a===0,this.ctx.fillOpacity=oe.a,this.pdf.setFillColor(oe.r,oe.g,oe.b,{a:oe.a}),this.pdf.setTextColor(oe.r,oe.g,oe.b,{a:oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var oe=d(ye);this.ctx.strokeStyle=oe.style,this.ctx.isStrokeTransparent=oe.a===0,this.ctx.strokeOpacity=oe.a,oe.a===0?this.pdf.setDrawColor(255,255,255):(oe.a,this.pdf.setDrawColor(oe.r,oe.g,oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Je=null;function ze(ye,oe){if(Je===null){var ct=function(te){var ie=[];return Object.keys(te).forEach(function(ge){te[ge].forEach(function(be){var Ze=null;switch(be){case"bold":Ze={family:ge,weight:"bold"};break;case"italic":Ze={family:ge,style:"italic"};break;case"bolditalic":Ze={family:ge,weight:"bold",style:"italic"};break;case"":case"normal":Ze={family:ge}}Ze!==null&&(Ze.ref={name:ge,style:be},ie.push(Ze))})}),ie}(ye.getFontList());Je=function(te){for(var ie={},ge=0;ge<te.length;++ge){var be=wZ(te[ge]),Ze=be.family,he=be.stretch,Ne=be.style,rt=be.weight;ie[Ze]=ie[Ze]||{},ie[Ze][he]=ie[Ze][he]||{},ie[Ze][he][Ne]=ie[Ze][he][Ne]||{},ie[Ze][he][Ne][rt]=be}return ie}(ct.concat(oe))}return Je}var ke=null;Object.defineProperty(this,"fontFaces",{get:function(){return ke},set:function(ye){Je=null,ke=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var oe;if(this.ctx.font=ye,(oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var ct=oe[1],te=(oe[2],oe[3]),ie=oe[4],ge=(oe[5],oe[6]),be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ie)[2];ie=Math.floor(be==="px"?parseFloat(ie)*this.pdf.internal.scaleFactor:be==="em"?parseFloat(ie)*this.pdf.getFontSize():parseFloat(ie)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ie);var Ze=function(dt){var Zt,Ke,mn=[],Rt=dt.trim();if(Rt==="")return vy;if(Rt in Hw)return[Hw[Rt]];for(;Rt!=="";){switch(Ke=null,Zt=(Rt=Kw(Rt)).charAt(0)){case'"':case"'":Ke=h7(Rt.substring(1),Zt);break;default:Ke=m7(Rt)}if(Ke===null||(mn.push(Ke[0]),(Rt=Kw(Ke[1]))!==""&&Rt.charAt(0)!==","))return vy;Rt=Rt.replace(/^,/,"")}return mn}(ge);if(this.fontFaces){var he=A7(ze(this.pdf,this.fontFaces),Ze.map(function(dt){return{family:dt,stretch:"normal",weight:te,style:ct}}));this.pdf.setFont(he.ref.name,he.ref.style)}else{var Ne="";(te==="bold"||parseInt(te,10)>=700||ct==="bold")&&(Ne="bold"),ct==="italic"&&(Ne+="italic"),Ne.length===0&&(Ne="normal");for(var rt="",st={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},$e=0;$e<Ze.length;$e++){if(this.pdf.internal.getFont(Ze[$e],Ne,{noFallback:!0,disableWarning:!0})!==void 0){rt=Ze[$e];break}if(Ne==="bolditalic"&&this.pdf.internal.getFont(Ze[$e],"bold",{noFallback:!0,disableWarning:!0})!==void 0)rt=Ze[$e],Ne="bold";else if(this.pdf.internal.getFont(Ze[$e],"normal",{noFallback:!0,disableWarning:!0})!==void 0){rt=Ze[$e],Ne="normal";break}}if(rt===""){for(var ht=0;ht<Ze.length;ht++)if(st[Ze[ht]]){rt=st[Ze[ht]];break}}rt=rt===""?"Times":rt,this.pdf.setFont(rt,Ne)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};g.prototype.setLineDash=function(H){this.lineDash=H},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){Z.call(this,"fill",!1)},g.prototype.stroke=function(){Z.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(H,z){if(isNaN(H)||isNaN(z))throw Ln.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var j=this.ctx.transform.applyToPoint(new a(H,z));this.path.push({type:"mt",x:j.x,y:j.y}),this.ctx.lastPoint=new a(H,z)},g.prototype.closePath=function(){var H=new a(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&An(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){H=new a(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(H.x,H.y)},g.prototype.lineTo=function(H,z){if(isNaN(H)||isNaN(z))throw Ln.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var j=this.ctx.transform.applyToPoint(new a(H,z));this.path.push({type:"lt",x:j.x,y:j.y}),this.ctx.lastPoint=new a(j.x,j.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Z.call(this,null,!0)},g.prototype.quadraticCurveTo=function(H,z,j,$){if(isNaN(j)||isNaN($)||isNaN(H)||isNaN(z))throw Ln.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ee=this.ctx.transform.applyToPoint(new a(j,$)),le=this.ctx.transform.applyToPoint(new a(H,z));this.path.push({type:"qct",x1:le.x,y1:le.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new a(ee.x,ee.y)},g.prototype.bezierCurveTo=function(H,z,j,$,ee,le){if(isNaN(ee)||isNaN(le)||isNaN(H)||isNaN(z)||isNaN(j)||isNaN($))throw Ln.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ie=this.ctx.transform.applyToPoint(new a(ee,le)),Ae=this.ctx.transform.applyToPoint(new a(H,z)),Ge=this.ctx.transform.applyToPoint(new a(j,$));this.path.push({type:"bct",x1:Ae.x,y1:Ae.y,x2:Ge.x,y2:Ge.y,x:Ie.x,y:Ie.y}),this.ctx.lastPoint=new a(Ie.x,Ie.y)},g.prototype.arc=function(H,z,j,$,ee,le){if(isNaN(H)||isNaN(z)||isNaN(j)||isNaN($)||isNaN(ee))throw Ln.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var Ie=this.ctx.transform.applyToPoint(new a(H,z));H=Ie.x,z=Ie.y;var Ae=this.ctx.transform.applyToPoint(new a(0,j)),Ge=this.ctx.transform.applyToPoint(new a(0,0));j=Math.sqrt(Math.pow(Ae.x-Ge.x,2)+Math.pow(Ae.y-Ge.y,2))}Math.abs(ee-$)>=2*Math.PI&&($=0,ee=2*Math.PI),this.path.push({type:"arc",x:H,y:z,radius:j,startAngle:$,endAngle:ee,counterclockwise:le})},g.prototype.arcTo=function(H,z,j,$,ee){throw new Error("arcTo not implemented.")},g.prototype.rect=function(H,z,j,$){if(isNaN(H)||isNaN(z)||isNaN(j)||isNaN($))throw Ln.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(H,z),this.lineTo(H+j,z),this.lineTo(H+j,z+$),this.lineTo(H,z+$),this.lineTo(H,z),this.lineTo(H+j,z),this.lineTo(H,z)},g.prototype.fillRect=function(H,z,j,$){if(isNaN(H)||isNaN(z)||isNaN(j)||isNaN($))throw Ln.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!I.call(this)){var ee={};this.lineCap!=="butt"&&(ee.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ee.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(H,z,j,$),this.fill(),ee.hasOwnProperty("lineCap")&&(this.lineCap=ee.lineCap),ee.hasOwnProperty("lineJoin")&&(this.lineJoin=ee.lineJoin)}},g.prototype.strokeRect=function(H,z,j,$){if(isNaN(H)||isNaN(z)||isNaN(j)||isNaN($))throw Ln.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(H,z,j,$),this.stroke())},g.prototype.clearRect=function(H,z,j,$){if(isNaN(H)||isNaN(z)||isNaN(j)||isNaN($))throw Ln.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(H,z,j,$))},g.prototype.save=function(H){H=typeof H!="boolean"||H;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,j=0;j<this.pdf.internal.getNumberOfPages();j++)this.pdf.setPage(j+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),H){this.ctx.fontSize=this.pdf.internal.getFontSize();var $=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=$}},g.prototype.restore=function(H){H=typeof H!="boolean"||H;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,j=0;j<this.pdf.internal.getNumberOfPages();j++)this.pdf.setPage(j+1),this.pdf.internal.out("Q");this.pdf.setPage(z),H&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(H){var z,j,$,ee;if(H.isCanvasGradient===!0&&(H=H.getColor()),!H)return{r:0,g:0,b:0,a:0,style:H};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(H))z=0,j=0,$=0,ee=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(H);if(le!==null)z=parseInt(le[1]),j=parseInt(le[2]),$=parseInt(le[3]),ee=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(H))!==null)z=parseInt(le[1]),j=parseInt(le[2]),$=parseInt(le[3]),ee=parseFloat(le[4]);else{if(ee=1,typeof H=="string"&&H.charAt(0)!=="#"){var Ie=new tx(H);H=Ie.ok?Ie.toHex():"#000000"}H.length===4?(z=H.substring(1,2),z+=z,j=H.substring(2,3),j+=j,$=H.substring(3,4),$+=$):(z=H.substring(1,3),j=H.substring(3,5),$=H.substring(5,7)),z=parseInt(z,16),j=parseInt(j,16),$=parseInt($,16)}}return{r:z,g:j,b:$,a:ee,style:H}},I=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(H,z,j,$){if(isNaN(z)||isNaN(j)||typeof H!="string")throw Ln.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if($=isNaN($)?void 0:$,!I.call(this)){var ee=K(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;X.call(this,{text:H,x:z,y:j,scale:le,angle:ee,align:this.textAlign,maxWidth:$})}},g.prototype.strokeText=function(H,z,j,$){if(isNaN(z)||isNaN(j)||typeof H!="string")throw Ln.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){$=isNaN($)?void 0:$;var ee=K(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;X.call(this,{text:H,x:z,y:j,scale:le,renderingMode:"stroke",angle:ee,align:this.textAlign,maxWidth:$})}},g.prototype.measureText=function(H){if(typeof H!="string")throw Ln.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,j=this.pdf.internal.scaleFactor,$=z.internal.getFontSize(),ee=z.getStringUnitWidth(H)*$/z.internal.scaleFactor,le=function(Ie){var Ae=(Ie=Ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ae}}),this};return new le({width:ee*=Math.round(96*j/72*1e4)/1e4})},g.prototype.scale=function(H,z){if(isNaN(H)||isNaN(z))throw Ln.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var j=new l(H,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(j)},g.prototype.rotate=function(H){if(isNaN(H))throw Ln.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new l(Math.cos(H),Math.sin(H),-Math.sin(H),Math.cos(H),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},g.prototype.translate=function(H,z){if(isNaN(H)||isNaN(z))throw Ln.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var j=new l(1,0,0,1,H,z);this.ctx.transform=this.ctx.transform.multiply(j)},g.prototype.transform=function(H,z,j,$,ee,le){if(isNaN(H)||isNaN(z)||isNaN(j)||isNaN($)||isNaN(ee)||isNaN(le))throw Ln.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ie=new l(H,z,j,$,ee,le);this.ctx.transform=this.ctx.transform.multiply(Ie)},g.prototype.setTransform=function(H,z,j,$,ee,le){H=isNaN(H)?1:H,z=isNaN(z)?0:z,j=isNaN(j)?0:j,$=isNaN($)?1:$,ee=isNaN(ee)?0:ee,le=isNaN(le)?0:le,this.ctx.transform=new l(H,z,j,$,ee,le)};var h=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(H,z,j,$,ee,le,Ie,Ae,Ge){var We=this.pdf.getImageProperties(H),Je=1,ze=1,ke=1,ye=1;$!==void 0&&Ae!==void 0&&(ke=Ae/$,ye=Ge/ee,Je=We.width/$*Ae/$,ze=We.height/ee*Ge/ee),le===void 0&&(le=z,Ie=j,z=0,j=0),$!==void 0&&Ae===void 0&&(Ae=$,Ge=ee),$===void 0&&Ae===void 0&&(Ae=We.width,Ge=We.height);for(var oe,ct=this.ctx.transform.decompose(),te=K(ct.rotate.shx),ie=new l,ge=(ie=(ie=(ie=ie.multiply(ct.translate)).multiply(ct.skew)).multiply(ct.scale)).applyToRectangle(new s(le-z*ke,Ie-j*ye,$*Je,ee*ze)),be=f.call(this,ge),Ze=[],he=0;he<be.length;he+=1)Ze.indexOf(be[he])===-1&&Ze.push(be[he]);if(p(Ze),this.autoPaging)for(var Ne=Ze[0],rt=Ze[Ze.length-1],st=Ne;st<rt+1;st++){this.pdf.setPage(st);var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ht=st===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=st===1?0:dt+(st-2)*Zt;if(this.ctx.clip_path.length!==0){var mn=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(oe,this.posX+this.margin[3],-Ke+ht+this.ctx.prevPageLastElemOffset),v.call(this,"fill",!0),this.path=mn}var Rt=JSON.parse(JSON.stringify(ge));Rt=m([Rt],this.posX+this.margin[3],-Ke+ht+this.ctx.prevPageLastElemOffset)[0];var mt=(st>Ne||st<rt)&&h.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,Zt,null).clip().discardPath()),this.pdf.addImage(H,"JPEG",Rt.x,Rt.y,Rt.w,Rt.h,null,null,te),mt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(H,"JPEG",ge.x,ge.y,ge.w,ge.h,null,null,te)};var f=function(H,z,j){var $=[];z=z||this.pdf.internal.pageSize.width,j=j||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ee=this.posY+this.ctx.prevPageLastElemOffset;switch(H.type){default:case"mt":case"lt":$.push(Math.floor((H.y+ee)/j)+1);break;case"arc":$.push(Math.floor((H.y+ee-H.radius)/j)+1),$.push(Math.floor((H.y+ee+H.radius)/j)+1);break;case"qct":var le=E(this.ctx.lastPoint.x,this.ctx.lastPoint.y,H.x1,H.y1,H.x,H.y);$.push(Math.floor((le.y+ee)/j)+1),$.push(Math.floor((le.y+le.h+ee)/j)+1);break;case"bct":var Ie=O(this.ctx.lastPoint.x,this.ctx.lastPoint.y,H.x1,H.y1,H.x2,H.y2,H.x,H.y);$.push(Math.floor((Ie.y+ee)/j)+1),$.push(Math.floor((Ie.y+Ie.h+ee)/j)+1);break;case"rect":$.push(Math.floor((H.y+ee)/j)+1),$.push(Math.floor((H.y+H.h+ee)/j)+1)}for(var Ae=0;Ae<$.length;Ae+=1)for(;this.pdf.internal.getNumberOfPages()<$[Ae];)A.call(this);return $},A=function(){var H=this.fillStyle,z=this.strokeStyle,j=this.font,$=this.lineCap,ee=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=H,this.strokeStyle=z,this.font=j,this.lineCap=$,this.lineWidth=ee,this.lineJoin=le},m=function(H,z,j){for(var $=0;$<H.length;$++)switch(H[$].type){case"bct":H[$].x2+=z,H[$].y2+=j;case"qct":H[$].x1+=z,H[$].y1+=j;case"mt":case"lt":case"arc":default:H[$].x+=z,H[$].y+=j}return H},p=function(H){return H.sort(function(z,j){return z-j})},Z=function(H,z){for(var j,$,ee=this.fillStyle,le=this.strokeStyle,Ie=this.lineCap,Ae=this.lineWidth,Ge=Math.abs(Ae*this.ctx.transform.scaleX),We=this.lineJoin,Je=JSON.parse(JSON.stringify(this.path)),ze=JSON.parse(JSON.stringify(this.path)),ke=[],ye=0;ye<ze.length;ye++)if(ze[ye].x!==void 0)for(var oe=f.call(this,ze[ye]),ct=0;ct<oe.length;ct+=1)ke.indexOf(oe[ct])===-1&&ke.push(oe[ct]);for(var te=0;te<ke.length;te++)for(;this.pdf.internal.getNumberOfPages()<ke[te];)A.call(this);if(p(ke),this.autoPaging)for(var ie=ke[0],ge=ke[ke.length-1],be=ie;be<ge+1;be++){this.pdf.setPage(be),this.fillStyle=ee,this.strokeStyle=le,this.lineCap=Ie,this.lineWidth=Ge,this.lineJoin=We;var Ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],he=be===1?this.posY+this.margin[0]:this.margin[0],Ne=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],st=be===1?0:Ne+(be-2)*rt;if(this.ctx.clip_path.length!==0){var $e=this.path;j=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(j,this.posX+this.margin[3],-st+he+this.ctx.prevPageLastElemOffset),v.call(this,H,!0),this.path=$e}if($=JSON.parse(JSON.stringify(Je)),this.path=m($,this.posX+this.margin[3],-st+he+this.ctx.prevPageLastElemOffset),z===!1||be===0){var ht=(be>ie||be<ge)&&h.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,rt,null).clip().discardPath()),v.call(this,H,z),ht&&this.pdf.restoreGraphicsState()}this.lineWidth=Ae}else this.lineWidth=Ge,v.call(this,H,z),this.lineWidth=Ae;this.path=Je},v=function(H,z){if((H!=="stroke"||z||!C.call(this))&&(H==="stroke"||z||!I.call(this))){for(var j,$,ee=[],le=this.path,Ie=0;Ie<le.length;Ie++){var Ae=le[Ie];switch(Ae.type){case"begin":ee.push({begin:!0});break;case"close":ee.push({close:!0});break;case"mt":ee.push({start:Ae,deltas:[],abs:[]});break;case"lt":var Ge=ee.length;if(le[Ie-1]&&!isNaN(le[Ie-1].x)&&(j=[Ae.x-le[Ie-1].x,Ae.y-le[Ie-1].y],Ge>0)){for(;Ge>=0;Ge--)if(ee[Ge-1].close!==!0&&ee[Ge-1].begin!==!0){ee[Ge-1].deltas.push(j),ee[Ge-1].abs.push(Ae);break}}break;case"bct":j=[Ae.x1-le[Ie-1].x,Ae.y1-le[Ie-1].y,Ae.x2-le[Ie-1].x,Ae.y2-le[Ie-1].y,Ae.x-le[Ie-1].x,Ae.y-le[Ie-1].y],ee[ee.length-1].deltas.push(j);break;case"qct":var We=le[Ie-1].x+2/3*(Ae.x1-le[Ie-1].x),Je=le[Ie-1].y+2/3*(Ae.y1-le[Ie-1].y),ze=Ae.x+2/3*(Ae.x1-Ae.x),ke=Ae.y+2/3*(Ae.y1-Ae.y),ye=Ae.x,oe=Ae.y;j=[We-le[Ie-1].x,Je-le[Ie-1].y,ze-le[Ie-1].x,ke-le[Ie-1].y,ye-le[Ie-1].x,oe-le[Ie-1].y],ee[ee.length-1].deltas.push(j);break;case"arc":ee.push({deltas:[],abs:[],arc:!0}),Array.isArray(ee[ee.length-1].abs)&&ee[ee.length-1].abs.push(Ae)}}$=z?null:H==="stroke"?"stroke":"fill";for(var ct=!1,te=0;te<ee.length;te++)if(ee[te].arc)for(var ie=ee[te].abs,ge=0;ge<ie.length;ge++){var be=ie[ge];be.type==="arc"?y.call(this,be.x,be.y,be.radius,be.startAngle,be.endAngle,be.counterclockwise,void 0,z,!ct):Y.call(this,be.x,be.y),ct=!0}else if(ee[te].close===!0)this.pdf.internal.out("h"),ct=!1;else if(ee[te].begin!==!0){var Ze=ee[te].start.x,he=ee[te].start.y;x.call(this,ee[te].deltas,Ze,he),ct=!0}$&&W.call(this,$),z&&G.call(this)}},k=function(H){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,j=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return H-j;case"top":return H+z-j;case"hanging":return H+z-2*j;case"middle":return H+z/2-j;case"ideographic":return H;case"alphabetic":default:return H}},B=function(H){return H+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var H=function(){};return H.colorStops=[],H.addColorStop=function(z,j){this.colorStops.push([z,j])},H.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},H.isCanvasGradient=!0,H},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var y=function(H,z,j,$,ee,le,Ie,Ae,Ge){for(var We=L.call(this,j,$,ee,le),Je=0;Je<We.length;Je++){var ze=We[Je];Je===0&&(Ge?R.call(this,ze.x1+H,ze.y1+z):Y.call(this,ze.x1+H,ze.y1+z)),D.call(this,H,z,ze.x2,ze.y2,ze.x3,ze.y3,ze.x4,ze.y4)}Ae?G.call(this):W.call(this,Ie)},W=function(H){switch(H){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},G=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(H,z){this.pdf.internal.out(n(H)+" "+r(z)+" m")},X=function(H){var z;switch(H.align){case"right":case"end":z="right";break;case"center":z="center";break;case"left":case"start":default:z="left"}var j=this.pdf.getTextDimensions(H.text),$=k.call(this,H.y),ee=B.call(this,$)-j.h,le=this.ctx.transform.applyToPoint(new a(H.x,$)),Ie=this.ctx.transform.decompose(),Ae=new l;Ae=(Ae=(Ae=Ae.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale);for(var Ge,We,Je,ze=this.ctx.transform.applyToRectangle(new s(H.x,$,j.w,j.h)),ke=Ae.applyToRectangle(new s(H.x,ee,j.w,j.h)),ye=f.call(this,ke),oe=[],ct=0;ct<ye.length;ct+=1)oe.indexOf(ye[ct])===-1&&oe.push(ye[ct]);if(p(oe),this.autoPaging)for(var te=oe[0],ie=oe[oe.length-1],ge=te;ge<ie+1;ge++){this.pdf.setPage(ge);var be=ge===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],he=this.pdf.internal.pageSize.height-this.margin[2],Ne=he-this.margin[0],rt=this.pdf.internal.pageSize.width-this.margin[1],st=rt-this.margin[3],$e=ge===1?0:Ze+(ge-2)*Ne;if(this.ctx.clip_path.length!==0){var ht=this.path;Ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(Ge,this.posX+this.margin[3],-1*$e+be),v.call(this,"fill",!0),this.path=ht}var dt=m([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-$e+be+this.ctx.prevPageLastElemOffset)[0];H.scale>=.01&&(We=this.pdf.internal.getFontSize(),this.pdf.setFontSize(We*H.scale),Je=this.lineWidth,this.lineWidth=Je*H.scale);var Zt=this.autoPaging!=="text";if(Zt||dt.y+dt.h<=he){if(Zt||dt.y>=be&&dt.x<=rt){var Ke=Zt?H.text:this.pdf.splitTextToSize(H.text,H.maxWidth||rt-dt.x)[0],mn=m([JSON.parse(JSON.stringify(ze))],this.posX+this.margin[3],-$e+be+this.ctx.prevPageLastElemOffset)[0],Rt=Zt&&(ge>te||ge<ie)&&h.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,Ne,null).clip().discardPath()),this.pdf.text(Ke,mn.x,mn.y,{angle:H.angle,align:z,renderingMode:H.renderingMode}),Rt&&this.pdf.restoreGraphicsState()}}else dt.y<he&&(this.ctx.prevPageLastElemOffset+=he-dt.y);H.scale>=.01&&(this.pdf.setFontSize(We),this.lineWidth=Je)}else H.scale>=.01&&(We=this.pdf.internal.getFontSize(),this.pdf.setFontSize(We*H.scale),Je=this.lineWidth,this.lineWidth=Je*H.scale),this.pdf.text(H.text,le.x+this.posX,le.y+this.posY,{angle:H.angle,align:z,renderingMode:H.renderingMode,maxWidth:H.maxWidth}),H.scale>=.01&&(this.pdf.setFontSize(We),this.lineWidth=Je)},Y=function(H,z,j,$){j=j||0,$=$||0,this.pdf.internal.out(n(H+j)+" "+r(z+$)+" l")},x=function(H,z,j){return this.pdf.lines(H,z,j,null,null)},D=function(H,z,j,$,ee,le,Ie,Ae){this.pdf.internal.out([t(o(j+H)),t(i($+z)),t(o(ee+H)),t(i(le+z)),t(o(Ie+H)),t(i(Ae+z)),"c"].join(" "))},L=function(H,z,j,$){for(var ee=2*Math.PI,le=Math.PI/2;z>j;)z-=ee;var Ie=Math.abs(j-z);Ie<ee&&$&&(Ie=ee-Ie);for(var Ae=[],Ge=$?-1:1,We=z;Ie>1e-5;){var Je=We+Ge*Math.min(Ie,le);Ae.push(M.call(this,H,We,Je)),Ie-=Math.abs(Je-We),We=Je}return Ae},M=function(H,z,j){var $=(j-z)/2,ee=H*Math.cos($),le=H*Math.sin($),Ie=ee,Ae=-le,Ge=Ie*Ie+Ae*Ae,We=Ge+Ie*ee+Ae*le,Je=4/3*(Math.sqrt(2*Ge*We)-We)/(Ie*le-Ae*ee),ze=Ie-Je*Ae,ke=Ae+Je*Ie,ye=ze,oe=-ke,ct=$+z,te=Math.cos(ct),ie=Math.sin(ct);return{x1:H*Math.cos(z),y1:H*Math.sin(z),x2:ze*te-ke*ie,y2:ze*ie+ke*te,x3:ye*te-oe*ie,y3:ye*ie+oe*te,x4:H*Math.cos(j),y4:H*Math.sin(j)}},K=function(H){return 180*H/Math.PI},E=function(H,z,j,$,ee,le){var Ie=H+.5*(j-H),Ae=z+.5*($-z),Ge=ee+.5*(j-ee),We=le+.5*($-le),Je=Math.min(H,ee,Ie,Ge),ze=Math.max(H,ee,Ie,Ge),ke=Math.min(z,le,Ae,We),ye=Math.max(z,le,Ae,We);return new s(Je,ke,ze-Je,ye-ke)},O=function(H,z,j,$,ee,le,Ie,Ae){var Ge,We,Je,ze,ke,ye,oe,ct,te,ie,ge,be,Ze,he,Ne=j-H,rt=$-z,st=ee-j,$e=le-$,ht=Ie-ee,dt=Ae-le;for(We=0;We<41;We++)te=(oe=(Je=H+(Ge=We/40)*Ne)+Ge*((ke=j+Ge*st)-Je))+Ge*(ke+Ge*(ee+Ge*ht-ke)-oe),ie=(ct=(ze=z+Ge*rt)+Ge*((ye=$+Ge*$e)-ze))+Ge*(ye+Ge*(le+Ge*dt-ye)-ct),We==0?(ge=te,be=ie,Ze=te,he=ie):(ge=Math.min(ge,te),be=Math.min(be,ie),Ze=Math.max(Ze,te),he=Math.max(he,ie));return new s(Math.round(ge),Math.round(be),Math.round(Ze-ge),Math.round(he-be))},re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var H,z,j=(H=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:H,lineDashOffset:z}));this.prevLineDash!==j&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=j)}}})(Wt.API),function(e){var t=function(i){var a,s,l,c,u,g,d,I,C,h;for(s=[],l=0,c=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;c>l;l+=4)(u=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(g=(u=((u=((u=((u=(u-(h=u%85))/85)-(C=u%85))/85)-(I=u%85))/85)-(d=u%85))/85)%85,s.push(g+33,d+33,I+33,C+33,h+33)):s.push(122);return function(f,A){for(var m=A;m>0;m--)f.pop()}(s,a.length),String.fromCharCode.apply(String,s)+"~>"},n=function(i){var a,s,l,c,u,g=String,d="length",I=255,C="charCodeAt",h="slice",f="replace";for(i[h](-2),i=i[h](0,-2)[f](/\s/g,"")[f]("z","!!!!!"),l=[],c=0,u=(i+=a="uuuuu"[h](i[d]%5||5))[d];u>c;c+=5)s=52200625*(i[C](c)-33)+614125*(i[C](c+1)-33)+7225*(i[C](c+2)-33)+85*(i[C](c+3)-33)+(i[C](c+4)-33),l.push(I&s>>24,I&s>>16,I&s>>8,I&s);return function(A,m){for(var p=m;p>0;p--)A.pop()}(l,a[d]),g.fromCharCode.apply(g,l)},r=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var s="",l=0;l<i.length;l+=2)s+=String.fromCharCode("0x"+(i[l]+i[l+1]));return s},o=function(i){for(var a=new Uint8Array(i.length),s=i.length;s--;)a[s]=i.charCodeAt(s);return i=(a=yZ(a)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};e.processDataByFilters=function(i,a){var s=0,l=i||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),s=0;s<a.length;s+=1)switch(a[s]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=o(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[s]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Wt.API),function(e){e.loadFile=function(t,n,r){return function(o,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var s=void 0;try{s=function(l,c,u){var g=new XMLHttpRequest,d=0,I=function(C){var h=C.length,f=[],A=String.fromCharCode;for(d=0;d<h;d+=1)f.push(A(255&C.charCodeAt(d)));return f.join("")};if(g.open("GET",l,!c),g.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(g.onload=function(){g.status===200?u(I(this.responseText)):u(void 0)}),g.send(null),c&&g.status===200)return I(g.responseText)}(o,i,a)}catch{}return s}(t,n,r)},e.loadImageFile=e.loadFile}(Wt.API),function(e){function t(){return(xt.html2canvas?Promise.resolve(xt.html2canvas):hZ(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(xt.DOMPurify?Promise.resolve(xt.DOMPurify):hZ(()=>import("./purify.es-a-CayzAK.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var s=An(a);return s==="undefined"?"undefined":s==="string"||a instanceof String?"string":s==="number"||a instanceof Number?"number":s==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":s==="object"?"object":"unknown"},o=function(a,s){var l=document.createElement(a);for(var c in s.className&&(l.className=s.className),s.innerHTML&&s.dompurify&&(l.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)l.style[c]=s.style[c];return l},i=function a(s){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,a,1,[a])).set(s)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,s){return a.__proto__=s||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,s){return this.then(function(){switch(s=s||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(l){return this.set({src:o("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function l(c,u){for(var g=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),d=c.firstChild;d;d=d.nextSibling)u!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||g.appendChild(l(d,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(g.width=c.width,g.height=c.height,g.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(g.value=c.value),g.addEventListener("load",function(){g.scrollTop=c.scrollTop,g.scrollLeft=c.scrollLeft},!0)),g}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(s){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,s(this.prop.container,l)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(s){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var d=0;d<c.length;++d){var I=c[d],C=I.src.find(function(h){return h.format==="truetype"});C&&l.addFont(C.url,I.ref.name,I.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,l.context2d.save(!0),s(this.prop.container,g)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,s,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,s):this.outputPdf(a,s)},i.prototype.outputPdf=function(a,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,s)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(r(a)!=="object")return this;var s=Object.keys(a||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(s)})},i.prototype.get=function(a,s){return this.then(function(){var l=a in i.template.prop?this.prop[a]:this.opt[a];return s?s(l):l})},i.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function s(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(a=a||Wt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:s(a.inner.width,a.k),height:s(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,s,l,c){return a!=null&&(this.progress.val=a),s!=null&&(this.progress.state=s),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,s,l,c){return this.setProgress(a?this.progress.val+a:null,s||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(a,s){var l=this;return this.thenCore(a,s,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(g){return l.updateProgress(null,c),g}).then(c,u).then(function(g){return l.updateProgress(1),g})})},i.prototype.thenCore=function(a,s,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),s&&(s=s.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=l.call(c,a,s);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(a,s){return Promise.prototype.then.call(this,a,s)},i.prototype.thenList=function(a){var s=this;return a.forEach(function(l){s=s.thenCore(l)}),s},i.prototype.catch=function(a){a&&(a=a.bind(this));var s=Promise.prototype.catch.call(this,a);return i.convert(s,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Wt.getPageSize=function(a,s,l){if(An(a)==="object"){var c=a;a=c.orientation,s=c.unit||s,l=c.format||l}s=s||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var u,g=(""+l).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+s}var I,C=0,h=0;if(d.hasOwnProperty(g))C=d[g][1]/u,h=d[g][0]/u;else try{C=l[1],h=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",h>C&&(I=h,h=C,C=I);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",C>h&&(I=h,h=C,C=I)}return{width:h,height:C,unit:s,k:u,orientation:a}},e.html=function(a,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(wZ):null;var l=new i(s);return s.worker?l:l.from(a).doCallback()}}(Wt.API),Wt.API.addJS=function(e){return Ew=e,this.internal.events.subscribe("postPutResources",function(){Dh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Dh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Lw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ew+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Dh!==void 0&&Lw!==void 0&&this.internal.out("/Names <</JavaScript "+Dh+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),i=0;i<o.length;i++){var a=o[i],s=r.exec(a);if(s!=null){var l=s[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var g=n.internal.newObject();u.push(g);var d=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var I=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<u.length;i++)n.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+I+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,o,i){var a={title:o,options:i,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var a=r.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var s=this.count=this.count_r({count:0},a);if(s>0&&this.line("/Count "+s),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,o){for(var i=0;i<o.children.length;i++)r.count++,this.count_r(r,o.children[i]);return r.count}}])}(Wt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,o,i,a,s){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(g){for(var d,I=256*g.charCodeAt(4)+g.charCodeAt(5),C=g.length,h={width:0,height:0,numcomponents:1},f=4;f<C;f+=2){if(f+=I,t.indexOf(g.charCodeAt(f+1))!==-1){d=256*g.charCodeAt(f+5)+g.charCodeAt(f+6),h={width:256*g.charCodeAt(f+7)+g.charCodeAt(f+8),height:d,numcomponents:g.charCodeAt(f+9)};break}I=256*g.charCodeAt(f+2)+g.charCodeAt(f+3)}return h}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:c,index:r,alias:o}}return u}}(Wt.API);var aI,zh,Mw,Dw,zw,p7=function(){var e,t,n;function r(i){var a,s,l,c,u,g,d,I,C,h,f,A,m,p;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},g=null;;){switch(a=this.readUInt32(),C=(function(){var Z,v;for(v=[],Z=0;Z<4;++Z)v.push(String.fromCharCode(this.data[this.pos++]));return v}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":g&&this.animation.frames.push(g),this.pos+=4,g={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,g.delay=1e3*u/c,g.disposeOp=this.data[this.pos++],g.blendOp=this.data[this.pos++],g.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,a-=4),i=(g!=null?g.data:void 0)||this.imgData,A=0;0<=a?A<a:A>a;0<=a?++A:--A)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((h=l-this.transparency.indexed.length)>0)for(m=0;0<=h?m<h:m>h;0<=h?++m:--m)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":d=(f=this.read(a)).indexOf(0),I=String.fromCharCode.apply(String,f.slice(0,d)),this.text[I]=String.fromCharCode.apply(String,f.slice(d+1));break;case"IEND":return g&&this.animation.frames.push(g),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(p=this.colorType)===4||p===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var a,s;for(s=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)s.push(this.data[this.pos++]);return s},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*a),l=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(g,d,I,C){var h,f,A,m,p,Z,v,k,B,y,W,G,R,X,Y,x,D,L,M,K,E,O=Math.ceil((c.width-g)/I),re=Math.ceil((c.height-d)/C),H=c.width==O&&c.height==re;for(X=a*O,G=H?s:new Uint8Array(X*re),Z=i.length,R=0,f=0;R<re&&l<Z;){switch(i[l++]){case 0:for(m=D=0;D<X;m=D+=1)G[f++]=i[l++];break;case 1:for(m=L=0;L<X;m=L+=1)h=i[l++],p=m<a?0:G[f-a],G[f++]=(h+p)%256;break;case 2:for(m=M=0;M<X;m=M+=1)h=i[l++],A=(m-m%a)/a,Y=R&&G[(R-1)*X+A*a+m%a],G[f++]=(Y+h)%256;break;case 3:for(m=K=0;K<X;m=K+=1)h=i[l++],A=(m-m%a)/a,p=m<a?0:G[f-a],Y=R&&G[(R-1)*X+A*a+m%a],G[f++]=(h+Math.floor((p+Y)/2))%256;break;case 4:for(m=E=0;E<X;m=E+=1)h=i[l++],A=(m-m%a)/a,p=m<a?0:G[f-a],R===0?Y=x=0:(Y=G[(R-1)*X+A*a+m%a],x=A&&G[(R-1)*X+(A-1)*a+m%a]),v=p+Y-x,k=Math.abs(v-p),y=Math.abs(v-Y),W=Math.abs(v-x),B=k<=y&&k<=W?p:y<=W?Y:x,G[f++]=(h+B)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!H){var z=((d+R*C)*c.width+g)*a,j=R*X;for(m=0;m<O;m+=1){for(var $=0;$<a;$+=1)s[z++]=G[j++];z+=(I-1)*a}}R++}}return i=PO(i),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),s},r.prototype.decodePalette=function(){var i,a,s,l,c,u,g,d,I;for(s=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+s.length),l=0,i=0,a=g=0,d=s.length;g<d;a=g+=3)c[l++]=s[a],c[l++]=s[a+1],c[l++]=s[a+2],c[l++]=(I=u[i++])!=null?I:255;return c},r.prototype.copyToImageData=function(i,a){var s,l,c,u,g,d,I,C,h,f,A;if(l=this.colors,h=null,s=this.hasAlphaChannel,this.palette.length&&(h=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),l=4,s=!0),C=(c=i.data||i).length,g=h||a,u=d=0,l===1)for(;u<C;)I=h?4*a[u/4]:d,f=g[I++],c[u++]=f,c[u++]=f,c[u++]=f,c[u++]=s?g[I++]:255,d=I;else for(;u<C;)I=h?4*a[u/4]:d,c[u++]=g[I++],c[u++]=g[I++],c[u++]=g[I++],c[u++]=s?g[I++]:255,d=I},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var o=function(){if(Object.prototype.toString.call(xt)==="[object Window]"){try{t=xt.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return o(),e=function(i){var a;if(o()===!0)return n.width=i.width,n.height=i.height,n.clearRect(0,0,i.width,i.height),n.putImageData(i,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var a,s,l,c,u,g,d,I;if(this.animation){for(I=[],s=u=0,g=(d=this.animation.frames).length;u<g;s=++u)a=d[s],l=i.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,c),a.imageData=l,I.push(a.image=e(l));return I}},r.prototype.renderFrame=function(i,a){var s,l,c;return s=(l=this.animation.frames)[a],c=l[a-1],a===0&&i.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),s.blendOp===0&&i.clearRect(s.xOffset,s.yOffset,s.width,s.height),i.drawImage(s.image,s.xOffset,s.yOffset)},r.prototype.animate=function(i){var a,s,l,c,u,g,d=this;return s=0,g=this.animation,c=g.numFrames,l=g.frames,u=g.numPlays,(a=function(){var I,C;if(I=s++%c,C=l[I],d.renderFrame(i,I),c>1&&s/c<u)return d.animation._timeout=setTimeout(a,C.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var a,s;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(s=a.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),a.putImageData(s,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function f7(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,o=e[t++],i=o>>7,a=1<<(7&o)+1;e[t++],e[t++];var s=null,l=null;i&&(s=t,l=a,t+=3*a);var c=!0,u=[],g=0,d=null,I=0,C=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,C=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var h=e[t++];g=e[t++]|e[t++]<<8,d=e[t++],!(1&h)&&(d=null),I=h>>2&7,t++;break;case 254:for(;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var f=e[t++]|e[t++]<<8,A=e[t++]|e[t++]<<8,m=e[t++]|e[t++]<<8,p=e[t++]|e[t++]<<8,Z=e[t++],v=Z>>6&1,k=1<<(7&Z)+1,B=s,y=l,W=!1;Z>>7&&(W=!0,B=t,y=k,t+=3*k);var G=t;for(t++;;){var R;if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}u.push({x:f,y:A,width:m,height:p,has_local_palette:W,palette_offset:B,palette_size:y,data_offset:G,data_length:t-G,transparent_index:d,interlaced:!!v,delay:g,disposal:I});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return C},this.frameInfo=function(X){if(X<0||X>=u.length)throw new Error("Frame index out of range.");return u[X]},this.decodeAndBlitFrameBGRA=function(X,Y){var x=this.frameInfo(X),D=x.width*x.height,L=new Uint8Array(D);Tw(e,x.data_offset,L,D);var M=x.palette_offset,K=x.transparent_index;K===null&&(K=256);var E=x.width,O=n-E,re=E,H=4*(x.y*n+x.x),z=4*((x.y+x.height)*n+x.x),j=H,$=4*O;x.interlaced===!0&&($+=4*n*7);for(var ee=8,le=0,Ie=L.length;le<Ie;++le){var Ae=L[le];if(re===0&&(re=E,(j+=$)>=z&&($=4*O+4*n*(ee-1),j=H+(E+O)*(ee<<1),ee>>=1)),Ae===K)j+=4;else{var Ge=e[M+3*Ae],We=e[M+3*Ae+1],Je=e[M+3*Ae+2];Y[j++]=Je,Y[j++]=We,Y[j++]=Ge,Y[j++]=255}--re}},this.decodeAndBlitFrameRGBA=function(X,Y){var x=this.frameInfo(X),D=x.width*x.height,L=new Uint8Array(D);Tw(e,x.data_offset,L,D);var M=x.palette_offset,K=x.transparent_index;K===null&&(K=256);var E=x.width,O=n-E,re=E,H=4*(x.y*n+x.x),z=4*((x.y+x.height)*n+x.x),j=H,$=4*O;x.interlaced===!0&&($+=4*n*7);for(var ee=8,le=0,Ie=L.length;le<Ie;++le){var Ae=L[le];if(re===0&&(re=E,(j+=$)>=z&&($=4*O+4*n*(ee-1),j=H+(E+O)*(ee<<1),ee>>=1)),Ae===K)j+=4;else{var Ge=e[M+3*Ae],We=e[M+3*Ae+1],Je=e[M+3*Ae+2];Y[j++]=Ge,Y[j++]=We,Y[j++]=Je,Y[j++]=255}--re}}}function Tw(e,t,n,r){for(var o=e[t++],i=1<<o,a=i+1,s=a+1,l=o+1,c=(1<<l)-1,u=0,g=0,d=0,I=e[t++],C=new Int32Array(4096),h=null;;){for(;u<16&&I!==0;)g|=e[t++]<<u,u+=8,I===1?I=e[t++]:--I;if(u<l)break;var f=g&c;if(g>>=l,u-=l,f!==i){if(f===a)break;for(var A=f<s?f:h,m=0,p=A;p>i;)p=C[p]>>8,++m;var Z=p;if(d+m+(A!==f?1:0)>r)return void Ln.log("Warning, gif stream longer than expected.");n[d++]=Z;var v=d+=m;for(A!==f&&(n[d++]=Z),p=A;m--;)p=C[p],n[--v]=255&p,p>>=8;h!==null&&s<4096&&(C[s++]=h<<8|Z,s>=c+1&&l<12&&(++l,c=c<<1|1)),h=f}else s=a+1,c=(1<<(l=o+1))-1,h=null}return d!==r&&Ln.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Gy(e){var t,n,r,o,i,a=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),g=new Array(65535),d=new Array(65535),I=new Array(64),C=new Array(64),h=[],f=0,A=7,m=new Array(64),p=new Array(64),Z=new Array(64),v=new Array(256),k=new Array(2048),B=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],y=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],X=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],x=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],D=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function L(H,z){for(var j=0,$=0,ee=new Array,le=1;le<=16;le++){for(var Ie=1;Ie<=H[le];Ie++)ee[z[$]]=[],ee[z[$]][0]=j,ee[z[$]][1]=le,$++,j++;j*=2}return ee}function M(H){for(var z=H[0],j=H[1]-1;j>=0;)z&1<<j&&(f|=1<<A),j--,--A<0&&(f==255?(K(255),K(0)):K(f),A=7,f=0)}function K(H){h.push(H)}function E(H){K(H>>8&255),K(255&H)}function O(H,z,j,$,ee){for(var le,Ie=ee[0],Ae=ee[240],Ge=function(ie,ge){var be,Ze,he,Ne,rt,st,$e,ht,dt,Zt,Ke=0;for(dt=0;dt<8;++dt){be=ie[Ke],Ze=ie[Ke+1],he=ie[Ke+2],Ne=ie[Ke+3],rt=ie[Ke+4],st=ie[Ke+5],$e=ie[Ke+6];var mn=be+(ht=ie[Ke+7]),Rt=be-ht,mt=Ze+$e,pt=Ze-$e,Nt=he+st,er=he-st,Ot=Ne+rt,Ia=Ne-rt,Rn=mn+Ot,zr=mn-Ot,Wo=mt+Nt,Qt=mt-Nt;ie[Ke]=Rn+Wo,ie[Ke+4]=Rn-Wo;var yt=.707106781*(Qt+zr);ie[Ke+2]=zr+yt,ie[Ke+6]=zr-yt;var qt=.382683433*((Rn=Ia+er)-(Qt=pt+Rt)),cn=.5411961*Rn+qt,pn=1.306562965*Qt+qt,Do=.707106781*(Wo=er+pt),eo=Rt+Do,St=Rt-Do;ie[Ke+5]=St+cn,ie[Ke+3]=St-cn,ie[Ke+1]=eo+pn,ie[Ke+7]=eo-pn,Ke+=8}for(Ke=0,dt=0;dt<8;++dt){be=ie[Ke],Ze=ie[Ke+8],he=ie[Ke+16],Ne=ie[Ke+24],rt=ie[Ke+32],st=ie[Ke+40],$e=ie[Ke+48];var Nr=be+(ht=ie[Ke+56]),to=be-ht,Ar=Ze+$e,Un=Ze-$e,se=he+st,de=he-st,we=Ne+rt,Fe=Ne-rt,it=Nr+we,At=Nr-we,Gt=Ar+se,He=Ar-se;ie[Ke]=it+Gt,ie[Ke+32]=it-Gt;var tt=.707106781*(He+At);ie[Ke+16]=At+tt,ie[Ke+48]=At-tt;var _e=.382683433*((it=Fe+de)-(He=Un+to)),gt=.5411961*it+_e,Xt=1.306562965*He+_e,_t=.707106781*(Gt=de+Un),ln=to+_t,Tt=to-_t;ie[Ke+40]=Tt+gt,ie[Ke+24]=Tt-gt,ie[Ke+8]=ln+Xt,ie[Ke+56]=ln-Xt,Ke++}for(dt=0;dt<64;++dt)Zt=ie[dt]*ge[dt],I[dt]=Zt>0?Zt+.5|0:Zt-.5|0;return I}(H,z),We=0;We<64;++We)C[B[We]]=Ge[We];var Je=C[0]-j;j=C[0],Je==0?M($[0]):(M($[d[le=32767+Je]]),M(g[le]));for(var ze=63;ze>0&&C[ze]==0;)ze--;if(ze==0)return M(Ie),j;for(var ke,ye=1;ye<=ze;){for(var oe=ye;C[ye]==0&&ye<=ze;)++ye;var ct=ye-oe;if(ct>=16){ke=ct>>4;for(var te=1;te<=ke;++te)M(Ae);ct&=15}le=32767+C[ye],M(ee[(ct<<4)+d[le]]),M(g[le]),ye++}return ze!=63&&M(Ie),j}function re(H){H=Math.min(Math.max(H,1),100),i!=H&&(function(z){for(var j=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],$=0;$<64;$++){var ee=a((j[$]*z+50)/100);ee=Math.min(Math.max(ee,1),255),s[B[$]]=ee}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ie=0;Ie<64;Ie++){var Ae=a((le[Ie]*z+50)/100);Ae=Math.min(Math.max(Ae,1),255),l[B[Ie]]=Ae}for(var Ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],We=0,Je=0;Je<8;Je++)for(var ze=0;ze<8;ze++)c[We]=1/(s[B[We]]*Ge[Je]*Ge[ze]*8),u[We]=1/(l[B[We]]*Ge[Je]*Ge[ze]*8),We++}(H<50?Math.floor(5e3/H):Math.floor(200-2*H)),i=H)}this.encode=function(H,z){z&&re(z),h=new Array,f=0,A=7,E(65496),E(65504),E(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),E(1),E(1),K(0),K(0),function(){E(65499),E(132),K(0);for(var Ze=0;Ze<64;Ze++)K(s[Ze]);K(1);for(var he=0;he<64;he++)K(l[he])}(),function(Ze,he){E(65472),E(17),K(8),E(he),E(Ze),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(H.width,H.height),function(){E(65476),E(418),K(0);for(var Ze=0;Ze<16;Ze++)K(y[Ze+1]);for(var he=0;he<=11;he++)K(W[he]);K(16);for(var Ne=0;Ne<16;Ne++)K(G[Ne+1]);for(var rt=0;rt<=161;rt++)K(R[rt]);K(1);for(var st=0;st<16;st++)K(X[st+1]);for(var $e=0;$e<=11;$e++)K(Y[$e]);K(17);for(var ht=0;ht<16;ht++)K(x[ht+1]);for(var dt=0;dt<=161;dt++)K(D[dt])}(),E(65498),E(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var j=0,$=0,ee=0;f=0,A=7,this.encode.displayName="_encode_";for(var le,Ie,Ae,Ge,We,Je,ze,ke,ye,oe=H.data,ct=H.width,te=H.height,ie=4*ct,ge=0;ge<te;){for(le=0;le<ie;){for(We=ie*ge+le,ze=-1,ke=0,ye=0;ye<64;ye++)Je=We+(ke=ye>>3)*ie+(ze=4*(7&ye)),ge+ke>=te&&(Je-=ie*(ge+1+ke-te)),le+ze>=ie&&(Je-=le+ze-ie+4),Ie=oe[Je++],Ae=oe[Je++],Ge=oe[Je++],m[ye]=(k[Ie]+k[Ae+256>>0]+k[Ge+512>>0]>>16)-128,p[ye]=(k[Ie+768>>0]+k[Ae+1024>>0]+k[Ge+1280>>0]>>16)-128,Z[ye]=(k[Ie+1280>>0]+k[Ae+1536>>0]+k[Ge+1792>>0]>>16)-128;j=O(m,c,j,t,r),$=O(p,u,$,n,o),ee=O(Z,u,ee,n,o),le+=32}ge+=8}if(A>=0){var be=[];be[1]=A+1,be[0]=(1<<A+1)-1,M(be)}return E(65497),new Uint8Array(h)},e=e||50,function(){for(var H=String.fromCharCode,z=0;z<256;z++)v[z]=H(z)}(),t=L(y,W),n=L(X,Y),r=L(G,R),o=L(x,D),function(){for(var H=1,z=2,j=1;j<=15;j++){for(var $=H;$<z;$++)d[32767+$]=j,g[32767+$]=[],g[32767+$][1]=j,g[32767+$][0]=$;for(var ee=-(z-1);ee<=-H;ee++)d[32767+ee]=j,g[32767+ee]=[],g[32767+ee][1]=j,g[32767+ee][0]=z-1+ee;H<<=1,z<<=1}}(),function(){for(var H=0;H<256;H++)k[H]=19595*H,k[H+256>>0]=38470*H,k[H+512>>0]=7471*H+32768,k[H+768>>0]=-11059*H,k[H+1024>>0]=-21709*H,k[H+1280>>0]=32768*H+8421375,k[H+1536>>0]=-27439*H,k[H+1792>>0]=-5329*H}(),re(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ya(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Uw(e){function t(y){if(!y)throw Error("assert :P")}function n(y,W,G){for(var R=0;4>R;R++)if(y[W+R]!=G.charCodeAt(R))return!0;return!1}function r(y,W,G,R,X){for(var Y=0;Y<X;Y++)y[W+Y]=G[R+Y]}function o(y,W,G,R){for(var X=0;X<R;X++)y[W+X]=G}function i(y){return new Int32Array(y)}function a(y,W){for(var G=[],R=0;R<y;R++)G.push(new W);return G}function s(y,W){var G=[];return function R(X,Y,x){for(var D=x[Y],L=0;L<D&&(X.push(x.length>Y+1?[]:new W),!(x.length<Y+1));L++)R(X[L],Y+1,x)}(G,0,y),G}var l=function(){var y=this;function W(b,S){for(var J=1<<S-1>>>0;b&J;)J>>>=1;return J?(b&J-1)+J:b}function G(b,S,J,N,T){t(!(N%J));do b[S+(N-=J)]=T;while(0<N)}function R(b,S,J,N,T){if(t(2328>=T),512>=T)var Q=i(512);else if((Q=i(T))==null)return 0;return function(P,_,q,ne,ue,Se){var Be,fe,De=_,Re=1<<q,Ce=i(16),me=i(16);for(t(ue!=0),t(ne!=null),t(P!=null),t(0<q),fe=0;fe<ue;++fe){if(15<ne[fe])return 0;++Ce[ne[fe]]}if(Ce[0]==ue)return 0;for(me[1]=0,Be=1;15>Be;++Be){if(Ce[Be]>1<<Be)return 0;me[Be+1]=me[Be]+Ce[Be]}for(fe=0;fe<ue;++fe)Be=ne[fe],0<ne[fe]&&(Se[me[Be]++]=fe);if(me[15]==1)return(ne=new X).g=0,ne.value=Se[0],G(P,De,1,Re,ne),Re;var Le,Ue=-1,Me=Re-1,Ct=0,lt=1,wt=1,It=1<<q;for(fe=0,Be=1,ue=2;Be<=q;++Be,ue<<=1){if(lt+=wt<<=1,0>(wt-=Ce[Be]))return 0;for(;0<Ce[Be];--Ce[Be])(ne=new X).g=Be,ne.value=Se[fe++],G(P,De+Ct,ue,It,ne),Ct=W(Ct,Be)}for(Be=q+1,ue=2;15>=Be;++Be,ue<<=1){if(lt+=wt<<=1,0>(wt-=Ce[Be]))return 0;for(;0<Ce[Be];--Ce[Be]){if(ne=new X,(Ct&Me)!=Ue){for(De+=It,Le=1<<(Ue=Be)-q;15>Ue&&!(0>=(Le-=Ce[Ue]));)++Ue,Le<<=1;Re+=It=1<<(Le=Ue-q),P[_+(Ue=Ct&Me)].g=Le+q,P[_+Ue].value=De-_-Ue}ne.g=Be-q,ne.value=Se[fe++],G(P,De+(Ct>>q),ue,It,ne),Ct=W(Ct,Be)}}return lt!=2*me[15]-1?0:Re}(b,S,J,N,T,Q)}function X(){this.value=this.g=0}function Y(){this.value=this.g=0}function x(){this.G=a(5,X),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(no,Y)}function D(b,S,J,N){t(b!=null),t(S!=null),t(2147483648>N),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=S,b.pa=J,b.Jd=S,b.Yc=J+N,b.Zc=4<=N?J+N-4+1:J,le(b)}function L(b,S){for(var J=0;0<S--;)J|=Ae(b,128)<<S;return J}function M(b,S){var J=L(b,S);return Ie(b)?-J:J}function K(b,S,J,N){var T,Q=0;for(t(b!=null),t(S!=null),t(4294967288>N),b.Sb=N,b.Ra=0,b.u=0,b.h=0,4<N&&(N=4),T=0;T<N;++T)Q+=S[J+T]<<8*T;b.Ra=Q,b.bb=N,b.oa=S,b.pa=J}function E(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<Fc-8>>>0,++b.bb,b.u-=8;j(b)&&(b.h=1,b.u=0)}function O(b,S){if(t(0<=S),!b.h&&S<=Hc){var J=z(b)&Nc[S];return b.u+=S,E(b),J}return b.h=1,b.u=0}function re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(b){return b.Ra>>>(b.u&Fc-1)>>>0}function j(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>Fc}function $(b,S){b.u=S,b.h=j(b)}function ee(b){b.u>=jd&&(t(b.u>=jd),E(b))}function le(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function Ie(b){return L(b,1)}function Ae(b,S){var J=b.Ca;0>b.b&&le(b);var N=b.b,T=J*S>>>8,Q=(b.I>>>N>T)+0;for(Q?(J-=T,b.I-=T+1<<N>>>0):J=T+1,N=J,T=0;256<=N;)T+=8,N>>=8;return N=7^T+Uo[N],b.b-=N,b.Ca=(J<<N)-1,Q}function Ge(b,S,J){b[S+0]=J>>24&255,b[S+1]=J>>16&255,b[S+2]=J>>8&255,b[S+3]=J>>0&255}function We(b,S){return b[S+0]<<0|b[S+1]<<8}function Je(b,S){return We(b,S)|b[S+2]<<16}function ze(b,S){return We(b,S)|We(b,S+2)<<16}function ke(b,S){var J=1<<S;return t(b!=null),t(0<S),b.X=i(J),b.X==null?0:(b.Mb=32-S,b.Xa=S,1)}function ye(b,S){t(b!=null),t(S!=null),t(b.Xa==S.Xa),r(S.X,0,b.X,0,1<<S.Xa)}function oe(){this.X=[],this.Xa=this.Mb=0}function ct(b,S,J,N){t(J!=null),t(N!=null);var T=J[0],Q=N[0];return T==0&&(T=(b*Q+S/2)/S),Q==0&&(Q=(S*T+b/2)/b),0>=T||0>=Q?0:(J[0]=T,N[0]=Q,1)}function te(b,S){return b+(1<<S)-1>>>S}function ie(b,S){return((4278255360&b)+(4278255360&S)>>>0&4278255360)+((16711935&b)+(16711935&S)>>>0&16711935)>>>0}function ge(b,S){y[S]=function(J,N,T,Q,P,_,q){var ne;for(ne=0;ne<P;++ne){var ue=y[b](_[q+ne-1],T,Q+ne);_[q+ne]=ie(J[N+ne],ue)}}}function be(){this.ud=this.hd=this.jd=0}function Ze(b,S){return((4278124286&(b^S))>>>1)+(b&S)>>>0}function he(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Ne(b,S){return he(b+(b-S+.5>>1))}function rt(b,S,J){return Math.abs(S-J)-Math.abs(b-J)}function st(b,S,J,N,T,Q,P){for(N=Q[P-1],J=0;J<T;++J)Q[P+J]=N=ie(b[S+J],N)}function $e(b,S,J,N,T){var Q;for(Q=0;Q<J;++Q){var P=b[S+Q],_=P>>8&255,q=16711935&(q=(q=16711935&P)+((_<<16)+_));N[T+Q]=(4278255360&P)+q>>>0}}function ht(b,S){S.jd=b>>0&255,S.hd=b>>8&255,S.ud=b>>16&255}function dt(b,S,J,N,T,Q){var P;for(P=0;P<N;++P){var _=S[J+P],q=_>>>8,ne=_,ue=255&(ue=(ue=_>>>16)+((b.jd<<24>>24)*(q<<24>>24)>>>5));ne=255&(ne=(ne=ne+((b.hd<<24>>24)*(q<<24>>24)>>>5))+((b.ud<<24>>24)*(ue<<24>>24)>>>5)),T[Q+P]=(4278255360&_)+(ue<<16)+ne}}function Zt(b,S,J,N,T){y[S]=function(Q,P,_,q,ne,ue,Se,Be,fe){for(q=Se;q<Be;++q)for(Se=0;Se<fe;++Se)ne[ue++]=T(_[N(Q[P++])])},y[b]=function(Q,P,_,q,ne,ue,Se){var Be=8>>Q.b,fe=Q.Ea,De=Q.K[0],Re=Q.w;if(8>Be)for(Q=(1<<Q.b)-1,Re=(1<<Be)-1;P<_;++P){var Ce,me=0;for(Ce=0;Ce<fe;++Ce)Ce&Q||(me=N(q[ne++])),ue[Se++]=T(De[me&Re]),me>>=Be}else y["VP8LMapColor"+J](q,ne,De,Re,ue,Se,P,_,fe)}}function Ke(b,S,J,N,T){for(J=S+J;S<J;){var Q=b[S++];N[T++]=Q>>16&255,N[T++]=Q>>8&255,N[T++]=Q>>0&255}}function mn(b,S,J,N,T){for(J=S+J;S<J;){var Q=b[S++];N[T++]=Q>>16&255,N[T++]=Q>>8&255,N[T++]=Q>>0&255,N[T++]=Q>>24&255}}function Rt(b,S,J,N,T){for(J=S+J;S<J;){var Q=(P=b[S++])>>16&240|P>>12&15,P=P>>0&240|P>>28&15;N[T++]=Q,N[T++]=P}}function mt(b,S,J,N,T){for(J=S+J;S<J;){var Q=(P=b[S++])>>16&248|P>>13&7,P=P>>5&224|P>>3&31;N[T++]=Q,N[T++]=P}}function pt(b,S,J,N,T){for(J=S+J;S<J;){var Q=b[S++];N[T++]=Q>>0&255,N[T++]=Q>>8&255,N[T++]=Q>>16&255}}function Nt(b,S,J,N,T,Q){if(Q==0)for(J=S+J;S<J;)Ge(N,((Q=b[S++])[0]>>24|Q[1]>>8&65280|Q[2]<<8&16711680|Q[3]<<24)>>>0),T+=32;else r(N,T,b,S,J)}function er(b,S){y[S][0]=y[b+"0"],y[S][1]=y[b+"1"],y[S][2]=y[b+"2"],y[S][3]=y[b+"3"],y[S][4]=y[b+"4"],y[S][5]=y[b+"5"],y[S][6]=y[b+"6"],y[S][7]=y[b+"7"],y[S][8]=y[b+"8"],y[S][9]=y[b+"9"],y[S][10]=y[b+"10"],y[S][11]=y[b+"11"],y[S][12]=y[b+"12"],y[S][13]=y[b+"13"],y[S][14]=y[b+"0"],y[S][15]=y[b+"0"]}function Ot(b){return b==L0||b==E0||b==OA||b==M0}function Ia(){this.eb=[],this.size=this.A=this.fb=0}function Rn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function zr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ia,this.f.kb=new Rn,this.sd=null}function Wo(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Qt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function yt(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function qt(b,S){var J=b.T,N=S.ba.f.RGBA,T=N.eb,Q=N.fb+b.ka*N.A,P=Ti[S.ba.S],_=b.y,q=b.O,ne=b.f,ue=b.N,Se=b.ea,Be=b.W,fe=S.cc,De=S.dc,Re=S.Mc,Ce=S.Nc,me=b.ka,Le=b.ka+b.T,Ue=b.U,Me=Ue+1>>1;for(me==0?P(_,q,null,null,ne,ue,Se,Be,ne,ue,Se,Be,T,Q,null,null,Ue):(P(S.ec,S.fc,_,q,fe,De,Re,Ce,ne,ue,Se,Be,T,Q-N.A,T,Q,Ue),++J);me+2<Le;me+=2)fe=ne,De=ue,Re=Se,Ce=Be,ue+=b.Rc,Be+=b.Rc,Q+=2*N.A,P(_,(q+=2*b.fa)-b.fa,_,q,fe,De,Re,Ce,ne,ue,Se,Be,T,Q-N.A,T,Q,Ue);return q+=b.fa,b.j+Le<b.o?(r(S.ec,S.fc,_,q,Ue),r(S.cc,S.dc,ne,ue,Me),r(S.Mc,S.Nc,Se,Be,Me),J--):1&Le||P(_,q,null,null,ne,ue,Se,Be,ne,ue,Se,Be,T,Q+N.A,null,null,Ue),J}function cn(b,S,J){var N=b.F,T=[b.J];if(N!=null){var Q=b.U,P=S.ba.S,_=P==PA||P==OA;S=S.ba.f.RGBA;var q=[0],ne=b.ka;q[0]=b.T,b.Kb&&(ne==0?--q[0]:(--ne,T[0]-=b.width),b.j+b.ka+b.T==b.o&&(q[0]=b.o-b.j-ne));var ue=S.eb;ne=S.fb+ne*S.A,b=Mn(N,T[0],b.width,Q,q,ue,ne+(_?0:3),S.A),t(J==q),b&&Ot(P)&&Di(ue,ne,_,Q,q,S.A)}return 0}function pn(b){var S=b.ma,J=S.ba.S,N=11>J,T=J==jA||J==QA||J==PA||J==K0||J==12||Ot(J);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!Td(S.Oa,b,T?11:12))return 0;if(T&&Ot(J)&&Qe(),b.da)alert("todo:use_scaling");else{if(N){if(S.Ib=yt,b.Kb){if(J=b.U+1>>1,S.memory=i(b.U+2*J),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+b.U,S.Mc=S.cc,S.Nc=S.dc+J,S.Ib=qt,Qe()}}else alert("todo:EmitYUV");T&&(S.Jb=cn,N&&ve())}if(N&&!J1){for(b=0;256>b;++b)_Y[b]=89858*(b-128)+qA>>_A,e3[b]=-22014*(b-128)+qA,$Y[b]=-45773*(b-128),qY[b]=113618*(b-128)+qA>>_A;for(b=eu;b<T0;++b)S=76283*(b-16)+qA>>_A,t3[b-eu]=Ci(S,255),n3[b-eu]=Ci(S+8>>4,15);J1=1}return 1}function Do(b){var S=b.ma,J=b.U,N=b.T;return t(!(1&b.ka)),0>=J||0>=N?0:(J=S.Ib(b,S),S.Jb!=null&&S.Jb(b,S,J),S.Dc+=J,1)}function eo(b){b.ma.memory=null}function St(b,S,J,N){return O(b,8)!=47?0:(S[0]=O(b,14)+1,J[0]=O(b,14)+1,N[0]=O(b,1),O(b,3)!=0?0:!b.h)}function Nr(b,S){if(4>b)return b+1;var J=b-2>>1;return(2+(1&b)<<J)+O(S,J)+1}function to(b,S){return 120<S?S-120:1<=(J=((J=HY[S-1])>>4)*b+(8-(15&J)))?J:1;var J}function Ar(b,S,J){var N=z(J),T=b[S+=255&N].g-8;return 0<T&&($(J,J.u+8),N=z(J),S+=b[S].value,S+=N&(1<<T)-1),$(J,J.u+b[S].g),b[S].value}function Un(b,S,J){return J.g+=b.g,J.value+=b.value<<S>>>0,t(8>=J.g),b.g}function se(b,S,J){var N=b.xc;return t((S=N==0?0:b.vc[b.md*(J>>N)+(S>>N)])<b.Wb),b.Ya[S]}function de(b,S,J,N){var T=b.ab,Q=b.c*S,P=b.C;S=P+S;var _=J,q=N;for(N=b.Ta,J=b.Ua;0<T--;){var ne=b.gc[T],ue=P,Se=S,Be=_,fe=q,De=(q=N,_=J,ne.Ea);switch(t(ue<Se),t(Se<=ne.nc),ne.hc){case 2:LA(Be,fe,(Se-ue)*De,q,_);break;case 0:var Re=ue,Ce=Se,me=q,Le=_,Ue=(It=ne).Ea;Re==0&&(H0(Be,fe,null,null,1,me,Le),st(Be,fe+1,0,0,Ue-1,me,Le+1),fe+=Ue,Le+=Ue,++Re);for(var Me=1<<It.b,Ct=Me-1,lt=te(Ue,It.b),wt=It.K,It=It.w+(Re>>It.b)*lt;Re<Ce;){var fn=wt,vn=It,In=1;for(Qd(Be,fe,me,Le-Ue,1,me,Le);In<Ue;){var nn=(In&~Ct)+Me;nn>Ue&&(nn=Ue),(0,rl[fn[vn++]>>8&15])(Be,fe+ +In,me,Le+In-Ue,nn-In,me,Le+In),In=nn}fe+=Ue,Le+=Ue,++Re&Ct||(It+=lt)}Se!=ne.nc&&r(q,_-De,q,_+(Se-ue-1)*De,De);break;case 1:for(De=Be,Ce=fe,Ue=(Be=ne.Ea)-(Le=Be&~(me=(fe=1<<ne.b)-1)),Re=te(Be,ne.b),Me=ne.K,ne=ne.w+(ue>>ne.b)*Re;ue<Se;){for(Ct=Me,lt=ne,wt=new be,It=Ce+Le,fn=Ce+Be;Ce<It;)ht(Ct[lt++],wt),pg(wt,De,Ce,fe,q,_),Ce+=fe,_+=fe;Ce<fn&&(ht(Ct[lt++],wt),pg(wt,De,Ce,Ue,q,_),Ce+=Ue,_+=Ue),++ue&me||(ne+=Re)}break;case 3:if(Be==q&&fe==_&&0<ne.b){for(Ce=q,Be=De=_+(Se-ue)*De-(Le=(Se-ue)*te(ne.Ea,ne.b)),fe=q,me=_,Re=[],Le=(Ue=Le)-1;0<=Le;--Le)Re[Le]=fe[me+Le];for(Le=Ue-1;0<=Le;--Le)Ce[Be+Le]=Re[Le];Li(ne,ue,Se,q,De,q,_)}else Li(ne,ue,Se,Be,fe,q,_)}_=N,q=J}q!=J&&r(N,J,_,q,Q)}function we(b,S){var J=b.V,N=b.Ba+b.c*b.C,T=S-b.C;if(t(S<=b.l.o),t(16>=T),0<T){var Q=b.l,P=b.Ta,_=b.Ua,q=Q.width;if(de(b,T,J,N),T=_=[_],t((J=b.C)<(N=S)),t(Q.v<Q.va),N>Q.o&&(N=Q.o),J<Q.j){var ne=Q.j-J;J=Q.j,T[0]+=ne*q}if(J>=N?J=0:(T[0]+=4*Q.v,Q.ka=J-Q.j,Q.U=Q.va-Q.v,Q.T=N-J,J=1),J){if(_=_[0],11>(J=b.ca).S){var ue=J.f.RGBA,Se=(N=J.S,T=Q.U,Q=Q.T,ne=ue.eb,ue.A),Be=Q;for(ue=ue.fb+b.Ma*ue.A;0<Be--;){var fe=P,De=_,Re=T,Ce=ne,me=ue;switch(N){case UA:jo(fe,De,Re,Ce,me);break;case jA:Ro(fe,De,Re,Ce,me);break;case L0:Ro(fe,De,Re,Ce,me),Di(Ce,me,0,Re,1,0);break;case v1:Zs(fe,De,Re,Ce,me);break;case QA:Nt(fe,De,Re,Ce,me,1);break;case E0:Nt(fe,De,Re,Ce,me,1),Di(Ce,me,0,Re,1,0);break;case PA:Nt(fe,De,Re,Ce,me,0);break;case OA:Nt(fe,De,Re,Ce,me,0),Di(Ce,me,1,Re,1,0);break;case K0:ol(fe,De,Re,Ce,me);break;case M0:ol(fe,De,Re,Ce,me),En(Ce,me,Re,1,0);break;case G1:ys(fe,De,Re,Ce,me);break;default:t(0)}_+=q,ue+=Se}b.Ma+=Q}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=J.height)}}b.C=S,t(b.C<=b.i)}function Fe(b){var S;if(0<b.ua)return 0;for(S=0;S<b.Wb;++S){var J=b.Ya[S].G,N=b.Ya[S].H;if(0<J[1][N[1]+0].g||0<J[2][N[2]+0].g||0<J[3][N[3]+0].g)return 0}return 1}function it(b,S,J,N,T,Q){if(b.Z!=0){var P=b.qd,_=b.rd;for(t(ll[b.Z]!=null);S<J;++S)ll[b.Z](P,_,N,T,N,T,Q),P=N,_=T,T+=Q;b.qd=P,b.rd=_}}function At(b,S){var J=b.l.ma,N=J.Z==0||J.Z==1?b.l.j:b.C;if(N=b.C<N?N:b.C,t(S<=b.l.o),S>N){var T=b.l.width,Q=J.ca,P=J.tb+T*N,_=b.V,q=b.Ba+b.c*N,ne=b.gc;t(b.ab==1),t(ne[0].hc==3),EA(ne[0],N,S,_,q,Q,P),it(J,N,S,Q,P,T)}b.C=b.Ma=S}function Gt(b,S,J,N,T,Q,P){var _=b.$/N,q=b.$%N,ne=b.m,ue=b.s,Se=J+b.$,Be=Se;T=J+N*T;var fe=J+N*Q,De=280+ue.ua,Re=b.Pb?_:16777216,Ce=0<ue.ua?ue.Wa:null,me=ue.wc,Le=Se<fe?se(ue,q,_):null;t(b.C<Q),t(fe<=T);var Ue=!1;e:for(;;){for(;Ue||Se<fe;){var Me=0;if(_>=Re){var Ct=Se-J;t((Re=b).Pb),Re.wd=Re.m,Re.xd=Ct,0<Re.s.ua&&ye(Re.s.Wa,Re.s.vb),Re=_+KY}if(q&me||(Le=se(ue,q,_)),t(Le!=null),Le.Qb&&(S[Se]=Le.qb,Ue=!0),!Ue)if(ee(ne),Le.jc){Me=ne,Ct=S;var lt=Se,wt=Le.pd[z(Me)&no-1];t(Le.jc),256>wt.g?($(Me,Me.u+wt.g),Ct[lt]=wt.value,Me=0):($(Me,Me.u+wt.g-256),t(256<=wt.value),Me=wt.value),Me==0&&(Ue=!0)}else Me=Ar(Le.G[0],Le.H[0],ne);if(ne.h)break;if(Ue||256>Me){if(!Ue)if(Le.nd)S[Se]=(Le.qb|Me<<8)>>>0;else{if(ee(ne),Ue=Ar(Le.G[1],Le.H[1],ne),ee(ne),Ct=Ar(Le.G[2],Le.H[2],ne),lt=Ar(Le.G[3],Le.H[3],ne),ne.h)break;S[Se]=(lt<<24|Ue<<16|Me<<8|Ct)>>>0}if(Ue=!1,++Se,++q>=N&&(q=0,++_,P!=null&&_<=Q&&!(_%16)&&P(b,_),Ce!=null))for(;Be<Se;)Me=S[Be++],Ce.X[(506832829*Me&4294967295)>>>Ce.Mb]=Me}else if(280>Me){if(Me=Nr(Me-256,ne),Ct=Ar(Le.G[4],Le.H[4],ne),ee(ne),Ct=to(N,Ct=Nr(Ct,ne)),ne.h)break;if(Se-J<Ct||T-Se<Me)break e;for(lt=0;lt<Me;++lt)S[Se+lt]=S[Se+lt-Ct];for(Se+=Me,q+=Me;q>=N;)q-=N,++_,P!=null&&_<=Q&&!(_%16)&&P(b,_);if(t(Se<=T),q&me&&(Le=se(ue,q,_)),Ce!=null)for(;Be<Se;)Me=S[Be++],Ce.X[(506832829*Me&4294967295)>>>Ce.Mb]=Me}else{if(!(Me<De))break e;for(Ue=Me-280,t(Ce!=null);Be<Se;)Me=S[Be++],Ce.X[(506832829*Me&4294967295)>>>Ce.Mb]=Me;Me=Se,t(!(Ue>>>(Ct=Ce).Xa)),S[Me]=Ct.X[Ue],Ue=!0}Ue||t(ne.h==j(ne))}if(b.Pb&&ne.h&&Se<T)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&ye(b.s.vb,b.s.Wa);else{if(ne.h)break e;P!=null&&P(b,_>Q?Q:_),b.a=0,b.$=Se-J}return 1}return b.a=3,0}function He(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var S=b.Wa;S!=null&&(S.X=null),b.vb=null,t(b!=null)}function tt(){var b=new N0;return b==null?null:(b.a=0,b.xb=w1,er("Predictor","VP8LPredictors"),er("Predictor","VP8LPredictors_C"),er("PredictorAdd","VP8LPredictorsAdd"),er("PredictorAdd","VP8LPredictorsAdd_C"),LA=$e,pg=dt,jo=Ke,Ro=mn,ol=Rt,ys=mt,Zs=pt,y.VP8LMapColor32b=Kc,y.VP8LMapColor8b=MA,b)}function _e(b,S,J,N,T){var Q=1,P=[b],_=[S],q=N.m,ne=N.s,ue=null,Se=0;e:for(;;){if(J)for(;Q&&O(q,1);){var Be=P,fe=_,De=N,Re=1,Ce=De.m,me=De.gc[De.ab],Le=O(Ce,2);if(De.Oc&1<<Le)Q=0;else{switch(De.Oc|=1<<Le,me.hc=Le,me.Ea=Be[0],me.nc=fe[0],me.K=[null],++De.ab,t(4>=De.ab),Le){case 0:case 1:me.b=O(Ce,3)+2,Re=_e(te(me.Ea,me.b),te(me.nc,me.b),0,De,me.K),me.K=me.K[0];break;case 3:var Ue,Me=O(Ce,8)+1,Ct=16<Me?0:4<Me?1:2<Me?2:3;if(Be[0]=te(me.Ea,Ct),me.b=Ct,Ue=Re=_e(Me,1,0,De,me.K)){var lt,wt=Me,It=me,fn=1<<(8>>It.b),vn=i(fn);if(vn==null)Ue=0;else{var In=It.K[0],nn=It.w;for(vn[0]=It.K[0][0],lt=1;lt<1*wt;++lt)vn[lt]=ie(In[nn+lt],vn[lt-1]);for(;lt<4*fn;++lt)vn[lt]=0;It.K[0]=null,It.K[0]=vn,Ue=1}}Re=Ue;break;case 2:break;default:t(0)}Q=Re}}if(P=P[0],_=_[0],Q&&O(q,1)&&!(Q=1<=(Se=O(q,4))&&11>=Se)){N.a=3;break e}var Hn;if(Hn=Q)t:{var kn,Ut,Br,Qo=N,wr=P,Po=_,Gn=Se,hi=J,mi=Qo.m,jr=Qo.s,ro=[null],Vo=1,Ui=0,Da=FY[Gn];n:for(;;){if(hi&&O(mi,1)){var Qr=O(mi,3)+2,Bs=te(wr,Qr),vg=te(Po,Qr),zc=Bs*vg;if(!_e(Bs,vg,0,Qo,ro))break n;for(ro=ro[0],jr.xc=Qr,kn=0;kn<zc;++kn){var gl=ro[kn]>>8&65535;ro[kn]=gl,gl>=Vo&&(Vo=gl+1)}}if(mi.h)break n;for(Ut=0;5>Ut;++Ut){var lr=S1[Ut];!Ut&&0<Gn&&(lr+=1<<Gn),Ui<lr&&(Ui=lr)}var U0=a(Vo*Da,X),N1=Vo,H1=a(N1,x);if(H1==null)var eh=null;else t(65536>=N1),eh=H1;var tu=i(Ui);if(eh==null||tu==null||U0==null){Qo.a=1;break n}var th=U0;for(kn=Br=0;kn<Vo;++kn){var pa=eh[kn],Tc=pa.G,Uc=pa.H,F1=0,nh=1,K1=0;for(Ut=0;5>Ut;++Ut){lr=S1[Ut],Tc[Ut]=th,Uc[Ut]=Br,!Ut&&0<Gn&&(lr+=1<<Gn);o:{var rh,j0=lr,oh=Qo,nu=tu,i3=th,a3=Br,Q0=0,cl=oh.m,s3=O(cl,1);if(o(nu,0,0,j0),s3){var l3=O(cl,1)+1,g3=O(cl,1),L1=O(cl,g3==0?1:8);nu[L1]=1,l3==2&&(nu[L1=O(cl,8)]=1);var ih=1}else{var E1=i(19),M1=O(cl,4)+4;if(19<M1){oh.a=3;var ah=0;break o}for(rh=0;rh<M1;++rh)E1[NY[rh]]=O(cl,3);var P0=void 0,ru=void 0,D1=oh,c3=E1,sh=j0,z1=nu,O0=0,Il=D1.m,T1=8,U1=a(128,X);r:for(;R(U1,0,7,c3,19);){if(O(Il,1)){var I3=2+2*O(Il,3);if((P0=2+O(Il,I3))>sh)break r}else P0=sh;for(ru=0;ru<sh&&P0--;){ee(Il);var j1=U1[0+(127&z(Il))];$(Il,Il.u+j1.g);var jc=j1.value;if(16>jc)z1[ru++]=jc,jc!=0&&(T1=jc);else{var d3=jc==16,Q1=jc-16,u3=xY[Q1],P1=O(Il,JY[Q1])+u3;if(ru+P1>sh)break r;for(var C3=d3?T1:0;0<P1--;)z1[ru++]=C3}}O0=1;break r}O0||(D1.a=3),ih=O0}(ih=ih&&!cl.h)&&(Q0=R(i3,a3,8,nu,j0)),ih&&Q0!=0?ah=Q0:(oh.a=3,ah=0)}if(ah==0)break n;if(nh&&YY[Ut]==1&&(nh=th[Br].g==0),F1+=th[Br].g,Br+=ah,3>=Ut){var ou,_0=tu[0];for(ou=1;ou<lr;++ou)tu[ou]>_0&&(_0=tu[ou]);K1+=_0}}if(pa.nd=nh,pa.Qb=0,nh&&(pa.qb=(Tc[3][Uc[3]+0].value<<24|Tc[1][Uc[1]+0].value<<16|Tc[2][Uc[2]+0].value)>>>0,F1==0&&256>Tc[0][Uc[0]+0].value&&(pa.Qb=1,pa.qb+=Tc[0][Uc[0]+0].value<<8)),pa.jc=!pa.Qb&&6>K1,pa.jc){var lh,ws=pa;for(lh=0;lh<no;++lh){var dl=lh,ul=ws.pd[dl],gh=ws.G[0][ws.H[0]+dl];256<=gh.value?(ul.g=gh.g+256,ul.value=gh.value):(ul.g=0,ul.value=0,dl>>=Un(gh,8,ul),dl>>=Un(ws.G[1][ws.H[1]+dl],16,ul),dl>>=Un(ws.G[2][ws.H[2]+dl],0,ul),Un(ws.G[3][ws.H[3]+dl],24,ul))}}}jr.vc=ro,jr.Wb=Vo,jr.Ya=eh,jr.yc=U0,Hn=1;break t}Hn=0}if(!(Q=Hn)){N.a=3;break e}if(0<Se){if(ne.ua=1<<Se,!ke(ne.Wa,Se)){N.a=1,Q=0;break e}}else ne.ua=0;var q0=N,O1=P,A3=_,$0=q0.s,eb=$0.xc;if(q0.c=O1,q0.i=A3,$0.md=te(O1,eb),$0.wc=eb==0?-1:(1<<eb)-1,J){N.xb=UY;break e}if((ue=i(P*_))==null){N.a=1,Q=0;break e}Q=(Q=Gt(N,ue,0,P,_,_,null))&&!q.h;break e}return Q?(T!=null?T[0]=ue:(t(ue==null),t(J)),N.$=0,J||He(ne)):He(ne),Q}function gt(b,S){var J=b.c*b.i,N=J+S+16*S;return t(b.c<=S),b.V=i(N),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+J+S,1)}function Xt(b,S){var J=b.C,N=S-J,T=b.V,Q=b.Ba+b.c*J;for(t(S<=b.l.o);0<N;){var P=16<N?16:N,_=b.l.ma,q=b.l.width,ne=q*P,ue=_.ca,Se=_.tb+q*J,Be=b.Ta,fe=b.Ua;de(b,P,T,Q),mr(Be,fe,ue,Se,ne),it(_,J,J+P,ue,Se,q),N-=P,T+=P*b.c,J+=P}t(J==S),b.C=b.Ma=S}function _t(){this.ub=this.yd=this.td=this.Rb=0}function ln(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Tt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function tr(){this.Yb=function(){var b=[];return function S(J,N,T){for(var Q=T[N],P=0;P<Q&&(J.push(T.length>N+1?[]:0),!(T.length<N+1));P++)S(J[P],N+1,T)}(b,0,[3,11]),b}()}function On(){this.jb=i(3),this.Wc=s([4,8],tr),this.Xc=s([4,17],tr)}function ms(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Io(){this.ld=this.La=this.dd=this.tc=0}function da(){this.Na=this.la=0}function Ki(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ka(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ui(){this.uc=this.M=this.Nb=0,this.wa=Array(new Io),this.Y=0,this.ya=Array(new Ka),this.aa=0,this.l=new ua}function ps(){this.y=i(16),this.f=i(8),this.ea=i(8)}function qs(){this.cb=this.a=0,this.sc="",this.m=new re,this.Od=new _t,this.Kc=new ln,this.ed=new ms,this.Qa=new Tt,this.Ic=this.$c=this.Aa=0,this.D=new ui,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,re),this.ia=0,this.pb=a(4,Ki),this.Pa=new On,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ps),this.Hd=0,this.rb=Array(new da),this.sb=0,this.wa=Array(new Io),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ka),this.L=this.aa=0,this.gd=s([4,2],Io),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ua(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Lt(){var b=new qs;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,$d||($d=zo)),b}function Et(b,S,J){return b.a==0&&(b.a=S,b.sc=J,b.cb=0),0}function Tr(b,S,J){return 3<=J&&b[S+0]==157&&b[S+1]==1&&b[S+2]==42}function Nn(b,S){if(b==null)return 0;if(b.a=0,b.sc="OK",S==null)return Et(b,2,"null VP8Io passed to VP8GetHeaders()");var J=S.data,N=S.w,T=S.ha;if(4>T)return Et(b,7,"Truncated header.");var Q=J[N+0]|J[N+1]<<8|J[N+2]<<16,P=b.Od;if(P.Rb=!(1&Q),P.td=Q>>1&7,P.yd=Q>>4&1,P.ub=Q>>5,3<P.td)return Et(b,3,"Incorrect keyframe parameters.");if(!P.yd)return Et(b,4,"Frame not displayable.");N+=3,T-=3;var _=b.Kc;if(P.Rb){if(7>T)return Et(b,7,"cannot parse picture header");if(!Tr(J,N,T))return Et(b,3,"Bad code word");_.c=16383&(J[N+4]<<8|J[N+3]),_.Td=J[N+4]>>6,_.i=16383&(J[N+6]<<8|J[N+5]),_.Ud=J[N+6]>>6,N+=7,T-=7,b.za=_.c+15>>4,b.Ub=_.i+15>>4,S.width=_.c,S.height=_.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,o((Q=b.Pa).jb,0,255,Q.jb.length),t((Q=b.Qa)!=null),Q.Cb=0,Q.Bb=0,Q.Fb=1,o(Q.Zb,0,0,Q.Zb.length),o(Q.Lb,0,0,Q.Lb)}if(P.ub>T)return Et(b,7,"bad partition length");D(Q=b.m,J,N,P.ub),N+=P.ub,T-=P.ub,P.Rb&&(_.Ld=Ie(Q),_.Kd=Ie(Q)),_=b.Qa;var q,ne=b.Pa;if(t(Q!=null),t(_!=null),_.Cb=Ie(Q),_.Cb){if(_.Bb=Ie(Q),Ie(Q)){for(_.Fb=Ie(Q),q=0;4>q;++q)_.Zb[q]=Ie(Q)?M(Q,7):0;for(q=0;4>q;++q)_.Lb[q]=Ie(Q)?M(Q,6):0}if(_.Bb)for(q=0;3>q;++q)ne.jb[q]=Ie(Q)?L(Q,8):255}else _.Bb=0;if(Q.Ka)return Et(b,3,"cannot parse segment header");if((_=b.ed).zd=Ie(Q),_.Tb=L(Q,6),_.wb=L(Q,3),_.Pc=Ie(Q),_.Pc&&Ie(Q)){for(ne=0;4>ne;++ne)Ie(Q)&&(_.vd[ne]=M(Q,6));for(ne=0;4>ne;++ne)Ie(Q)&&(_.od[ne]=M(Q,6))}if(b.L=_.Tb==0?0:_.zd?1:2,Q.Ka)return Et(b,3,"cannot parse filter header");var ue=T;if(T=q=N,N=q+ue,_=ue,b.Xb=(1<<L(b.m,2))-1,ue<3*(ne=b.Xb))J=7;else{for(q+=3*ne,_-=3*ne,ue=0;ue<ne;++ue){var Se=J[T+0]|J[T+1]<<8|J[T+2]<<16;Se>_&&(Se=_),D(b.Jc[+ue],J,q,Se),q+=Se,_-=Se,T+=3}D(b.Jc[+ne],J,q,_),J=q<N?0:5}if(J!=0)return Et(b,J,"cannot parse partitions");for(J=L(q=b.m,7),T=Ie(q)?M(q,4):0,N=Ie(q)?M(q,4):0,_=Ie(q)?M(q,4):0,ne=Ie(q)?M(q,4):0,q=Ie(q)?M(q,4):0,ue=b.Qa,Se=0;4>Se;++Se){if(ue.Cb){var Be=ue.Zb[Se];ue.Fb||(Be+=J)}else{if(0<Se){b.pb[Se]=b.pb[0];continue}Be=J}var fe=b.pb[Se];fe.Sc[0]=D0[Ci(Be+T,127)],fe.Sc[1]=z0[Ci(Be+0,127)],fe.Eb[0]=2*D0[Ci(Be+N,127)],fe.Eb[1]=101581*z0[Ci(Be+_,127)]>>16,8>fe.Eb[1]&&(fe.Eb[1]=8),fe.Qc[0]=D0[Ci(Be+ne,117)],fe.Qc[1]=z0[Ci(Be+q,127)],fe.lc=Be+q}if(!P.Rb)return Et(b,4,"Not a key frame.");for(Ie(Q),P=b.Pa,J=0;4>J;++J){for(T=0;8>T;++T)for(N=0;3>N;++N)for(_=0;11>_;++_)ne=Ae(Q,zY[J][T][N][_])?L(Q,8):MY[J][T][N][_],P.Wc[J][T].Yb[N][_]=ne;for(T=0;17>T;++T)P.Xc[J][T]=P.Wc[J][TY[T]]}return b.kc=Ie(Q),b.kc&&(b.Bd=L(Q,8)),b.cb=1}function zo(b,S,J,N,T,Q,P){var _=S[T].Yb[J];for(J=0;16>T;++T){if(!Ae(b,_[J+0]))return T;for(;!Ae(b,_[J+1]);)if(_=S[++T].Yb[0],J=0,T==16)return 16;var q=S[T+1].Yb;if(Ae(b,_[J+2])){var ne=b,ue=0;if(Ae(ne,(Be=_)[(Se=J)+3]))if(Ae(ne,Be[Se+6])){for(_=0,Se=2*(ue=Ae(ne,Be[Se+8]))+(Be=Ae(ne,Be[Se+9+ue])),ue=0,Be=LY[Se];Be[_];++_)ue+=ue+Ae(ne,Be[_]);ue+=3+(8<<Se)}else Ae(ne,Be[Se+7])?(ue=7+2*Ae(ne,165),ue+=Ae(ne,145)):ue=5+Ae(ne,159);else ue=Ae(ne,Be[Se+4])?3+Ae(ne,Be[Se+5]):2;_=q[2]}else ue=1,_=q[1];q=P+EY[T],0>(ne=b).b&&le(ne);var Se,Be=ne.b,fe=(Se=ne.Ca>>1)-(ne.I>>Be)>>31;--ne.b,ne.Ca+=fe,ne.Ca|=1,ne.I-=(Se+1&fe)<<Be,Q[q]=((ue^fe)-fe)*N[(0<T)+0]}return 16}function $s(b){var S=b.rb[b.sb-1];S.la=0,S.Na=0,o(b.zc,0,0,b.zc.length),b.ja=0}function kd(b,S){if(b==null)return 0;if(S==null)return Et(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!Nn(b,S))return 0;if(t(b.cb),S.ac==null||S.ac(S)){S.ob&&(b.L=0);var J=$A[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=S.v-J>>4,b.zb=S.j-J>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=S.o+15+J>>4,b.Hb=S.va+15+J>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var N=b.ed;for(J=0;4>J;++J){var T;if(b.Qa.Cb){var Q=b.Qa.Lb[J];b.Qa.Fb||(Q+=N.Tb)}else Q=N.Tb;for(T=0;1>=T;++T){var P=b.gd[J][T],_=Q;if(N.Pc&&(_+=N.vd[0],T&&(_+=N.od[0])),0<(_=0>_?0:63<_?63:_)){var q=_;0<N.wb&&(q=4<N.wb?q>>2:q>>1)>9-N.wb&&(q=9-N.wb),1>q&&(q=1),P.dd=q,P.tc=2*_+q,P.ld=40<=_?2:15<=_?1:0}else P.tc=0;P.La=T}}}J=0}else Et(b,6,"Frame setup failed"),J=b.a;if(J=J==0){if(J){b.$c=0,0<b.Aa||(b.Ic=o3);e:{J=b.Ic,N=4*(q=b.za);var ne=32*q,ue=q+1,Se=0<b.L?q*(0<b.Aa?2:1):0,Be=(b.Aa==2?2:1)*q;if((P=N+832+(T=3*(16*J+$A[b.L])/2*ne)+(Q=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=P)J=0;else{if(P>b.Vb){if(b.Vb=0,b.Ec=i(P),b.Fc=0,b.Ec==null){J=Et(b,1,"no memory during frame initialization.");break e}b.Vb=P}P=b.Ec,_=b.Fc,b.Ac=P,b.Bc=_,_+=N,b.Gd=a(ne,ps),b.Hd=0,b.rb=a(ue+1,da),b.sb=1,b.wa=Se?a(Se,Io):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=q),t(!0),b.oc=P,b.pc=_,_+=832,b.ya=a(Be,Ka),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=q),b.R=16*q,b.B=8*q,q=(ne=$A[b.L])*b.R,ne=ne/2*b.B,b.sa=P,b.ta=_+q,b.qa=b.sa,b.ra=b.ta+16*J*b.R+ne,b.Ha=b.qa,b.Ia=b.ra+8*J*b.B+ne,b.$c=0,_+=T,b.mb=Q?P:null,b.nb=Q?_:null,t(_+Q<=b.Fc+b.Vb),$s(b),o(b.Ac,b.Bc,0,N),J=1}}if(J){if(S.ka=0,S.y=b.sa,S.O=b.ta,S.f=b.qa,S.N=b.ra,S.ea=b.Ha,S.Vd=b.Ia,S.fa=b.R,S.Rc=b.B,S.F=null,S.J=0,!zA){for(J=-255;255>=J;++J)Hr[255+J]=0>J?-J:J;for(J=-1020;1020>=J;++J)Gs[1020+J]=-128>J?-128:127<J?127:J;for(J=-112;112>=J;++J)qd[112+J]=-16>J?-16:15<J?15:J;for(J=-255;510>=J;++J)Dc[255+J]=0>J?0:255<J?255:J;zA=1}Lc=Z0,vs=b0,Pd=wA,ko=y0,Ei=WA,hr=BA,Ec=Nd,DA=hg,Od=Y0,fg=Hd,bg=x0,il=Vc,yg=Fd,Mc=HA,Zg=NA,al=Ea,_d=bs,Mi=J0,ma[0]=La,ma[1]=v0,ma[2]=w0,ma[3]=W0,ma[4]=VA,ma[5]=Rc,ma[6]=XA,ma[7]=Jd,ma[8]=k0,ma[9]=R0,sl[0]=RA,sl[1]=S0,sl[2]=fs,sl[3]=wc,sl[4]=uo,sl[5]=B0,sl[6]=kA,Ss[0]=el,Ss[1]=G0,Ss[2]=V0,Ss[3]=xd,Ss[4]=Ag,Ss[5]=X0,Ss[6]=Yd,J=1}else J=0}J&&(J=function(fe,De){for(fe.M=0;fe.M<fe.Va;++fe.M){var Re,Ce=fe.Jc[fe.M&fe.Xb],me=fe.m,Le=fe;for(Re=0;Re<Le.za;++Re){var Ue=me,Me=Le,Ct=Me.Ac,lt=Me.Bc+4*Re,wt=Me.zc,It=Me.ya[Me.aa+Re];if(Me.Qa.Bb?It.$b=Ae(Ue,Me.Pa.jb[0])?2+Ae(Ue,Me.Pa.jb[2]):Ae(Ue,Me.Pa.jb[1]):It.$b=0,Me.kc&&(It.Ad=Ae(Ue,Me.Bd)),It.Za=!Ae(Ue,145)+0,It.Za){var fn=It.Ob,vn=0;for(Me=0;4>Me;++Me){var In,nn=wt[0+Me];for(In=0;4>In;++In){nn=DY[Ct[lt+In]][nn];for(var Hn=B1[Ae(Ue,nn[0])];0<Hn;)Hn=B1[2*Hn+Ae(Ue,nn[Hn])];nn=-Hn,Ct[lt+In]=nn}r(fn,vn,Ct,lt,4),vn+=4,wt[0+Me]=nn}}else nn=Ae(Ue,156)?Ae(Ue,128)?1:3:Ae(Ue,163)?2:0,It.Ob[0]=nn,o(Ct,lt,nn,4),o(wt,0,nn,4);It.Dd=Ae(Ue,142)?Ae(Ue,114)?Ae(Ue,183)?1:3:2:0}if(Le.m.Ka)return Et(fe,7,"Premature end-of-partition0 encountered.");for(;fe.ja<fe.za;++fe.ja){if(Le=Ce,Ue=(me=fe).rb[me.sb-1],Ct=me.rb[me.sb+me.ja],Re=me.ya[me.aa+me.ja],lt=me.kc?Re.Ad:0)Ue.la=Ct.la=0,Re.Za||(Ue.Na=Ct.Na=0),Re.Hc=0,Re.Gc=0,Re.ia=0;else{var kn,Ut;if(Ue=Ct,Ct=Le,lt=me.Pa.Xc,wt=me.ya[me.aa+me.ja],It=me.pb[wt.$b],Me=wt.ad,fn=0,vn=me.rb[me.sb-1],nn=In=0,o(Me,fn,0,384),wt.Za)var Br=0,Qo=lt[3];else{Hn=i(16);var wr=Ue.Na+vn.Na;if(wr=$d(Ct,lt[1],wr,It.Eb,0,Hn,0),Ue.Na=vn.Na=(0<wr)+0,1<wr)Lc(Hn,0,Me,fn);else{var Po=Hn[0]+3>>3;for(Hn=0;256>Hn;Hn+=16)Me[fn+Hn]=Po}Br=1,Qo=lt[0]}var Gn=15&Ue.la,hi=15&vn.la;for(Hn=0;4>Hn;++Hn){var mi=1&hi;for(Po=Ut=0;4>Po;++Po)Gn=Gn>>1|(mi=(wr=$d(Ct,Qo,wr=mi+(1&Gn),It.Sc,Br,Me,fn))>Br)<<7,Ut=Ut<<2|(3<wr?3:1<wr?2:Me[fn+0]!=0),fn+=16;Gn>>=4,hi=hi>>1|mi<<7,In=(In<<8|Ut)>>>0}for(Qo=Gn,Br=hi>>4,kn=0;4>kn;kn+=2){for(Ut=0,Gn=Ue.la>>4+kn,hi=vn.la>>4+kn,Hn=0;2>Hn;++Hn){for(mi=1&hi,Po=0;2>Po;++Po)wr=mi+(1&Gn),Gn=Gn>>1|(mi=0<(wr=$d(Ct,lt[2],wr,It.Qc,0,Me,fn)))<<3,Ut=Ut<<2|(3<wr?3:1<wr?2:Me[fn+0]!=0),fn+=16;Gn>>=2,hi=hi>>1|mi<<5}nn|=Ut<<4*kn,Qo|=Gn<<4<<kn,Br|=(240&hi)<<kn}Ue.la=Qo,vn.la=Br,wt.Hc=In,wt.Gc=nn,wt.ia=43690&nn?0:It.ia,lt=!(In|nn)}if(0<me.L&&(me.wa[me.Y+me.ja]=me.gd[Re.$b][Re.Za],me.wa[me.Y+me.ja].La|=!lt),Le.Ka)return Et(fe,7,"Premature end-of-file encountered.")}if($s(fe),me=De,Le=1,Re=(Ce=fe).D,Ue=0<Ce.L&&Ce.M>=Ce.zb&&Ce.M<=Ce.Va,Ce.Aa==0)e:{if(Re.M=Ce.M,Re.uc=Ue,zd(Ce,Re),Le=1,Re=(Ut=Ce.D).Nb,Ue=(nn=$A[Ce.L])*Ce.R,Ct=nn/2*Ce.B,Hn=16*Re*Ce.R,Po=8*Re*Ce.B,lt=Ce.sa,wt=Ce.ta-Ue+Hn,It=Ce.qa,Me=Ce.ra-Ct+Po,fn=Ce.Ha,vn=Ce.Ia-Ct+Po,hi=(Gn=Ut.M)==0,In=Gn>=Ce.Va-1,Ce.Aa==2&&zd(Ce,Ut),Ut.uc)for(mi=(wr=Ce).D.M,t(wr.D.uc),Ut=wr.yb;Ut<wr.Hb;++Ut){Br=Ut,Qo=mi;var jr=(ro=(lr=wr).D).Nb;kn=lr.R;var ro=ro.wa[ro.Y+Br],Vo=lr.sa,Ui=lr.ta+16*jr*kn+16*Br,Da=ro.dd,Qr=ro.tc;if(Qr!=0)if(t(3<=Qr),lr.L==1)0<Br&&al(Vo,Ui,kn,Qr+4),ro.La&&Mi(Vo,Ui,kn,Qr),0<Qo&&Zg(Vo,Ui,kn,Qr+4),ro.La&&_d(Vo,Ui,kn,Qr);else{var Bs=lr.B,vg=lr.qa,zc=lr.ra+8*jr*Bs+8*Br,gl=lr.Ha,lr=lr.Ia+8*jr*Bs+8*Br;jr=ro.ld,0<Br&&(DA(Vo,Ui,kn,Qr+4,Da,jr),fg(vg,zc,gl,lr,Bs,Qr+4,Da,jr)),ro.La&&(il(Vo,Ui,kn,Qr,Da,jr),Mc(vg,zc,gl,lr,Bs,Qr,Da,jr)),0<Qo&&(Ec(Vo,Ui,kn,Qr+4,Da,jr),Od(vg,zc,gl,lr,Bs,Qr+4,Da,jr)),ro.La&&(bg(Vo,Ui,kn,Qr,Da,jr),yg(vg,zc,gl,lr,Bs,Qr,Da,jr))}}if(Ce.ia&&alert("todo:DitherRow"),me.put!=null){if(Ut=16*Gn,Gn=16*(Gn+1),hi?(me.y=Ce.sa,me.O=Ce.ta+Hn,me.f=Ce.qa,me.N=Ce.ra+Po,me.ea=Ce.Ha,me.W=Ce.Ia+Po):(Ut-=nn,me.y=lt,me.O=wt,me.f=It,me.N=Me,me.ea=fn,me.W=vn),In||(Gn-=nn),Gn>me.o&&(Gn=me.o),me.F=null,me.J=null,Ce.Fa!=null&&0<Ce.Fa.length&&Ut<Gn&&(me.J=Md(Ce,me,Ut,Gn-Ut),me.F=Ce.mb,me.F==null&&me.F.length==0)){Le=Et(Ce,3,"Could not decode alpha data.");break e}Ut<me.j&&(nn=me.j-Ut,Ut=me.j,t(!(1&nn)),me.O+=Ce.R*nn,me.N+=Ce.B*(nn>>1),me.W+=Ce.B*(nn>>1),me.F!=null&&(me.J+=me.width*nn)),Ut<Gn&&(me.O+=me.v,me.N+=me.v>>1,me.W+=me.v>>1,me.F!=null&&(me.J+=me.v),me.ka=Ut-me.j,me.U=me.va-me.v,me.T=Gn-Ut,Le=me.put(me))}Re+1!=Ce.Ic||In||(r(Ce.sa,Ce.ta-Ue,lt,wt+16*Ce.R,Ue),r(Ce.qa,Ce.ra-Ct,It,Me+8*Ce.B,Ct),r(Ce.Ha,Ce.Ia-Ct,fn,vn+8*Ce.B,Ct))}if(!Le)return Et(fe,6,"Output aborted.")}return 1}(b,S)),S.bc!=null&&S.bc(S),J&=1}return J?(b.cb=0,J):0}function Ca(b,S,J,N,T){T=b[S+J+32*N]+(T>>3),b[S+J+32*N]=-256&T?0>T?0:255:T}function Bc(b,S,J,N,T,Q){Ca(b,S,0,J,N+T),Ca(b,S,1,J,N+Q),Ca(b,S,2,J,N-Q),Ca(b,S,3,J,N-T)}function To(b){return(20091*b>>16)+b}function Vd(b,S,J,N){var T,Q=0,P=i(16);for(T=0;4>T;++T){var _=b[S+0]+b[S+8],q=b[S+0]-b[S+8],ne=(35468*b[S+4]>>16)-To(b[S+12]),ue=To(b[S+4])+(35468*b[S+12]>>16);P[Q+0]=_+ue,P[Q+1]=q+ne,P[Q+2]=q-ne,P[Q+3]=_-ue,Q+=4,S++}for(T=Q=0;4>T;++T)_=(b=P[Q+0]+4)+P[Q+8],q=b-P[Q+8],ne=(35468*P[Q+4]>>16)-To(P[Q+12]),Ca(J,N,0,0,_+(ue=To(P[Q+4])+(35468*P[Q+12]>>16))),Ca(J,N,1,0,q+ne),Ca(J,N,2,0,q-ne),Ca(J,N,3,0,_-ue),Q++,N+=32}function BA(b,S,J,N){var T=b[S+0]+4,Q=35468*b[S+4]>>16,P=To(b[S+4]),_=35468*b[S+1]>>16;Bc(J,N,0,T+P,b=To(b[S+1]),_),Bc(J,N,1,T+Q,b,_),Bc(J,N,2,T-Q,b,_),Bc(J,N,3,T-P,b,_)}function b0(b,S,J,N,T){Vd(b,S,J,N),T&&Vd(b,S+16,J,N+4)}function wA(b,S,J,N){vs(b,S+0,J,N,1),vs(b,S+32,J,N+128,1)}function y0(b,S,J,N){var T;for(b=b[S+0]+4,T=0;4>T;++T)for(S=0;4>S;++S)Ca(J,N,S,T,b)}function WA(b,S,J,N){b[S+0]&&ko(b,S+0,J,N),b[S+16]&&ko(b,S+16,J,N+4),b[S+32]&&ko(b,S+32,J,N+128),b[S+48]&&ko(b,S+48,J,N+128+4)}function Z0(b,S,J,N){var T,Q=i(16);for(T=0;4>T;++T){var P=b[S+0+T]+b[S+12+T],_=b[S+4+T]+b[S+8+T],q=b[S+4+T]-b[S+8+T],ne=b[S+0+T]-b[S+12+T];Q[0+T]=P+_,Q[8+T]=P-_,Q[4+T]=ne+q,Q[12+T]=ne-q}for(T=0;4>T;++T)P=(b=Q[0+4*T]+3)+Q[3+4*T],_=Q[1+4*T]+Q[2+4*T],q=Q[1+4*T]-Q[2+4*T],ne=b-Q[3+4*T],J[N+0]=P+_>>3,J[N+16]=ne+q>>3,J[N+32]=P-_>>3,J[N+48]=ne-q>>3,N+=64}function Xd(b,S,J){var N,T=S-32,Q=Ai,P=255-b[T-1];for(N=0;N<J;++N){var _,q=Q,ne=P+b[S-1];for(_=0;_<J;++_)b[S+_]=q[ne+b[T+_]];S+=32}}function v0(b,S){Xd(b,S,4)}function G0(b,S){Xd(b,S,8)}function S0(b,S){Xd(b,S,16)}function fs(b,S){var J;for(J=0;16>J;++J)r(b,S+32*J,b,S-32,16)}function wc(b,S){var J;for(J=16;0<J;--J)o(b,S,b[S-1],16),S+=32}function Wc(b,S,J){var N;for(N=0;16>N;++N)o(S,J+32*N,b,16)}function RA(b,S){var J,N=16;for(J=0;16>J;++J)N+=b[S-1+32*J]+b[S+J-32];Wc(N>>5,b,S)}function uo(b,S){var J,N=8;for(J=0;16>J;++J)N+=b[S-1+32*J];Wc(N>>4,b,S)}function B0(b,S){var J,N=8;for(J=0;16>J;++J)N+=b[S+J-32];Wc(N>>4,b,S)}function kA(b,S){Wc(128,b,S)}function Ft(b,S,J){return b+2*S+J+2>>2}function w0(b,S){var J,N=S-32;for(N=new Uint8Array([Ft(b[N-1],b[N+0],b[N+1]),Ft(b[N+0],b[N+1],b[N+2]),Ft(b[N+1],b[N+2],b[N+3]),Ft(b[N+2],b[N+3],b[N+4])]),J=0;4>J;++J)r(b,S+32*J,N,0,N.length)}function W0(b,S){var J=b[S-1],N=b[S-1+32],T=b[S-1+64],Q=b[S-1+96];Ge(b,S+0,16843009*Ft(b[S-1-32],J,N)),Ge(b,S+32,16843009*Ft(J,N,T)),Ge(b,S+64,16843009*Ft(N,T,Q)),Ge(b,S+96,16843009*Ft(T,Q,Q))}function La(b,S){var J,N=4;for(J=0;4>J;++J)N+=b[S+J-32]+b[S-1+32*J];for(N>>=3,J=0;4>J;++J)o(b,S+32*J,N,4)}function VA(b,S){var J=b[S-1+0],N=b[S-1+32],T=b[S-1+64],Q=b[S-1-32],P=b[S+0-32],_=b[S+1-32],q=b[S+2-32],ne=b[S+3-32];b[S+0+96]=Ft(N,T,b[S-1+96]),b[S+1+96]=b[S+0+64]=Ft(J,N,T),b[S+2+96]=b[S+1+64]=b[S+0+32]=Ft(Q,J,N),b[S+3+96]=b[S+2+64]=b[S+1+32]=b[S+0+0]=Ft(P,Q,J),b[S+3+64]=b[S+2+32]=b[S+1+0]=Ft(_,P,Q),b[S+3+32]=b[S+2+0]=Ft(q,_,P),b[S+3+0]=Ft(ne,q,_)}function XA(b,S){var J=b[S+1-32],N=b[S+2-32],T=b[S+3-32],Q=b[S+4-32],P=b[S+5-32],_=b[S+6-32],q=b[S+7-32];b[S+0+0]=Ft(b[S+0-32],J,N),b[S+1+0]=b[S+0+32]=Ft(J,N,T),b[S+2+0]=b[S+1+32]=b[S+0+64]=Ft(N,T,Q),b[S+3+0]=b[S+2+32]=b[S+1+64]=b[S+0+96]=Ft(T,Q,P),b[S+3+32]=b[S+2+64]=b[S+1+96]=Ft(Q,P,_),b[S+3+64]=b[S+2+96]=Ft(P,_,q),b[S+3+96]=Ft(_,q,q)}function Rc(b,S){var J=b[S-1+0],N=b[S-1+32],T=b[S-1+64],Q=b[S-1-32],P=b[S+0-32],_=b[S+1-32],q=b[S+2-32],ne=b[S+3-32];b[S+0+0]=b[S+1+64]=Q+P+1>>1,b[S+1+0]=b[S+2+64]=P+_+1>>1,b[S+2+0]=b[S+3+64]=_+q+1>>1,b[S+3+0]=q+ne+1>>1,b[S+0+96]=Ft(T,N,J),b[S+0+64]=Ft(N,J,Q),b[S+0+32]=b[S+1+96]=Ft(J,Q,P),b[S+1+32]=b[S+2+96]=Ft(Q,P,_),b[S+2+32]=b[S+3+96]=Ft(P,_,q),b[S+3+32]=Ft(_,q,ne)}function Jd(b,S){var J=b[S+0-32],N=b[S+1-32],T=b[S+2-32],Q=b[S+3-32],P=b[S+4-32],_=b[S+5-32],q=b[S+6-32],ne=b[S+7-32];b[S+0+0]=J+N+1>>1,b[S+1+0]=b[S+0+64]=N+T+1>>1,b[S+2+0]=b[S+1+64]=T+Q+1>>1,b[S+3+0]=b[S+2+64]=Q+P+1>>1,b[S+0+32]=Ft(J,N,T),b[S+1+32]=b[S+0+96]=Ft(N,T,Q),b[S+2+32]=b[S+1+96]=Ft(T,Q,P),b[S+3+32]=b[S+2+96]=Ft(Q,P,_),b[S+3+64]=Ft(P,_,q),b[S+3+96]=Ft(_,q,ne)}function R0(b,S){var J=b[S-1+0],N=b[S-1+32],T=b[S-1+64],Q=b[S-1+96];b[S+0+0]=J+N+1>>1,b[S+2+0]=b[S+0+32]=N+T+1>>1,b[S+2+32]=b[S+0+64]=T+Q+1>>1,b[S+1+0]=Ft(J,N,T),b[S+3+0]=b[S+1+32]=Ft(N,T,Q),b[S+3+32]=b[S+1+64]=Ft(T,Q,Q),b[S+3+64]=b[S+2+64]=b[S+0+96]=b[S+1+96]=b[S+2+96]=b[S+3+96]=Q}function k0(b,S){var J=b[S-1+0],N=b[S-1+32],T=b[S-1+64],Q=b[S-1+96],P=b[S-1-32],_=b[S+0-32],q=b[S+1-32],ne=b[S+2-32];b[S+0+0]=b[S+2+32]=J+P+1>>1,b[S+0+32]=b[S+2+64]=N+J+1>>1,b[S+0+64]=b[S+2+96]=T+N+1>>1,b[S+0+96]=Q+T+1>>1,b[S+3+0]=Ft(_,q,ne),b[S+2+0]=Ft(P,_,q),b[S+1+0]=b[S+3+32]=Ft(J,P,_),b[S+1+32]=b[S+3+64]=Ft(N,J,P),b[S+1+64]=b[S+3+96]=Ft(T,N,J),b[S+1+96]=Ft(Q,T,N)}function V0(b,S){var J;for(J=0;8>J;++J)r(b,S+32*J,b,S-32,8)}function xd(b,S){var J;for(J=0;8>J;++J)o(b,S,b[S-1],8),S+=32}function Cg(b,S,J){var N;for(N=0;8>N;++N)o(S,J+32*N,b,8)}function el(b,S){var J,N=8;for(J=0;8>J;++J)N+=b[S+J-32]+b[S-1+32*J];Cg(N>>4,b,S)}function X0(b,S){var J,N=4;for(J=0;8>J;++J)N+=b[S+J-32];Cg(N>>3,b,S)}function Ag(b,S){var J,N=4;for(J=0;8>J;++J)N+=b[S-1+32*J];Cg(N>>3,b,S)}function Yd(b,S){Cg(128,b,S)}function kc(b,S,J){var N=b[S-J],T=b[S+0],Q=3*(T-N)+F0[1020+b[S-2*J]-b[S+J]],P=TA[112+(Q+4>>3)];b[S-J]=Ai[255+N+TA[112+(Q+3>>3)]],b[S+0]=Ai[255+T-P]}function JA(b,S,J,N){var T=b[S+0],Q=b[S+J];return zi[255+b[S-2*J]-b[S-J]]>N||zi[255+Q-T]>N}function xA(b,S,J,N){return 4*zi[255+b[S-J]-b[S+0]]+zi[255+b[S-2*J]-b[S+J]]<=N}function YA(b,S,J,N,T){var Q=b[S-3*J],P=b[S-2*J],_=b[S-J],q=b[S+0],ne=b[S+J],ue=b[S+2*J],Se=b[S+3*J];return 4*zi[255+_-q]+zi[255+P-ne]>N?0:zi[255+b[S-4*J]-Q]<=T&&zi[255+Q-P]<=T&&zi[255+P-_]<=T&&zi[255+Se-ue]<=T&&zi[255+ue-ne]<=T&&zi[255+ne-q]<=T}function NA(b,S,J,N){var T=2*N+1;for(N=0;16>N;++N)xA(b,S+N,J,T)&&kc(b,S+N,J)}function Ea(b,S,J,N){var T=2*N+1;for(N=0;16>N;++N)xA(b,S+N*J,1,T)&&kc(b,S+N*J,1)}function bs(b,S,J,N){var T;for(T=3;0<T;--T)NA(b,S+=4*J,J,N)}function J0(b,S,J,N){var T;for(T=3;0<T;--T)Ea(b,S+=4,J,N)}function tl(b,S,J,N,T,Q,P,_){for(Q=2*Q+1;0<T--;){if(YA(b,S,J,Q,P))if(JA(b,S,J,_))kc(b,S,J);else{var q=b,ne=S,ue=J,Se=q[ne-2*ue],Be=q[ne-ue],fe=q[ne+0],De=q[ne+ue],Re=q[ne+2*ue],Ce=27*(Le=F0[1020+3*(fe-Be)+F0[1020+Se-De]])+63>>7,me=18*Le+63>>7,Le=9*Le+63>>7;q[ne-3*ue]=Ai[255+q[ne-3*ue]+Le],q[ne-2*ue]=Ai[255+Se+me],q[ne-ue]=Ai[255+Be+Ce],q[ne+0]=Ai[255+fe-Ce],q[ne+ue]=Ai[255+De-me],q[ne+2*ue]=Ai[255+Re-Le]}S+=N}}function Aa(b,S,J,N,T,Q,P,_){for(Q=2*Q+1;0<T--;){if(YA(b,S,J,Q,P))if(JA(b,S,J,_))kc(b,S,J);else{var q=b,ne=S,ue=J,Se=q[ne-ue],Be=q[ne+0],fe=q[ne+ue],De=TA[112+((Re=3*(Be-Se))+4>>3)],Re=TA[112+(Re+3>>3)],Ce=De+1>>1;q[ne-2*ue]=Ai[255+q[ne-2*ue]+Ce],q[ne-ue]=Ai[255+Se+Re],q[ne+0]=Ai[255+Be-De],q[ne+ue]=Ai[255+fe-Ce]}S+=N}}function Nd(b,S,J,N,T,Q){tl(b,S,J,1,16,N,T,Q)}function hg(b,S,J,N,T,Q){tl(b,S,1,J,16,N,T,Q)}function x0(b,S,J,N,T,Q){var P;for(P=3;0<P;--P)Aa(b,S+=4*J,J,1,16,N,T,Q)}function Vc(b,S,J,N,T,Q){var P;for(P=3;0<P;--P)Aa(b,S+=4,1,J,16,N,T,Q)}function Y0(b,S,J,N,T,Q,P,_){tl(b,S,T,1,8,Q,P,_),tl(J,N,T,1,8,Q,P,_)}function Hd(b,S,J,N,T,Q,P,_){tl(b,S,1,T,8,Q,P,_),tl(J,N,1,T,8,Q,P,_)}function Fd(b,S,J,N,T,Q,P,_){Aa(b,S+4*T,T,1,8,Q,P,_),Aa(J,N+4*T,T,1,8,Q,P,_)}function HA(b,S,J,N,T,Q,P,_){Aa(b,S+4,1,T,8,Q,P,_),Aa(J,N+4,1,T,8,Q,P,_)}function Xc(){this.ba=new zr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Qt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Kd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ld(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function FA(){this.ua=0,this.Wa=new oe,this.vb=new oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new x,this.yc=new X}function N0(){this.xb=this.a=0,this.l=new ua,this.ca=new zr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new FA,this.ab=0,this.gc=a(4,Ld),this.Oc=0}function Jc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ua,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function mg(b,S,J,N,T,Q,P){for(b=b==null?0:b[S+0],S=0;S<P;++S)T[Q+S]=b+J[N+S]&255,b=T[Q+S]}function Ed(b,S,J,N,T,Q,P){var _;if(b==null)mg(null,null,J,N,T,Q,P);else for(_=0;_<P;++_)T[Q+_]=b[S+_]+J[N+_]&255}function nl(b,S,J,N,T,Q,P){if(b==null)mg(null,null,J,N,T,Q,P);else{var _,q=b[S+0],ne=q,ue=q;for(_=0;_<P;++_)ne=ue+(q=b[S+_])-ne,ue=J[N+_]+(-256&ne?0>ne?0:255:ne)&255,ne=q,T[Q+_]=ue}}function Md(b,S,J,N){var T=S.width,Q=S.o;if(t(b!=null&&S!=null),0>J||0>=N||J+N>Q)return null;if(!b.Cc){if(b.ga==null){var P;if(b.ga=new Jc,(P=b.ga==null)||(P=S.width*S.o,t(b.Gb.length==0),b.Gb=i(P),b.Uc=0,b.Gb==null?P=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,P=1),P=!P),!P){P=b.ga;var _=b.Fa,q=b.P,ne=b.qc,ue=b.mb,Se=b.nb,Be=q+1,fe=ne-1,De=P.l;if(t(_!=null&&ue!=null&&S!=null),ll[0]=null,ll[1]=mg,ll[2]=Ed,ll[3]=nl,P.ca=ue,P.tb=Se,P.c=S.width,P.i=S.height,t(0<P.c&&0<P.i),1>=ne)S=0;else if(P.$a=_[q+0]>>0&3,P.Z=_[q+0]>>2&3,P.Lc=_[q+0]>>4&3,q=_[q+0]>>6&3,0>P.$a||1<P.$a||4<=P.Z||1<P.Lc||q)S=0;else if(De.put=Do,De.ac=pn,De.bc=eo,De.ma=P,De.width=S.width,De.height=S.height,De.Da=S.Da,De.v=S.v,De.va=S.va,De.j=S.j,De.o=S.o,P.$a)e:{t(P.$a==1),S=tt();t:for(;;){if(S==null){S=0;break e}if(t(P!=null),P.mc=S,S.c=P.c,S.i=P.i,S.l=P.l,S.l.ma=P,S.l.width=P.c,S.l.height=P.i,S.a=0,K(S.m,_,Be,fe),!_e(P.c,P.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&Fe(S.s)?(P.ic=1,_=S.c*S.i,S.Ta=null,S.Ua=0,S.V=i(_),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(P.ic=0,S=gt(S,P.c)),!S))break t;S=1;break e}P.mc=null,S=0}else S=fe>=P.c*P.i;P=!S}if(P)return null;b.ga.Lc!=1?b.Ga=0:N=Q-J}t(b.ga!=null),t(J+N<=Q);e:{if(S=(_=b.ga).c,Q=_.l.o,_.$a==0){if(Be=b.rc,fe=b.Vc,De=b.Fa,q=b.P+1+J*S,ne=b.mb,ue=b.nb+J*S,t(q<=b.P+b.qc),_.Z!=0)for(t(ll[_.Z]!=null),P=0;P<N;++P)ll[_.Z](Be,fe,De,q,ne,ue,S),Be=ne,fe=ue,ue+=S,q+=S;else for(P=0;P<N;++P)r(ne,ue,De,q,S),Be=ne,fe=ue,ue+=S,q+=S;b.rc=Be,b.Vc=fe}else{if(t(_.mc!=null),S=J+N,t((P=_.mc)!=null),t(S<=P.i),P.C>=S)S=1;else if(_.ic||ve(),_.ic){_=P.V,Be=P.Ba,fe=P.c;var Re=P.i,Ce=(De=1,q=P.$/fe,ne=P.$%fe,ue=P.m,Se=P.s,P.$),me=fe*Re,Le=fe*S,Ue=Se.wc,Me=Ce<Le?se(Se,ne,q):null;t(Ce<=me),t(S<=Re),t(Fe(Se));t:for(;;){for(;!ue.h&&Ce<Le;){if(ne&Ue||(Me=se(Se,ne,q)),t(Me!=null),ee(ue),256>(Re=Ar(Me.G[0],Me.H[0],ue)))_[Be+Ce]=Re,++Ce,++ne>=fe&&(ne=0,++q<=S&&!(q%16)&&At(P,q));else{if(!(280>Re)){De=0;break t}Re=Nr(Re-256,ue);var Ct,lt=Ar(Me.G[4],Me.H[4],ue);if(ee(ue),!(Ce>=(lt=to(fe,lt=Nr(lt,ue)))&&me-Ce>=Re)){De=0;break t}for(Ct=0;Ct<Re;++Ct)_[Be+Ce+Ct]=_[Be+Ce+Ct-lt];for(Ce+=Re,ne+=Re;ne>=fe;)ne-=fe,++q<=S&&!(q%16)&&At(P,q);Ce<Le&&ne&Ue&&(Me=se(Se,ne,q))}t(ue.h==j(ue))}At(P,q>S?S:q);break t}!De||ue.h&&Ce<me?(De=0,P.a=ue.h?5:3):P.$=Ce,S=De}else S=Gt(P,P.V,P.Ba,P.c,P.i,S,Xt);if(!S){N=0;break e}}J+N>=Q&&(b.Cc=1),N=1}if(!N)return null;if(b.Cc&&((N=b.ga)!=null&&(N.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+J*T}function V(b,S,J,N,T,Q){for(;0<T--;){var P,_=b,q=S+(J?1:0),ne=b,ue=S+(J?0:3);for(P=0;P<N;++P){var Se=ne[ue+4*P];Se!=255&&(Se*=32897,_[q+4*P+0]=_[q+4*P+0]*Se>>23,_[q+4*P+1]=_[q+4*P+1]*Se>>23,_[q+4*P+2]=_[q+4*P+2]*Se>>23)}S+=Q}}function U(b,S,J,N,T){for(;0<N--;){var Q;for(Q=0;Q<J;++Q){var P=b[S+2*Q+0],_=15&(ne=b[S+2*Q+1]),q=4369*_,ne=(240&ne|ne>>4)*q>>16;b[S+2*Q+0]=(240&P|P>>4)*q>>16&240|(15&P|P<<4)*q>>16>>4&15,b[S+2*Q+1]=240&ne|_}S+=T}}function ae(b,S,J,N,T,Q,P,_){var q,ne,ue=255;for(ne=0;ne<T;++ne){for(q=0;q<N;++q){var Se=b[S+q];Q[P+4*q]=Se,ue&=Se}S+=J,P+=_}return ue!=255}function ce(b,S,J,N,T){var Q;for(Q=0;Q<T;++Q)J[N+Q]=b[S+Q]>>8}function ve(){Di=V,En=U,Mn=ae,mr=ce}function xe(b,S,J){y[b]=function(N,T,Q,P,_,q,ne,ue,Se,Be,fe,De,Re,Ce,me,Le,Ue){var Me,Ct=Ue-1>>1,lt=_[q+0]|ne[ue+0]<<16,wt=Se[Be+0]|fe[De+0]<<16;t(N!=null);var It=3*lt+wt+131074>>2;for(S(N[T+0],255&It,It>>16,Re,Ce),Q!=null&&(It=3*wt+lt+131074>>2,S(Q[P+0],255&It,It>>16,me,Le)),Me=1;Me<=Ct;++Me){var fn=_[q+Me]|ne[ue+Me]<<16,vn=Se[Be+Me]|fe[De+Me]<<16,In=lt+fn+wt+vn+524296,nn=In+2*(fn+wt)>>3;It=nn+lt>>1,lt=(In=In+2*(lt+vn)>>3)+fn>>1,S(N[T+2*Me-1],255&It,It>>16,Re,Ce+(2*Me-1)*J),S(N[T+2*Me-0],255&lt,lt>>16,Re,Ce+(2*Me-0)*J),Q!=null&&(It=In+wt>>1,lt=nn+vn>>1,S(Q[P+2*Me-1],255&It,It>>16,me,Le+(2*Me-1)*J),S(Q[P+2*Me+0],255&lt,lt>>16,me,Le+(2*Me+0)*J)),lt=fn,wt=vn}1&Ue||(It=3*lt+wt+131074>>2,S(N[T+Ue-1],255&It,It>>16,Re,Ce+(Ue-1)*J),Q!=null&&(It=3*wt+lt+131074>>2,S(Q[P+Ue-1],255&It,It>>16,me,Le+(Ue-1)*J)))}}function Qe(){Ti[UA]=jY,Ti[jA]=W1,Ti[v1]=QY,Ti[QA]=R1,Ti[PA]=k1,Ti[K0]=V1,Ti[G1]=PY,Ti[L0]=W1,Ti[E0]=R1,Ti[OA]=k1,Ti[M0]=V1}function ut(b){return b&~OY?0>b?0:255:b>>X1}function Bt(b,S){return ut((19077*b>>8)+(26149*S>>8)-14234)}function zt(b,S,J){return ut((19077*b>>8)-(6419*S>>8)-(13320*J>>8)+8708)}function Mt(b,S){return ut((19077*b>>8)+(33050*S>>8)-17685)}function gn(b,S,J,N,T){N[T+0]=Bt(b,J),N[T+1]=zt(b,S,J),N[T+2]=Mt(b,S)}function nr(b,S,J,N,T){N[T+0]=Mt(b,S),N[T+1]=zt(b,S,J),N[T+2]=Bt(b,J)}function sr(b,S,J,N,T){var Q=zt(b,S,J);S=Q<<3&224|Mt(b,S)>>3,N[T+0]=248&Bt(b,J)|Q>>5,N[T+1]=S}function Sr(b,S,J,N,T){var Q=240&Mt(b,S)|15;N[T+0]=240&Bt(b,J)|zt(b,S,J)>>4,N[T+1]=Q}function Co(b,S,J,N,T){N[T+0]=255,gn(b,S,J,N,T+1)}function Ur(b,S,J,N,T){nr(b,S,J,N,T),N[T+3]=255}function ha(b,S,J,N,T){gn(b,S,J,N,T),N[T+3]=255}function Ci(b,S){return 0>b?0:b>S?S:b}function Ma(b,S,J){y[b]=function(N,T,Q,P,_,q,ne,ue,Se){for(var Be=ue+(-2&Se)*J;ue!=Be;)S(N[T+0],Q[P+0],_[q+0],ne,ue),S(N[T+1],Q[P+0],_[q+0],ne,ue+J),T+=2,++P,++q,ue+=2*J;1&Se&&S(N[T+0],Q[P+0],_[q+0],ne,ue)}}function KA(b,S,J){return J==0?b==0?S==0?6:5:S==0?4:0:J}function Dd(b,S,J,N,T){switch(b>>>30){case 3:vs(S,J,N,T,0);break;case 2:hr(S,J,N,T);break;case 1:ko(S,J,N,T)}}function zd(b,S){var J,N,T=S.M,Q=S.Nb,P=b.oc,_=b.pc+40,q=b.oc,ne=b.pc+584,ue=b.oc,Se=b.pc+600;for(J=0;16>J;++J)P[_+32*J-1]=129;for(J=0;8>J;++J)q[ne+32*J-1]=129,ue[Se+32*J-1]=129;for(0<T?P[_-1-32]=q[ne-1-32]=ue[Se-1-32]=129:(o(P,_-32-1,127,21),o(q,ne-32-1,127,9),o(ue,Se-32-1,127,9)),N=0;N<b.za;++N){var Be=S.ya[S.aa+N];if(0<N){for(J=-1;16>J;++J)r(P,_+32*J-4,P,_+32*J+12,4);for(J=-1;8>J;++J)r(q,ne+32*J-4,q,ne+32*J+4,4),r(ue,Se+32*J-4,ue,Se+32*J+4,4)}var fe=b.Gd,De=b.Hd+N,Re=Be.ad,Ce=Be.Hc;if(0<T&&(r(P,_-32,fe[De].y,0,16),r(q,ne-32,fe[De].f,0,8),r(ue,Se-32,fe[De].ea,0,8)),Be.Za){var me=P,Le=_-32+16;for(0<T&&(N>=b.za-1?o(me,Le,fe[De].y[15],4):r(me,Le,fe[De+1].y,0,4)),J=0;4>J;J++)me[Le+128+J]=me[Le+256+J]=me[Le+384+J]=me[Le+0+J];for(J=0;16>J;++J,Ce<<=2)me=P,Le=_+x1[J],ma[Be.Ob[J]](me,Le),Dd(Ce,Re,16*+J,me,Le)}else if(me=KA(N,T,Be.Ob[0]),sl[me](P,_),Ce!=0)for(J=0;16>J;++J,Ce<<=2)Dd(Ce,Re,16*+J,P,_+x1[J]);for(J=Be.Gc,me=KA(N,T,Be.Dd),Ss[me](q,ne),Ss[me](ue,Se),Ce=Re,me=q,Le=ne,255&(Be=J>>0)&&(170&Be?Pd(Ce,256,me,Le):Ei(Ce,256,me,Le)),Be=ue,Ce=Se,255&(J>>=8)&&(170&J?Pd(Re,320,Be,Ce):Ei(Re,320,Be,Ce)),T<b.Ub-1&&(r(fe[De].y,0,P,_+480,16),r(fe[De].f,0,q,ne+224,8),r(fe[De].ea,0,ue,Se+224,8)),J=8*Q*b.B,fe=b.sa,De=b.ta+16*N+16*Q*b.R,Re=b.qa,Be=b.ra+8*N+J,Ce=b.Ha,me=b.Ia+8*N+J,J=0;16>J;++J)r(fe,De+J*b.R,P,_+32*J,16);for(J=0;8>J;++J)r(Re,Be+J*b.B,q,ne+32*J,8),r(Ce,me+J*b.B,ue,Se+32*J,8)}}function xc(b,S,J,N,T,Q,P,_,q){var ne=[0],ue=[0],Se=0,Be=q!=null?q.kd:0,fe=q??new Kd;if(b==null||12>J)return 7;fe.data=b,fe.w=S,fe.ha=J,S=[S],J=[J],fe.gb=[fe.gb];e:{var De=S,Re=J,Ce=fe.gb;if(t(b!=null),t(Re!=null),t(Ce!=null),Ce[0]=0,12<=Re[0]&&!n(b,De[0],"RIFF")){if(n(b,De[0]+8,"WEBP")){Ce=3;break e}var me=ze(b,De[0]+4);if(12>me||4294967286<me){Ce=3;break e}if(Be&&me>Re[0]-8){Ce=7;break e}Ce[0]=me,De[0]+=12,Re[0]-=12}Ce=0}if(Ce!=0)return Ce;for(me=0<fe.gb[0],J=J[0];;){e:{var Le=b;Re=S,Ce=J;var Ue=ne,Me=ue,Ct=De=[0];if((It=Se=[Se])[0]=0,8>Ce[0])Ce=7;else{if(!n(Le,Re[0],"VP8X")){if(ze(Le,Re[0]+4)!=10){Ce=3;break e}if(18>Ce[0]){Ce=7;break e}var lt=ze(Le,Re[0]+8),wt=1+Je(Le,Re[0]+12);if(2147483648<=wt*(Le=1+Je(Le,Re[0]+15))){Ce=3;break e}Ct!=null&&(Ct[0]=lt),Ue!=null&&(Ue[0]=wt),Me!=null&&(Me[0]=Le),Re[0]+=18,Ce[0]-=18,It[0]=1}Ce=0}}if(Se=Se[0],De=De[0],Ce!=0)return Ce;if(Re=!!(2&De),!me&&Se)return 3;if(Q!=null&&(Q[0]=!!(16&De)),P!=null&&(P[0]=Re),_!=null&&(_[0]=0),P=ne[0],De=ue[0],Se&&Re&&q==null){Ce=0;break}if(4>J){Ce=7;break}if(me&&Se||!me&&!Se&&!n(b,S[0],"ALPH")){J=[J],fe.na=[fe.na],fe.P=[fe.P],fe.Sa=[fe.Sa];e:{lt=b,Ce=S,me=J;var It=fe.gb;Ue=fe.na,Me=fe.P,Ct=fe.Sa,wt=22,t(lt!=null),t(me!=null),Le=Ce[0];var fn=me[0];for(t(Ue!=null),t(Ct!=null),Ue[0]=null,Me[0]=null,Ct[0]=0;;){if(Ce[0]=Le,me[0]=fn,8>fn){Ce=7;break e}var vn=ze(lt,Le+4);if(4294967286<vn){Ce=3;break e}var In=8+vn+1&-2;if(wt+=In,0<It&&wt>It){Ce=3;break e}if(!n(lt,Le,"VP8 ")||!n(lt,Le,"VP8L")){Ce=0;break e}if(fn[0]<In){Ce=7;break e}n(lt,Le,"ALPH")||(Ue[0]=lt,Me[0]=Le+8,Ct[0]=vn),Le+=In,fn-=In}}if(J=J[0],fe.na=fe.na[0],fe.P=fe.P[0],fe.Sa=fe.Sa[0],Ce!=0)break}J=[J],fe.Ja=[fe.Ja],fe.xa=[fe.xa];e:if(It=b,Ce=S,me=J,Ue=fe.gb[0],Me=fe.Ja,Ct=fe.xa,lt=Ce[0],Le=!n(It,lt,"VP8 "),wt=!n(It,lt,"VP8L"),t(It!=null),t(me!=null),t(Me!=null),t(Ct!=null),8>me[0])Ce=7;else{if(Le||wt){if(It=ze(It,lt+4),12<=Ue&&It>Ue-12){Ce=3;break e}if(Be&&It>me[0]-8){Ce=7;break e}Me[0]=It,Ce[0]+=8,me[0]-=8,Ct[0]=wt}else Ct[0]=5<=me[0]&&It[lt+0]==47&&!(It[lt+4]>>5),Me[0]=me[0];Ce=0}if(J=J[0],fe.Ja=fe.Ja[0],fe.xa=fe.xa[0],S=S[0],Ce!=0)break;if(4294967286<fe.Ja)return 3;if(_==null||Re||(_[0]=fe.xa?2:1),P=[P],De=[De],fe.xa){if(5>J){Ce=7;break}_=P,Be=De,Re=Q,b==null||5>J?b=0:5<=J&&b[S+0]==47&&!(b[S+4]>>5)?(me=[0],It=[0],Ue=[0],K(Me=new H,b,S,J),St(Me,me,It,Ue)?(_!=null&&(_[0]=me[0]),Be!=null&&(Be[0]=It[0]),Re!=null&&(Re[0]=Ue[0]),b=1):b=0):b=0}else{if(10>J){Ce=7;break}_=De,b==null||10>J||!Tr(b,S+3,J-3)?b=0:(Be=b[S+0]|b[S+1]<<8|b[S+2]<<16,Re=16383&(b[S+7]<<8|b[S+6]),b=16383&(b[S+9]<<8|b[S+8]),1&Be||3<(Be>>1&7)||!(Be>>4&1)||Be>>5>=fe.Ja||!Re||!b?b=0:(P&&(P[0]=Re),_&&(_[0]=b),b=1))}if(!b||(P=P[0],De=De[0],Se&&(ne[0]!=P||ue[0]!=De)))return 3;q!=null&&(q[0]=fe,q.offset=S-q.w,t(4294967286>S-q.w),t(q.offset==q.ha-J));break}return Ce==0||Ce==7&&Se&&q==null?(Q!=null&&(Q[0]|=fe.na!=null&&0<fe.na.length),N!=null&&(N[0]=P),T!=null&&(T[0]=De),0):Ce}function Td(b,S,J){var N=S.width,T=S.height,Q=0,P=0,_=N,q=T;if(S.Da=b!=null&&0<b.Da,S.Da&&(_=b.cd,q=b.bd,Q=b.v,P=b.j,11>J||(Q&=-2,P&=-2),0>Q||0>P||0>=_||0>=q||Q+_>N||P+q>T))return 0;if(S.v=Q,S.j=P,S.va=Q+_,S.o=P+q,S.U=_,S.T=q,S.da=b!=null&&0<b.da,S.da){if(!ct(_,q,J=[b.ib],Q=[b.hb]))return 0;S.ib=J[0],S.hb=Q[0]}return S.ob=b!=null&&b.ob,S.Kb=b==null||!b.Sd,S.da&&(S.ob=S.ib<3*N/4&&S.hb<3*T/4,S.Kb=0),1}function Ud(b){if(b==null)return 2;if(11>b.S){var S=b.f.RGBA;S.fb+=(b.height-1)*S.A,S.A=-S.A}else S=b.f.kb,b=b.height,S.O+=(b-1)*S.fa,S.fa=-S.fa,S.N+=(b-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(b-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(b-1)*S.lb,S.lb=-S.lb);return 0}function Yc(b,S,J,N){if(N==null||0>=b||0>=S)return 2;if(J!=null){if(J.Da){var T=J.cd,Q=J.bd,P=-2&J.v,_=-2&J.j;if(0>P||0>_||0>=T||0>=Q||P+T>b||_+Q>S)return 2;b=T,S=Q}if(J.da){if(!ct(b,S,T=[J.ib],Q=[J.hb]))return 2;b=T[0],S=Q[0]}}N.width=b,N.height=S;e:{var q=N.width,ne=N.height;if(b=N.S,0>=q||0>=ne||!(b>=UA&&13>b))b=2;else{if(0>=N.Rd&&N.sd==null){P=Q=T=S=0;var ue=(_=q*Y1[b])*ne;if(11>b||(Q=(ne+1)/2*(S=(q+1)/2),b==12&&(P=(T=q)*ne)),(ne=i(ue+2*Q+P))==null){b=1;break e}N.sd=ne,11>b?((q=N.f.RGBA).eb=ne,q.fb=0,q.A=_,q.size=ue):((q=N.f.kb).y=ne,q.O=0,q.fa=_,q.Fd=ue,q.f=ne,q.N=0+ue,q.Ab=S,q.Cd=Q,q.ea=ne,q.W=0+ue+Q,q.Db=S,q.Ed=Q,b==12&&(q.F=ne,q.J=0+ue+2*Q),q.Tc=P,q.lb=T)}if(S=1,T=N.S,Q=N.width,P=N.height,T>=UA&&13>T)if(11>T)b=N.f.RGBA,S&=(_=Math.abs(b.A))*(P-1)+Q<=b.size,S&=_>=Q*Y1[T],S&=b.eb!=null;else{b=N.f.kb,_=(Q+1)/2,ue=(P+1)/2,q=Math.abs(b.fa),ne=Math.abs(b.Ab);var Se=Math.abs(b.Db),Be=Math.abs(b.lb),fe=Be*(P-1)+Q;S&=q*(P-1)+Q<=b.Fd,S&=ne*(ue-1)+_<=b.Cd,S=(S&=Se*(ue-1)+_<=b.Ed)&q>=Q&ne>=_&Se>=_,S&=b.y!=null,S&=b.f!=null,S&=b.ea!=null,T==12&&(S&=Be>=Q,S&=fe<=b.Tc,S&=b.F!=null)}else S=0;b=S?0:2}}return b!=0||J!=null&&J.fd&&(b=Ud(N)),b}var no=64,Nc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Hc=24,Fc=32,jd=8,Uo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ge("Predictor0","PredictorAdd0"),y.Predictor0=function(){return 4278190080},y.Predictor1=function(b){return b},y.Predictor2=function(b,S,J){return S[J+0]},y.Predictor3=function(b,S,J){return S[J+1]},y.Predictor4=function(b,S,J){return S[J-1]},y.Predictor5=function(b,S,J){return Ze(Ze(b,S[J+1]),S[J+0])},y.Predictor6=function(b,S,J){return Ze(b,S[J-1])},y.Predictor7=function(b,S,J){return Ze(b,S[J+0])},y.Predictor8=function(b,S,J){return Ze(S[J-1],S[J+0])},y.Predictor9=function(b,S,J){return Ze(S[J+0],S[J+1])},y.Predictor10=function(b,S,J){return Ze(Ze(b,S[J-1]),Ze(S[J+0],S[J+1]))},y.Predictor11=function(b,S,J){var N=S[J+0];return 0>=rt(N>>24&255,b>>24&255,(S=S[J-1])>>24&255)+rt(N>>16&255,b>>16&255,S>>16&255)+rt(N>>8&255,b>>8&255,S>>8&255)+rt(255&N,255&b,255&S)?N:b},y.Predictor12=function(b,S,J){var N=S[J+0];return(he((b>>24&255)+(N>>24&255)-((S=S[J-1])>>24&255))<<24|he((b>>16&255)+(N>>16&255)-(S>>16&255))<<16|he((b>>8&255)+(N>>8&255)-(S>>8&255))<<8|he((255&b)+(255&N)-(255&S)))>>>0},y.Predictor13=function(b,S,J){var N=S[J-1];return(Ne((b=Ze(b,S[J+0]))>>24&255,N>>24&255)<<24|Ne(b>>16&255,N>>16&255)<<16|Ne(b>>8&255,N>>8&255)<<8|Ne(b>>0&255,N>>0&255))>>>0};var H0=y.PredictorAdd0;y.PredictorAdd1=st,ge("Predictor2","PredictorAdd2"),ge("Predictor3","PredictorAdd3"),ge("Predictor4","PredictorAdd4"),ge("Predictor5","PredictorAdd5"),ge("Predictor6","PredictorAdd6"),ge("Predictor7","PredictorAdd7"),ge("Predictor8","PredictorAdd8"),ge("Predictor9","PredictorAdd9"),ge("Predictor10","PredictorAdd10"),ge("Predictor11","PredictorAdd11"),ge("Predictor12","PredictorAdd12"),ge("Predictor13","PredictorAdd13");var Qd=y.PredictorAdd2;Zt("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),Zt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var LA,Li=y.ColorIndexInverseTransform,Kc=y.MapARGB,EA=y.VP8LColorIndexInverseTransformAlpha,MA=y.MapAlpha,rl=y.VP8LPredictorsAdd=[];rl.length=16,(y.VP8LPredictors=[]).length=16,(y.VP8LPredictorsAdd_C=[]).length=16,(y.VP8LPredictors_C=[]).length=16;var pg,jo,Ro,ol,ys,Zs,Lc,vs,hr,Pd,ko,Ei,Ec,DA,Od,fg,bg,il,yg,Mc,Zg,al,_d,Mi,Di,En,Mn,mr,Hr=i(511),Gs=i(2041),qd=i(225),Dc=i(767),zA=0,F0=Gs,TA=qd,Ai=Dc,zi=Hr,UA=0,jA=1,v1=2,QA=3,PA=4,K0=5,G1=6,L0=7,E0=8,OA=9,M0=10,JY=[2,3,7],xY=[3,3,11],S1=[280,256,256,256,40],YY=[0,1,1,1,0],NY=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],HY=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],FY=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],KY=8,D0=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],z0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],$d=null,LY=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],EY=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],B1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],MY=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],DY=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],zY=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],TY=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],sl=[],ma=[],Ss=[],UY=1,w1=2,ll=[],Ti=[];xe("UpsampleRgbLinePair",gn,3),xe("UpsampleBgrLinePair",nr,3),xe("UpsampleRgbaLinePair",ha,4),xe("UpsampleBgraLinePair",Ur,4),xe("UpsampleArgbLinePair",Co,4),xe("UpsampleRgba4444LinePair",Sr,2),xe("UpsampleRgb565LinePair",sr,2);var jY=y.UpsampleRgbLinePair,QY=y.UpsampleBgrLinePair,W1=y.UpsampleRgbaLinePair,R1=y.UpsampleBgraLinePair,k1=y.UpsampleArgbLinePair,V1=y.UpsampleRgba4444LinePair,PY=y.UpsampleRgb565LinePair,_A=16,qA=1<<_A-1,eu=-227,T0=482,X1=6,OY=(256<<X1)-1,J1=0,_Y=i(256),qY=i(256),$Y=i(256),e3=i(256),t3=i(T0-eu),n3=i(T0-eu);Ma("YuvToRgbRow",gn,3),Ma("YuvToBgrRow",nr,3),Ma("YuvToRgbaRow",ha,4),Ma("YuvToBgraRow",Ur,4),Ma("YuvToArgbRow",Co,4),Ma("YuvToRgba4444Row",Sr,2),Ma("YuvToRgb565Row",sr,2);var x1=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],$A=[0,2,8],r3=[8,7,6,4,4,2,2,2,1,1,1,1],o3=1;this.WebPDecodeRGBA=function(b,S,J,N,T){var Q=jA,P=new Xc,_=new zr;P.ba=_,_.S=Q,_.width=[_.width],_.height=[_.height];var q=_.width,ne=_.height,ue=new Wo;if(ue==null||b==null)var Se=2;else t(ue!=null),Se=xc(b,S,J,ue.width,ue.height,ue.Pd,ue.Qd,ue.format,null);if(Se!=0?q=0:(q!=null&&(q[0]=ue.width[0]),ne!=null&&(ne[0]=ue.height[0]),q=1),q){_.width=_.width[0],_.height=_.height[0],N!=null&&(N[0]=_.width),T!=null&&(T[0]=_.height);e:{if(N=new ua,(T=new Kd).data=b,T.w=S,T.ha=J,T.kd=1,S=[0],t(T!=null),((b=xc(T.data,T.w,T.ha,null,null,null,S,null,T))==0||b==7)&&S[0]&&(b=4),(S=b)==0){if(t(P!=null),N.data=T.data,N.w=T.w+T.offset,N.ha=T.ha-T.offset,N.put=Do,N.ac=pn,N.bc=eo,N.ma=P,T.xa){if((b=tt())==null){P=1;break e}if(function(Be,fe){var De=[0],Re=[0],Ce=[0];t:for(;;){if(Be==null)return 0;if(fe==null)return Be.a=2,0;if(Be.l=fe,Be.a=0,K(Be.m,fe.data,fe.w,fe.ha),!St(Be.m,De,Re,Ce)){Be.a=3;break t}if(Be.xb=w1,fe.width=De[0],fe.height=Re[0],!_e(De[0],Re[0],1,Be,null))break t;return 1}return t(Be.a!=0),0}(b,N)){if(N=(S=Yc(N.width,N.height,P.Oa,P.ba))==0){t:{N=b;n:for(;;){if(N==null){N=0;break t}if(t(N.s.yc!=null),t(N.s.Ya!=null),t(0<N.s.Wb),t((J=N.l)!=null),t((T=J.ma)!=null),N.xb!=0){if(N.ca=T.ba,N.tb=T.tb,t(N.ca!=null),!Td(T.Oa,J,QA)){N.a=2;break n}if(!gt(N,J.width)||J.da)break n;if((J.da||Ot(N.ca.S))&&ve(),11>N.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),N.ca.f.kb.F!=null&&ve()),N.Pb&&0<N.s.ua&&N.s.vb.X==null&&!ke(N.s.vb,N.s.Wa.Xa)){N.a=1;break n}N.xb=0}if(!Gt(N,N.V,N.Ba,N.c,N.i,J.o,we))break n;T.Dc=N.Ma,N=1;break t}t(N.a!=0),N=0}N=!N}N&&(S=b.a)}else S=b.a}else{if((b=new Lt)==null){P=1;break e}if(b.Fa=T.na,b.P=T.P,b.qc=T.Sa,Nn(b,N)){if((S=Yc(N.width,N.height,P.Oa,P.ba))==0){if(b.Aa=0,J=P.Oa,t((T=b)!=null),J!=null){if(0<(q=0>(q=J.Md)?0:100<q?255:255*q/100)){for(ne=ue=0;4>ne;++ne)12>(Se=T.pb[ne]).lc&&(Se.ia=q*r3[0>Se.lc?0:Se.lc]>>3),ue|=Se.ia;ue&&(alert("todo:VP8InitRandom"),T.ia=1)}T.Ga=J.Id,100<T.Ga?T.Ga=100:0>T.Ga&&(T.Ga=0)}kd(b,N)||(S=b.a)}}else S=b.a}S==0&&P.Oa!=null&&P.Oa.fd&&(S=Ud(P.ba))}P=S}Q=P!=0?null:11>Q?_.f.RGBA.eb:_.f.kb.y}else Q=null;return Q};var Y1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(y,W){for(var G="",R=0;R<4;R++)G+=String.fromCharCode(y[W++]);return G}function u(y,W){return(y[W+0]<<0|y[W+1]<<8|y[W+2]<<16)>>>0}function g(y,W){return(y[W+0]<<0|y[W+1]<<8|y[W+2]<<16|y[W+3]<<24)>>>0}new l;var d=[0],I=[0],C=[],h=new l,f=e,A=function(y,W){var G={},R=0,X=!1,Y=0,x=0;if(G.frames=[],!function(z,j,$,ee){for(var le=0;le<ee;le++)if(z[j+le]!=$.charCodeAt(le))return!0;return!1}(y,W,"RIFF",4)){var D,L;for(g(y,W+=4),W+=8;W<y.length;){var M=c(y,W),K=g(y,W+=4);W+=4;var E=K+(1&K);switch(M){case"VP8 ":case"VP8L":G.frames[R]===void 0&&(G.frames[R]={}),(H=G.frames[R]).src_off=X?x:W-8,H.src_size=Y+K+8,R++,X&&(X=!1,Y=0,x=0);break;case"VP8X":(H=G.header={}).feature_flags=y[W];var O=W+4;H.canvas_width=1+u(y,O),O+=3,H.canvas_height=1+u(y,O),O+=3;break;case"ALPH":X=!0,Y=E+8,x=W-8;break;case"ANIM":(H=G.header).bgcolor=g(y,W),O=W+4,H.loop_count=(D=y)[(L=O)+0]<<0|D[L+1]<<8,O+=2;break;case"ANMF":var re,H;(H=G.frames[R]={}).offset_x=2*u(y,W),W+=3,H.offset_y=2*u(y,W),W+=3,H.width=1+u(y,W),W+=3,H.height=1+u(y,W),W+=3,H.duration=u(y,W),W+=3,re=y[W++],H.dispose=1&re,H.blend=re>>1&1}M!="ANMF"&&(W+=E)}return G}}(f,0);A.response=f,A.rgbaoutput=!0,A.dataurl=!1;var m=A.header?A.header:null,p=A.frames?A.frames:null;if(m){m.loop_counter=m.loop_count,d=[m.canvas_height],I=[m.canvas_width];for(var Z=0;Z<p.length&&p[Z].blend!=0;Z++);}var v=p[0],k=h.WebPDecodeRGBA(f,v.src_off,v.src_size,I,d);v.rgba=k,v.imgwidth=I[0],v.imgheight=d[0];for(var B=0;B<I[0]*d[0]*4;B++)C[B]=k[B];return this.width=I,this.height=d,this.data=C,this}(function(e){var t=function(){return typeof yZ=="function"},n=function(d,I,C,h){var f=4,A=a;switch(h){case e.image_compression.FAST:f=1,A=i;break;case e.image_compression.MEDIUM:f=6,A=s;break;case e.image_compression.SLOW:f=9,A=l}d=r(d,I,C,A);var m=yZ(d,{level:f});return e.__addimage__.arrayBufferToBinaryString(m)},r=function(d,I,C,h){for(var f,A,m,p=d.length/I,Z=new Uint8Array(d.length+p),v=u(),k=0;k<p;k+=1){if(m=k*I,f=d.subarray(m,m+I),h)Z.set(h(f,C,A),m+k);else{for(var B,y=v.length,W=[];B<y;B+=1)W[B]=v[B](f,C,A);var G=g(W.concat());Z.set(W[G],m+k)}A=f}return Z},o=function(d){var I=Array.apply([],d);return I.unshift(0),I},i=function(d,I){var C,h=[],f=d.length;h[0]=1;for(var A=0;A<f;A+=1)C=d[A-I]||0,h[A+1]=d[A]-C+256&255;return h},a=function(d,I,C){var h,f=[],A=d.length;f[0]=2;for(var m=0;m<A;m+=1)h=C&&C[m]||0,f[m+1]=d[m]-h+256&255;return f},s=function(d,I,C){var h,f,A=[],m=d.length;A[0]=3;for(var p=0;p<m;p+=1)h=d[p-I]||0,f=C&&C[p]||0,A[p+1]=d[p]+256-(h+f>>>1)&255;return A},l=function(d,I,C){var h,f,A,m,p=[],Z=d.length;p[0]=4;for(var v=0;v<Z;v+=1)h=d[v-I]||0,f=C&&C[v]||0,A=C&&C[v-I]||0,m=c(h,f,A),p[v+1]=d[v]-m+256&255;return p},c=function(d,I,C){if(d===I&&I===C)return d;var h=Math.abs(I-C),f=Math.abs(d-C),A=Math.abs(d+I-C-C);return h<=f&&h<=A?d:f<=A?I:C},u=function(){return[o,i,a,s,l]},g=function(d){var I=d.map(function(C){return C.reduce(function(h,f){return h+Math.abs(f)},0)});return I.indexOf(Math.min.apply(null,I))};e.processPNG=function(d,I,C,h){var f,A,m,p,Z,v,k,B,y,W,G,R,X,Y,x,D=this.decode.FLATE_DECODE,L="";if(this.__addimage__.isArrayBuffer(d)&&(d=new Uint8Array(d)),this.__addimage__.isArrayBufferView(d)){if(d=(m=new p7(d)).imgData,A=m.bits,f=m.colorSpace,Z=m.colors,[4,6].indexOf(m.colorType)!==-1){if(m.bits===8){y=(B=m.pixelBitlength==32?new Uint32Array(m.decodePixels().buffer):m.pixelBitlength==16?new Uint16Array(m.decodePixels().buffer):new Uint8Array(m.decodePixels().buffer)).length,G=new Uint8Array(y*m.colors),W=new Uint8Array(y);var M,K=m.pixelBitlength-m.bits;for(Y=0,x=0;Y<y;Y++){for(X=B[Y],M=0;M<K;)G[x++]=X>>>M&255,M+=m.bits;W[Y]=X>>>M&255}}if(m.bits===16){y=(B=new Uint32Array(m.decodePixels().buffer)).length,G=new Uint8Array(y*(32/m.pixelBitlength)*m.colors),W=new Uint8Array(y*(32/m.pixelBitlength)),R=m.colors>1,Y=0,x=0;for(var E=0;Y<y;)X=B[Y++],G[x++]=X>>>0&255,R&&(G[x++]=X>>>16&255,X=B[Y++],G[x++]=X>>>0&255),W[E++]=X>>>16&255;A=8}h!==e.image_compression.NONE&&t()?(d=n(G,m.width*m.colors,m.colors,h),k=n(W,m.width,1,h)):(d=G,k=W,D=void 0)}if(m.colorType===3&&(f=this.color_spaces.INDEXED,v=m.palette,m.transparency.indexed)){var O=m.transparency.indexed,re=0;for(Y=0,y=O.length;Y<y;++Y)re+=O[Y];if((re/=255)===y-1&&O.indexOf(0)!==-1)p=[O.indexOf(0)];else if(re!==y){for(B=m.decodePixels(),W=new Uint8Array(B.length),Y=0,y=B.length;Y<y;Y++)W[Y]=O[B[Y]];k=n(W,m.width,1)}}var H=function(z){var j;switch(z){case e.image_compression.FAST:j=11;break;case e.image_compression.MEDIUM:j=13;break;case e.image_compression.SLOW:j=14;break;default:j=12}return j}(h);return D===this.decode.FLATE_DECODE&&(L="/Predictor "+H+" "),L+="/Colors "+Z+" /BitsPerComponent "+A+" /Columns "+m.width,(this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),(k&&this.__addimage__.isArrayBuffer(k)||this.__addimage__.isArrayBufferView(k))&&(k=this.__addimage__.arrayBufferToBinaryString(k)),{alias:C,data:d,index:I,filter:D,decodeParameters:L,transparency:p,palette:v,sMask:k,predictor:H,width:m.width,height:m.height,bitsPerComponent:A,colorSpace:f}}}})(Wt.API),function(e){e.processGIF89A=function(t,n,r,o){var i=new f7(t),a=i.width,s=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:s},u=new Gy(100).encode(c,100);return e.processJPEG.call(this,u,n,r,o)},e.processGIF87A=e.processGIF89A}(Wt.API),ya.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:o,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ya.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Ln.log("bit decode error:"+n)}},ya.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,o=0;o<t;o++)for(var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*o*4,s=0;s<8&&8*o+s<this.width;s++){var l=this.palette[i>>7-s&1];this.data[a+4*s]=l.blue,this.data[a+4*s+1]=l.green,this.data[a+4*s+2]=l.red,this.data[a+4*s+3]=255}n!==0&&(this.pos+=4-n)}},ya.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<e;o++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*o*4,s=i>>4,l=15&i,c=this.palette[s];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*o+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},ya.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(o<this.palette.length){var a=this.palette[o];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},ya.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&t)/t*255|0,s=(i>>5&t)/t*255|0,l=(i>>10&t)/t*255|0,c=i>>15?255:0,u=r*this.width*4+4*o;this.data[u]=l,this.data[u+1]=s,this.data[u+2]=a,this.data[u+3]=c}this.pos+=e}},ya.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&t)/t*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/t*255|0,u=o*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=s,this.data[u+3]=255}this.pos+=e}},ya.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=i,this.data[a+1]=o,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},ya.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=i,this.data[s+1]=o,this.data[s+2]=r,this.data[s+3]=a}},ya.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,o){var i=new ya(t,!1),a=i.width,s=i.height,l={data:i.getData(),width:a,height:s},c=new Gy(100).encode(l,100);return e.processJPEG.call(this,c,n,r,o)}}(Wt.API),Uw.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,o){var i=new Uw(t),a=i.width,s=i.height,l={data:i.getData(),width:a,height:s},c=new Gy(100).encode(l,100);return e.processJPEG.call(this,c,n,r,o)}}(Wt.API),Wt.API.processRGBA=function(e,t,n){for(var r=e.data,o=r.length,i=new Uint8Array(o/4*3),a=new Uint8Array(o/4),s=0,l=0,c=0;c<o;c+=4){var u=r[c],g=r[c+1],d=r[c+2],I=r[c+3];i[s++]=u,i[s++]=g,i[s++]=d,a[l++]=I}var C=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:C,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Wt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},aI=Wt.API,zh=aI.getCharWidthsArray=function(e,t){var n,r,o=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:o.metadata.Unicode.widths,l=s.fof?s.fof:1,c=t.kerning?t.kerning:o.metadata.Unicode.kerning,u=c.fof?c.fof:1,g=t.doKerning!==!1,d=0,I=e.length,C=0,h=s[0]||l,f=[];for(n=0;n<I;n++)r=e.charCodeAt(n),typeof o.metadata.widthOfString=="function"?f.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+a*(1e3/i)||0)/1e3):(d=g&&An(c[r])==="object"&&!isNaN(parseInt(c[r][C],10))?c[r][C]/u:0,f.push((s[r]||h)/l+d)),C=r;return f},Mw=aI.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),o=t.charSpace||this.internal.getCharSpace();return aI.processArabic&&(e=aI.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,o)/n:zh.apply(this,arguments).reduce(function(i,a){return i+a},0)},Dw=function(e,t,n,r){for(var o=[],i=0,a=e.length,s=0;i!==a&&s+t[i]<n;)s+=t[i],i++;o.push(e.slice(0,i));var l=i;for(s=0;i!==a;)s+t[i]>r&&(o.push(e.slice(l,i)),s=0,l=i),s+=t[i],i++;return l!==i&&o.push(e.slice(l,i)),o},zw=function(e,t,n){n||(n={});var r,o,i,a,s,l,c,u=[],g=[u],d=n.textIndent||0,I=0,C=0,h=e.split(" "),f=zh.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?h[0].length+2:n.lineIndent||0){var A=Array(l).join(" "),m=[];h.map(function(Z){(Z=Z.split(/\s*\n/)).length>1?m=m.concat(Z.map(function(v,k){return(k&&v.length?`
`:"")+v})):m.push(Z[0])}),h=m,l=Mw.apply(this,[A,n])}for(i=0,a=h.length;i<a;i++){var p=0;if(r=h[i],l&&r[0]==`
`&&(r=r.substr(1),p=1),d+I+(C=(o=zh.apply(this,[r,n])).reduce(function(Z,v){return Z+v},0))>t||p){if(C>t){for(s=Dw.apply(this,[r,o,t-(d+I),t]),u.push(s.shift()),u=[s.pop()];s.length;)g.push([s.shift()]);C=o.slice(r.length-(u[0]?u[0].length:0)).reduce(function(Z,v){return Z+v},0)}else u=[r];g.push(u),d=C+l,I=f}else u.push(r),d+=I+C,I=f}return c=l?function(Z,v){return(v?A:"")+Z.join(" ")}:function(Z){return Z.join(" ")},g.map(c)},aI.splitTextToSize=function(e,t,n){var r,o=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var g=this.internal.getFont(u.fontName,u.fontStyle);return g.metadata.Unicode?{widths:g.metadata.Unicode.widths||{0:1},kerning:g.metadata.Unicode.kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/o;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,i.lineIndent=n.lineIndent;var s,l,c=[];for(s=0,l=r.length;s<l;s++)c=c.concat(zw.apply(this,[r[s],a,i]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},o=0;o<t.length;o++)n[t[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=t[o];var i=function(g){return"0x"+parseInt(g,10).toString(16)},a=e.__fontmetrics__.compress=function(g){var d,I,C,h,f=["{"];for(var A in g){if(d=g[A],isNaN(parseInt(A,10))?I="'"+A+"'":(A=parseInt(A,10),I=(I=i(A).slice(2)).slice(0,-1)+r[I.slice(-1)]),typeof d=="number")d<0?(C=i(d).slice(3),h="-"):(C=i(d).slice(2),h=""),C=h+C.slice(0,-1)+r[C.slice(-1)];else{if(An(d)!=="object")throw new Error("Don't know what to do with value type "+An(d)+".");C=a(d)}f.push(I+C)}return f.push("}"),f.join("")},s=e.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,I,C,h,f={},A=1,m=f,p=[],Z="",v="",k=g.length-1,B=1;B<k;B+=1)(h=g[B])=="'"?d?(C=d.join(""),d=void 0):d=[]:d?d.push(h):h=="{"?(p.push([m,C]),m={},C=void 0):h=="}"?((I=p.pop())[0][I[1]]=m,C=void 0,m=I[0]):h=="-"?A=-1:C===void 0?n.hasOwnProperty(h)?(Z+=n[h],C=parseInt(Z,16)*A,A=1,Z=""):Z+=h:n.hasOwnProperty(h)?(v+=n[h],m[C]=parseInt(v,16)*A,A=1,C=void 0,v=""):v+=h;return f},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(g){var d=g.font,I=u.Unicode[d.postScriptName];I&&(d.metadata.Unicode={},d.metadata.Unicode.widths=I.widths,d.metadata.Unicode.kerning=I.kerning);var C=c.Unicode[d.postScriptName];C&&(d.metadata.Unicode.encoding=C,d.encoding=C.codePages[0])}])}(Wt.API),function(e){var t=function(n){for(var r=n.length,o=new Uint8Array(r),i=0;i<r;i++)o[i]=n.charCodeAt(i);return o};e.API.events.push(["addFont",function(n){var r=void 0,o=n.font,i=n.instance;if(!o.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=i.existsFileInVFS(o.postScriptName)===!1?i.loadFile(o.postScriptName):i.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(a,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(iC(s)),a.metadata=e.API.TTFFont.open(s),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(o,r)}}])}(Wt),function(e){function t(){return(xt.canvg?Promise.resolve(xt.canvg):hZ(()=>import("./index.es-DP-b6wvj.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Wt.API.addSvgAsImage=function(n,r,o,i,a,s,l,c){if(isNaN(r)||isNaN(o))throw Ln.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw Ln.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=a;var g=u.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,u.width,u.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},I=this;return t().then(function(C){return C.fromString(g,n,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(d)}).then(function(){I.addImage(u.toDataURL("image/jpeg",1),r,o,i,a,l,c)})}}(),Wt.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(t,n);return this},Wt.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,o,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),l=[],c=0,u=0,g=0;function d(C,h){var f,A=!1;for(f=0;f<C.length;f+=1)C[f]===h&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var I=s.length;for(g=0;g<I;g+=1)n[s[g]].value=n[s[g]].defaultValue,n[s[g]].explicitSet=!1}if(An(e)==="object"){for(o in e)if(i=e[o],d(s,o)&&i!==void 0){if(n[o].type==="boolean"&&typeof i=="boolean")n[o].value=i;else if(n[o].type==="name"&&d(n[o].valueSet,i))n[o].value=i;else if(n[o].type==="integer"&&Number.isInteger(i))n[o].value=i;else if(n[o].type==="array"){for(c=0;c<i.length;c+=1)if(r=!0,i[c].length===1&&typeof i[c][0]=="number")l.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(r=!1);r===!0&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}n[o].value="["+l.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,h=[];for(C in n)n[C].explicitSet===!0&&(n[C].type==="name"?h.push("/"+C+" /"+n[C].value):h.push("/"+C+" "+n[C].value));h.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+h.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+a.length+s.length+o.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(o+i+a+s+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Wt.API),function(e){var t=e.API,n=t.pdfEscape16=function(i,a){for(var s,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],g=0,d=i.length;g<d;++g){if(s=a.metadata.characterToGlyph(i.charCodeAt(g)),a.metadata.glyIdsUsed.push(s),a.metadata.toUnicode[s]=i.charCodeAt(g),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(a.metadata.widthOfGlyph(s),10)])),s=="0")return u.join("");s=s.toString(16),u.push(c[4-s.length],s)}return u.join("")},r=function(i){var a,s,l,c,u,g,d;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],g=0,d=(s=Object.keys(i).sort(function(I,C){return I-C})).length;g<d;g++)a=s[g],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(a){var s=a.font,l=a.out,c=a.newObject,u=a.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="Identity-H"){for(var g=s.metadata.Unicode.widths,d=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),I="",C=0;C<d.length;C++)I+=String.fromCharCode(d[C]);var h=c();u({data:I,addLength1:!0,objectId:h}),l("endobj");var f=c();u({data:r(s.metadata.toUnicode),addLength1:!0,objectId:f}),l("endobj");var A=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+cI(s.fontName)),l("/FontFile2 "+h+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var m=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+cI(s.fontName)),l("/FontDescriptor "+A+" 0 R"),l("/W "+e.API.PDFObject.convert(g)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+f+" 0 R"),l("/BaseFont /"+cI(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+m+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(a){var s=a.font,l=a.out,c=a.newObject,u=a.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var g=s.metadata.rawData,d="",I=0;I<g.length;I++)d+=String.fromCharCode(g[I]);var C=c();u({data:d,addLength1:!0,objectId:C}),l("endobj");var h=c();u({data:r(s.metadata.toUnicode),addLength1:!0,objectId:h}),l("endobj");var f=c();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+C+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+cI(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=c();for(var A=0;A<s.metadata.hmtx.widths.length;A++)s.metadata.hmtx.widths[A]=parseInt(s.metadata.hmtx.widths[A]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+h+" 0 R/BaseFont/"+cI(s.fontName)+"/FontDescriptor "+f+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(i)}]);var o=function(i){var a,s=i.text||"",l=i.x,c=i.y,u=i.options||{},g=i.mutex||{},d=g.pdfEscape,I=g.activeFontKey,C=g.fonts,h=I,f="",A=0,m="",p=C[h].encoding;if(C[h].encoding!=="Identity-H")return{text:s,x:l,y:c,options:u,mutex:g};for(m=s,h=I,Array.isArray(s)&&(m=s[0]),A=0;A<m.length;A+=1)C[h].metadata.hasOwnProperty("cmap")&&(a=C[h].metadata.cmap.unicode.codeMap[m[A].charCodeAt(0)]),a||m[A].charCodeAt(0)<256&&C[h].metadata.hasOwnProperty("Unicode")?f+=m[A]:f+="";var Z="";return parseInt(h.slice(1))<14||p==="WinAnsiEncoding"?Z=d(f,h).split("").map(function(v){return v.charCodeAt(0).toString(16)}).join(""):p==="Identity-H"&&(Z=n(f,C[h])),g.isHex=!0,{text:Z,x:l,y:c,options:u,mutex:g}};t.events.push(["postProcessText",function(i){var a=i.text||"",s=[],l={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?s.push([o(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):s.push(o(Object.assign({},l,{text:a[c]})).text);i.text=s}else i.text=o(Object.assign({},l,{text:a})).text}])}(Wt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Wt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var o,i,a,s,l,c,u,g=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],I=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},h={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,p=0;this.__bidiEngine__={};var Z=function(R){var X=R.charCodeAt(),Y=X>>8,x=h[Y];return x!==void 0?g[256*x+(255&X)]:Y===252||Y===253?"AL":A.test(Y)?"L":Y===8?"R":"N"},v=function(R){for(var X,Y=0;Y<R.length;Y++){if((X=Z(R.charAt(Y)))==="L")return!1;if(X==="R")return!0}return!1},k=function(R,X,Y,x){var D,L,M,K,E=X[x];switch(E){case"L":case"R":m=!1;break;case"N":case"AN":break;case"EN":m&&(E="AN");break;case"AL":m=!0,E="R";break;case"WS":E="N";break;case"CS":x<1||x+1>=X.length||(D=Y[x-1])!=="EN"&&D!=="AN"||(L=X[x+1])!=="EN"&&L!=="AN"?E="N":m&&(L="AN"),E=L===D?L:"N";break;case"ES":E=(D=x>0?Y[x-1]:"B")==="EN"&&x+1<X.length&&X[x+1]==="EN"?"EN":"N";break;case"ET":if(x>0&&Y[x-1]==="EN"){E="EN";break}if(m){E="N";break}for(M=x+1,K=X.length;M<K&&X[M]==="ET";)M++;E=M<K&&X[M]==="EN"?"EN":"N";break;case"NSM":if(a&&!s){for(K=X.length,M=x+1;M<K&&X[M]==="NSM";)M++;if(M<K){var O=R[x],re=O>=1425&&O<=2303||O===64286;if(D=X[M],re&&(D==="R"||D==="AL")){E="R";break}}}E=x<1||(D=X[x-1])==="B"?"N":Y[x-1];break;case"B":m=!1,o=!0,E=p;break;case"S":i=!0,E="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"BN":E="N"}return E},B=function(R,X,Y){var x=R.split("");return Y&&y(x,Y,{hiLevel:p}),x.reverse(),X&&X.reverse(),x.join("")},y=function(R,X,Y){var x,D,L,M,K,E=-1,O=R.length,re=0,H=[],z=p?I:d,j=[];for(m=!1,o=!1,i=!1,D=0;D<O;D++)j[D]=Z(R[D]);for(L=0;L<O;L++){if(K=re,H[L]=k(R,j,H,L),x=240&(re=z[K][C[H[L]]]),re&=15,X[L]=M=z[re][5],x>0)if(x===16){for(D=E;D<L;D++)X[D]=1;E=-1}else E=-1;if(z[re][6])E===-1&&(E=L);else if(E>-1){for(D=E;D<L;D++)X[D]=M;E=-1}j[L]==="B"&&(X[L]=0),Y.hiLevel|=M}i&&function($,ee,le){for(var Ie=0;Ie<le;Ie++)if($[Ie]==="S"){ee[Ie]=p;for(var Ae=Ie-1;Ae>=0&&$[Ae]==="WS";Ae--)ee[Ae]=p}}(j,X,O)},W=function(R,X,Y,x,D){if(!(D.hiLevel<R)){if(R===1&&p===1&&!o)return X.reverse(),void(Y&&Y.reverse());for(var L,M,K,E,O=X.length,re=0;re<O;){if(x[re]>=R){for(K=re+1;K<O&&x[K]>=R;)K++;for(E=re,M=K-1;E<M;E++,M--)L=X[E],X[E]=X[M],X[M]=L,Y&&(L=Y[E],Y[E]=Y[M],Y[M]=L);re=K}re++}}},G=function(R,X,Y){var x=R.split(""),D={hiLevel:p};return Y||(Y=[]),y(x,Y,D),function(L,M,K){if(K.hiLevel!==0&&u)for(var E,O=0;O<L.length;O++)M[O]===1&&(E=f.indexOf(L[O]))>=0&&(L[O]=f[E+1])}(x,Y,D),W(2,x,X,Y,D),W(1,x,X,Y,D),x.join("")};return this.__bidiEngine__.doBidiReorder=function(R,X,Y){if(function(D,L){if(L)for(var M=0;M<D.length;M++)L[M]=M;s===void 0&&(s=v(D)),c===void 0&&(c=v(D))}(R,X),a||!l||c)if(a&&l&&s^c)p=s?1:0,R=B(R,X,Y);else if(!a&&l&&c)p=s?1:0,R=G(R,X,Y),R=B(R,X);else if(!a||s||l||c){if(a&&!l&&s^c)R=B(R,X),s?(p=0,R=G(R,X,Y)):(p=1,R=G(R,X,Y),R=B(R,X));else if(a&&s&&!l&&c)p=1,R=G(R,X,Y),R=B(R,X);else if(!a&&!l&&s^c){var x=u;s?(p=1,R=G(R,X,Y),p=0,u=!1,R=G(R,X,Y),u=x):(p=0,R=G(R,X,Y),R=B(R,X),p=1,u=!1,R=G(R,X,Y),u=x,R=B(R,X))}}else p=0,R=G(R,X,Y);else p=s?1:0,R=G(R,X,Y);return R},this.__bidiEngine__.setOptions=function(R){R&&(a=R.isInputVisual,l=R.isOutputVisual,s=R.isInputRtl,c=R.isOutputRtl,u=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var o=r.text,i=(r.x,r.y,r.options||{}),a=(r.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(o)==="[object Array]"){var s=0;for(a=[],s=0;s<o.length;s+=1)Object.prototype.toString.call(o[s])==="[object Array]"?a.push([n.doBidiReorder(o[s][0]),o[s][1],o[s][2]]):a.push([n.doBidiReorder(o[s])]);r.text=a}else r.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(Wt),Wt.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new og(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new x7(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new b7(this.contents),this.head=new Z7(this),this.name=new w7(this),this.cmap=new Ix(this),this.toUnicode={},this.hhea=new v7(this),this.maxp=new W7(this),this.hmtx=new R7(this),this.post=new S7(this),this.os2=new G7(this),this.loca=new J7(this),this.glyf=new k7(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,o,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,s,l,c;for(c=[],a=0,s=(l=this.bbox).length;a<s;a++)t=l[a],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var o,i,a,s;for(a=0,i=0,s=(t=""+t).length;0<=s?i<s:i>s;i=0<=s?++i:--i)o=t.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Ha,og=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,o;for(o=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)o.push(this.writeByte(t.charCodeAt(n)));return o},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,o,i,a,s,l;return t=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^i)+65536*(255^a)+256*(255^s)+(255^l)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*o+16777216*i+65536*a+256*s+l},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,o,i;for(i=[],r=0,o=t.length;r<o;r++)n=t[r],i.push(this.writeByte(n));return i},e}(),b7=function(){var e;function t(n){var r,o,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,i=this.tableCount;0<=i?o<i:o>i;o=0<=i?++o:--o)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,o,i,a,s,l,c,u,g,d,I,C,h;for(h in I=Object.keys(n).length,l=Math.log(2),g=16*Math.floor(Math.log(I)/l),a=Math.floor(g/l),u=16*I-g,(o=new og).writeInt(this.scalarType),o.writeShort(I),o.writeShort(g),o.writeShort(a),o.writeShort(u),i=16*I,c=o.pos+i,s=null,C=[],n)for(d=n[h],o.writeString(h),o.writeInt(e(d)),o.writeInt(c),o.writeInt(d.length),C=C.concat(d),h==="head"&&(s=c),c+=d.length;c%4;)C.push(0),c++;return o.write(C),r=2981146554-e(o.data),o.pos=s+8,o.writeUInt32(r),o.data},e=function(n){var r,o,i,a;for(n=dx.call(n);n.length%4;)n.push(0);for(i=new og(n),o=0,r=0,a=n.length;r<a;r=r+=4)o+=i.readUInt32();return 4294967295&o},t}(),y7={}.hasOwnProperty,hs=function(e,t){for(var n in t)y7.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Ha=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Z7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hs(t,Ha),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new og).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),jw=function(){function e(t,n){var r,o,i,a,s,l,c,u,g,d,I,C,h,f,A,m,p;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),g=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(I=t.readUInt16(),d=I/2,t.pos+=6,i=function(){var Z,v;for(v=[],l=Z=0;0<=d?Z<d:Z>d;l=0<=d?++Z:--Z)v.push(t.readUInt16());return v}(),t.pos+=2,h=function(){var Z,v;for(v=[],l=Z=0;0<=d?Z<d:Z>d;l=0<=d?++Z:--Z)v.push(t.readUInt16());return v}(),c=function(){var Z,v;for(v=[],l=Z=0;0<=d?Z<d:Z>d;l=0<=d?++Z:--Z)v.push(t.readUInt16());return v}(),u=function(){var Z,v;for(v=[],l=Z=0;0<=d?Z<d:Z>d;l=0<=d?++Z:--Z)v.push(t.readUInt16());return v}(),o=(this.length-t.pos+this.offset)/2,s=function(){var Z,v;for(v=[],l=Z=0;0<=o?Z<o:Z>o;l=0<=o?++Z:--Z)v.push(t.readUInt16());return v}(),l=A=0,p=i.length;A<p;l=++A)for(f=i[l],r=m=C=h[l];C<=f?m<=f:m>=f;r=C<=f?++m:--m)u[l]===0?a=r+c[l]:(a=s[u[l]/2+(r-C)-(d-l)]||0)!==0&&(a+=c[l]),this.codeMap[r]=65535&a}t.pos=g}return e.encode=function(t,n){var r,o,i,a,s,l,c,u,g,d,I,C,h,f,A,m,p,Z,v,k,B,y,W,G,R,X,Y,x,D,L,M,K,E,O,re,H,z,j,$,ee,le,Ie,Ae,Ge,We,Je;switch(x=new og,a=Object.keys(t).sort(function(ze,ke){return ze-ke}),n){case"macroman":for(h=0,f=function(){var ze=[];for(C=0;C<256;++C)ze.push(0);return ze}(),m={0:0},i={},D=0,E=a.length;D<E;D++)m[Ae=t[o=a[D]]]==null&&(m[Ae]=++h),i[o]={old:t[o],new:m[t[o]]},f[o]=m[t[o]];return x.writeUInt16(1),x.writeUInt16(0),x.writeUInt32(12),x.writeUInt16(0),x.writeUInt16(262),x.writeUInt16(0),x.write(f),{charMap:i,subtable:x.data,maxGlyphID:h+1};case"unicode":for(X=[],g=[],p=0,m={},r={},A=c=null,L=0,O=a.length;L<O;L++)m[v=t[o=a[L]]]==null&&(m[v]=++p),r[o]={old:v,new:m[v]},s=m[v]-o,A!=null&&s===c||(A&&g.push(A),X.push(o),c=s),A=o;for(A&&g.push(A),g.push(65535),X.push(65535),G=2*(W=X.length),y=2*Math.pow(Math.log(W)/Math.LN2,2),d=Math.log(y/2)/Math.LN2,B=2*W-y,l=[],k=[],I=[],C=M=0,re=X.length;M<re;C=++M){if(R=X[C],u=g[C],R===65535){l.push(0),k.push(0);break}if(R-(Y=r[R].new)>=32768)for(l.push(0),k.push(2*(I.length+W-C)),o=K=R;R<=u?K<=u:K>=u;o=R<=u?++K:--K)I.push(r[o].new);else l.push(Y-R),k.push(0)}for(x.writeUInt16(3),x.writeUInt16(1),x.writeUInt32(12),x.writeUInt16(4),x.writeUInt16(16+8*W+2*I.length),x.writeUInt16(0),x.writeUInt16(G),x.writeUInt16(y),x.writeUInt16(d),x.writeUInt16(B),le=0,H=g.length;le<H;le++)o=g[le],x.writeUInt16(o);for(x.writeUInt16(0),Ie=0,z=X.length;Ie<z;Ie++)o=X[Ie],x.writeUInt16(o);for(Ge=0,j=l.length;Ge<j;Ge++)s=l[Ge],x.writeUInt16(s);for(We=0,$=k.length;We<$;We++)Z=k[We],x.writeUInt16(Z);for(Je=0,ee=I.length;Je<ee;Je++)h=I[Je],x.writeUInt16(h);return{charMap:r,subtable:x.data,maxGlyphID:p+1}}},e}(),Ix=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hs(t,Ha),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,o,i;for(n.pos=this.offset,this.version=n.readUInt16(),i=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)r=new jw(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var o,i;return r==null&&(r="macroman"),o=jw.encode(n,r),(i=new og).writeUInt16(0),i.writeUInt16(1),o.table=i.data.concat(o.subtable),o},t}(),v7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hs(t,Ha),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),G7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hs(t,Ha),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(n.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),S7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hs(t,Ha),t.prototype.tag="post",t.prototype.parse=function(n){var r,o,i;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(o=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],i=[];n.pos<this.offset+this.length;)r=n.readByte(),i.push(this.names.push(n.readString(r)));return i;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var s,l,c;for(c=[],a=s=0,l=this.file.maxp.numGlyphs;0<=l?s<l:s>l;a=0<=l?++s:--s)c.push(n.readUInt32());return c}).call(this)}},t}(),B7=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},w7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hs(t,Ha),t.prototype.tag="name",t.prototype.parse=function(n){var r,o,i,a,s,l,c,u,g,d,I;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),o=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},a=g=0,d=o.length;g<d;a=++g)i=o[a],n.pos=i.offset,u=n.readString(i.length),s=new B7(u,i),c[I=i.nameID]==null&&(c[I]=[]),c[i.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),W7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hs(t,Ha),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),R7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hs(t,Ha),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,o,i,a,s,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,g;for(g=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)g.push(n.readInt16());return g}(),this.widths=(function(){var u,g,d,I;for(I=[],u=0,g=(d=this.metrics).length;u<g;u++)a=d[u],I.push(a.advance);return I}).call(this),o=this.widths[this.widths.length-1],c=[],r=s=0;0<=i?s<i:s>i;r=0<=i?++s:--s)c.push(this.widths.push(o));return c},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),dx=[].slice,k7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hs(t,Ha),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,o,i,a,s,l,c,u,g,d;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,o=a.indexOf(n),(i=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+o,s=(l=new og(r.read(i))).readShort(),u=l.readShort(),d=l.readShort(),c=l.readShort(),g=l.readShort(),this.cache[n]=s===-1?new X7(l,u,d,c,g):new V7(l,s,u,d,c,g),this.cache[n]))},t.prototype.encode=function(n,r,o){var i,a,s,l,c;for(s=[],a=[],l=0,c=r.length;l<c;l++)i=n[r[l]],a.push(s.length),i&&(s=s.concat(i.encode(o)));return a.push(s.length),{table:s,offsets:a}},t}(),V7=function(){function e(t,n,r,o,i,a){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=o,this.xMax=i,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),X7=function(){function e(t,n,r,o,i){var a,s;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;s=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&s;)a.pos+=1&s?4:2,128&s?a.pos+=8:64&s?a.pos+=4:8&s&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new og(dx.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),J7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hs(t,Ha),t.prototype.tag="loca",t.prototype.parse=function(n){var r,o;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,a;for(a=[],o=0,i=this.length;o<i;o+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],o=0,i=this.length;o<i;o+=4)a.push(n.readUInt32());return a}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var o=new Uint32Array(this.offsets.length),i=0,a=0,s=0;s<o.length;++s)if(o[s]=i,a<r.length&&r[a]==s){++a,o[s]=i;var l=this.offsets[s],c=this.offsets[s+1]-l;c>0&&(i+=c)}for(var u=new Array(4*o.length),g=0;g<o.length;++g)u[4*g+3]=255&o[g],u[4*g+2]=(65280&o[g])>>8,u[4*g+1]=(16711680&o[g])>>16,u[4*g]=(4278190080&o[g])>>24;return u},t}(),x7=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,o,i;for(n in o=this.font.cmap.tables[0].codeMap,t={},i=this.subset)r=i[n],t[n]=o[r];return t},e.prototype.glyphsFor=function(t){var n,r,o,i,a,s,l;for(o={},a=0,s=t.length;a<s;a++)o[i=t[a]]=this.font.glyf.glyphFor(i);for(i in n=[],o)(r=o[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in l=this.glyphsFor(n))r=l[i],o[i]=r;return o},e.prototype.encode=function(t,n){var r,o,i,a,s,l,c,u,g,d,I,C,h,f,A;for(o in r=Ix.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),I={0:0},A=r.charMap)I[(l=A[o]).old]=l.new;for(C in d=r.maxGlyphID,a)C in I||(I[C]=d++);return u=function(m){var p,Z;for(p in Z={},m)Z[m[p]]=p;return Z}(I),g=Object.keys(u).sort(function(m,p){return m-p}),h=function(){var m,p,Z;for(Z=[],m=0,p=g.length;m<p;m++)s=g[m],Z.push(u[s]);return Z}(),i=this.font.glyf.encode(a,h,I),c=this.font.loca.encode(i.offsets,h),f={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();Wt.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,o,i,a;if(Array.isArray(n))return"["+function(){var s,l,c;for(c=[],s=0,l=n.length;s<l;s++)r=n[s],c.push(t.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in i=["<<"],n)a=n[o],i.push("/"+o+" "+t.convert(a));return i.push(">>"),i.join(`
`)}return""+n},t}();const Y7=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:d7,AcroFormAppearance:bt,AcroFormButton:Er,AcroFormCheckBox:lC,AcroFormChoiceField:ec,AcroFormComboBox:nc,AcroFormEditBox:aC,AcroFormListBox:tc,AcroFormPasswordField:gC,AcroFormPushButton:sC,AcroFormRadioButton:rc,AcroFormTextField:Ol,GState:zC,ShadingPattern:Wl,TilingPattern:Eg,default:Wt,jsPDF:Wt},Symbol.toStringTag,{value:"Module"}));var N7={exports:{}};const H7=p3(Y7);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.3
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(e,t){(function(r,o){e.exports=o(function(){try{return H7}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Yl<"u"?Yl:typeof window<"u"?window:typeof self<"u"?self:Yl,function(n){return function(){var r={172:function(s,l){var c=this&&this.__extends||function(){var d=function(I,C){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var A in f)Object.prototype.hasOwnProperty.call(f,A)&&(h[A]=f[A])},d(I,C)};return function(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");d(I,C);function h(){this.constructor=I}I.prototype=C===null?Object.create(C):(h.prototype=C.prototype,new h)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var u=function(){function d(I,C,h){this.table=C,this.pageNumber=C.pageNumber,this.pageCount=this.pageNumber,this.settings=C.settings,this.cursor=h,this.doc=I.getDocument()}return d}();l.HookData=u;var g=function(d){c(I,d);function I(C,h,f,A,m,p){var Z=d.call(this,C,h,p)||this;return Z.cell=f,Z.row=A,Z.column=m,Z.section=A.section,Z}return I}(u);l.CellHookData=g},340:function(s,l,c){Object.defineProperty(l,"__esModule",{value:!0});var u=c(4),g=c(136),d=c(744),I=c(776),C=c(664),h=c(972);function f(A){A.API.autoTable=function(){for(var m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];var Z;m.length===1?Z=m[0]:(console.error("Use of deprecated autoTable initiation"),Z=m[2]||{},Z.columns=m[0],Z.body=m[1]);var v=(0,I.parseInput)(this,Z),k=(0,h.createTable)(this,v);return(0,C.drawTable)(this,k),this},A.API.lastAutoTable=!1,A.API.previousAutoTable=!1,A.API.autoTable.previous=!1,A.API.autoTableText=function(m,p,Z,v){(0,g.default)(m,p,Z,v,this)},A.API.autoTableSetDefaults=function(m){return d.DocHandler.setDefaults(m,this),this},A.autoTableSetDefaults=function(m,p){d.DocHandler.setDefaults(m,p)},A.API.autoTableHtmlToJson=function(m,p){var Z;if(p===void 0&&(p=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var v=new d.DocHandler(this),k=(0,u.parseHtml)(v,m,window,p,!1),B=k.head,y=k.body,W=((Z=B[0])===null||Z===void 0?void 0:Z.map(function(G){return G.content}))||[];return{columns:W,rows:y,data:y}},A.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var m=this.lastAutoTable;return m&&m.finalY?m.finalY:0},A.API.autoTableAddPageContent=function(m){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),A.API.autoTable.globalDefaults||(A.API.autoTable.globalDefaults={}),A.API.autoTable.globalDefaults.addPageContent=m,this},A.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=f},136:function(s,l){Object.defineProperty(l,"__esModule",{value:!0});function c(u,g,d,I,C){I=I||{};var h=1.15,f=C.internal.scaleFactor,A=C.internal.getFontSize()/f,m=C.getLineHeightFactor?C.getLineHeightFactor():h,p=A*m,Z=/\r\n|\r|\n/g,v="",k=1;if((I.valign==="middle"||I.valign==="bottom"||I.halign==="center"||I.halign==="right")&&(v=typeof u=="string"?u.split(Z):u,k=v.length||1),d+=A*(2-h),I.valign==="middle"?d-=k/2*p:I.valign==="bottom"&&(d-=k*p),I.halign==="center"||I.halign==="right"){var B=A;if(I.halign==="center"&&(B*=.5),v&&k>=1){for(var y=0;y<v.length;y++)C.text(v[y],g-C.getStringUnitWidth(v[y])*B,d),d+=p;return C}g-=C.getStringUnitWidth(u)*B}return I.halign==="justify"?C.text(u,g,d,{maxWidth:I.maxWidth||100,align:"justify"}):C.text(u,g,d),C}l.default=c},420:function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(C,h,f){f.applyStyles(h,!0);var A=Array.isArray(C)?C:[C],m=A.map(function(p){return f.getTextWidth(p)}).reduce(function(p,Z){return Math.max(p,Z)},0);return m}l.getStringWidth=c;function u(C,h,f,A){var m=h.settings.tableLineWidth,p=h.settings.tableLineColor;C.applyStyles({lineWidth:m,lineColor:p});var Z=g(m,!1);Z&&C.rect(f.x,f.y,h.getWidth(C.pageSize().width),A.y-f.y,Z)}l.addTableBorder=u;function g(C,h){var f=C>0,A=h||h===0;return f&&A?"DF":f?"S":A?"F":null}l.getFillStyle=g;function d(C,h){var f,A,m,p;if(C=C||h,Array.isArray(C)){if(C.length>=4)return{top:C[0],right:C[1],bottom:C[2],left:C[3]};if(C.length===3)return{top:C[0],right:C[1],bottom:C[2],left:C[1]};if(C.length===2)return{top:C[0],right:C[1],bottom:C[0],left:C[1]};C.length===1?C=C[0]:C=h}return typeof C=="object"?(typeof C.vertical=="number"&&(C.top=C.vertical,C.bottom=C.vertical),typeof C.horizontal=="number"&&(C.right=C.horizontal,C.left=C.horizontal),{left:(f=C.left)!==null&&f!==void 0?f:h,top:(A=C.top)!==null&&A!==void 0?A:h,right:(m=C.right)!==null&&m!==void 0?m:h,bottom:(p=C.bottom)!==null&&p!==void 0?p:h}):(typeof C!="number"&&(C=h),{top:C,right:C,bottom:C,left:C})}l.parseSpacing=d;function I(C,h){var f=d(h.settings.margin,0);return C.pageSize().width-(f.left+f.right)}l.getPageAvailableWidth=I},796:function(s,l){var c=this&&this.__extends||function(){var I=function(C,h){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,A){f.__proto__=A}||function(f,A){for(var m in A)Object.prototype.hasOwnProperty.call(A,m)&&(f[m]=A[m])},I(C,h)};return function(C,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");I(C,h);function f(){this.constructor=C}C.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var u=function(I){c(C,I);function C(h){var f=I.call(this)||this;return f._element=h,f}return C}(Array);l.HtmlRowInput=u;function g(I){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/I,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=g;function d(I){var C={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return C[I]}l.getTheme=d},903:function(s,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var u=c(420);function g(f,A,m,p,Z){var v={},k=1.3333333333333333,B=I(A,function(E){return Z.getComputedStyle(E).backgroundColor});B!=null&&(v.fillColor=B);var y=I(A,function(E){return Z.getComputedStyle(E).color});y!=null&&(v.textColor=y);var W=h(p,m);W&&(v.cellPadding=W);var G="borderTopColor",R=k*m,X=p.borderTopWidth;if(p.borderBottomWidth===X&&p.borderRightWidth===X&&p.borderLeftWidth===X){var Y=(parseFloat(X)||0)/R;Y&&(v.lineWidth=Y)}else v.lineWidth={top:(parseFloat(p.borderTopWidth)||0)/R,right:(parseFloat(p.borderRightWidth)||0)/R,bottom:(parseFloat(p.borderBottomWidth)||0)/R,left:(parseFloat(p.borderLeftWidth)||0)/R},v.lineWidth.top||(v.lineWidth.right?G="borderRightColor":v.lineWidth.bottom?G="borderBottomColor":v.lineWidth.left&&(G="borderLeftColor"));var x=I(A,function(E){return Z.getComputedStyle(E)[G]});x!=null&&(v.lineColor=x);var D=["left","right","center","justify"];D.indexOf(p.textAlign)!==-1&&(v.halign=p.textAlign),D=["middle","bottom","top"],D.indexOf(p.verticalAlign)!==-1&&(v.valign=p.verticalAlign);var L=parseInt(p.fontSize||"");isNaN(L)||(v.fontSize=L/k);var M=d(p);M&&(v.fontStyle=M);var K=(p.fontFamily||"").toLowerCase();return f.indexOf(K)!==-1&&(v.font=K),v}l.parseCss=g;function d(f){var A="";return(f.fontWeight==="bold"||f.fontWeight==="bolder"||parseInt(f.fontWeight)>=700)&&(A="bold"),(f.fontStyle==="italic"||f.fontStyle==="oblique")&&(A+="italic"),A}function I(f,A){var m=C(f,A);if(!m)return null;var p=m.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!p||!Array.isArray(p))return null;var Z=[parseInt(p[1]),parseInt(p[2]),parseInt(p[3])],v=parseInt(p[4]);return v===0||isNaN(Z[0])||isNaN(Z[1])||isNaN(Z[2])?null:Z}function C(f,A){var m=A(f);return m==="rgba(0, 0, 0, 0)"||m==="transparent"||m==="initial"||m==="inherit"?f.parentElement==null?null:C(f.parentElement,A):m}function h(f,A){var m=[f.paddingTop,f.paddingRight,f.paddingBottom,f.paddingLeft],p=96/(72/A),Z=(parseInt(f.lineHeight)-parseInt(f.fontSize))/A/2,v=m.map(function(B){return parseInt(B||"0")/p}),k=(0,u.parseSpacing)(v,0);return Z>k.top&&(k.top=Z),Z>k.bottom&&(k.bottom=Z),k}},744:function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},u=function(){function g(d){this.jsPDFDocument=d,this.userStyles={textColor:d.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:d.internal.getFontSize(),fontStyle:d.internal.getFont().fontStyle,font:d.internal.getFont().fontName,lineWidth:d.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:d.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return g.setDefaults=function(d,I){I===void 0&&(I=null),I?I.__autoTableDocumentDefaults=d:c=d},g.unifyColor=function(d){return Array.isArray(d)?d:typeof d=="number"?[d,d,d]:typeof d=="string"?[d]:null},g.prototype.applyStyles=function(d,I){var C,h,f;I===void 0&&(I=!1),d.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(d.fontStyle);var A=this.jsPDFDocument.internal.getFont(),m=A.fontStyle,p=A.fontName;if(d.font&&(p=d.font),d.fontStyle){m=d.fontStyle;var Z=this.getFontList()[p];Z&&Z.indexOf(m)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(Z[0]),m=Z[0])}if(this.jsPDFDocument.setFont(p,m),d.fontSize&&this.jsPDFDocument.setFontSize(d.fontSize),!I){var v=g.unifyColor(d.fillColor);v&&(C=this.jsPDFDocument).setFillColor.apply(C,v),v=g.unifyColor(d.textColor),v&&(h=this.jsPDFDocument).setTextColor.apply(h,v),v=g.unifyColor(d.lineColor),v&&(f=this.jsPDFDocument).setDrawColor.apply(f,v),typeof d.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(d.lineWidth)}},g.prototype.splitTextToSize=function(d,I,C){return this.jsPDFDocument.splitTextToSize(d,I,C)},g.prototype.rect=function(d,I,C,h,f){return this.jsPDFDocument.rect(d,I,C,h,f)},g.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},g.prototype.getTextWidth=function(d){return this.jsPDFDocument.getTextWidth(d)},g.prototype.getDocument=function(){return this.jsPDFDocument},g.prototype.setPage=function(d){this.jsPDFDocument.setPage(d)},g.prototype.addPage=function(){return this.jsPDFDocument.addPage()},g.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},g.prototype.getGlobalOptions=function(){return c||{}},g.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},g.prototype.pageSize=function(){var d=this.jsPDFDocument.internal.pageSize;return d.width==null&&(d={width:d.getWidth(),height:d.getHeight()}),d},g.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},g.prototype.getLineHeightFactor=function(){var d=this.jsPDFDocument;return d.getLineHeightFactor?d.getLineHeightFactor():1.15},g.prototype.getLineHeight=function(d){return d/this.scaleFactor()*this.getLineHeightFactor()},g.prototype.pageNumber=function(){var d=this.jsPDFDocument.internal.getCurrentPageInfo();return d?d.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},g}();l.DocHandler=u},4:function(s,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var u=c(903),g=c(796);function d(h,f,A,m,p){var Z,v;m===void 0&&(m=!1),p===void 0&&(p=!1);var k;typeof f=="string"?k=A.document.querySelector(f):k=f;var B=Object.keys(h.getFontList()),y=h.scaleFactor(),W=[],G=[],R=[];if(!k)return console.error("Html table could not be found with input: ",f),{head:W,body:G,foot:R};for(var X=0;X<k.rows.length;X++){var Y=k.rows[X],x=(v=(Z=Y==null?void 0:Y.parentElement)===null||Z===void 0?void 0:Z.tagName)===null||v===void 0?void 0:v.toLowerCase(),D=I(B,y,A,Y,m,p);D&&(x==="thead"?W.push(D):x==="tfoot"?R.push(D):G.push(D))}return{head:W,body:G,foot:R}}l.parseHtml=d;function I(h,f,A,m,p,Z){for(var v=new g.HtmlRowInput(m),k=0;k<m.cells.length;k++){var B=m.cells[k],y=A.getComputedStyle(B);if(p||y.display!=="none"){var W=void 0;Z&&(W=(0,u.parseCss)(h,B,f,y,A)),v.push({rowSpan:B.rowSpan,colSpan:B.colSpan,styles:W,_element:B,content:C(B)})}}var G=A.getComputedStyle(m);if(v.length>0&&(p||G.display!=="none"))return v}function C(h){var f=h.cloneNode(!0);return f.innerHTML=f.innerHTML.replace(/\n/g,"").replace(/ +/g," "),f.innerHTML=f.innerHTML.split(/<br.*?>/).map(function(A){return A.trim()}).join(`
`),f.innerText||f.textContent||""}},776:function(s,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var u=c(4),g=c(356),d=c(420),I=c(744),C=c(792);function h(k,B){var y=new I.DocHandler(k),W=y.getDocumentOptions(),G=y.getGlobalOptions();(0,C.default)(y,G,W,B);var R=(0,g.assign)({},G,W,B),X;typeof window<"u"&&(X=window);var Y=f(G,W,B),x=A(G,W,B),D=m(y,R),L=Z(y,R,X);return{id:B.tableId,content:L,hooks:x,styles:Y,settings:D}}l.parseInput=h;function f(k,B,y){for(var W={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},G=function(x){if(x==="columnStyles"){var D=k[x],L=B[x],M=y[x];W.columnStyles=(0,g.assign)({},D,L,M)}else{var K=[k,B,y],E=K.map(function(O){return O[x]||{}});W[x]=(0,g.assign)({},E[0],E[1],E[2])}},R=0,X=Object.keys(W);R<X.length;R++){var Y=X[R];G(Y)}return W}function A(k,B,y){for(var W=[k,B,y],G={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},R=0,X=W;R<X.length;R++){var Y=X[R];Y.didParseCell&&G.didParseCell.push(Y.didParseCell),Y.willDrawCell&&G.willDrawCell.push(Y.willDrawCell),Y.didDrawCell&&G.didDrawCell.push(Y.didDrawCell),Y.willDrawPage&&G.willDrawPage.push(Y.willDrawPage),Y.didDrawPage&&G.didDrawPage.push(Y.didDrawPage)}return G}function m(k,B){var y,W,G,R,X,Y,x,D,L,M,K,E,O=(0,d.parseSpacing)(B.margin,40/k.scaleFactor()),re=(y=p(k,B.startY))!==null&&y!==void 0?y:O.top,H;B.showFoot===!0?H="everyPage":B.showFoot===!1?H="never":H=(W=B.showFoot)!==null&&W!==void 0?W:"everyPage";var z;B.showHead===!0?z="everyPage":B.showHead===!1?z="never":z=(G=B.showHead)!==null&&G!==void 0?G:"everyPage";var j=(R=B.useCss)!==null&&R!==void 0?R:!1,$=B.theme||(j?"plain":"striped"),ee=!!B.horizontalPageBreak,le=(X=B.horizontalPageBreakRepeat)!==null&&X!==void 0?X:null;return{includeHiddenHtml:(Y=B.includeHiddenHtml)!==null&&Y!==void 0?Y:!1,useCss:j,theme:$,startY:re,margin:O,pageBreak:(x=B.pageBreak)!==null&&x!==void 0?x:"auto",rowPageBreak:(D=B.rowPageBreak)!==null&&D!==void 0?D:"auto",tableWidth:(L=B.tableWidth)!==null&&L!==void 0?L:"auto",showHead:z,showFoot:H,tableLineWidth:(M=B.tableLineWidth)!==null&&M!==void 0?M:0,tableLineColor:(K=B.tableLineColor)!==null&&K!==void 0?K:200,horizontalPageBreak:ee,horizontalPageBreakRepeat:le,horizontalPageBreakBehaviour:(E=B.horizontalPageBreakBehaviour)!==null&&E!==void 0?E:"afterAllRows"}}function p(k,B){var y=k.getLastAutoTable(),W=k.scaleFactor(),G=k.pageNumber(),R=!1;if(y&&y.startPageNumber){var X=y.startPageNumber+y.pageNumber-1;R=X===G}return typeof B=="number"?B:(B==null||B===!1)&&R&&(y==null?void 0:y.finalY)!=null?y.finalY+20/W:null}function Z(k,B,y){var W=B.head||[],G=B.body||[],R=B.foot||[];if(B.html){var X=B.includeHiddenHtml;if(y){var Y=(0,u.parseHtml)(k,B.html,y,X,B.useCss)||{};W=Y.head||W,G=Y.body||W,R=Y.foot||W}else console.error("Cannot parse html in non browser environment")}var x=B.columns||v(W,G,R);return{columns:x,head:W,body:G,foot:R}}function v(k,B,y){var W=k[0]||B[0]||y[0]||[],G=[];return Object.keys(W).filter(function(R){return R!=="_element"}).forEach(function(R){var X=1,Y;Array.isArray(W)?Y=W[parseInt(R)]:Y=W[R],typeof Y=="object"&&!Array.isArray(Y)&&(X=(Y==null?void 0:Y.colSpan)||1);for(var x=0;x<X;x++){var D=void 0;Array.isArray(W)?D=G.length:D=R+(x>0?"_".concat(x):"");var L={dataKey:D};G.push(L)}}),G}},792:function(s,l){Object.defineProperty(l,"__esModule",{value:!0});function c(g,d,I,C){for(var h=function(p){p&&typeof p!="object"&&console.error("The options parameter should be of type object, is: "+typeof p),typeof p.extendWidth<"u"&&(p.tableWidth=p.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof p.margins<"u"&&(typeof p.margin>"u"&&(p.margin=p.margins),console.error("Use of deprecated option: margins, use margin instead.")),p.startY&&typeof p.startY!="number"&&(console.error("Invalid value for startY option",p.startY),delete p.startY),!p.didDrawPage&&(p.afterPageContent||p.beforePageContent||p.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),p.didDrawPage=function(R){g.applyStyles(g.userStyles),p.beforePageContent&&p.beforePageContent(R),g.applyStyles(g.userStyles),p.afterPageContent&&p.afterPageContent(R),g.applyStyles(g.userStyles),p.afterPageAdd&&R.pageNumber>1&&R.afterPageAdd(R),g.applyStyles(g.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(R){p[R]&&console.error('The "'.concat(R,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(R){var X=R[0],Y=R[1];p[Y]&&(console.error("Use of deprecated option ".concat(Y,". Use ").concat(X," instead")),p[X]=p[Y])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(R){var X=typeof R=="string"?R:R[0],Y=typeof R=="string"?R:R[1];typeof p[X]<"u"&&(typeof p.styles[Y]>"u"&&(p.styles[Y]=p[X]),console.error("Use of deprecated option: "+X+", use the style "+Y+" instead."))});for(var Z=0,v=["styles","bodyStyles","headStyles","footStyles"];Z<v.length;Z++){var k=v[Z];u(p[k]||{})}for(var B=p.columnStyles||{},y=0,W=Object.keys(B);y<W.length;y++){var G=W[y];u(B[G]||{})}},f=0,A=[d,I,C];f<A.length;f++){var m=A[f];h(m)}}l.default=c;function u(g){g.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),g.minCellHeight||(g.minCellHeight=g.rowHeight)):g.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),g.cellWidth||(g.cellWidth=g.columnWidth))}},260:function(s,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var u=c(796),g=c(172),d=c(420),I=function(){function A(m,p){this.pageNumber=1,this.pageCount=1,this.id=m.id,this.settings=m.settings,this.styles=m.styles,this.hooks=m.hooks,this.columns=p.columns,this.head=p.head,this.body=p.body,this.foot=p.foot}return A.prototype.getHeadHeight=function(m){return this.head.reduce(function(p,Z){return p+Z.getMaxCellHeight(m)},0)},A.prototype.getFootHeight=function(m){return this.foot.reduce(function(p,Z){return p+Z.getMaxCellHeight(m)},0)},A.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},A.prototype.callCellHooks=function(m,p,Z,v,k,B){for(var y=0,W=p;y<W.length;y++){var G=W[y],R=new g.CellHookData(m,this,Z,v,k,B),X=G(R)===!1;if(Z.text=Array.isArray(Z.text)?Z.text:[Z.text],X)return!1}return!0},A.prototype.callEndPageHooks=function(m,p){m.applyStyles(m.userStyles);for(var Z=0,v=this.hooks.didDrawPage;Z<v.length;Z++){var k=v[Z];k(new g.HookData(m,this,p))}},A.prototype.callWillDrawPageHooks=function(m,p){for(var Z=0,v=this.hooks.willDrawPage;Z<v.length;Z++){var k=v[Z];k(new g.HookData(m,this,p))}},A.prototype.getWidth=function(m){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var p=this.columns.reduce(function(v,k){return v+k.wrappedWidth},0);return p}else{var Z=this.settings.margin;return m-Z.left-Z.right}},A}();l.Table=I;var C=function(){function A(m,p,Z,v,k){k===void 0&&(k=!1),this.height=0,this.raw=m,m instanceof u.HtmlRowInput&&(this.raw=m._element,this.element=m._element),this.index=p,this.section=Z,this.cells=v,this.spansMultiplePages=k}return A.prototype.getMaxCellHeight=function(m){var p=this;return m.reduce(function(Z,v){var k;return Math.max(Z,((k=p.cells[v.index])===null||k===void 0?void 0:k.height)||0)},0)},A.prototype.hasRowSpan=function(m){var p=this;return m.filter(function(Z){var v=p.cells[Z.index];return v?v.rowSpan>1:!1}).length>0},A.prototype.canEntireRowFit=function(m,p){return this.getMaxCellHeight(p)<=m},A.prototype.getMinimumRowHeight=function(m,p){var Z=this;return m.reduce(function(v,k){var B=Z.cells[k.index];if(!B)return 0;var y=p.getLineHeight(B.styles.fontSize),W=B.padding("vertical"),G=W+y;return G>v?G:v},0)},A}();l.Row=C;var h=function(){function A(m,p,Z){var v,k;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=p,this.section=Z,this.raw=m;var B=m;m!=null&&typeof m=="object"&&!Array.isArray(m)?(this.rowSpan=m.rowSpan||1,this.colSpan=m.colSpan||1,B=(k=(v=m.content)!==null&&v!==void 0?v:m.title)!==null&&k!==void 0?k:m,m._element&&(this.raw=m._element)):(this.rowSpan=1,this.colSpan=1);var y=B!=null?""+B:"",W=/\r\n|\r|\n/g;this.text=y.split(W)}return A.prototype.getTextPos=function(){var m;if(this.styles.valign==="top")m=this.y+this.padding("top");else if(this.styles.valign==="bottom")m=this.y+this.height-this.padding("bottom");else{var p=this.height-this.padding("vertical");m=this.y+p/2+this.padding("top")}var Z;if(this.styles.halign==="right")Z=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var v=this.width-this.padding("horizontal");Z=this.x+v/2+this.padding("left")}else Z=this.x+this.padding("left");return{x:Z,y:m}},A.prototype.getContentHeight=function(m,p){p===void 0&&(p=1.15);var Z=Array.isArray(this.text)?this.text.length:1,v=this.styles.fontSize/m*p,k=Z*v+this.padding("vertical");return Math.max(k,this.styles.minCellHeight)},A.prototype.padding=function(m){var p=(0,d.parseSpacing)(this.styles.cellPadding,0);return m==="vertical"?p.top+p.bottom:m==="horizontal"?p.left+p.right:p[m]},A}();l.Cell=h;var f=function(){function A(m,p,Z){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=m,this.raw=p,this.index=Z}return A.prototype.getMaxCustomCellWidth=function(m){for(var p=0,Z=0,v=m.allRows();Z<v.length;Z++){var k=v[Z],B=k.cells[this.index];B&&typeof B.styles.cellWidth=="number"&&(p=Math.max(p,B.styles.cellWidth))}return p},A}();l.Column=f},356:function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(u,g,d,I,C){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(u),f=1;f<arguments.length;f++){var A=arguments[f];if(A!=null)for(var m in A)Object.prototype.hasOwnProperty.call(A,m)&&(h[m]=A[m])}return h}l.assign=c},972:function(s,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var u=c(744),g=c(260),d=c(324),I=c(796),C=c(356);function h(k,B){var y=new u.DocHandler(k),W=f(B,y.scaleFactor()),G=new g.Table(B,W);return(0,d.calculateWidths)(y,G),y.applyStyles(y.userStyles),G}l.createTable=h;function f(k,B){var y=k.content,W=Z(y.columns);if(y.head.length===0){var G=m(W,"head");G&&y.head.push(G)}if(y.foot.length===0){var G=m(W,"foot");G&&y.foot.push(G)}var R=k.settings.theme,X=k.styles;return{columns:W,head:A("head",y.head,W,X,R,B),body:A("body",y.body,W,X,R,B),foot:A("foot",y.foot,W,X,R,B)}}function A(k,B,y,W,G,R){var X={},Y=B.map(function(x,D){for(var L=0,M={},K=0,E=0,O=0,re=y;O<re.length;O++){var H=re[O];if(X[H.index]==null||X[H.index].left===0)if(E===0){var z=void 0;Array.isArray(x)?z=x[H.index-K-L]:z=x[H.dataKey];var j={};typeof z=="object"&&!Array.isArray(z)&&(j=(z==null?void 0:z.styles)||{});var $=v(k,H,D,G,W,R,j),ee=new g.Cell(z,$,k);M[H.dataKey]=ee,M[H.index]=ee,E=ee.colSpan-1,X[H.index]={left:ee.rowSpan-1,times:E}}else E--,K++;else X[H.index].left--,E=X[H.index].times,L++}return new g.Row(x,D,k,M)});return Y}function m(k,B){var y={};return k.forEach(function(W){if(W.raw!=null){var G=p(B,W.raw);G!=null&&(y[W.dataKey]=G)}}),Object.keys(y).length>0?y:null}function p(k,B){if(k==="head"){if(typeof B=="object")return B.header||B.title||null;if(typeof B=="string"||typeof B=="number")return B}else if(k==="foot"&&typeof B=="object")return B.footer;return null}function Z(k){return k.map(function(B,y){var W,G,R;return typeof B=="object"?R=(G=(W=B.dataKey)!==null&&W!==void 0?W:B.key)!==null&&G!==void 0?G:y:R=y,new g.Column(R,B,y)})}function v(k,B,y,W,G,R,X){var Y=(0,I.getTheme)(W),x;k==="head"?x=G.headStyles:k==="body"?x=G.bodyStyles:k==="foot"&&(x=G.footStyles);var D=(0,C.assign)({},Y.table,Y[k],G.styles,x),L=G.columnStyles[B.dataKey]||G.columnStyles[B.index]||{},M=k==="body"?L:{},K=k==="body"&&y%2===0?(0,C.assign)({},Y.alternateRow,G.alternateRowStyles):{},E=(0,I.defaultStyles)(R),O=(0,C.assign)({},E,D,K,M);return(0,C.assign)(O,X)}},664:function(s,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var u=c(420),g=c(260),d=c(744),I=c(356),C=c(136),h=c(224);function f(L,M){var K=M.settings,E=K.startY,O=K.margin,re={x:O.left,y:E},H=M.getHeadHeight(M.columns)+M.getFootHeight(M.columns),z=E+O.bottom+H;if(K.pageBreak==="avoid"){var j=M.body,$=j.reduce(function(Ie,Ae){return Ie+Ae.height},0);z+=$}var ee=new d.DocHandler(L);(K.pageBreak==="always"||K.startY!=null&&z>ee.pageSize().height)&&(D(ee),re.y=O.top),M.callWillDrawPageHooks(ee,re);var le=(0,I.assign)({},re);M.startPageNumber=ee.pageNumber(),K.horizontalPageBreak?A(ee,M,le,re):(ee.applyStyles(ee.userStyles),(K.showHead==="firstPage"||K.showHead==="everyPage")&&M.head.forEach(function(Ie){return G(ee,M,Ie,re,M.columns)}),ee.applyStyles(ee.userStyles),M.body.forEach(function(Ie,Ae){var Ge=Ae===M.body.length-1;W(ee,M,Ie,Ge,le,re,M.columns)}),ee.applyStyles(ee.userStyles),(K.showFoot==="lastPage"||K.showFoot==="everyPage")&&M.foot.forEach(function(Ie){return G(ee,M,Ie,re,M.columns)})),(0,u.addTableBorder)(ee,M,le,re),M.callEndPageHooks(ee,re),M.finalY=re.y,L.lastAutoTable=M,L.previousAutoTable=M,L.autoTable&&(L.autoTable.previous=M),ee.applyStyles(ee.userStyles)}l.drawTable=f;function A(L,M,K,E){var O=(0,h.calculateAllColumnsCanFitInPage)(L,M),re=M.settings;if(re.horizontalPageBreakBehaviour==="afterAllRows")O.forEach(function($,ee){L.applyStyles(L.userStyles),ee>0?x(L,M,K,E,$.columns,!0):m(L,M,E,$.columns),p(L,M,K,E,$.columns),v(L,M,E,$.columns)});else for(var H=-1,z=O[0],j=function(){var $=H;if(z){L.applyStyles(L.userStyles);var ee=z.columns;H>=0?x(L,M,K,E,ee,!0):m(L,M,E,ee),$=Z(L,M,H+1,E,ee),v(L,M,E,ee)}var le=$-H;O.slice(1).forEach(function(Ie){L.applyStyles(L.userStyles),x(L,M,K,E,Ie.columns,!0),Z(L,M,H+1,E,Ie.columns,le),v(L,M,E,Ie.columns)}),H=$};H<M.body.length-1;)j()}function m(L,M,K,E){var O=M.settings;L.applyStyles(L.userStyles),(O.showHead==="firstPage"||O.showHead==="everyPage")&&M.head.forEach(function(re){return G(L,M,re,K,E)})}function p(L,M,K,E,O){L.applyStyles(L.userStyles),M.body.forEach(function(re,H){var z=H===M.body.length-1;W(L,M,re,z,K,E,O)})}function Z(L,M,K,E,O,re){L.applyStyles(L.userStyles),re=re??M.body.length;var H=Math.min(K+re,M.body.length),z=-1;return M.body.slice(K,H).forEach(function(j,$){var ee=K+$===M.body.length-1,le=Y(L,M,ee,E);j.canEntireRowFit(le,O)&&(G(L,M,j,E,O),z=K+$)}),z}function v(L,M,K,E){var O=M.settings;L.applyStyles(L.userStyles),(O.showFoot==="lastPage"||O.showFoot==="everyPage")&&M.foot.forEach(function(re){return G(L,M,re,K,E)})}function k(L,M,K){var E=K.getLineHeight(L.styles.fontSize),O=L.padding("vertical"),re=Math.floor((M-O)/E);return Math.max(0,re)}function B(L,M,K,E){var O={};L.spansMultiplePages=!0,L.height=0;for(var re=0,H=0,z=K.columns;H<z.length;H++){var j=z[H],$=L.cells[j.index];if($){Array.isArray($.text)||($.text=[$.text]);var ee=new g.Cell($.raw,$.styles,$.section);ee=(0,I.assign)(ee,$),ee.text=[];var le=k($,M,E);$.text.length>le&&(ee.text=$.text.splice(le,$.text.length));var Ie=E.scaleFactor(),Ae=E.getLineHeightFactor();$.contentHeight=$.getContentHeight(Ie,Ae),$.contentHeight>=M&&($.contentHeight=M,ee.styles.minCellHeight-=M),$.contentHeight>L.height&&(L.height=$.contentHeight),ee.contentHeight=ee.getContentHeight(Ie,Ae),ee.contentHeight>re&&(re=ee.contentHeight),O[j.index]=ee}}var Ge=new g.Row(L.raw,-1,L.section,O,!0);Ge.height=re;for(var We=0,Je=K.columns;We<Je.length;We++){var j=Je[We],ee=Ge.cells[j.index];ee&&(ee.height=Ge.height);var $=L.cells[j.index];$&&($.height=L.height)}return Ge}function y(L,M,K,E){var O=L.pageSize().height,re=E.settings.margin,H=re.top+re.bottom,z=O-H;M.section==="body"&&(z-=E.getHeadHeight(E.columns)+E.getFootHeight(E.columns));var j=M.getMinimumRowHeight(E.columns,L),$=j<K;if(j>z)return console.error("Will not be able to print row ".concat(M.index," correctly since it's minimum height is larger than page height")),!0;if(!$)return!1;var ee=M.hasRowSpan(E.columns),le=M.getMaxCellHeight(E.columns)>z;return le?(ee&&console.error("The content of row ".concat(M.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ee||E.settings.rowPageBreak==="avoid")}function W(L,M,K,E,O,re,H){var z=Y(L,M,E,re);if(K.canEntireRowFit(z,H))G(L,M,K,re,H);else if(y(L,K,z,M)){var j=B(K,z,M,L);G(L,M,K,re,H),x(L,M,O,re,H),W(L,M,j,E,O,re,H)}else x(L,M,O,re,H),W(L,M,K,E,O,re,H)}function G(L,M,K,E,O){E.x=M.settings.margin.left;for(var re=0,H=O;re<H.length;re++){var z=H[re],j=K.cells[z.index];if(!j){E.x+=z.width;continue}L.applyStyles(j.styles),j.x=E.x,j.y=E.y;var $=M.callCellHooks(L,M.hooks.willDrawCell,j,K,z,E);if($===!1){E.x+=z.width;continue}R(L,j,E);var ee=j.getTextPos();(0,C.default)(j.text,ee.x,ee.y,{halign:j.styles.halign,valign:j.styles.valign,maxWidth:Math.ceil(j.width-j.padding("left")-j.padding("right"))},L.getDocument()),M.callCellHooks(L,M.hooks.didDrawCell,j,K,z,E),E.x+=z.width}E.y+=K.height}function R(L,M,K){var E=M.styles;if(L.getDocument().setFillColor(L.getDocument().getFillColor()),typeof E.lineWidth=="number"){var O=(0,u.getFillStyle)(E.lineWidth,E.fillColor);O&&L.rect(M.x,K.y,M.width,M.height,O)}else typeof E.lineWidth=="object"&&(E.fillColor&&L.rect(M.x,K.y,M.width,M.height,"F"),X(L,M,K,E.lineWidth))}function X(L,M,K,E){var O,re,H,z;E.top&&(O=K.x,re=K.y,H=K.x+M.width,z=K.y,E.right&&(H+=.5*E.right),E.left&&(O-=.5*E.left),j(E.top,O,re,H,z)),E.bottom&&(O=K.x,re=K.y+M.height,H=K.x+M.width,z=K.y+M.height,E.right&&(H+=.5*E.right),E.left&&(O-=.5*E.left),j(E.bottom,O,re,H,z)),E.left&&(O=K.x,re=K.y,H=K.x,z=K.y+M.height,E.top&&(re-=.5*E.top),E.bottom&&(z+=.5*E.bottom),j(E.left,O,re,H,z)),E.right&&(O=K.x+M.width,re=K.y,H=K.x+M.width,z=K.y+M.height,E.top&&(re-=.5*E.top),E.bottom&&(z+=.5*E.bottom),j(E.right,O,re,H,z));function j($,ee,le,Ie,Ae){L.getDocument().setLineWidth($),L.getDocument().line(ee,le,Ie,Ae,"S")}}function Y(L,M,K,E){var O=M.settings.margin.bottom,re=M.settings.showFoot;return(re==="everyPage"||re==="lastPage"&&K)&&(O+=M.getFootHeight(M.columns)),L.pageSize().height-E.y-O}function x(L,M,K,E,O,re){O===void 0&&(O=[]),re===void 0&&(re=!1),L.applyStyles(L.userStyles),M.settings.showFoot==="everyPage"&&!re&&M.foot.forEach(function(z){return G(L,M,z,E,O)}),M.callEndPageHooks(L,E);var H=M.settings.margin;(0,u.addTableBorder)(L,M,K,E),D(L),M.pageNumber++,M.pageCount++,E.x=H.left,E.y=H.top,K.y=H.top,M.callWillDrawPageHooks(L,E),M.settings.showHead==="everyPage"&&(M.head.forEach(function(z){return G(L,M,z,E,O)}),L.applyStyles(L.userStyles))}l.addPage=x;function D(L){var M=L.pageNumber();L.setPage(M+1);var K=L.pageNumber();return K===M?(L.addPage(),!0):!1}},224:function(s,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var u=c(420);function g(I,C,h){var f;h===void 0&&(h={});var A=(0,u.getPageAvailableWidth)(I,C),m=new Map,p=[],Z=[],v=[];C.settings.horizontalPageBreakRepeat,Array.isArray(C.settings.horizontalPageBreakRepeat)?v=C.settings.horizontalPageBreakRepeat:(typeof C.settings.horizontalPageBreakRepeat=="string"||typeof C.settings.horizontalPageBreakRepeat=="number")&&(v=[C.settings.horizontalPageBreakRepeat]),v.forEach(function(W){var G=C.columns.find(function(R){return R.dataKey===W||R.index===W});G&&!m.has(G.index)&&(m.set(G.index,!0),p.push(G.index),Z.push(C.columns[G.index]),A-=G.wrappedWidth)});for(var k=!0,B=(f=h==null?void 0:h.start)!==null&&f!==void 0?f:0;B<C.columns.length;){if(m.has(B)){B++;continue}var y=C.columns[B].wrappedWidth;if(k||A>=y)k=!1,p.push(B),Z.push(C.columns[B]),A-=y;else break;B++}return{colIndexes:p,columns:Z,lastIndex:B-1}}function d(I,C){for(var h=[],f=0;f<C.columns.length;f++){var A=g(I,C,{start:f});A.columns.length&&(h.push(A),f=A.lastIndex)}return h}l.calculateAllColumnsCanFitInPage=d},324:function(s,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var u=c(420);function g(p,Z){d(p,Z);var v=[],k=0;Z.columns.forEach(function(y){var W=y.getMaxCustomCellWidth(Z);W?y.width=W:(y.width=y.wrappedWidth,v.push(y)),k+=y.width});var B=Z.getWidth(p.pageSize().width)-k;B&&(B=I(v,B,function(y){return Math.max(y.minReadableWidth,y.minWidth)})),B&&(B=I(v,B,function(y){return y.minWidth})),B=Math.abs(B),!Z.settings.horizontalPageBreak&&B>.1/p.scaleFactor()&&(B=B<1?B:Math.round(B),console.warn("Of the table content, ".concat(B," units width could not fit page"))),h(Z),f(Z,p),C(Z)}l.calculateWidths=g;function d(p,Z){var v=p.scaleFactor(),k=Z.settings.horizontalPageBreak,B=(0,u.getPageAvailableWidth)(p,Z);Z.allRows().forEach(function(y){for(var W=0,G=Z.columns;W<G.length;W++){var R=G[W],X=y.cells[R.index];if(X){var Y=Z.hooks.didParseCell;Z.callCellHooks(p,Y,X,y,R,null);var x=X.padding("horizontal");X.contentWidth=(0,u.getStringWidth)(X.text,X.styles,p)+x;var D=(0,u.getStringWidth)(X.text.join(" ").split(/\s+/),X.styles,p);if(X.minReadableWidth=D+X.padding("horizontal"),typeof X.styles.cellWidth=="number")X.minWidth=X.styles.cellWidth,X.wrappedWidth=X.styles.cellWidth;else if(X.styles.cellWidth==="wrap"||k===!0)X.contentWidth>B?(X.minWidth=B,X.wrappedWidth=B):(X.minWidth=X.contentWidth,X.wrappedWidth=X.contentWidth);else{var L=10/v;X.minWidth=X.styles.minCellWidth||L,X.wrappedWidth=X.contentWidth,X.minWidth>X.wrappedWidth&&(X.wrappedWidth=X.minWidth)}}}}),Z.allRows().forEach(function(y){for(var W=0,G=Z.columns;W<G.length;W++){var R=G[W],X=y.cells[R.index];if(X&&X.colSpan===1)R.wrappedWidth=Math.max(R.wrappedWidth,X.wrappedWidth),R.minWidth=Math.max(R.minWidth,X.minWidth),R.minReadableWidth=Math.max(R.minReadableWidth,X.minReadableWidth);else{var Y=Z.styles.columnStyles[R.dataKey]||Z.styles.columnStyles[R.index]||{},x=Y.cellWidth||Y.minCellWidth;x&&typeof x=="number"&&(R.minWidth=x,R.wrappedWidth=x)}X&&(X.colSpan>1&&!R.minWidth&&(R.minWidth=X.minWidth),X.colSpan>1&&!R.wrappedWidth&&(R.wrappedWidth=X.minWidth))}})}function I(p,Z,v){for(var k=Z,B=p.reduce(function(L,M){return L+M.wrappedWidth},0),y=0;y<p.length;y++){var W=p[y],G=W.wrappedWidth/B,R=k*G,X=W.width+R,Y=v(W),x=X<Y?Y:X;Z-=x-W.width,W.width=x}if(Z=Math.round(Z*1e10)/1e10,Z){var D=p.filter(function(L){return Z<0?L.width>v(L):!0});D.length&&(Z=I(D,Z,v))}return Z}l.resizeColumns=I;function C(p){for(var Z={},v=1,k=p.allRows(),B=0;B<k.length;B++)for(var y=k[B],W=0,G=p.columns;W<G.length;W++){var R=G[W],X=Z[R.index];if(v>1)v--,delete y.cells[R.index];else if(X)X.cell.height+=y.height,v=X.cell.colSpan,delete y.cells[R.index],X.left--,X.left<=1&&delete Z[R.index];else{var Y=y.cells[R.index];if(!Y)continue;if(Y.height=y.height,Y.rowSpan>1){var x=k.length-B,D=Y.rowSpan>x?x:Y.rowSpan;Z[R.index]={cell:Y,left:D,row:y}}}}}function h(p){for(var Z=p.allRows(),v=0;v<Z.length;v++)for(var k=Z[v],B=null,y=0,W=0,G=0;G<p.columns.length;G++){var R=p.columns[G];if(W-=1,W>1&&p.columns[G+1])y+=R.width,delete k.cells[R.index];else if(B){var X=B;delete k.cells[R.index],B=null,X.width=R.width+y}else{var X=k.cells[R.index];if(!X)continue;if(W=X.colSpan,y=0,X.colSpan>1){B=X,y+=R.width;continue}X.width=R.width+y}}}function f(p,Z){for(var v={count:0,height:0},k=0,B=p.allRows();k<B.length;k++){for(var y=B[k],W=0,G=p.columns;W<G.length;W++){var R=G[W],X=y.cells[R.index];if(X){Z.applyStyles(X.styles,!0);var Y=X.width-X.padding("horizontal");if(X.styles.overflow==="linebreak")X.text=Z.splitTextToSize(X.text,Y+1/Z.scaleFactor(),{fontSize:X.styles.fontSize});else if(X.styles.overflow==="ellipsize")X.text=A(X.text,Y,X.styles,Z,"...");else if(X.styles.overflow==="hidden")X.text=A(X.text,Y,X.styles,Z,"");else if(typeof X.styles.overflow=="function"){var x=X.styles.overflow(X.text,Y);typeof x=="string"?X.text=[x]:X.text=x}X.contentHeight=X.getContentHeight(Z.scaleFactor(),Z.getLineHeightFactor());var D=X.contentHeight/X.rowSpan;X.rowSpan>1&&v.count*v.height<D*X.rowSpan?v={height:D,count:X.rowSpan}:v&&v.count>0&&v.height>D&&(D=v.height),D>y.height&&(y.height=D)}}v.count--}}function A(p,Z,v,k,B){return p.map(function(y){return m(y,Z,v,k,B)})}l.ellipsize=A;function m(p,Z,v,k,B){var y=1e4*k.scaleFactor();if(Z=Math.ceil(Z*y)/y,Z>=(0,u.getStringWidth)(p,v,k))return p;for(;Z<(0,u.getStringWidth)(p+B,v,k)&&!(p.length<=1);)p=p.substring(0,p.length-1);return p.trim()+B}},964:function(s){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}s.exports=n}},o={};function i(s){var l=o[s];if(l!==void 0)return l.exports;var c=o[s]={exports:{}};return r[s].call(c.exports,c,c.exports,i),c.exports}var a={};return function(){var s=a;Object.defineProperty(s,"__esModule",{value:!0}),s.Cell=s.Column=s.Row=s.Table=s.CellHookData=s.__drawTable=s.__createTable=s.applyPlugin=void 0;var l=i(340),c=i(776),u=i(664),g=i(972),d=i(260);Object.defineProperty(s,"Table",{enumerable:!0,get:function(){return d.Table}});var I=i(172);Object.defineProperty(s,"CellHookData",{enumerable:!0,get:function(){return I.CellHookData}});var C=i(260);Object.defineProperty(s,"Cell",{enumerable:!0,get:function(){return C.Cell}}),Object.defineProperty(s,"Column",{enumerable:!0,get:function(){return C.Column}}),Object.defineProperty(s,"Row",{enumerable:!0,get:function(){return C.Row}});function h(Z){(0,l.default)(Z)}s.applyPlugin=h;function f(Z,v){var k=(0,c.parseInput)(Z,v),B=(0,g.createTable)(Z,k);(0,u.drawTable)(Z,B)}function A(Z,v){var k=(0,c.parseInput)(Z,v);return(0,g.createTable)(Z,k)}s.__createTable=A;function m(Z,v){(0,u.drawTable)(Z,v)}s.__drawTable=m;try{var p=i(964);p.jsPDF&&(p=p.jsPDF),h(p)}catch{}s.default=f}(),a}()})})(N7);const F7=et(je)({padding:"24px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",marginRight:"24px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",minHeight:"100vh"}),Qw=et(rn)({backgroundColor:"#5C2FC2",color:"#fff",marginBottom:"20px",marginRight:"10px","&:hover":{backgroundColor:"#4925A3",transform:"translateY(-2px)"},transition:"all 0.3s ease"}),K7=et(xa)({marginBottom:"20px",padding:"20px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"}),L7=()=>{const{getCurrentUser:e}=gi(),t=e().email,[n,r]=F.useState([]),[o,i]=F.useState(!0);F.useEffect(()=>{(async()=>{try{const c=await hn.get("https://azure-reservation-app.azurewebsites.net/api/bookings");r(c.data)}catch(c){console.error("Error fetching orders:",c)}finally{i(!1)}})()},[t]);const a=()=>{const l=new Wt,c=["Theater Name","Seats","Total Amount","Booking Date","Booking Time","Customer Name","Customer Email"],u=[];n.forEach(g=>{const d=[g.theaterName,g.seats.join(", "),g.totalAmount,g.bookingDate,g.bookingTime,g.customerName,g.customerEmail];u.push(d)}),l.autoTable(c,u,{startY:20}),l.text("All Bookings Report",14,15),l.save("bookings_report.pdf")},s=()=>{const l=[],c=["Theater Name","Seats","Total Amount","Booking Date","Booking Time","Customer Name","Customer Email"];l.push(c.join(",")),n.forEach(C=>{const h=[C.theaterName,C.seats.join(", "),C.totalAmount,C.bookingDate,C.bookingTime,C.customerName,C.customerEmail];l.push(h.join(","))});const u=l.join(`
`),g=new Blob([u],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(g),I=document.createElement("a");I.href=d,I.setAttribute("download","bookings_report.csv"),document.body.appendChild(I),I.click(),document.body.removeChild(I)};return o?w.jsx(je,{sx:{display:"flex",justifyContent:"center",padding:"20px"},children:w.jsx(vG,{sx:{color:"#5C2FC2"}})}):w.jsxs(F7,{children:[w.jsx(Ee,{variant:"h4",gutterBottom:!0,sx:{fontSize:"2rem",color:"#e2e8f0",fontWeight:"600",mb:3},children:"All Bookings"}),w.jsxs(je,{sx:{mb:3},children:[w.jsx(Qw,{onClick:a,children:"Generate PDF Report"}),w.jsx(Qw,{onClick:s,children:"Download CSV Report"})]}),n.length===0?w.jsx(Ee,{sx:{fontSize:"1.25rem",color:"#e2e8f0"},children:"No orders found"}):w.jsx(SG,{children:n.map(l=>w.jsxs(K7,{elevation:0,children:[w.jsxs(at,{container:!0,spacing:2,children:[w.jsx(at,{item:!0,xs:12,sm:8,children:w.jsx(gT,{primary:`Theater: ${l.theaterName}`,secondary:`Seats: ${l.seats.join(", ")} | Total Amount: $${l.totalAmount}`,primaryTypographyProps:{sx:{fontSize:"1.5rem",fontWeight:"500",color:"#e2e8f0"}},secondaryTypographyProps:{sx:{fontSize:"1.25rem",color:"rgba(255, 255, 255, 0.7)"}}})}),w.jsxs(at,{item:!0,xs:12,sm:4,sx:{textAlign:"right"},children:[w.jsx(Ee,{sx:{fontSize:"1.25rem",fontWeight:"500",color:"#e2e8f0",mb:1},children:`Booking Date: ${l.bookingDate}`}),w.jsx(Ee,{sx:{fontSize:"1.25rem",fontWeight:"500",color:"#e2e8f0"},children:`Booking Time: ${l.bookingTime}`})]})]}),w.jsx(qm,{sx:{my:2,borderColor:"rgba(255, 255, 255, 0.1)"}}),w.jsxs(Ee,{sx:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.7)",mb:1},children:["Customer Name: ",l.customerName]}),w.jsxs(Ee,{sx:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.7)"},children:["Customer Email: ",l.customerEmail]})]},l._id))})]})};/*!
* sweetalert2 v11.14.1
* Released under the MIT License.
*/function ux(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function E7(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pw(e,t){return e.get(ux(e,t))}function M7(e,t,n){E7(e,t),t.set(e,n)}function D7(e,t,n){return e.set(ux(e,t),n),n}const z7=100,kt={},T7=()=>{kt.previousActiveElement instanceof HTMLElement?(kt.previousActiveElement.focus(),kt.previousActiveElement=null):document.body&&document.body.focus()},U7=e=>new Promise(t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;kt.restoreFocusTimeout=setTimeout(()=>{T7(),t()},z7),window.scrollTo(n,r)}),Cx="swal2-",j7=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],Ve=j7.reduce((e,t)=>(e[t]=Cx+t,e),{}),Q7=["success","warning","info","question","error"],mp=Q7.reduce((e,t)=>(e[t]=Cx+t,e),{}),Ax="SweetAlert2:",qG=e=>e.charAt(0).toUpperCase()+e.slice(1),Ii=e=>{console.warn(`${Ax} ${typeof e=="object"?e.join(" "):e}`)},Zc=e=>{console.error(`${Ax} ${e}`)},Ow=[],P7=e=>{Ow.includes(e)||(Ow.push(e),Ii(e))},hx=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;P7(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},l0=e=>typeof e=="function"?e():e,$G=e=>e&&typeof e.toPromise=="function",AA=e=>$G(e)?e.toPromise():Promise.resolve(e),e1=e=>e&&Promise.resolve(e)===e,di=()=>document.body.querySelector(`.${Ve.container}`),hA=e=>{const t=di();return t?t.querySelector(e):null},Hi=e=>hA(`.${e}`),wn=()=>Hi(Ve.popup),mA=()=>Hi(Ve.icon),O7=()=>Hi(Ve["icon-content"]),mx=()=>Hi(Ve.title),t1=()=>Hi(Ve["html-container"]),px=()=>Hi(Ve.image),n1=()=>Hi(Ve["progress-steps"]),g0=()=>Hi(Ve["validation-message"]),ds=()=>hA(`.${Ve.actions} .${Ve.confirm}`),Sd=()=>hA(`.${Ve.actions} .${Ve.cancel}`),vc=()=>hA(`.${Ve.actions} .${Ve.deny}`),_7=()=>Hi(Ve["input-label"]),Bd=()=>hA(`.${Ve.loader}`),pA=()=>Hi(Ve.actions),fx=()=>Hi(Ve.footer),c0=()=>Hi(Ve["timer-progress-bar"]),r1=()=>Hi(Ve.close),q7=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,o1=()=>{const e=wn();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((i,a)=>{const s=parseInt(i.getAttribute("tabindex")||"0"),l=parseInt(a.getAttribute("tabindex")||"0");return s>l?1:s<l?-1:0}),r=e.querySelectorAll(q7),o=Array.from(r).filter(i=>i.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(o))].filter(i=>si(i))},i1=()=>Ds(document.body,Ve.shown)&&!Ds(document.body,Ve["toast-shown"])&&!Ds(document.body,Ve["no-backdrop"]),I0=()=>{const e=wn();return e?Ds(e,Ve.toast):!1},$7=()=>{const e=wn();return e?e.hasAttribute("data-loading"):!1},Fi=(e,t)=>{if(e.textContent="",t){const r=new DOMParser().parseFromString(t,"text/html"),o=r.querySelector("head");o&&Array.from(o.childNodes).forEach(a=>{e.appendChild(a)});const i=r.querySelector("body");i&&Array.from(i.childNodes).forEach(a=>{a instanceof HTMLVideoElement||a instanceof HTMLAudioElement?e.appendChild(a.cloneNode(!0)):e.appendChild(a)})}},Ds=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},e6=(e,t)=>{Array.from(e.classList).forEach(n=>{!Object.values(Ve).includes(n)&&!Object.values(mp).includes(n)&&!Object.values(t.showClass||{}).includes(n)&&e.classList.remove(n)})},Vi=(e,t,n)=>{if(e6(e,t),!t.customClass)return;const r=t.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){Ii(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}Cn(e,r)}},d0=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${Ve.popup} > .${Ve[t]}`);case"checkbox":return e.querySelector(`.${Ve.popup} > .${Ve.checkbox} input`);case"radio":return e.querySelector(`.${Ve.popup} > .${Ve.radio} input:checked`)||e.querySelector(`.${Ve.popup} > .${Ve.radio} input:first-child`);case"range":return e.querySelector(`.${Ve.popup} > .${Ve.range} input`);default:return e.querySelector(`.${Ve.popup} > .${Ve.input}`)}},bx=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},yx=(e,t,n)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(r=>{Array.isArray(e)?e.forEach(o=>{n?o.classList.add(r):o.classList.remove(r)}):n?e.classList.add(r):e.classList.remove(r)}))},Cn=(e,t)=>{yx(e,t,!0)},us=(e,t)=>{yx(e,t,!1)},Ll=(e,t)=>{const n=Array.from(e.children);for(let r=0;r<n.length;r++){const o=n[r];if(o instanceof HTMLElement&&Ds(o,t))return o}},oc=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?e.style.setProperty(t,typeof n=="number"?`${n}px`:n):e.style.removeProperty(t)},_r=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";e&&(e.style.display=t)},wo=e=>{e&&(e.style.display="none")},a1=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";e&&new MutationObserver(()=>{fA(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},_w=(e,t,n,r)=>{const o=e.querySelector(t);o&&o.style.setProperty(n,r)},fA=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";t?_r(e,n):wo(e)},si=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),t6=()=>!si(ds())&&!si(vc())&&!si(Sd()),qw=e=>e.scrollHeight>e.clientHeight,Zx=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},s1=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=c0();n&&si(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"},10))},n6=()=>{const e=c0();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=parseInt(window.getComputedStyle(e).width),r=t/n*100;e.style.width=`${r}%`},vx=()=>typeof window>"u"||typeof document>"u",r6=`
 <div aria-labelledby="${Ve.title}" aria-describedby="${Ve["html-container"]}" class="${Ve.popup}" tabindex="-1">
   <button type="button" class="${Ve.close}"></button>
   <ul class="${Ve["progress-steps"]}"></ul>
   <div class="${Ve.icon}"></div>
   <img class="${Ve.image}" />
   <h2 class="${Ve.title}" id="${Ve.title}"></h2>
   <div class="${Ve["html-container"]}" id="${Ve["html-container"]}"></div>
   <input class="${Ve.input}" id="${Ve.input}" />
   <input type="file" class="${Ve.file}" />
   <div class="${Ve.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${Ve.select}" id="${Ve.select}"></select>
   <div class="${Ve.radio}"></div>
   <label class="${Ve.checkbox}">
     <input type="checkbox" id="${Ve.checkbox}" />
     <span class="${Ve.label}"></span>
   </label>
   <textarea class="${Ve.textarea}" id="${Ve.textarea}"></textarea>
   <div class="${Ve["validation-message"]}" id="${Ve["validation-message"]}"></div>
   <div class="${Ve.actions}">
     <div class="${Ve.loader}"></div>
     <button type="button" class="${Ve.confirm}"></button>
     <button type="button" class="${Ve.deny}"></button>
     <button type="button" class="${Ve.cancel}"></button>
   </div>
   <div class="${Ve.footer}"></div>
   <div class="${Ve["timer-progress-bar-container"]}">
     <div class="${Ve["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),o6=()=>{const e=di();return e?(e.remove(),us([document.documentElement,document.body],[Ve["no-backdrop"],Ve["toast-shown"],Ve["has-column"]]),!0):!1},Bg=()=>{kt.currentInstance.resetValidationMessage()},i6=()=>{const e=wn(),t=Ll(e,Ve.input),n=Ll(e,Ve.file),r=e.querySelector(`.${Ve.range} input`),o=e.querySelector(`.${Ve.range} output`),i=Ll(e,Ve.select),a=e.querySelector(`.${Ve.checkbox} input`),s=Ll(e,Ve.textarea);t.oninput=Bg,n.onchange=Bg,i.onchange=Bg,a.onchange=Bg,s.oninput=Bg,r.oninput=()=>{Bg(),o.value=r.value},r.onchange=()=>{Bg(),o.value=r.value}},a6=e=>typeof e=="string"?document.querySelector(e):e,s6=e=>{const t=wn();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},l6=e=>{window.getComputedStyle(e).direction==="rtl"&&Cn(di(),Ve.rtl)},g6=e=>{const t=o6();if(vx()){Zc("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=Ve.container,t&&Cn(n,Ve["no-transition"]),Fi(n,r6);const r=a6(e.target);r.appendChild(n),s6(e),l6(r),i6()},l1=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?c6(e,t):e&&Fi(t,e)},c6=(e,t)=>{e.jquery?I6(t,e):Fi(t,e.toString())},I6=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},uc=(()=>{if(vx())return!1;const e=document.createElement("div");return typeof e.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof e.style.animation<"u"?"animationend":!1})(),d6=(e,t)=>{const n=pA(),r=Bd();!n||!r||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?wo(n):_r(n),Vi(n,t,"actions"),u6(n,r,t),Fi(r,t.loaderHtml||""),Vi(r,t,"loader"))};function u6(e,t,n){const r=ds(),o=vc(),i=Sd();!r||!o||!i||(Sy(r,"confirm",n),Sy(o,"deny",n),Sy(i,"cancel",n),C6(r,o,i,n),n.reverseButtons&&(n.toast?(e.insertBefore(i,r),e.insertBefore(o,r)):(e.insertBefore(i,t),e.insertBefore(o,t),e.insertBefore(r,t))))}function C6(e,t,n,r){if(!r.buttonsStyling){us([e,t,n],Ve.styled);return}Cn([e,t,n],Ve.styled),r.confirmButtonColor&&(e.style.backgroundColor=r.confirmButtonColor,Cn(e,Ve["default-outline"])),r.denyButtonColor&&(t.style.backgroundColor=r.denyButtonColor,Cn(t,Ve["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,Cn(n,Ve["default-outline"]))}function Sy(e,t,n){const r=qG(t);fA(e,n[`show${r}Button`],"inline-block"),Fi(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=Ve[t],Vi(e,n,`${t}Button`)}const A6=(e,t)=>{const n=r1();n&&(Fi(n,t.closeButtonHtml||""),Vi(n,t,"closeButton"),fA(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},h6=(e,t)=>{const n=di();n&&(m6(n,t.backdrop),p6(n,t.position),f6(n,t.grow),Vi(n,t,"container"))};function m6(e,t){typeof t=="string"?e.style.background=t:t||Cn([document.documentElement,document.body],Ve["no-backdrop"])}function p6(e,t){t&&(t in Ve?Cn(e,Ve[t]):(Ii('The "position" parameter is not valid, defaulting to "center"'),Cn(e,Ve.center)))}function f6(e,t){t&&Cn(e,Ve[`grow-${t}`])}var Tn={innerParams:new WeakMap,domCache:new WeakMap};const b6=["input","file","range","select","radio","checkbox","textarea"],y6=(e,t)=>{const n=wn();if(!n)return;const r=Tn.innerParams.get(e),o=!r||t.input!==r.input;b6.forEach(i=>{const a=Ll(n,Ve[i]);a&&(G6(i,t.inputAttributes),a.className=Ve[i],o&&wo(a))}),t.input&&(o&&Z6(t),S6(t))},Z6=e=>{if(!e.input)return;if(!pr[e.input]){Zc(`Unexpected type of input! Expected ${Object.keys(pr).join(" | ")}, got "${e.input}"`);return}const t=Gx(e.input);if(!t)return;const n=pr[e.input](t,e);_r(t),e.inputAutoFocus&&setTimeout(()=>{bx(n)})},v6=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},G6=(e,t)=>{const n=wn();if(!n)return;const r=d0(n,e);if(r){v6(r);for(const o in t)r.setAttribute(o,t[o])}},S6=e=>{if(!e.input)return;const t=Gx(e.input);t&&Vi(t,e,"input")},g1=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},bA=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),o=Ve["input-label"];r.setAttribute("for",e.id),r.className=o,typeof n.customClass=="object"&&Cn(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},Gx=e=>{const t=wn();if(t)return Ll(t,Ve[e]||Ve.input)},pp=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:e1(t)||Ii(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},pr={};pr.text=pr.email=pr.password=pr.number=pr.tel=pr.url=pr.search=pr.date=pr["datetime-local"]=pr.time=pr.week=pr.month=(e,t)=>(pp(e,t.inputValue),bA(e,e,t),g1(e,t),e.type=t.input,e);pr.file=(e,t)=>(bA(e,e,t),g1(e,t),e);pr.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return pp(n,t.inputValue),n.type=t.input,pp(r,t.inputValue),bA(n,e,t),e};pr.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");Fi(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return bA(e,e,t),e};pr.radio=e=>(e.textContent="",e);pr.checkbox=(e,t)=>{const n=d0(wn(),"checkbox");n.value="1",n.checked=!!t.inputValue;const r=e.querySelector("span");return Fi(r,t.inputPlaceholder||t.inputLabel),n};pr.textarea=(e,t)=>{pp(e,t.inputValue),g1(e,t),bA(e,e,t);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(wn()).width),o=()=>{if(!document.body.contains(e))return;const i=e.offsetWidth+n(e);i>r?wn().style.width=`${i}px`:oc(wn(),"width",t.width)};new MutationObserver(o).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const B6=(e,t)=>{const n=t1();n&&(a1(n),Vi(n,t,"htmlContainer"),t.html?(l1(t.html,n),_r(n,"block")):t.text?(n.textContent=t.text,_r(n,"block")):wo(n),y6(e,t))},w6=(e,t)=>{const n=fx();n&&(a1(n),fA(n,t.footer,"block"),t.footer&&l1(t.footer,n),Vi(n,t,"footer"))},W6=(e,t)=>{const n=Tn.innerParams.get(e),r=mA();if(r){if(n&&t.icon===n.icon){eW(r,t),$w(r,t);return}if(!t.icon&&!t.iconHtml){wo(r);return}if(t.icon&&Object.keys(mp).indexOf(t.icon)===-1){Zc(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),wo(r);return}_r(r),eW(r,t),$w(r,t),Cn(r,t.showClass&&t.showClass.icon)}},$w=(e,t)=>{for(const[n,r]of Object.entries(mp))t.icon!==n&&us(e,r);Cn(e,t.icon&&mp[t.icon]),X6(e,t),R6(),Vi(e,t,"icon")},R6=()=>{const e=wn();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},k6=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,V6=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,eW=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=tW(t.iconHtml):t.icon==="success"?(r=k6,n=n.replace(/ style=".*?"/g,"")):t.icon==="error"?r=V6:t.icon&&(r=tW({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&Fi(e,r)},X6=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])_w(e,n,"background-color",t.iconColor);_w(e,".swal2-success-ring","border-color",t.iconColor)}},tW=e=>`<div class="${Ve["icon-content"]}">${e}</div>`,J6=(e,t)=>{const n=px();if(n){if(!t.imageUrl){wo(n);return}_r(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),oc(n,"width",t.imageWidth),oc(n,"height",t.imageHeight),n.className=Ve.image,Vi(n,t,"image")}},x6=(e,t)=>{const n=di(),r=wn();if(!(!n||!r)){if(t.toast){oc(n,"width",t.width),r.style.width="100%";const o=Bd();o&&r.insertBefore(o,mA())}else oc(r,"width",t.width);oc(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),wo(g0()),Y6(r,t)}},Y6=(e,t)=>{const n=t.showClass||{};e.className=`${Ve.popup} ${si(e)?n.popup:""}`,t.toast?(Cn([document.documentElement,document.body],Ve["toast-shown"]),Cn(e,Ve.toast)):Cn(e,Ve.modal),Vi(e,t,"popup"),typeof t.customClass=="string"&&Cn(e,t.customClass),t.icon&&Cn(e,Ve[`icon-${t.icon}`])},N6=(e,t)=>{const n=n1();if(!n)return;const{progressSteps:r,currentProgressStep:o}=t;if(!r||r.length===0||o===void 0){wo(n);return}_r(n),n.textContent="",o>=r.length&&Ii("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((i,a)=>{const s=H6(i);if(n.appendChild(s),a===o&&Cn(s,Ve["active-progress-step"]),a!==r.length-1){const l=F6(t);n.appendChild(l)}})},H6=e=>{const t=document.createElement("li");return Cn(t,Ve["progress-step"]),Fi(t,e),t},F6=e=>{const t=document.createElement("li");return Cn(t,Ve["progress-step-line"]),e.progressStepsDistance&&oc(t,"width",e.progressStepsDistance),t},K6=(e,t)=>{const n=mx();n&&(a1(n),fA(n,t.title||t.titleText,"block"),t.title&&l1(t.title,n),t.titleText&&(n.innerText=t.titleText),Vi(n,t,"title"))},Sx=(e,t)=>{x6(e,t),h6(e,t),N6(e,t),W6(e,t),J6(e,t),K6(e,t),A6(e,t),B6(e,t),d6(e,t),w6(e,t);const n=wn();typeof t.didRender=="function"&&n&&t.didRender(n),kt.eventEmitter.emit("didRender",n)},L6=()=>si(wn()),Bx=()=>{var e;return(e=ds())===null||e===void 0?void 0:e.click()},E6=()=>{var e;return(e=vc())===null||e===void 0?void 0:e.click()},M6=()=>{var e;return(e=Sd())===null||e===void 0?void 0:e.click()},wd=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),wx=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},D6=(e,t,n)=>{wx(e),t.toast||(e.keydownHandler=r=>T6(t,r,n),e.keydownTarget=t.keydownListenerCapture?window:wn(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},WZ=(e,t)=>{var n;const r=o1();if(r.length){e=e+t,e===r.length?e=0:e===-1&&(e=r.length-1),r[e].focus();return}(n=wn())===null||n===void 0||n.focus()},Wx=["ArrowRight","ArrowDown"],z6=["ArrowLeft","ArrowUp"],T6=(e,t,n)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?U6(t,e):t.key==="Tab"?j6(t):[...Wx,...z6].includes(t.key)?Q6(t.key):t.key==="Escape"&&P6(t,e,n)))},U6=(e,t)=>{if(!l0(t.allowEnterKey))return;const n=d0(wn(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;Bx(),e.preventDefault()}},j6=e=>{const t=e.target,n=o1();let r=-1;for(let o=0;o<n.length;o++)if(t===n[o]){r=o;break}e.shiftKey?WZ(r,-1):WZ(r,1),e.stopPropagation(),e.preventDefault()},Q6=e=>{const t=pA(),n=ds(),r=vc(),o=Sd();if(!t||!n||!r||!o)return;const i=[n,r,o];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const a=Wx.includes(e)?"nextElementSibling":"previousElementSibling";let s=document.activeElement;if(s){for(let l=0;l<t.children.length;l++){if(s=s[a],!s)return;if(s instanceof HTMLButtonElement&&si(s))break}s instanceof HTMLButtonElement&&s.focus()}},P6=(e,t,n)=>{l0(t.allowEscapeKey)&&(e.preventDefault(),n(wd.esc))};var Cd={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const O6=()=>{const e=di();Array.from(document.body.children).forEach(n=>{n.contains(e)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},Rx=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},kx=typeof window<"u"&&!!window.GestureEvent,_6=()=>{if(kx&&!Ds(document.body,Ve.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,Cn(document.body,Ve.iosfix),q6()}},q6=()=>{const e=di();if(!e)return;let t;e.ontouchstart=n=>{t=$6(n)},e.ontouchmove=n=>{t&&(n.preventDefault(),n.stopPropagation())}},$6=e=>{const t=e.target,n=di(),r=t1();return!n||!r||e_(e)||t_(e)?!1:t===n||!qw(n)&&t instanceof HTMLElement&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(qw(r)&&r.contains(t))},e_=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",t_=e=>e.touches&&e.touches.length>1,n_=()=>{if(Ds(document.body,Ve.iosfix)){const e=parseInt(document.body.style.top,10);us(document.body,Ve.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},r_=()=>{const e=document.createElement("div");e.className=Ve["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let FI=null;const o_=e=>{FI===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(FI=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${FI+r_()}px`)},i_=()=>{FI!==null&&(document.body.style.paddingRight=`${FI}px`,FI=null)};function Vx(e,t,n,r){I0()?nW(e,r):(U7(n).then(()=>nW(e,r)),wx(kt)),kx?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),i1()&&(i_(),n_(),Rx()),a_()}function a_(){us([document.documentElement,document.body],[Ve.shown,Ve["height-auto"],Ve["no-backdrop"],Ve["toast-shown"]])}function El(e){e=l_(e);const t=Cd.swalPromiseResolve.get(this),n=s_(this);this.isAwaitingPromise?e.isDismissed||(yA(this),t(e)):n&&t(e)}const s_=e=>{const t=wn();if(!t)return!1;const n=Tn.innerParams.get(e);if(!n||Ds(t,n.hideClass.popup))return!1;us(t,n.showClass.popup),Cn(t,n.hideClass.popup);const r=di();return us(r,n.showClass.backdrop),Cn(r,n.hideClass.backdrop),g_(e,t,n),!0};function Xx(e){const t=Cd.swalPromiseReject.get(this);yA(this),t&&t(e)}const yA=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Tn.innerParams.get(e)||e._destroy())},l_=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),g_=(e,t,n)=>{const r=di(),o=uc&&Zx(t);typeof n.willClose=="function"&&n.willClose(t),kt.eventEmitter.emit("willClose",t),o?c_(e,t,r,n.returnFocus,n.didClose):Vx(e,r,n.returnFocus,n.didClose)},c_=(e,t,n,r,o)=>{uc&&(kt.swalCloseEventFinishedCallback=Vx.bind(null,e,n,r,o),t.addEventListener(uc,function(i){i.target===t&&(kt.swalCloseEventFinishedCallback(),delete kt.swalCloseEventFinishedCallback)}))},nW=(e,t)=>{setTimeout(()=>{typeof t=="function"&&t.bind(e.params)(),kt.eventEmitter.emit("didClose"),e._destroy&&e._destroy()})},Ad=e=>{let t=wn();if(t||new qo,t=wn(),!t)return;const n=Bd();I0()?wo(mA()):I_(t,e),_r(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},I_=(e,t)=>{const n=pA(),r=Bd();!n||!r||(!t&&si(ds())&&(t=ds()),_r(n),t&&(wo(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),Cn([e,n],Ve.loading))},d_=(e,t)=>{t.input==="select"||t.input==="radio"?m_(e,t):["text","email","number","tel","textarea"].some(n=>n===t.input)&&($G(t.inputValue)||e1(t.inputValue))&&(Ad(ds()),p_(e,t))},u_=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return C_(n);case"radio":return A_(n);case"file":return h_(n);default:return t.inputAutoTrim?n.value.trim():n.value}},C_=e=>e.checked?1:0,A_=e=>e.checked?e.value:null,h_=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,m_=(e,t)=>{const n=wn();if(!n)return;const r=o=>{t.input==="select"?f_(n,fp(o),t):t.input==="radio"&&b_(n,fp(o),t)};$G(t.inputOptions)||e1(t.inputOptions)?(Ad(ds()),AA(t.inputOptions).then(o=>{e.hideLoading(),r(o)})):typeof t.inputOptions=="object"?r(t.inputOptions):Zc(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},p_=(e,t)=>{const n=e.getInput();n&&(wo(n),AA(t.inputValue).then(r=>{n.value=t.input==="number"?`${parseFloat(r)||0}`:`${r}`,_r(n),n.focus(),e.hideLoading()}).catch(r=>{Zc(`Error in inputValue promise: ${r}`),n.value="",_r(n),n.focus(),e.hideLoading()}))};function f_(e,t,n){const r=Ll(e,Ve.select);if(!r)return;const o=(i,a,s)=>{const l=document.createElement("option");l.value=s,Fi(l,a),l.selected=Jx(s,n.inputValue),i.appendChild(l)};t.forEach(i=>{const a=i[0],s=i[1];if(Array.isArray(s)){const l=document.createElement("optgroup");l.label=a,l.disabled=!1,r.appendChild(l),s.forEach(c=>o(l,c[1],c[0]))}else o(r,s,a)}),r.focus()}function b_(e,t,n){const r=Ll(e,Ve.radio);if(!r)return;t.forEach(i=>{const a=i[0],s=i[1],l=document.createElement("input"),c=document.createElement("label");l.type="radio",l.name=Ve.radio,l.value=a,Jx(a,n.inputValue)&&(l.checked=!0);const u=document.createElement("span");Fi(u,s),u.className=Ve.label,c.appendChild(l),c.appendChild(u),r.appendChild(c)});const o=r.querySelectorAll("input");o.length&&o[0].focus()}const fp=e=>{const t=[];return e instanceof Map?e.forEach((n,r)=>{let o=n;typeof o=="object"&&(o=fp(o)),t.push([r,o])}):Object.keys(e).forEach(n=>{let r=e[n];typeof r=="object"&&(r=fp(r)),t.push([n,r])}),t},Jx=(e,t)=>!!t&&t.toString()===e.toString(),y_=e=>{const t=Tn.innerParams.get(e);e.disableButtons(),t.input?xx(e,"confirm"):I1(e,!0)},Z_=e=>{const t=Tn.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?xx(e,"deny"):c1(e,!1)},v_=(e,t)=>{e.disableButtons(),t(wd.cancel)},xx=(e,t)=>{const n=Tn.innerParams.get(e);if(!n.input){Zc(`The "input" parameter is needed to be set when using returnInputValueOn${qG(t)}`);return}const r=e.getInput(),o=u_(e,n);n.inputValidator?G_(e,o,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):t==="deny"?c1(e,o):I1(e,o)},G_=(e,t,n)=>{const r=Tn.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>AA(r.inputValidator(t,r.validationMessage))).then(i=>{e.enableButtons(),e.enableInput(),i?e.showValidationMessage(i):n==="deny"?c1(e,t):I1(e,t)})},c1=(e,t)=>{const n=Tn.innerParams.get(e||void 0);n.showLoaderOnDeny&&Ad(vc()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>AA(n.preDeny(t,n.validationMessage))).then(o=>{o===!1?(e.hideLoading(),yA(e)):e.close({isDenied:!0,value:typeof o>"u"?t:o})}).catch(o=>Yx(e||void 0,o))):e.close({isDenied:!0,value:t})},rW=(e,t)=>{e.close({isConfirmed:!0,value:t})},Yx=(e,t)=>{e.rejectPromise(t)},I1=(e,t)=>{const n=Tn.innerParams.get(e||void 0);n.showLoaderOnConfirm&&Ad(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>AA(n.preConfirm(t,n.validationMessage))).then(o=>{si(g0())||o===!1?(e.hideLoading(),yA(e)):rW(e,typeof o>"u"?t:o)}).catch(o=>Yx(e||void 0,o))):rW(e,t)};function bp(){const e=Tn.innerParams.get(this);if(!e)return;const t=Tn.domCache.get(this);wo(t.loader),I0()?e.icon&&_r(mA()):S_(t),us([t.popup,t.actions],Ve.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const S_=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?_r(t[0],"inline-block"):t6()&&wo(e.actions)};function Nx(){const e=Tn.innerParams.get(this),t=Tn.domCache.get(this);return t?d0(t.popup,e.input):null}function Hx(e,t,n){const r=Tn.domCache.get(e);t.forEach(o=>{r[o].disabled=n})}function Fx(e,t){const n=wn();if(!(!n||!e))if(e.type==="radio"){const r=n.querySelectorAll(`[name="${Ve.radio}"]`);for(let o=0;o<r.length;o++)r[o].disabled=t}else e.disabled=t}function Kx(){Hx(this,["confirmButton","denyButton","cancelButton"],!1)}function Lx(){Hx(this,["confirmButton","denyButton","cancelButton"],!0)}function Ex(){Fx(this.getInput(),!1)}function Mx(){Fx(this.getInput(),!0)}function Dx(e){const t=Tn.domCache.get(this),n=Tn.innerParams.get(this);Fi(t.validationMessage,e),t.validationMessage.className=Ve["validation-message"],n.customClass&&n.customClass.validationMessage&&Cn(t.validationMessage,n.customClass.validationMessage),_r(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",Ve["validation-message"]),bx(r),Cn(r,Ve.inputerror))}function zx(){const e=Tn.domCache.get(this);e.validationMessage&&wo(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),us(t,Ve.inputerror))}const KI={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},B_=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],w_={allowEnterKey:void 0},W_=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Tx=e=>Object.prototype.hasOwnProperty.call(KI,e),Ux=e=>B_.indexOf(e)!==-1,jx=e=>w_[e],R_=e=>{Tx(e)||Ii(`Unknown parameter "${e}"`)},k_=e=>{W_.includes(e)&&Ii(`The parameter "${e}" is incompatible with toasts`)},V_=e=>{const t=jx(e);t&&hx(e,t)},X_=e=>{e.backdrop===!1&&e.allowOutsideClick&&Ii('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)R_(t),e.toast&&k_(t),V_(t)};function Qx(e){const t=wn(),n=Tn.innerParams.get(this);if(!t||Ds(t,n.hideClass.popup)){Ii("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const r=J_(e),o=Object.assign({},n,r);Sx(this,o),Tn.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const J_=e=>{const t={};return Object.keys(e).forEach(n=>{Ux(n)?t[n]=e[n]:Ii(`Invalid parameter to update: ${n}`)}),t};function Px(){const e=Tn.domCache.get(this),t=Tn.innerParams.get(this);if(!t){Ox(this);return}e.popup&&kt.swalCloseEventFinishedCallback&&(kt.swalCloseEventFinishedCallback(),delete kt.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),kt.eventEmitter.emit("didDestroy"),x_(this)}const x_=e=>{Ox(e),delete e.params,delete kt.keydownHandler,delete kt.keydownTarget,delete kt.currentInstance},Ox=e=>{e.isAwaitingPromise?(By(Tn,e),e.isAwaitingPromise=!0):(By(Cd,e),By(Tn,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},By=(e,t)=>{for(const n in e)e[n].delete(t)};var Y_=Object.freeze({__proto__:null,_destroy:Px,close:El,closeModal:El,closePopup:El,closeToast:El,disableButtons:Lx,disableInput:Mx,disableLoading:bp,enableButtons:Kx,enableInput:Ex,getInput:Nx,handleAwaitingPromise:yA,hideLoading:bp,rejectPromise:Xx,resetValidationMessage:zx,showValidationMessage:Dx,update:Qx});const N_=(e,t,n)=>{e.toast?H_(e,t,n):(K_(t),L_(t),E_(e,t,n))},H_=(e,t,n)=>{t.popup.onclick=()=>{e&&(F_(e)||e.timer||e.input)||n(wd.close)}},F_=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let yp=!1;const K_=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(yp=!0)}}},L_=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(n){e.popup.onmouseup=()=>{},(n.target===e.popup||n.target instanceof HTMLElement&&e.popup.contains(n.target))&&(yp=!0)}}},E_=(e,t,n)=>{t.container.onclick=r=>{if(yp){yp=!1;return}r.target===t.container&&l0(e.allowOutsideClick)&&n(wd.backdrop)}},M_=e=>typeof e=="object"&&e.jquery,oW=e=>e instanceof Element||M_(e),D_=e=>{const t={};return typeof e[0]=="object"&&!oW(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((n,r)=>{const o=e[r];typeof o=="string"||oW(o)?t[n]=o:o!==void 0&&Zc(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof o}`)}),t};function z_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)}function T_(e){class t extends this{_main(r,o){return super._main(r,Object.assign({},e,o))}}return t}const U_=()=>kt.timeout&&kt.timeout.getTimerLeft(),_x=()=>{if(kt.timeout)return n6(),kt.timeout.stop()},qx=()=>{if(kt.timeout){const e=kt.timeout.start();return s1(e),e}},j_=()=>{const e=kt.timeout;return e&&(e.running?_x():qx())},Q_=e=>{if(kt.timeout){const t=kt.timeout.increase(e);return s1(t,!0),t}},P_=()=>!!(kt.timeout&&kt.timeout.isRunning());let iW=!1;const RZ={};function O_(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";RZ[e]=this,iW||(document.body.addEventListener("click",__),iW=!0)}const __=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const n in RZ){const r=t.getAttribute(n);if(r){RZ[n].fire({template:r});return}}};class q_{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,n){const r=this._getHandlersByEventName(t);r.includes(n)||r.push(n)}once(t,n){var r=this;const o=function(){r.removeListener(t,o);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];n.apply(r,a)};this.on(t,o)}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this._getHandlersByEventName(t).forEach(i=>{try{i.apply(this,r)}catch(a){console.error(a)}})}removeListener(t,n){const r=this._getHandlersByEventName(t),o=r.indexOf(n);o>-1&&r.splice(o,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}kt.eventEmitter=new q_;const $_=(e,t)=>{kt.eventEmitter.on(e,t)},eq=(e,t)=>{kt.eventEmitter.once(e,t)},tq=(e,t)=>{if(!e){kt.eventEmitter.reset();return}t?kt.eventEmitter.removeListener(e,t):kt.eventEmitter.removeAllListeners(e)};var nq=Object.freeze({__proto__:null,argsToParams:D_,bindClickHandler:O_,clickCancel:M6,clickConfirm:Bx,clickDeny:E6,enableLoading:Ad,fire:z_,getActions:pA,getCancelButton:Sd,getCloseButton:r1,getConfirmButton:ds,getContainer:di,getDenyButton:vc,getFocusableElements:o1,getFooter:fx,getHtmlContainer:t1,getIcon:mA,getIconContent:O7,getImage:px,getInputLabel:_7,getLoader:Bd,getPopup:wn,getProgressSteps:n1,getTimerLeft:U_,getTimerProgressBar:c0,getTitle:mx,getValidationMessage:g0,increaseTimer:Q_,isDeprecatedParameter:jx,isLoading:$7,isTimerRunning:P_,isUpdatableParameter:Ux,isValidParameter:Tx,isVisible:L6,mixin:T_,off:tq,on:$_,once:eq,resumeTimer:qx,showLoading:Ad,stopTimer:_x,toggleTimer:j_});class rq{constructor(t,n){this.callback=t,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const n=this.running;return n&&this.stop(),this.remaining+=t,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const $x=["swal-title","swal-html","swal-footer"],oq=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return dq(n),Object.assign(iq(n),aq(n),sq(n),lq(n),gq(n),cq(n),Iq(n,$x))},iq=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(r=>{Cc(r,["name","value"]);const o=r.getAttribute("name"),i=r.getAttribute("value");!o||!i||(typeof KI[o]=="boolean"?t[o]=i!=="false":typeof KI[o]=="object"?t[o]=JSON.parse(i):t[o]=i)}),t},aq=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(r=>{const o=r.getAttribute("name"),i=r.getAttribute("value");!o||!i||(t[o]=new Function(`return ${i}`)())}),t},sq=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(r=>{Cc(r,["type","color","aria-label"]);const o=r.getAttribute("type");!o||!["confirm","cancel","deny"].includes(o)||(t[`${o}ButtonText`]=r.innerHTML,t[`show${qG(o)}Button`]=!0,r.hasAttribute("color")&&(t[`${o}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(t[`${o}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),t},lq=e=>{const t={},n=e.querySelector("swal-image");return n&&(Cc(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},gq=e=>{const t={},n=e.querySelector("swal-icon");return n&&(Cc(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},cq=e=>{const t={},n=e.querySelector("swal-input");n&&(Cc(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach(o=>{Cc(o,["value"]);const i=o.getAttribute("value");if(!i)return;const a=o.innerHTML;t.inputOptions[i]=a})),t},Iq=(e,t)=>{const n={};for(const r in t){const o=t[r],i=e.querySelector(o);i&&(Cc(i,[]),n[o.replace(/^swal-/,"")]=i.innerHTML.trim())}return n},dq=e=>{const t=$x.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(n=>{const r=n.tagName.toLowerCase();t.includes(r)||Ii(`Unrecognized element <${r}>`)})},Cc=(e,t)=>{Array.from(e.attributes).forEach(n=>{t.indexOf(n.name)===-1&&Ii([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},eY=10,uq=e=>{const t=di(),n=wn();typeof e.willOpen=="function"&&e.willOpen(n),kt.eventEmitter.emit("willOpen",n);const o=window.getComputedStyle(document.body).overflowY;hq(t,n,e),setTimeout(()=>{Cq(t,n)},eY),i1()&&(Aq(t,e.scrollbarPadding,o),O6()),!I0()&&!kt.previousActiveElement&&(kt.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(n)),kt.eventEmitter.emit("didOpen",n),us(t,Ve["no-transition"])},tY=e=>{const t=wn();if(e.target!==t||!uc)return;const n=di();t.removeEventListener(uc,tY),n.style.overflowY="auto"},Cq=(e,t)=>{uc&&Zx(t)?(e.style.overflowY="hidden",t.addEventListener(uc,tY)):e.style.overflowY="auto"},Aq=(e,t,n)=>{_6(),t&&n!=="hidden"&&o_(n),setTimeout(()=>{e.scrollTop=0})},hq=(e,t,n)=>{Cn(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),_r(t,"grid"),setTimeout(()=>{Cn(t,n.showClass.popup),t.style.removeProperty("opacity")},eY)):_r(t,"grid"),Cn([document.documentElement,document.body],Ve.shown),n.heightAuto&&n.backdrop&&!n.toast&&Cn([document.documentElement,document.body],Ve["height-auto"])};var aW={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function mq(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=aW.email),e.input==="url"&&(e.inputValidator=aW.url))}function pq(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(Ii('Target parameter is not valid, defaulting to "body"'),e.target="body")}function fq(e){mq(e),e.showLoaderOnConfirm&&!e.preConfirm&&Ii(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),pq(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),g6(e)}let Oa;var Th=new WeakMap;class Gr{constructor(){if(M7(this,Th,void 0),typeof window>"u")return;Oa=this;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=Object.freeze(this.constructor.argsToParams(n));this.params=o,this.isAwaitingPromise=!1,D7(Th,this,this._main(Oa.params))}_main(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(X_(Object.assign({},n,t)),kt.currentInstance){const i=Cd.swalPromiseResolve.get(kt.currentInstance),{isAwaitingPromise:a}=kt.currentInstance;kt.currentInstance._destroy(),a||i({isDismissed:!0}),i1()&&Rx()}kt.currentInstance=Oa;const r=yq(t,n);fq(r),Object.freeze(r),kt.timeout&&(kt.timeout.stop(),delete kt.timeout),clearTimeout(kt.restoreFocusTimeout);const o=Zq(Oa);return Sx(Oa,r),Tn.innerParams.set(Oa,r),bq(Oa,o,r)}then(t){return Pw(Th,this).then(t)}finally(t){return Pw(Th,this).finally(t)}}const bq=(e,t,n)=>new Promise((r,o)=>{const i=a=>{e.close({isDismissed:!0,dismiss:a})};Cd.swalPromiseResolve.set(e,r),Cd.swalPromiseReject.set(e,o),t.confirmButton.onclick=()=>{y_(e)},t.denyButton.onclick=()=>{Z_(e)},t.cancelButton.onclick=()=>{v_(e,i)},t.closeButton.onclick=()=>{i(wd.close)},N_(n,t,i),D6(kt,n,i),d_(e,n),uq(n),vq(kt,n,i),Gq(t,n),setTimeout(()=>{t.container.scrollTop=0})}),yq=(e,t)=>{const n=oq(e),r=Object.assign({},KI,t,n,e);return r.showClass=Object.assign({},KI.showClass,r.showClass),r.hideClass=Object.assign({},KI.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},Zq=e=>{const t={popup:wn(),container:di(),actions:pA(),confirmButton:ds(),denyButton:vc(),cancelButton:Sd(),loader:Bd(),closeButton:r1(),validationMessage:g0(),progressSteps:n1()};return Tn.domCache.set(e,t),t},vq=(e,t,n)=>{const r=c0();wo(r),t.timer&&(e.timeout=new rq(()=>{n("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(_r(r),Vi(r,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&s1(t.timer)})))},Gq=(e,t)=>{if(!t.toast){if(!l0(t.allowEnterKey)){hx("allowEnterKey"),wq();return}Sq(e)||Bq(e,t)||WZ(-1,1)}},Sq=e=>{const t=e.popup.querySelectorAll("[autofocus]");for(const n of t)if(n instanceof HTMLElement&&si(n))return n.focus(),!0;return!1},Bq=(e,t)=>t.focusDeny&&si(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&si(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&si(e.confirmButton)?(e.confirmButton.focus(),!0):!1,wq=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const n=document.createElement("audio");n.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",n.loop=!0,document.body.appendChild(n),setTimeout(()=>{n.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}Gr.prototype.disableButtons=Lx;Gr.prototype.enableButtons=Kx;Gr.prototype.getInput=Nx;Gr.prototype.disableInput=Mx;Gr.prototype.enableInput=Ex;Gr.prototype.hideLoading=bp;Gr.prototype.disableLoading=bp;Gr.prototype.showValidationMessage=Dx;Gr.prototype.resetValidationMessage=zx;Gr.prototype.close=El;Gr.prototype.closePopup=El;Gr.prototype.closeModal=El;Gr.prototype.closeToast=El;Gr.prototype.rejectPromise=Xx;Gr.prototype.update=Qx;Gr.prototype._destroy=Px;Object.assign(Gr,nq);Object.keys(Y_).forEach(e=>{Gr[e]=function(){return Oa&&Oa[e]?Oa[e](...arguments):null}});Gr.DismissReason=wd;Gr.version="11.14.1";const qo=Gr;qo.default=qo;typeof document<"u"&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch{n.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');const Wq=et(kX)({background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"}),Rq=et(WG)({"& .MuiTableCell-root":{borderColor:"rgba(255, 255, 255, 0.1)",color:"#e2e8f0"},"& .MuiTableHead-root .MuiTableCell-root":{backgroundColor:"rgba(255, 255, 255, 0.02)",color:"#e2e8f0",fontWeight:"600",fontSize:"1.1rem"},"& .MuiTableBody-root .MuiTableRow-root:hover":{backgroundColor:"rgba(255, 255, 255, 0.02)"}}),kq=et(rn)({backgroundColor:"#dc2626",color:"#fff","&:hover":{backgroundColor:"#b91c1c",transform:"translateY(-2px)"},transition:"all 0.3s ease"}),Vq=et(je)({padding:"24px",width:"100%"}),Xq=()=>{const[e,t]=F.useState([]);F.useEffect(()=>{n()},[]);const n=async()=>{try{const o=await hn.get("https://azure-reservation-app.azurewebsites.net/api/user");t(o.data)}catch(o){console.error("Error fetching users:",o)}},r=async o=>{if((await qo.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#5C2FC2",confirmButtonText:"Delete",background:"#1e2a38",color:"#e2e8f0"})).isConfirmed)try{await hn.put(`https://azure-reservation-app.azurewebsites.net/api/users/${o}`),qo.fire({title:"Deleted!",text:"The user has been deleted.",icon:"success",background:"#1e2a38",color:"#e2e8f0"}),n()}catch(a){console.error("Error deleting user:",a)}};return w.jsxs(Vq,{children:[w.jsx(Ee,{variant:"h4",gutterBottom:!0,sx:{color:"#e2e8f0",fontWeight:"600",mb:4,letterSpacing:"0.5px"},children:"User List"}),w.jsx(Wq,{children:w.jsxs(Rq,{children:[w.jsx(kG,{children:w.jsxs(_g,{children:[w.jsx(ur,{children:"Name"}),w.jsx(ur,{children:"Email"}),w.jsx(ur,{align:"center",children:"Actions"})]})}),w.jsx(RG,{children:e.map(o=>w.jsxs(_g,{children:[w.jsx(ur,{children:o.name}),w.jsx(ur,{children:o.email}),w.jsx(ur,{align:"center",children:w.jsx(kq,{variant:"contained",onClick:()=>r(o._id),size:"small",children:"Delete"})})]},o._id))})]})})]})},Jq=et(rn)({width:"252px",height:"45px",borderRadius:"8px",color:"#e2e8f0",textTransform:"none",fontSize:"16px",fontWeight:500,transition:"all 0.2s ease",backgroundColor:"transparent",border:"1px solid rgba(255, 255, 255, 0.1)","&:hover":{backgroundColor:"rgba(92, 47, 194, 0.1)",border:"1px solid rgba(92, 47, 194, 0.3)"},"&.active":{backgroundColor:"rgba(92, 47, 194, 0.2)",border:"1px solid rgba(92, 47, 194, 0.5)"}}),xq=({title:e,setActiveContent:t,activeContent:n})=>w.jsx(Jq,{onClick:()=>t(e),className:n===e?"active":"",children:e}),Yq=et(dz)(({theme:e})=>({width:300,flexShrink:0,"& .MuiDrawer-paper":{width:300,boxSizing:"border-box",background:"linear-gradient(180deg, #1e2a38 0%, #181818 100%)",borderRight:"1px solid rgba(255, 255, 255, 0.1)"}})),Nq=et(Ee)({marginTop:"29px",fontSize:"30px",fontWeight:"bold",color:"#e2e8f0",textAlign:"center",letterSpacing:"1px",textShadow:"0 2px 4px rgba(0,0,0,0.2)"}),Hq=et(je)({padding:"20px",marginTop:"20px",display:"flex",flexDirection:"column",alignItems:"center",gap:"15px"}),Fq=et(rn)({backgroundColor:"#5C2FC2",width:"252px",height:"45px",marginTop:"auto",borderRadius:"8px",color:"#fff",transition:"all 0.3s ease","&:hover":{backgroundColor:"#4925A3",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(92, 47, 194, 0.3)"}}),Kq=({setActiveContent:e,activeContent:t})=>{const{logout:n}=gi(),r=sa(),o=()=>{n(),r("/signin")},i=["Layout","Bookings","Events","Users","Mail Service"];return w.jsxs(Yq,{variant:"permanent",anchor:"left",children:[w.jsx(Nq,{children:"ReserveNow"}),w.jsxs(Hq,{children:[i.map(a=>w.jsx(xq,{activeContent:t,setActiveContent:e,title:a,sx:{width:"100%",backgroundColor:t===a?"rgba(92, 47, 194, 0.2)":"transparent","&:hover":{backgroundColor:"rgba(92, 47, 194, 0.1)"}}},a)),w.jsx(je,{sx:{flexGrow:1,minHeight:"200px"}})," ",w.jsx(Fq,{variant:"contained",onClick:o,fullWidth:!0,children:"Logout"})]})]})},Lq=et(je)({width:"100%",padding:"24px",boxSizing:"border-box"}),Eq=et(xa)({display:"flex",alignItems:"center",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",padding:"20px 30px",marginBottom:"24px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"}),Mq=et(Ee)({color:"#e2e8f0",fontSize:"27px",fontWeight:"500",marginRight:"15px",letterSpacing:"0.5px",textShadow:"0 2px 4px rgba(0,0,0,0.2)"}),Dq=et(je)({width:"43px",height:"43px",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",animation:"wave 2s infinite","@keyframes wave":{"0%":{transform:"rotate(0deg)"},"10%":{transform:"rotate(14deg)"},"20%":{transform:"rotate(-8deg)"},"30%":{transform:"rotate(14deg)"},"40%":{transform:"rotate(-4deg)"},"50%":{transform:"rotate(10deg)"},"60%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(0deg)"}}}),zq=et(je)({backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",padding:"24px",border:"1px solid rgba(255, 255, 255, 0.1)",width:"100%",minHeight:"calc(100vh - 180px)",overflow:"auto","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"rgba(255, 255, 255, 0.05)"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px","&:hover":{background:"rgba(255, 255, 255, 0.2)"}}}),nY=()=>{var n;const e=ZO(),{getCurrentUser:t}=gi();return w.jsxs(Lq,{children:[w.jsxs(Eq,{elevation:0,children:[w.jsxs(Mq,{children:["Welcome ",(n=t())==null?void 0:n.name,"!"]}),w.jsx(Dq,{sx:{backgroundImage:"url(../src/assets/wave.png)"}})]}),w.jsx(zq,{children:e()})]})},Tq=new Ni("/bookings"),Uq=()=>bc({queryKey:["bookings"],queryFn:()=>Tq.getAll(),staleTime:24*60*60*1e3}),Xs={container:{backgroundColor:"#1C2128",padding:"24px",borderRadius:"8px",color:"white"},textField:{"& .MuiOutlinedInput-root":{backgroundColor:"#2D333B",color:"white",borderRadius:"4px","& fieldset":{borderColor:"#444C56"},"&:hover fieldset":{borderColor:"#6E40C9"}},"& .MuiInputLabel-root":{color:"#8B949E"}},button:{backgroundColor:"#6E40C9",color:"white","&:hover":{backgroundColor:"#553098"}},table:{"& .MuiTableCell-head":{backgroundColor:"#2D333B",color:"white",borderBottom:"1px solid #444C56"},"& .MuiTableCell-body":{color:"white",borderBottom:"1px solid #444C56"},"& .MuiTableRow-root:hover":{backgroundColor:"#2D333B"}}},jq=()=>{const{data:e}=Uq(),[t,n]=F.useState({customerName:"",theaterName:"",bookingDate:"",bookingTime:""}),[r,o]=F.useState(e),[i,a]=F.useState(""),[s,l]=F.useState(""),[c,u]=F.useState([]),[g,d]=F.useState(!1),I=()=>{const{customerName:m,theaterName:p,bookingDate:Z,bookingTime:v}=t,k=e==null?void 0:e.filter(B=>(m?B.customerName.toLowerCase().includes(m.toLowerCase()):!0)&&(p?B.theaterName.toLowerCase().includes(p.toLowerCase()):!0)&&(Z?B.bookingDate===Z:!0)&&(v?B.bookingTime===v:!0));o(k)};F.useEffect(()=>{I()},[t]);const C=m=>{m.target.checked?u(r.map(p=>p._id)):u([]),d(m.target.checked)},h=(m,p)=>{m.target.checked?u(Z=>[...Z,p]):u(Z=>Z.filter(v=>v!==p))},f=()=>r.filter(m=>c.includes(m._id)).map(m=>m.customerEmail),A=async()=>{const m=f();if(!i||!s){alert("Please provide a subject and message.");return}try{qo.fire({title:"Confirm Sending Emails?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,background:"#1e2a38",color:"#e2e8f0",confirmButtonColor:"#dc2626",cancelButtonColor:"#5C2FC2",confirmButtonText:"Confirm"}).then(async p=>{p.isConfirmed&&await hn.post("https://azure-reservation-app.azurewebsites.net/api/mail",{emails:m,subject:i,message:s}).then(Z=>{qo.fire({title:"Success!",text:"Booking process completed.",icon:"success",color:"#e2e8f0"})}).catch(Z=>{console.error("Error sending emails:",Z)})})}catch(p){console.error("Error sending emails:",p)}};return w.jsxs(je,{sx:Xs.container,children:[w.jsx(Ee,{variant:"h4",sx:{marginBottom:"24px"},children:"Send email for booked users"}),w.jsxs(je,{sx:{display:"grid",gap:"16px",marginBottom:"24px"},children:[w.jsx(Vr,{label:"Customer Name",value:t.customerName,onChange:m=>n({...t,customerName:m.target.value}),fullWidth:!0,sx:Xs.textField}),w.jsx(Vr,{label:"Theater Name",value:t.theaterName,onChange:m=>n({...t,theaterName:m.target.value}),fullWidth:!0,sx:Xs.textField}),w.jsx(Vr,{label:"Booking Date (yyyy-mm-dd)",value:t.bookingDate,onChange:m=>n({...t,bookingDate:m.target.value}),fullWidth:!0,sx:Xs.textField}),w.jsx(Vr,{label:"Booking Time",value:t.bookingTime,onChange:m=>n({...t,bookingTime:m.target.value}),fullWidth:!0,sx:Xs.textField})]}),w.jsx(kX,{children:w.jsxs(WG,{sx:Xs.table,children:[w.jsx(kG,{children:w.jsxs(_g,{children:[w.jsx(ur,{children:w.jsx(vz,{control:w.jsx(u5,{checked:g,onChange:C,sx:{color:"white"}}),label:"Select All"})}),w.jsx(ur,{children:"Customer Name"}),w.jsx(ur,{children:"Theater Name"}),w.jsx(ur,{children:"Booking Date"}),w.jsx(ur,{children:"Booking Time"})]})}),w.jsx(RG,{children:r==null?void 0:r.map(m=>w.jsxs(_g,{children:[w.jsx(ur,{children:w.jsx(u5,{checked:c.includes(m._id),onChange:p=>h(p,m._id),sx:{color:"white"}})}),w.jsx(ur,{children:m.customerName}),w.jsx(ur,{children:m.theaterName}),w.jsx(ur,{children:m.bookingDate}),w.jsx(ur,{children:m.bookingTime})]},m._id))})]})}),w.jsxs(je,{sx:{marginTop:"24px",display:"grid",gap:"16px"},children:[w.jsx(Vr,{label:"Subject",value:i,onChange:m=>a(m.target.value),fullWidth:!0,sx:Xs.textField}),w.jsx(Vr,{label:"Message",value:s,onChange:m=>l(m.target.value),multiline:!0,rows:4,fullWidth:!0,sx:Xs.textField}),w.jsx(rn,{variant:"contained",onClick:A,sx:Xs.button,children:"Send Email to Selected"})]})]})},Qq=et(je)({display:"flex",minHeight:"100vh",width:"100vw",background:"linear-gradient(135deg, #1e2a38 0%, #181818 100%)",position:"relative"}),Pq=et(je)({position:"fixed",left:0,top:0,bottom:0,width:"300px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRight:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",zIndex:1200}),Oq=et(je)({marginLeft:"300px",width:"calc(100% - 300px)",minHeight:"100vh",position:"relative"}),_q=()=>{const[e,t]=F.useState("Layout"),n=sa(),{authToken:r}=gi();if(!r)return n("/signin"),null;const o=()=>{switch(e){case"Layout":return w.jsxs(w.Fragment,{children:[w.jsx(kO,{}),w.jsx(xO,{})]});case"Bookings":return w.jsx(L7,{});case"Events":return w.jsx(MJ,{});case"Users":return w.jsx(Xq,{});case"Mail Service":return w.jsx(jq,{});default:return w.jsx(Ee,{variant:"h4",sx:{color:"#e2e8f0",textAlign:"center",mt:4},children:"Welcome to the Dashboard"})}};return w.jsxs(Qq,{children:[w.jsx(SD,{}),w.jsx(Pq,{children:w.jsx(Kq,{setActiveContent:t,activeContent:e})}),w.jsx(Oq,{children:w.jsx(vO,{renderContent:o,children:w.jsx(nY,{})})})]})},wy=new Ni("/bookings");class qq{Create(t){return wy.post(t)}Delete(t){return wy.delete(t)}Update(t,n){return wy.put(t,n)}}const $q=new qq,e$=et(je)({padding:3,maxWidth:"203vh",margin:"auto",marginTop:"100px",marginTop:"170px",marginBottom:"90px"}),t$=et(xa)({padding:"32px",borderRadius:"16px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"}),wu=et(Ee)({color:"#e2e8f0",fontWeight:500,marginBottom:"8px"}),Wu=et(Ee)({color:"#94a3b8",marginBottom:"16px",fontSize:"1.1rem"}),n$=et(rn)({backgroundColor:"#5C2FC2",color:"#ffffff",padding:"12px",marginTop:"24px","&:hover":{backgroundColor:"#4925A3",transform:"translateY(-2px)"},transition:"all 0.3s ease"}),r$=async(e,t,n)=>{try{const r=await hn.post("https://azure-reservation-app.azurewebsites.net/api/create-calendar-event",{userId:t,bookingDate:e.bookingDate,bookingTime:e.bookingTime},{headers:{Authorization:`Bearer ${n}`}});return console.log("Calendar event created:",r.data),r.data}catch(r){console.error("Error booking seat and creating event:",r)}},o$=()=>{const e=localStorage.getItem("bookingData");console.log("Booking data:",e);const t=JSON.parse(e),n=t.theater,r=t.seats,{getCurrentUser:o}=gi(),i=o()._id,a=o().accessToken,s=o().service,l=sa(),c=()=>{qo.fire({title:"Confirm Booking?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,background:"#1e2a38",color:"#e2e8f0",confirmButtonColor:"#dc2626",cancelButtonColor:"#5C2FC2",confirmButtonText:"Confirm"}).then(u=>{u.isConfirmed&&UP.CreateSeat({theaterId:n,selectedSeats:r}).then(g=>{console.log(g.data),$q.Create(t).then(d=>{s==="google"&&qo.fire({title:"Set reminder to the Google calender?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,background:"#1e2a38",color:"#e2e8f0",confirmButtonColor:"#dc2626",cancelButtonColor:"#5C2FC2",confirmButtonText:"Confirm"}).then(I=>{I.isConfirmed?(r$(t,i,a),qo.fire({title:"Success!",text:"Booking process completed.",icon:"success",color:"#e2e8f0",background:"#1e2a38"}),l("/")):(qo.fire({title:"Success!",text:"Booking process completed.",icon:"success",color:"#e2e8f0",background:"#1e2a38"}),l("/"))}),s!=="google"&&qo.fire({title:"Success!",text:"Booking process completed.",icon:"success",color:"#e2e8f0",background:"#1e2a38"}),l("/"),console.log(d.data)}).catch(d=>{console.error("Error booking seats:",d)})}).catch(g=>{console.error("Error booking seats:",g)})})};return w.jsxs(e$,{children:[w.jsx(Gd,{}),w.jsxs(t$,{elevation:0,children:[w.jsx(Ee,{variant:"h4",component:"h1",gutterBottom:!0,sx:{color:"#e2e8f0",fontWeight:"600",marginBottom:"32px",letterSpacing:"0.5px"},children:"Booking Details"}),w.jsxs(at,{container:!0,spacing:3,children:[w.jsxs(at,{item:!0,xs:12,children:[w.jsx(wu,{variant:"h6",children:"Ref No"}),w.jsx(Wu,{variant:"body1",children:"tfe888gujw"})]}),w.jsxs(at,{item:!0,xs:6,children:[w.jsx(wu,{variant:"h6",children:"Date"}),w.jsx(Wu,{variant:"body1",children:t.bookingDate})]}),w.jsxs(at,{item:!0,xs:6,children:[w.jsx(wu,{variant:"h6",children:"Time"}),w.jsx(Wu,{variant:"body1",children:t.bookingTime})]}),w.jsxs(at,{item:!0,xs:6,children:[w.jsx(wu,{variant:"h6",children:"Total Price"}),w.jsxs(Wu,{variant:"body1",children:["$",t.totalAmount]})]}),w.jsxs(at,{item:!0,xs:6,children:[w.jsx(wu,{variant:"h6",children:"Seats"}),w.jsx(Wu,{variant:"body1",children:t.seats.join(", ")})]})]}),w.jsx(n$,{variant:"contained",onClick:c,fullWidth:!0,children:"Confirm Booking"})]})]})},Js=({children:e})=>{const{authToken:t}=gi();return t?e:w.jsx(Up,{to:"/signin",replace:!0})},i$=et(je)({padding:"24px",width:"204vh",background:"linear-gradient(135deg, #001529 0%, #181818 100%)",minHeight:"100vh",marginTop:"70px"}),a$=et(je)(({theme:e})=>({position:"relative",padding:"20px",borderRadius:"10px",backgroundColor:"rgba(255, 255, 255, 0.05)",overflow:"hidden",marginBottom:"20px","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1,margin:"-5px",borderRadius:"inherit",background:"linear-gradient(45deg, #FF6B6B, #FFD93D, #6BCB77, #4D96FF)",backgroundSize:"200% 200%",animation:"gradient 5s ease infinite"}}));et(rn)({backgroundColor:"#4D96FF",color:"#fff","&:hover":{backgroundColor:"#3A7BD5",transform:"translateY(-2px)"},transition:"all 0.3s ease"});const s$=et(rn)({backgroundColor:"#FF6B6B",color:"#fff","&:hover":{backgroundColor:"#FF5252",transform:"translateY(-2px)"},transition:"all 0.3s ease"});et("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});const l$=()=>{const{getCurrentUser:e}=gi(),t=e().email,[n,r]=F.useState([]),[o,i]=F.useState(!0);F.useEffect(()=>{a()},[t]);const a=async()=>{try{const l=await hn.post("https://azure-reservation-app.azurewebsites.net/api/bookings/customer",{customerEmail:t});r(l.data.map(c=>({...c,poster:null})))}catch(l){console.error("Error fetching orders:",l)}finally{i(!1)}},s=async l=>{try{qo.fire({title:"Cancel Booking?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,background:"#1e2a38",color:"#e2e8f0",confirmButtonColor:"#dc2626",cancelButtonColor:"#5C2FC2",confirmButtonText:"Confirm"}).then(async c=>{if(c.isConfirmed){const u=await hn.delete(`https://azure-reservation-app.azurewebsites.net/api/bookings/${l}`);console.log("Booking canceled:",u.data),a()}})}catch(c){console.error("Error canceling booking:",c)}};return o?w.jsx(je,{sx:{display:"flex",justifyContent:"center",p:3},children:w.jsx(vG,{sx:{color:"#4D96FF"}})}):w.jsxs(i$,{children:[w.jsx(Ee,{variant:"h3",sx:{color:"#e2e8f0",mb:4,fontWeight:"400"},children:"My Bookings"}),(n==null?void 0:n.length)===0?w.jsx(Ee,{sx:{color:"#e2e8f0",fontSize:"1.25rem"},children:"No bookings found"}):w.jsx(SG,{children:n==null?void 0:n.map(l=>w.jsx(a$,{children:w.jsxs(at,{container:!0,spacing:3,children:[w.jsx(at,{item:!0,xs:12,md:3,children:l.poster?w.jsx(je,{sx:{position:"relative",width:"100%",paddingTop:"133%",borderRadius:"8px",overflow:"hidden",mb:{xs:2,md:0}},children:w.jsx("img",{src:l.poster,alt:"Event poster",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})}):w.jsx(je,{sx:{width:"100%",height:"100%",minHeight:200,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",mb:{xs:2,md:0}}})}),w.jsxs(at,{item:!0,xs:12,md:6,children:[w.jsx(Ee,{variant:"h5",sx:{color:"#e2e8f0",mb:1},children:l.theaterName}),w.jsxs(Ee,{sx:{color:"rgba(255,255,255,0.7)"},children:["Seats: ",l.seats.join(", ")]}),w.jsxs(Ee,{sx:{color:"rgba(255,255,255,0.7)"},children:["Amount: $",l.totalAmount]}),w.jsxs(Ee,{sx:{color:"rgba(255,255,255,0.7)"},children:["Date: ",l.bookingDate," | Time: ",l.bookingTime]})]}),w.jsx(at,{item:!0,xs:12,md:3,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:w.jsx(s$,{onClick:()=>s(l._id),children:"Cancel Booking"})})]})},l._id))})]})},g$=({children:e})=>{const{getCurrentUser:t}=gi(),{role:n}=t();return console.log(n),n=="admin"?e:w.jsx(Up,{to:"/signin",replace:!0})},c$=Pe(je)(({theme:e})=>({position:"relative",width:"100%",height:"70vh",overflow:"hidden"})),I$=Pe("img")({width:"100%",height:"100%",objectFit:"cover"}),d$=Pe(je)(({theme:e})=>({position:"absolute",bottom:0,left:0,right:0,padding:e.spacing(2),background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 100%)",color:"white"})),u$=Pe(je)(({theme:e})=>({display:"flex",justifyContent:"center",gap:e.spacing(1),marginTop:e.spacing(2)})),C$=Pe("img")(({active:e})=>({width:"80px",height:"45px",objectFit:"cover",cursor:"pointer",border:e?"2px solid white":"none",opacity:e?1:.7,transition:"opacity 0.3s ease","&:hover":{opacity:1}})),wg=[{image:"https://example.com/joker.jpg",title:"Joker: Folie à Deux",thumbnail:"https://example.com/joker-thumb.jpg"},{image:"https://example.com/venom.jpg",title:"Venom",thumbnail:"https://example.com/venom-thumb.jpg"},{image:"https://example.com/gladiator.jpg",title:"Gladiator",thumbnail:"https://example.com/gladiator-thumb.jpg"}],A$=()=>{const[e,t]=F.useState(0),n=()=>{t(o=>(o+1)%wg.length)},r=()=>{t(o=>(o-1+wg.length)%wg.length)};return w.jsxs(je,{children:[w.jsxs(c$,{children:[w.jsx(I$,{src:wg[e].image,alt:wg[e].title}),w.jsxs(d$,{children:[w.jsx(Ee,{variant:"h4",gutterBottom:!0,children:wg[e].title}),w.jsxs(je,{children:[w.jsx(rn,{variant:"contained",startIcon:w.jsx(c8,{}),sx:{mr:2,bgcolor:"primary.main"},children:"Trailer"}),w.jsx(rn,{variant:"outlined",sx:{color:"white",borderColor:"white"},children:"Get IMAX Tickets"})]})]}),w.jsx(tg,{sx:{position:"absolute",left:10,top:"50%",color:"white"},onClick:r,children:w.jsx(l8,{})}),w.jsx(tg,{sx:{position:"absolute",right:10,top:"50%",color:"white"},onClick:n,children:w.jsx(g8,{})})]}),w.jsx(u$,{children:wg.map((o,i)=>w.jsx(C$,{src:o.thumbnail,alt:o.title,active:i===e,onClick:()=>t(i)},i))})]})},h$=()=>{var c;const{register:e,handleSubmit:t,control:n,formState:{errors:r}}=QG(),{fields:o,append:i,remove:a}=JJ({control:n,name:"times"}),{data:s}=o0();F.useEffect(()=>{(async()=>{const d=await(await fetch("/api/theaters")).json();setTheaters(d)})()},[]);const l=u=>{const g=u.times.map(I=>I.value),d={theater:u.theater,date:u.date,times:g};console.log(d),TJ.Create(d).then(I=>{console.log(I)}).catch(I=>{console.log(I)})};return w.jsxs("form",{onSubmit:t(l),style:{padding:"20px"},children:[w.jsx(Ee,{variant:"h4",gutterBottom:!0,children:"Add Showtime"}),w.jsxs(at,{container:!0,spacing:2,children:[w.jsx(at,{item:!0,xs:12,children:w.jsxs(ep,{fullWidth:!0,error:!!r.theater,children:[w.jsx(rp,{children:"Theater"}),w.jsxs(gA,{...e("theater",{required:"Theater is required"}),defaultValue:"",children:[w.jsx(is,{value:"",disabled:!0,children:"Select a theater"}),s==null?void 0:s.map(u=>w.jsxs(is,{value:u._id,children:[u.name," "]},u._id))]}),r.theater&&w.jsx("span",{children:r.theater.message})]})}),w.jsx(at,{item:!0,xs:12,children:w.jsx(Vr,{fullWidth:!0,type:"date",label:"Date",InputLabelProps:{shrink:!0},...e("date",{required:"Date is required"}),error:!!r.date,helperText:(c=r.date)==null?void 0:c.message})}),w.jsxs(at,{item:!0,xs:12,children:[w.jsx(Ee,{variant:"h6",children:"Showtimes"}),o.map((u,g)=>{var d,I,C,h,f;return w.jsxs(at,{container:!0,spacing:1,alignItems:"center",children:[w.jsx(at,{item:!0,xs:10,children:w.jsx(Vr,{type:"time",fullWidth:!0,label:`Showtime ${g+1}`,...e(`times.${g}.value`,{required:"Showtime is required"}),error:!!((I=(d=r.times)==null?void 0:d[g])!=null&&I.value),helperText:(f=(h=(C=r.times)==null?void 0:C[g])==null?void 0:h.value)==null?void 0:f.message,InputLabelProps:{shrink:!0}})}),w.jsx(at,{item:!0,xs:2,children:w.jsx(tg,{onClick:()=>a(g),"aria-label":"delete",children:w.jsx(a8,{})})})]},u.id)}),w.jsx(rn,{type:"button",variant:"outlined",onClick:()=>i({value:""}),style:{marginTop:"10px"},children:"Add Showtime"})]}),w.jsx(at,{item:!0,xs:12,children:w.jsx(rn,{type:"submit",variant:"contained",color:"primary",children:"Submit"})})]})]})},m$=(e,t,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const o=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!p$(o,i)&&r||Object.defineProperty(e,n,i)},p$=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},f$=(e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},b$=(e,t)=>`/* Wrapped ${e}*/
${t}`,y$=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Z$=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),v$=(e,t,n)=>{const r=n===""?"":`with ${n.trim()}() `,o=b$.bind(null,r,t.toString());Object.defineProperty(o,"name",Z$),Object.defineProperty(e,"toString",{...y$,value:o})},G$=(e,t,{ignoreNonConfigurable:n=!1}={})=>{const{name:r}=e;for(const o of Reflect.ownKeys(t))m$(e,t,o,n);return f$(e,t),v$(e,t,r),e};var S$=G$,kZ={exports:{}},B$=()=>{const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e};(function(e,t){var n=Yl&&Yl.__awaiter||function(a,s,l,c){return new(l||(l=Promise))(function(u,g){function d(h){try{C(c.next(h))}catch(f){g(f)}}function I(h){try{C(c.throw(h))}catch(f){g(f)}}function C(h){h.done?u(h.value):new l(function(f){f(h.value)}).then(d,I)}C((c=c.apply(a,s||[])).next())})},r=Yl&&Yl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(B$);function i(a,s="maxAge"){let l,c,u;const g=()=>n(this,void 0,void 0,function*(){if(l!==void 0)return;const C=h=>n(this,void 0,void 0,function*(){u=o.default();const f=h[1][s]-Date.now();if(f<=0){a.delete(h[0]),u.resolve();return}return l=h[0],c=setTimeout(()=>{a.delete(h[0]),u&&u.resolve()},f),typeof c.unref=="function"&&c.unref(),u.promise});try{for(const h of a)yield C(h)}catch{}l=void 0}),d=()=>{l=void 0,c!==void 0&&(clearTimeout(c),c=void 0),u!==void 0&&(u.reject(void 0),u=void 0)},I=a.set.bind(a);return a.set=(C,h)=>{a.has(C)&&a.delete(C);const f=I(C,h);return l&&l===C&&d(),g(),f},g(),a}t.default=i,e.exports=i,e.exports.default=i})(kZ,kZ.exports);var w$=kZ.exports;const W$=S$,R$=w$,Wy=new WeakMap,rY=new WeakMap,Zp=(e,{cacheKey:t,cache:n=new Map,maxAge:r}={})=>{typeof r=="number"&&R$(n);const o=function(...i){const a=t?t(i):i[0],s=n.get(a);if(s)return s.data;const l=e.apply(this,i);return n.set(a,{data:l,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),l};return W$(o,e,{ignoreNonConfigurable:!0}),rY.set(o,n),o};Zp.decorator=(e={})=>(t,n,r)=>{const o=t[n];if(typeof o!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!Wy.has(this)){const i=Zp(o,e);return Wy.set(this,i),i}return Wy.get(this)}};Zp.clear=e=>{const t=rY.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if(typeof t.clear!="function")throw new TypeError("The cache Map can't be cleared!");t.clear()};var k$=Zp;const oY=qC(k$);function V$(e){return typeof e=="string"}function X$(e,t,n){return n.indexOf(e)===t}function J$(e){return e.toLowerCase()===e}function sW(e){return e.indexOf(",")===-1?e:e.split(",")}function VZ(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return VZ(n)}if(e.indexOf("@")!==-1){var r=e.split("@")[0],n=r===void 0?"":r;return VZ(n)}if(e.indexOf("-")===-1||!J$(e))return e;var o=e.split("-"),i=o[0],a=o[1],s=a===void 0?"":a;return"".concat(i,"-").concat(s.toUpperCase())}function x$(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,r=n===void 0?!0:n,o=t.fallbackLocale,i=o===void 0?"en-US":o,a=[];if(typeof navigator<"u"){for(var s=navigator.languages||[],l=[],c=0,u=s;c<u.length;c++){var g=u[c];l=l.concat(sW(g))}var d=navigator.language,I=d&&sW(d);a=a.concat(l,I)}return r&&a.push(i),a.filter(V$).map(VZ).filter(X$)}var Y$=oY(x$,{cacheKey:JSON.stringify});function N$(e){return Y$(e)[0]||null}var iY=oY(N$,{cacheKey:JSON.stringify});function _s(e,t,n){return function(o,i){i===void 0&&(i=n);var a=e(o)+i;return t(a)}}function ZA(e){return function(n){return new Date(e(n).getTime()-1)}}function vA(e,t){return function(r){return[e(r),t(r)]}}function $n(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function dg(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function u0(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Wd(e){var t=$n(e),n=t+(-t+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var H$=_s($n,Wd,-100),aY=_s($n,Wd,100),d1=ZA(aY),F$=_s($n,d1,-100),sY=vA(Wd,d1);function ug(e){var t=$n(e),n=t+(-t+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var lY=_s($n,ug,-10),u1=_s($n,ug,10),C0=ZA(u1),gY=_s($n,C0,-10),cY=vA(ug,C0);function Rd(e){var t=$n(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var IY=_s($n,Rd,-1),C1=_s($n,Rd,1),A0=ZA(C1),dY=_s($n,A0,-1),K$=vA(Rd,A0);function A1(e,t){return function(r,o){o===void 0&&(o=t);var i=$n(r),a=dg(r)+o,s=new Date;return s.setFullYear(i,a,1),s.setHours(0,0,0,0),e(s)}}function Gc(e){var t=$n(e),n=dg(e),r=new Date;return r.setFullYear(t,n,1),r.setHours(0,0,0,0),r}var uY=A1(Gc,-1),h1=A1(Gc,1),GA=ZA(h1),CY=A1(GA,-1),L$=vA(Gc,GA);function E$(e,t){return function(r,o){o===void 0&&(o=t);var i=$n(r),a=dg(r),s=u0(r)+o,l=new Date;return l.setFullYear(i,a,s),l.setHours(0,0,0,0),e(l)}}function SA(e){var t=$n(e),n=dg(e),r=u0(e),o=new Date;return o.setFullYear(t,n,r),o.setHours(0,0,0,0),o}var M$=E$(SA,1),m1=ZA(M$),D$=vA(SA,m1);function AY(e){return u0(GA(e))}var Ru,Jr={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},z$=(Ru={},Ru[Jr.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],Ru[Jr.HEBREW]=["he","he-IL"],Ru[Jr.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],Ru),p1=[0,1,2,3,4,5,6],Ry=new Map;function T$(e){return function(n,r){var o=n||iY();Ry.has(o)||Ry.set(o,new Map);var i=Ry.get(o);return i.has(e)||i.set(e,new Intl.DateTimeFormat(o||void 0,e).format),i.get(e)(r)}}function U$(e){var t=new Date(e);return new Date(t.setHours(12))}function Sc(e){return function(t,n){return T$(e)(t,U$(n))}}var j$={day:"numeric"},Q$={day:"numeric",month:"long",year:"numeric"},P$={month:"long"},O$={month:"long",year:"numeric"},_$={weekday:"short"},q$={weekday:"long"},$$={year:"numeric"},eee=Sc(j$),tee=Sc(Q$),nee=Sc(P$),hY=Sc(O$),ree=Sc(_$),oee=Sc(q$),h0=Sc($$),iee=p1[0],aee=p1[5],lW=p1[6];function TC(e,t){t===void 0&&(t=Jr.ISO_8601);var n=e.getDay();switch(t){case Jr.ISO_8601:return(n+6)%7;case Jr.ISLAMIC:return(n+1)%7;case Jr.HEBREW:case Jr.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function see(e){var t=Wd(e);return $n(t)}function lee(e){var t=ug(e);return $n(t)}function XZ(e,t){t===void 0&&(t=Jr.ISO_8601);var n=$n(e),r=dg(e),o=e.getDate()-TC(e,t);return new Date(n,r,o)}function gee(e,t){t===void 0&&(t=Jr.ISO_8601);var n=t===Jr.GREGORY?Jr.GREGORY:Jr.ISO_8601,r=XZ(e,t),o=$n(e)+1,i,a;do i=new Date(o,0,n===Jr.ISO_8601?4:1),a=XZ(i,t),o-=1;while(e<a);return Math.round((r.getTime()-a.getTime())/(864e5*7))+1}function ic(e,t){switch(e){case"century":return Wd(t);case"decade":return ug(t);case"year":return Rd(t);case"month":return Gc(t);case"day":return SA(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function cee(e,t){switch(e){case"century":return H$(t);case"decade":return lY(t);case"year":return IY(t);case"month":return uY(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function mY(e,t){switch(e){case"century":return aY(t);case"decade":return u1(t);case"year":return C1(t);case"month":return h1(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Iee(e,t){switch(e){case"decade":return lY(t,-100);case"year":return IY(t,-10);case"month":return uY(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function dee(e,t){switch(e){case"decade":return u1(t,100);case"year":return C1(t,10);case"month":return h1(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function pY(e,t){switch(e){case"century":return d1(t);case"decade":return C0(t);case"year":return A0(t);case"month":return GA(t);case"day":return m1(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function uee(e,t){switch(e){case"century":return F$(t);case"decade":return gY(t);case"year":return dY(t);case"month":return CY(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Cee(e,t){switch(e){case"decade":return gY(t,-100);case"year":return dY(t,-10);case"month":return CY(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function gW(e,t){switch(e){case"century":return sY(t);case"decade":return cY(t);case"year":return K$(t);case"month":return L$(t);case"day":return D$(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Aee(e,t,n){var r=[t,n].sort(function(o,i){return o.getTime()-i.getTime()});return[ic(e,r[0]),pY(e,r[1])]}function fY(e,t,n){return t===void 0&&(t=h0),n.map(function(r){return t(e,r)}).join(" – ")}function hee(e,t,n){return fY(e,t,sY(n))}function bY(e,t,n){return fY(e,t,cY(n))}function mee(e){return e.getDay()===new Date().getDay()}function yY(e,t){t===void 0&&(t=Jr.ISO_8601);var n=e.getDay();switch(t){case Jr.ISLAMIC:case Jr.HEBREW:return n===aee||n===lW;case Jr.ISO_8601:case Jr.GREGORY:return n===lW||n===iee;default:throw new Error("Unsupported calendar type.")}}var ja="react-calendar__navigation";function pee(e){var t=e.activeStartDate,n=e.drillUp,r=e.formatMonthYear,o=r===void 0?hY:r,i=e.formatYear,a=i===void 0?h0:i,s=e.locale,l=e.maxDate,c=e.minDate,u=e.navigationAriaLabel,g=u===void 0?"":u,d=e.navigationAriaLive,I=e.navigationLabel,C=e.next2AriaLabel,h=C===void 0?"":C,f=e.next2Label,A=f===void 0?"»":f,m=e.nextAriaLabel,p=m===void 0?"":m,Z=e.nextLabel,v=Z===void 0?"›":Z,k=e.prev2AriaLabel,B=k===void 0?"":k,y=e.prev2Label,W=y===void 0?"«":y,G=e.prevAriaLabel,R=G===void 0?"":G,X=e.prevLabel,Y=X===void 0?"‹":X,x=e.setActiveStartDate,D=e.showDoubleView,L=e.view,M=e.views,K=M.indexOf(L)>0,E=L!=="century",O=cee(L,t),re=E?Iee(L,t):void 0,H=mY(L,t),z=E?dee(L,t):void 0,j=function(){if(O.getFullYear()<0)return!0;var ke=uee(L,t);return c&&c>=ke}(),$=E&&function(){if(re.getFullYear()<0)return!0;var ke=Cee(L,t);return c&&c>=ke}(),ee=l&&l<H,le=E&&l&&l<z;function Ie(){x(O,"prev")}function Ae(){x(re,"prev2")}function Ge(){x(H,"next")}function We(){x(z,"next2")}function Je(ke){var ye=function(){switch(L){case"century":return hee(s,a,ke);case"decade":return bY(s,a,ke);case"year":return a(s,ke);case"month":return o(s,ke);default:throw new Error("Invalid view: ".concat(L,"."))}}();return I?I({date:ke,label:ye,locale:s||iY()||void 0,view:L}):ye}function ze(){var ke="".concat(ja,"__label");return w.jsxs("button",{"aria-label":g,"aria-live":d,className:ke,disabled:!K,onClick:n,style:{flexGrow:1},type:"button",children:[w.jsx("span",{className:"".concat(ke,"__labelText ").concat(ke,"__labelText--from"),children:Je(t)}),D?w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"".concat(ke,"__divider"),children:" – "}),w.jsx("span",{className:"".concat(ke,"__labelText ").concat(ke,"__labelText--to"),children:Je(H)})]}):null]})}return w.jsxs("div",{className:ja,children:[W!==null&&E?w.jsx("button",{"aria-label":B,className:"".concat(ja,"__arrow ").concat(ja,"__prev2-button"),disabled:$,onClick:Ae,type:"button",children:W}):null,Y!==null&&w.jsx("button",{"aria-label":R,className:"".concat(ja,"__arrow ").concat(ja,"__prev-button"),disabled:j,onClick:Ie,type:"button",children:Y}),ze(),v!==null&&w.jsx("button",{"aria-label":p,className:"".concat(ja,"__arrow ").concat(ja,"__next-button"),disabled:ee,onClick:Ge,type:"button",children:v}),A!==null&&E?w.jsx("button",{"aria-label":h,className:"".concat(ja,"__arrow ").concat(ja,"__next2-button"),disabled:le,onClick:We,type:"button",children:A}):null]})}var BI=function(){return BI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},BI.apply(this,arguments)},fee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function cW(e){return"".concat(e,"%")}function f1(e){var t=e.children,n=e.className,r=e.count,o=e.direction,i=e.offset,a=e.style,s=e.wrap,l=fee(e,["children","className","count","direction","offset","style","wrap"]);return w.jsx("div",BI({className:n,style:BI({display:"flex",flexDirection:o,flexWrap:s?"wrap":"nowrap"},a)},l,{children:F.Children.map(t,function(c,u){var g=i&&u===0?cW(100*i/r):null;return F.cloneElement(c,BI(BI({},c.props),{style:{flexBasis:cW(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:g,marginInlineStart:g,marginInlineEnd:0}}))})}))}function bee(e,t,n){return t&&t>e?t:n&&n<e?n:e}function UC(e,t){return t[0]<=e&&t[1]>=e}function yee(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function ZY(e,t){return UC(e[0],t)||UC(e[1],t)}function IW(e,t,n){var r=ZY(t,e),o=[];if(r){o.push(n);var i=UC(e[0],t),a=UC(e[1],t);i&&o.push("".concat(n,"Start")),a&&o.push("".concat(n,"End")),i&&a&&o.push("".concat(n,"BothEnds"))}return o}function Zee(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function vee(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,r=e.hover,o="react-calendar__tile",i=[o];if(!n)return i;var a=new Date,s=function(){if(Array.isArray(n))return n;var I=e.dateType;if(!I)throw new Error("dateType is required when date is not an array of two dates");return gW(I,n)}();if(UC(a,s)&&i.push("".concat(o,"--now")),!t||!Zee(t))return i;var l=function(){if(Array.isArray(t))return t;var I=e.valueType;if(!I)throw new Error("valueType is required when value is not an array of two dates");return gW(I,t)}();yee(l,s)?i.push("".concat(o,"--active")):ZY(l,s)&&i.push("".concat(o,"--hasActive"));var c=IW(l,s,"".concat(o,"--range"));i.push.apply(i,c);var u=Array.isArray(t)?t:[t];if(r&&u.length===1){var g=r>l[0]?[l[0],r]:[r,l[0]],d=IW(g,s,"".concat(o,"--hover"));i.push.apply(i,d)}return i}function m0(e){for(var t=e.className,n=e.count,r=n===void 0?3:n,o=e.dateTransform,i=e.dateType,a=e.end,s=e.hover,l=e.offset,c=e.renderTile,u=e.start,g=e.step,d=g===void 0?1:g,I=e.value,C=e.valueType,h=[],f=u;f<=a;f+=d){var A=o(f);h.push(c({classes:vee({date:A,dateType:i,hover:s,value:I,valueType:C}),date:A}))}return w.jsx(f1,{className:t,count:r,offset:l,wrap:!0,children:h})}function p0(e){var t=e.activeStartDate,n=e.children,r=e.classes,o=e.date,i=e.formatAbbr,a=e.locale,s=e.maxDate,l=e.maxDateTransform,c=e.minDate,u=e.minDateTransform,g=e.onClick,d=e.onMouseOver,I=e.style,C=e.tileClassName,h=e.tileContent,f=e.tileDisabled,A=e.view,m=F.useMemo(function(){var Z={activeStartDate:t,date:o,view:A};return typeof C=="function"?C(Z):C},[t,o,C,A]),p=F.useMemo(function(){var Z={activeStartDate:t,date:o,view:A};return typeof h=="function"?h(Z):h},[t,o,h,A]);return w.jsxs("button",{className:nt(r,m),disabled:c&&u(c)>o||s&&l(s)<o||f&&f({activeStartDate:t,date:o,view:A}),onClick:g?function(Z){return g(o,Z)}:void 0,onFocus:d?function(){return d(o)}:void 0,onMouseOver:d?function(){return d(o)}:void 0,style:I,type:"button",children:[i?w.jsx("abbr",{"aria-label":i(a,o),children:n}):n,p]})}var JZ=function(){return JZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},JZ.apply(this,arguments)},Gee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},dW="react-calendar__century-view__decades__decade";function See(e){var t=e.classes,n=t===void 0?[]:t,r=e.currentCentury,o=e.formatYear,i=o===void 0?h0:o,a=Gee(e,["classes","currentCentury","formatYear"]),s=a.date,l=a.locale,c=[];return n&&c.push.apply(c,n),c.push(dW),Wd(s).getFullYear()!==r&&c.push("".concat(dW,"--neighboringCentury")),w.jsx(p0,JZ({},a,{classes:c,maxDateTransform:C0,minDateTransform:ug,view:"century",children:bY(l,i,s)}))}var xZ=function(){return xZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},xZ.apply(this,arguments)},uW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function Bee(e){var t=e.activeStartDate,n=e.hover,r=e.showNeighboringCentury,o=e.value,i=e.valueType,a=uW(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),s=see(t),l=s+(r?119:99);return w.jsx(m0,{className:"react-calendar__century-view__decades",dateTransform:ug,dateType:"decade",end:l,hover:n,renderTile:function(c){var u=c.date,g=uW(c,["date"]);return w.jsx(See,xZ({},a,g,{activeStartDate:t,currentCentury:s,date:u}),u.getTime())},start:s,step:10,value:o,valueType:i})}var YZ=function(){return YZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},YZ.apply(this,arguments)};function wee(e){function t(){return w.jsx(Bee,YZ({},e))}return w.jsx("div",{className:"react-calendar__century-view",children:t()})}var NZ=function(){return NZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},NZ.apply(this,arguments)},Wee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},CW="react-calendar__decade-view__years__year";function Ree(e){var t=e.classes,n=t===void 0?[]:t,r=e.currentDecade,o=e.formatYear,i=o===void 0?h0:o,a=Wee(e,["classes","currentDecade","formatYear"]),s=a.date,l=a.locale,c=[];return n&&c.push.apply(c,n),c.push(CW),ug(s).getFullYear()!==r&&c.push("".concat(CW,"--neighboringDecade")),w.jsx(p0,NZ({},a,{classes:c,maxDateTransform:A0,minDateTransform:Rd,view:"decade",children:i(l,s)}))}var HZ=function(){return HZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},HZ.apply(this,arguments)},AW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function kee(e){var t=e.activeStartDate,n=e.hover,r=e.showNeighboringDecade,o=e.value,i=e.valueType,a=AW(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),s=lee(t),l=s+(r?11:9);return w.jsx(m0,{className:"react-calendar__decade-view__years",dateTransform:Rd,dateType:"year",end:l,hover:n,renderTile:function(c){var u=c.date,g=AW(c,["date"]);return w.jsx(Ree,HZ({},a,g,{activeStartDate:t,currentDecade:s,date:u}),u.getTime())},start:s,value:o,valueType:i})}var FZ=function(){return FZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},FZ.apply(this,arguments)};function Vee(e){function t(){return w.jsx(kee,FZ({},e))}return w.jsx("div",{className:"react-calendar__decade-view",children:t()})}var KZ=function(){return KZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},KZ.apply(this,arguments)},Xee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},hW=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Jee="react-calendar__year-view__months__month";function xee(e){var t=e.classes,n=t===void 0?[]:t,r=e.formatMonth,o=r===void 0?nee:r,i=e.formatMonthYear,a=i===void 0?hY:i,s=Xee(e,["classes","formatMonth","formatMonthYear"]),l=s.date,c=s.locale;return w.jsx(p0,KZ({},s,{classes:hW(hW([],n,!0),[Jee],!1),formatAbbr:a,maxDateTransform:GA,minDateTransform:Gc,view:"year",children:o(c,l)}))}var LZ=function(){return LZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},LZ.apply(this,arguments)},mW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function Yee(e){var t=e.activeStartDate,n=e.hover,r=e.value,o=e.valueType,i=mW(e,["activeStartDate","hover","value","valueType"]),a=0,s=11,l=$n(t);return w.jsx(m0,{className:"react-calendar__year-view__months",dateTransform:function(c){var u=new Date;return u.setFullYear(l,c,1),Gc(u)},dateType:"month",end:s,hover:n,renderTile:function(c){var u=c.date,g=mW(c,["date"]);return w.jsx(xee,LZ({},i,g,{activeStartDate:t,date:u}),u.getTime())},start:a,value:r,valueType:o})}var EZ=function(){return EZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},EZ.apply(this,arguments)};function Nee(e){function t(){return w.jsx(Yee,EZ({},e))}return w.jsx("div",{className:"react-calendar__year-view",children:t()})}var MZ=function(){return MZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},MZ.apply(this,arguments)},Hee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},ky="react-calendar__month-view__days__day";function Fee(e){var t=e.calendarType,n=e.classes,r=n===void 0?[]:n,o=e.currentMonthIndex,i=e.formatDay,a=i===void 0?eee:i,s=e.formatLongDate,l=s===void 0?tee:s,c=Hee(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),u=c.date,g=c.locale,d=[];return r&&d.push.apply(d,r),d.push(ky),yY(u,t)&&d.push("".concat(ky,"--weekend")),u.getMonth()!==o&&d.push("".concat(ky,"--neighboringMonth")),w.jsx(p0,MZ({},c,{classes:d,formatAbbr:l,maxDateTransform:m1,minDateTransform:SA,view:"month",children:a(g,u)}))}var DZ=function(){return DZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},DZ.apply(this,arguments)},pW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function Kee(e){var t=e.activeStartDate,n=e.calendarType,r=e.hover,o=e.showFixedNumberOfWeeks,i=e.showNeighboringMonth,a=e.value,s=e.valueType,l=pW(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),c=$n(t),u=dg(t),g=o||i,d=TC(t,n),I=g?0:d,C=(g?-d:0)+1,h=function(){if(o)return C+6*7-1;var f=AY(t);if(i){var A=new Date;A.setFullYear(c,u,f),A.setHours(0,0,0,0);var m=7-TC(A,n)-1;return f+m}return f}();return w.jsx(m0,{className:"react-calendar__month-view__days",count:7,dateTransform:function(f){var A=new Date;return A.setFullYear(c,u,f),SA(A)},dateType:"day",hover:r,end:h,renderTile:function(f){var A=f.date,m=pW(f,["date"]);return w.jsx(Fee,DZ({},l,m,{activeStartDate:t,calendarType:n,currentMonthIndex:u,date:A}),A.getTime())},offset:I,start:C,value:a,valueType:s})}var vY="react-calendar__month-view__weekdays",Vy="".concat(vY,"__weekday");function Lee(e){for(var t=e.calendarType,n=e.formatShortWeekday,r=n===void 0?ree:n,o=e.formatWeekday,i=o===void 0?oee:o,a=e.locale,s=e.onMouseLeave,l=new Date,c=Gc(l),u=$n(c),g=dg(c),d=[],I=1;I<=7;I+=1){var C=new Date(u,g,I-TC(c,t)),h=i(a,C);d.push(w.jsx("div",{className:nt(Vy,mee(C)&&"".concat(Vy,"--current"),yY(C,t)&&"".concat(Vy,"--weekend")),children:w.jsx("abbr",{"aria-label":h,title:h,children:r(a,C).replace(".","")})},I))}return w.jsx(f1,{className:vY,count:7,onFocus:s,onMouseOver:s,children:d})}var vp=function(){return vp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},vp.apply(this,arguments)},fW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},bW="react-calendar__tile";function Eee(e){var t=e.onClickWeekNumber,n=e.weekNumber,r=w.jsx("span",{children:n});if(t){var o=e.date,i=e.onClickWeekNumber,a=e.weekNumber,s=fW(e,["date","onClickWeekNumber","weekNumber"]);return w.jsx("button",vp({},s,{className:bW,onClick:function(l){return i(a,o,l)},type:"button",children:r}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var s=fW(e,["date","onClickWeekNumber","weekNumber"]);return w.jsx("div",vp({},s,{className:bW,children:r}))}}function Mee(e){var t=e.activeStartDate,n=e.calendarType,r=e.onClickWeekNumber,o=e.onMouseLeave,i=e.showFixedNumberOfWeeks,a=function(){if(i)return 6;var c=AY(t),u=TC(t,n),g=c-(7-u);return 1+Math.ceil(g/7)}(),s=function(){for(var c=$n(t),u=dg(t),g=u0(t),d=[],I=0;I<a;I+=1)d.push(XZ(new Date(c,u,g+I*7),n));return d}(),l=s.map(function(c){return gee(c,n)});return w.jsx(f1,{className:"react-calendar__month-view__weekNumbers",count:a,direction:"column",onFocus:o,onMouseOver:o,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:l.map(function(c,u){var g=s[u];if(!g)throw new Error("date is not defined");return w.jsx(Eee,{date:g,onClickWeekNumber:r,weekNumber:c},c)})})}var zZ=function(){return zZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},zZ.apply(this,arguments)},Dee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function zee(e){if(e)for(var t=0,n=Object.entries(z$);t<n.length;t++){var r=n[t],o=r[0],i=r[1];if(i.includes(e))return o}return Jr.ISO_8601}function Tee(e){var t=e.activeStartDate,n=e.locale,r=e.onMouseLeave,o=e.showFixedNumberOfWeeks,i=e.calendarType,a=i===void 0?zee(n):i,s=e.formatShortWeekday,l=e.formatWeekday,c=e.onClickWeekNumber,u=e.showWeekNumbers,g=Dee(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function d(){return w.jsx(Lee,{calendarType:a,formatShortWeekday:s,formatWeekday:l,locale:n,onMouseLeave:r})}function I(){return u?w.jsx(Mee,{activeStartDate:t,calendarType:a,onClickWeekNumber:c,onMouseLeave:r,showFixedNumberOfWeeks:o}):null}function C(){return w.jsx(Kee,zZ({calendarType:a},g))}var h="react-calendar__month-view";return w.jsx("div",{className:nt(h,u?"".concat(h,"--weekNumbers"):""),children:w.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[I(),w.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[d(),C()]})]})})}var wI=function(){return wI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},wI.apply(this,arguments)},Uh="react-calendar",hm=["century","decade","year","month"],Uee=["decade","year","month","day"],b1=new Date;b1.setFullYear(1,0,1);b1.setHours(0,0,0,0);var jee=new Date(864e13);function zu(e){return e instanceof Date?e:new Date(e)}function GY(e,t){return hm.slice(hm.indexOf(e),hm.indexOf(t)+1)}function Qee(e,t,n){var r=GY(t,n);return r.indexOf(e)!==-1}function y1(e,t,n){return e&&Qee(e,t,n)?e:n}function SY(e){var t=hm.indexOf(e);return Uee[t]}function Pee(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var r=zu(n);if(isNaN(r.getTime()))throw new Error("Invalid date: ".concat(e));return r}function BY(e,t){var n=e.value,r=e.minDate,o=e.maxDate,i=e.maxDetail,a=Pee(n,t);if(!a)return null;var s=SY(i),l=function(){switch(t){case 0:return ic(s,a);case 1:return pY(s,a);default:throw new Error("Invalid index value: ".concat(t))}}();return bee(l,r,o)}var Z1=function(e){return BY(e,0)},wY=function(e){return BY(e,1)},Oee=function(e){return[Z1,wY].map(function(t){return t(e)})};function WY(e){var t=e.maxDate,n=e.maxDetail,r=e.minDate,o=e.minDetail,i=e.value,a=e.view,s=y1(a,o,n),l=Z1({value:i,minDate:r,maxDate:t,maxDetail:n})||new Date;return ic(s,l)}function _ee(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,r=e.defaultValue,o=e.defaultView,i=e.maxDate,a=e.maxDetail,s=e.minDate,l=e.minDetail,c=e.value,u=e.view,g=y1(u,l,a),d=t||n;return d?ic(g,d):WY({maxDate:i,maxDetail:a,minDate:s,minDetail:l,value:c||r,view:u||o})}function Xy(e){return e&&(!Array.isArray(e)||e.length===1)}function jh(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var qee=F.forwardRef(function(t,n){var r=t.activeStartDate,o=t.allowPartialRange,i=t.calendarType,a=t.className,s=t.defaultActiveStartDate,l=t.defaultValue,c=t.defaultView,u=t.formatDay,g=t.formatLongDate,d=t.formatMonth,I=t.formatMonthYear,C=t.formatShortWeekday,h=t.formatWeekday,f=t.formatYear,A=t.goToRangeStartOnSelect,m=A===void 0?!0:A,p=t.inputRef,Z=t.locale,v=t.maxDate,k=v===void 0?jee:v,B=t.maxDetail,y=B===void 0?"month":B,W=t.minDate,G=W===void 0?b1:W,R=t.minDetail,X=R===void 0?"century":R,Y=t.navigationAriaLabel,x=t.navigationAriaLive,D=t.navigationLabel,L=t.next2AriaLabel,M=t.next2Label,K=t.nextAriaLabel,E=t.nextLabel,O=t.onActiveStartDateChange,re=t.onChange,H=t.onClickDay,z=t.onClickDecade,j=t.onClickMonth,$=t.onClickWeekNumber,ee=t.onClickYear,le=t.onDrillDown,Ie=t.onDrillUp,Ae=t.onViewChange,Ge=t.prev2AriaLabel,We=t.prev2Label,Je=t.prevAriaLabel,ze=t.prevLabel,ke=t.returnValue,ye=ke===void 0?"start":ke,oe=t.selectRange,ct=t.showDoubleView,te=t.showFixedNumberOfWeeks,ie=t.showNavigation,ge=ie===void 0?!0:ie,be=t.showNeighboringCentury,Ze=t.showNeighboringDecade,he=t.showNeighboringMonth,Ne=he===void 0?!0:he,rt=t.showWeekNumbers,st=t.tileClassName,$e=t.tileContent,ht=t.tileDisabled,dt=t.value,Zt=t.view,Ke=F.useState(s),mn=Ke[0],Rt=Ke[1],mt=F.useState(null),pt=mt[0],Nt=mt[1],er=F.useState(Array.isArray(l)?l.map(function(He){return He!==null?zu(He):null}):l!=null?zu(l):null),Ot=er[0],Ia=er[1],Rn=F.useState(c),zr=Rn[0],Wo=Rn[1],Qt=r||mn||_ee({activeStartDate:r,defaultActiveStartDate:s,defaultValue:l,defaultView:c,maxDate:k,maxDetail:y,minDate:G,minDetail:X,value:dt,view:Zt}),yt=function(){var He=function(){return oe&&Xy(Ot)?Ot:dt!==void 0?dt:Ot}();return He?Array.isArray(He)?He.map(function(tt){return tt!==null?zu(tt):null}):He!==null?zu(He):null:null}(),qt=SY(y),cn=y1(Zt||zr,X,y),pn=GY(X,y),Do=oe?pt:null,eo=pn.indexOf(cn)<pn.length-1,St=pn.indexOf(cn)>0,Nr=F.useCallback(function(He){var tt=function(){switch(ye){case"start":return Z1;case"end":return wY;case"range":return Oee;default:throw new Error("Invalid returnValue.")}}();return tt({maxDate:k,maxDetail:y,minDate:G,value:He})},[k,y,G,ye]),to=F.useCallback(function(He,tt){Rt(He);var _e={action:tt,activeStartDate:He,value:yt,view:cn};O&&!jh(Qt,He)&&O(_e)},[Qt,O,yt,cn]),Ar=F.useCallback(function(He,tt){var _e=function(){switch(cn){case"century":return z;case"decade":return ee;case"year":return j;case"month":return H;default:throw new Error("Invalid view: ".concat(cn,"."))}}();_e&&_e(He,tt)},[H,z,j,ee,cn]),Un=F.useCallback(function(He,tt){if(eo){Ar(He,tt);var _e=pn[pn.indexOf(cn)+1];if(!_e)throw new Error("Attempted to drill down from the lowest view.");Rt(He),Wo(_e);var gt={action:"drillDown",activeStartDate:He,value:yt,view:_e};O&&!jh(Qt,He)&&O(gt),Ae&&cn!==_e&&Ae(gt),le&&le(gt)}},[Qt,eo,O,Ar,le,Ae,yt,cn,pn]),se=F.useCallback(function(){if(St){var He=pn[pn.indexOf(cn)-1];if(!He)throw new Error("Attempted to drill up from the highest view.");var tt=ic(He,Qt);Rt(tt),Wo(He);var _e={action:"drillUp",activeStartDate:tt,value:yt,view:He};O&&!jh(Qt,tt)&&O(_e),Ae&&cn!==He&&Ae(_e),Ie&&Ie(_e)}},[Qt,St,O,Ie,Ae,yt,cn,pn]),de=F.useCallback(function(He,tt){var _e=yt;Ar(He,tt);var gt=oe&&!Xy(_e),Xt;if(oe)if(gt)Xt=ic(qt,He);else{if(!_e)throw new Error("previousValue is required");if(Array.isArray(_e))throw new Error("previousValue must not be an array");Xt=Aee(qt,_e,He)}else Xt=Nr(He);var _t=!oe||gt||m?WY({maxDate:k,maxDetail:y,minDate:G,minDetail:X,value:Xt,view:cn}):null;tt.persist(),Rt(_t),Ia(Xt);var ln={action:"onChange",activeStartDate:_t,value:Xt,view:cn};if(O&&!jh(Qt,_t)&&O(ln),re)if(oe){var Tt=Xy(Xt);if(!Tt)re(Xt||null,tt);else if(o){if(Array.isArray(Xt))throw new Error("value must not be an array");re([Xt||null,null],tt)}}else re(Xt||null,tt)},[Qt,o,Nr,m,k,y,G,X,O,re,Ar,oe,yt,qt,cn]);function we(He){Nt(He)}function Fe(){Nt(null)}F.useImperativeHandle(n,function(){return{activeStartDate:Qt,drillDown:Un,drillUp:se,onChange:de,setActiveStartDate:to,value:yt,view:cn}},[Qt,Un,se,de,to,yt,cn]);function it(He){var tt=He?mY(cn,Qt):ic(cn,Qt),_e=eo?Un:de,gt={activeStartDate:tt,hover:Do,locale:Z,maxDate:k,minDate:G,onClick:_e,onMouseOver:oe?we:void 0,tileClassName:st,tileContent:$e,tileDisabled:ht,value:yt,valueType:qt};switch(cn){case"century":return w.jsx(wee,wI({formatYear:f,showNeighboringCentury:be},gt));case"decade":return w.jsx(Vee,wI({formatYear:f,showNeighboringDecade:Ze},gt));case"year":return w.jsx(Nee,wI({formatMonth:d,formatMonthYear:I},gt));case"month":return w.jsx(Tee,wI({calendarType:i,formatDay:u,formatLongDate:g,formatShortWeekday:C,formatWeekday:h,onClickWeekNumber:$,onMouseLeave:oe?Fe:void 0,showFixedNumberOfWeeks:typeof te<"u"?te:ct,showNeighboringMonth:Ne,showWeekNumbers:rt},gt));default:throw new Error("Invalid view: ".concat(cn,"."))}}function At(){return ge?w.jsx(pee,{activeStartDate:Qt,drillUp:se,formatMonthYear:I,formatYear:f,locale:Z,maxDate:k,minDate:G,navigationAriaLabel:Y,navigationAriaLive:x,navigationLabel:D,next2AriaLabel:L,next2Label:M,nextAriaLabel:K,nextLabel:E,prev2AriaLabel:Ge,prev2Label:We,prevAriaLabel:Je,prevLabel:ze,setActiveStartDate:to,showDoubleView:ct,view:cn,views:pn}):null}var Gt=Array.isArray(yt)?yt:[yt];return w.jsxs("div",{className:nt(Uh,oe&&Gt.length===1&&"".concat(Uh,"--selectRange"),ct&&"".concat(Uh,"--doubleView"),a),ref:p,children:[At(),w.jsxs("div",{className:"".concat(Uh,"__viewContainer"),onBlur:oe?Fe:void 0,onMouseLeave:oe?Fe:void 0,children:[it(),ct?it(!0):null]})]})});const $ee=et(je)({display:"flex",width:"100%",maxWidth:"1000px",height:"600px",borderRadius:"20px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}),ete=et(je)({width:"30%",backgroundColor:"#001529",padding:"20px",color:"white"}),tte=et(je)({width:"70%",backgroundColor:"#002548",padding:"20px",color:"white"}),nte=et(qee)({width:"100%",backgroundColor:"transparent",border:"none",color:"white",".react-calendar__navigation":{display:"flex",justifyContent:"space-between",marginBottom:"20px"},".react-calendar__navigation__label":{color:"#fff",fontSize:"18px",fontWeight:"bold",backgroundColor:"transparent","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},".react-calendar__navigation__arrow":{color:"#fff",fontSize:"24px",background:"none",border:"none","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},".react-calendar__month-view__weekdays":{textTransform:"uppercase",fontWeight:"bold",fontSize:"14px",marginBottom:"10px",color:"#4f9eff"},".react-calendar__month-view__weekdays__weekday":{color:"#4f9eff",abbr:{textDecoration:"none"}},".react-calendar__month-view__days__day":{color:"#fff",fontSize:"16px"},".react-calendar__tile":{padding:"10px",backgroundColor:"transparent",borderRadius:"50%",color:"#fff","&:enabled:hover, &:enabled:focus":{backgroundColor:"rgba(79, 158, 255, 0.3)"}},".react-calendar__tile--now":{backgroundColor:"rgba(79, 158, 255, 0.2)",color:"#fff"},".react-calendar__tile--active":{backgroundColor:"#4f9eff",color:"#fff","&:enabled:hover":{backgroundColor:"#4f9eff"}},".react-calendar__month-view__days__day--neighboringMonth":{color:"rgba(255,255,255,0.3)"},".highlighted-date":{backgroundColor:"pink",color:"#000",borderRadius:"50%"}}),rte=()=>{const[e,t]=F.useState(new Date),[n,r]=F.useState([]),o=Dr(c=>c.SetSelectedDate),a=Dr(c=>c.selectedTheater);F.useEffect(()=>{(async()=>{try{const u=await hn.get(`https://azure-reservation-app.azurewebsites.net/api/showtimes/events/${a}`);r(u.data),console.log("Showtimes:",u.data)}catch(u){console.error("Error fetching showtimes:",u)}})()},[a]);const s=c=>{t(c),o(c)},l=({date:c,view:u})=>{if(u==="month"){const g=c.toLocaleDateString("en-CA");if(n.map(I=>new Date(I.date).toLocaleDateString("en-CA")).includes(g))return"highlighted-date"}return null};return w.jsxs($ee,{children:[w.jsxs(ete,{children:[w.jsx(Ee,{variant:"h1",sx:{fontSize:"72px",fontWeight:"bold"},children:e.getDate()}),w.jsx(Ee,{variant:"h4",sx:{textTransform:"uppercase"},children:e.toLocaleString("default",{month:"long"})}),w.jsx(Ee,{variant:"h4",children:e.getFullYear()}),w.jsx(Ee,{variant:"h6",sx:{mt:4,mb:2},children:"TO DO"}),w.jsx(je,{sx:{bgcolor:"rgba(255,255,255,0.2)",p:1,mb:1},children:w.jsx(Ee,{variant:"body2",children:"NOTES TO BE MADE"})}),w.jsx(je,{sx:{bgcolor:"rgba(255,255,255,0.2)",p:1},children:w.jsx(Ee,{variant:"body2",children:"DON'T FORGET ABOUT B-DAY"})}),w.jsx(Ee,{variant:"h6",sx:{mt:4,mb:2},children:"SCHEDULE"}),w.jsx(at,{container:!0,spacing:1,children:[{time:"10:00 - 01:10",task:"CLASSES"},{time:"02:00 - 05:00",task:"GAMING"},{time:"07:00 - 08:30",task:"HOMEWORK"},{time:"10:00 - 12:30",task:"CODING"}].map((c,u)=>w.jsxs(qe.Fragment,{children:[w.jsx(at,{item:!0,xs:5,children:w.jsx(Ee,{variant:"body2",sx:{bgcolor:"rgba(255,255,255,0.2)",p:.5},children:c.time})}),w.jsx(at,{item:!0,xs:7,children:w.jsx(Ee,{variant:"body2",sx:{bgcolor:"rgba(255,255,255,0.2)",p:.5},children:c.task})})]},u))})]}),w.jsxs(tte,{children:[w.jsx(Ee,{variant:"h6",sx:{mb:2},children:"SELECT DATE"}),w.jsx(nte,{onChange:s,value:e,formatShortWeekday:(c,u)=>["SUN","MON","TUS","WED","THUR","FRI","SAT"][u.getDay()],tileClassName:l})]})]})},ote="/assets/movie1-DbL2Rma8.jpg",ite="/assets/movie2-DjEj8Lhf.jpg",ate="/assets/movie3-CqlkGGI2.jpg",Jy=[ote,ite,ate],xy=["#e3d5b8","#b8c5e3","#e3b8c5"],ste=et(je)(({theme:e})=>({width:"100%",height:"500px",[e.breakpoints.down("md")]:{height:"auto"},position:"relative",overflow:"hidden",borderRadius:"16px",display:"flex"})),lte=et(je)({position:"absolute",top:0,left:0,right:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(20px)",transform:"scale(1.1)"}),gte=et(je)(({theme:e})=>({position:"relative",zIndex:1,display:"flex",width:"100%",height:"100%",[e.breakpoints.down("md")]:{flexDirection:"column"}})),cte=et(je)(({theme:e})=>({width:"50%",padding:"40px",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",[e.breakpoints.down("md")]:{width:"100%",padding:"20px"}})),Ite=et(je)(({theme:e})=>({width:"50%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",[e.breakpoints.down("md")]:{width:"100%",height:"300px"}})),dte=et("img")({maxWidth:"80%",maxHeight:"80%",objectFit:"contain",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),ute=et(rn)(({color:e})=>({marginTop:"20px",backgroundColor:e,color:"#091057",padding:"12px 32px",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",width:"fit-content",textTransform:"none",transition:"all 0.3s ease","&:hover":{backgroundColor:e,opacity:.9,transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0,0,0,0.2)"}})),Cte=()=>{const[e,t]=F.useState(0),n=As(),r=Um(n.breakpoints.down("md"));F.useEffect(()=>{const i=setInterval(()=>{t(a=>(a+1)%Jy.length)},5e3);return()=>clearInterval(i)},[]);const o=()=>{window.scrollBy({top:570,left:0,behavior:"smooth"})};return w.jsx(je,{sx:{width:"100%",padding:0,margin:0},children:w.jsxs(ste,{children:[w.jsx(lte,{style:{backgroundImage:`url(${Jy[e]})`}}),w.jsxs(gte,{children:[w.jsxs(cte,{children:[w.jsx(Ee,{variant:r?"h4":"h3",sx:{color:xy[e],marginBottom:2,fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"Your Next Great Event Starts Here!"}),w.jsx(Ee,{variant:"body1",sx:{color:xy[e],marginBottom:3,fontSize:"1.1rem",textShadow:"1px 1px 2px rgba(0,0,0,0.3)"},children:"Experience Unforgettable Moments, One Click Away!"}),w.jsx(ute,{color:xy[e],onClick:o,children:"Book Now"})]}),w.jsx(Ite,{children:w.jsx(dte,{src:Jy[e],alt:`Slide ${e+1}`})})]})]})})},RY=6048e5,Ate=864e5,yW=Symbol.for("constructDateFrom");function ig(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&yW in e?e[yW](t):e instanceof Date?new e.constructor(t):new Date(t)}function Fa(e,t){return ig(t||e,e)}let hte={};function f0(){return hte}function jC(e,t){var s,l,c,u;const n=f0(),r=(t==null?void 0:t.weekStartsOn)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,o=Fa(e,t==null?void 0:t.in),i=o.getDay(),a=(i<r?7:0)+i-r;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function Gp(e,t){return jC(e,{...t,weekStartsOn:1})}function kY(e,t){const n=Fa(e,t==null?void 0:t.in),r=n.getFullYear(),o=ig(n,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const i=Gp(o),a=ig(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const s=Gp(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function ZW(e){const t=Fa(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function mte(e,...t){const n=ig.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function vW(e,t){const n=Fa(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function pte(e,t,n){const[r,o]=mte(n==null?void 0:n.in,e,t),i=vW(r),a=vW(o),s=+i-ZW(i),l=+a-ZW(a);return Math.round((s-l)/Ate)}function fte(e,t){const n=kY(e,t),r=ig(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Gp(r)}function bte(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function yte(e){return!(!bte(e)&&typeof e!="number"||isNaN(+Fa(e)))}function Zte(e,t){const n=Fa(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const vte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Gte=(e,t,n)=>{let r;const o=vte[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Yy(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Ste={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Bte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Wte={date:Yy({formats:Ste,defaultWidth:"full"}),time:Yy({formats:Bte,defaultWidth:"full"}),dateTime:Yy({formats:wte,defaultWidth:"full"})},Rte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},kte=(e,t,n,r)=>Rte[e];function ku(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):a;o=e.formattingValues[s]||e.formattingValues[a]}else{const a=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;o=e.values[s]||e.values[a]}const i=e.argumentCallback?e.argumentCallback(t):t;return o[i]}}const Vte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Jte={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},xte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Yte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Nte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hte=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Fte={ordinalNumber:Hte,era:ku({values:Vte,defaultWidth:"wide"}),quarter:ku({values:Xte,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ku({values:Jte,defaultWidth:"wide"}),day:ku({values:xte,defaultWidth:"wide"}),dayPeriod:ku({values:Yte,defaultWidth:"wide",formattingValues:Nte,defaultFormattingWidth:"wide"})};function Vu(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;const a=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?Lte(s,g=>g.test(a)):Kte(s,g=>g.test(a));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=t.slice(a.length);return{value:c,rest:u}}}function Kte(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Lte(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Ete(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const s=t.slice(o.length);return{value:a,rest:s}}}const Mte=/^(\d+)(th|st|nd|rd)?/i,Dte=/\d+/i,zte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Tte={any:[/^b/i,/^(a|c)/i]},Ute={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jte={any:[/1/i,/2/i,/3/i,/4/i]},Qte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ote={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_te={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$te={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ene={ordinalNumber:Ete({matchPattern:Mte,parsePattern:Dte,valueCallback:e=>parseInt(e,10)}),era:Vu({matchPatterns:zte,defaultMatchWidth:"wide",parsePatterns:Tte,defaultParseWidth:"any"}),quarter:Vu({matchPatterns:Ute,defaultMatchWidth:"wide",parsePatterns:jte,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Vu({matchPatterns:Qte,defaultMatchWidth:"wide",parsePatterns:Pte,defaultParseWidth:"any"}),day:Vu({matchPatterns:Ote,defaultMatchWidth:"wide",parsePatterns:_te,defaultParseWidth:"any"}),dayPeriod:Vu({matchPatterns:qte,defaultMatchWidth:"any",parsePatterns:$te,defaultParseWidth:"any"})},tne={code:"en-US",formatDistance:Gte,formatLong:Wte,formatRelative:kte,localize:Fte,match:ene,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nne(e,t){const n=Fa(e,t==null?void 0:t.in);return pte(n,Zte(n))+1}function rne(e,t){const n=Fa(e,t==null?void 0:t.in),r=+Gp(n)-+fte(n);return Math.round(r/RY)+1}function VY(e,t){var u,g,d,I;const n=Fa(e,t==null?void 0:t.in),r=n.getFullYear(),o=f0(),i=(t==null?void 0:t.firstWeekContainsDate)??((g=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:g.firstWeekContainsDate)??o.firstWeekContainsDate??((I=(d=o.locale)==null?void 0:d.options)==null?void 0:I.firstWeekContainsDate)??1,a=ig((t==null?void 0:t.in)||e,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const s=jC(a,t),l=ig((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=jC(l,t);return+n>=+s?r+1:+n>=+c?r:r-1}function one(e,t){var s,l,c,u;const n=f0(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,o=VY(e,t),i=ig((t==null?void 0:t.in)||e,0);return i.setFullYear(o,0,r),i.setHours(0,0,0,0),jC(i,t)}function ine(e,t){const n=Fa(e,t==null?void 0:t.in),r=+jC(n,t)-+one(n,t);return Math.round(r/RY)+1}function Sn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const bl={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Sn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Sn(n+1,2)},d(e,t){return Sn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Sn(e.getHours()%12||12,t.length)},H(e,t){return Sn(e.getHours(),t.length)},m(e,t){return Sn(e.getMinutes(),t.length)},s(e,t){return Sn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return Sn(o,t.length)}},sI={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},GW={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return bl.y(e,t)},Y:function(e,t,n,r){const o=VY(e,r),i=o>0?o:1-o;if(t==="YY"){const a=i%100;return Sn(a,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Sn(i,t.length)},R:function(e,t){const n=kY(e);return Sn(n,t.length)},u:function(e,t){const n=e.getFullYear();return Sn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Sn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Sn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return bl.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Sn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=ine(e,r);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):Sn(o,t.length)},I:function(e,t,n){const r=rne(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Sn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):bl.d(e,t)},D:function(e,t,n){const r=nne(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Sn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Sn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Sn(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=r===0?7:r;switch(t){case"i":return String(o);case"ii":return Sn(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(r===12?o=sI.noon:r===0?o=sI.midnight:o=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(r>=17?o=sI.evening:r>=12?o=sI.afternoon:r>=4?o=sI.morning:o=sI.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return bl.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):bl.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Sn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Sn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):bl.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):bl.s(e,t)},S:function(e,t){return bl.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return BW(r);case"XXXX":case"XX":return Jg(r);case"XXXXX":case"XXX":default:return Jg(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return BW(r);case"xxxx":case"xx":return Jg(r);case"xxxxx":case"xxx":default:return Jg(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+SW(r,":");case"OOOO":default:return"GMT"+Jg(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+SW(r,":");case"zzzz":default:return"GMT"+Jg(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Sn(r,t.length)},T:function(e,t,n){return Sn(+e,t.length)}};function SW(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),i=r%60;return i===0?n+String(o):n+String(o)+t+Sn(i,2)}function BW(e,t){return e%60===0?(e>0?"-":"+")+Sn(Math.abs(e)/60,2):Jg(e,t)}function Jg(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Sn(Math.trunc(r/60),2),i=Sn(r%60,2);return n+o+t+i}const wW=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},XY=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ane=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return wW(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",wW(r,t)).replace("{{time}}",XY(o,t))},sne={p:XY,P:ane},lne=/^D+$/,gne=/^Y+$/,cne=["D","DD","YY","YYYY"];function Ine(e){return lne.test(e)}function dne(e){return gne.test(e)}function une(e,t,n){const r=Cne(e,t,n);if(console.warn(r),cne.includes(e))throw new RangeError(r)}function Cne(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ane=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mne=/^'([^]*?)'?$/,pne=/''/g,fne=/[a-zA-Z]/;function bne(e,t,n){var u,g,d,I;const r=f0(),o=r.locale??tne,i=r.firstWeekContainsDate??((g=(u=r.locale)==null?void 0:u.options)==null?void 0:g.firstWeekContainsDate)??1,a=r.weekStartsOn??((I=(d=r.locale)==null?void 0:d.options)==null?void 0:I.weekStartsOn)??0,s=Fa(e,n==null?void 0:n.in);if(!yte(s))throw new RangeError("Invalid time value");let l=t.match(hne).map(C=>{const h=C[0];if(h==="p"||h==="P"){const f=sne[h];return f(C,o.formatLong)}return C}).join("").match(Ane).map(C=>{if(C==="''")return{isToken:!1,value:"'"};const h=C[0];if(h==="'")return{isToken:!1,value:yne(C)};if(GW[h])return{isToken:!0,value:C};if(h.match(fne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:C}});o.localize.preprocessor&&(l=o.localize.preprocessor(s,l));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:o};return l.map(C=>{if(!C.isToken)return C.value;const h=C.value;(dne(h)||Ine(h))&&une(h,t,String(e));const f=GW[h[0]];return f(s,h,o.localize,c)}).join("")}function yne(e){const t=e.match(mne);return t?t[1].replace(pne,"'"):e}const Zne=({open:e,onClose:t,event:n})=>{if(!n)return null;const r=()=>{t(),window.scrollBy({top:590,left:0,behavior:"smooth"})};return w.jsx(qD,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{background:"linear-gradient(135deg, #1e2a38 0%, #181818 100%)",borderRadius:4,maxWidth:"90%",border:"1px solid rgba(255, 255, 255, 0.1)","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",msOverflowStyle:"none"}},children:w.jsxs(je,{sx:{position:"relative",p:4,overflowY:"auto","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",msOverflowStyle:"none"},children:[w.jsx(tg,{onClick:t,sx:{position:"absolute",right:16,top:16,color:"#e2e8f0"},children:w.jsx(i8,{})}),w.jsx(Ee,{variant:"h4",sx:{mb:4,color:"#e2e8f0",fontWeight:"bold"},children:n.title}),w.jsxs(at,{container:!0,spacing:4,children:[w.jsx(at,{item:!0,xs:12,md:4,children:w.jsx(je,{component:"img",src:n.imageUrl,alt:n.title,sx:{width:"100%",borderRadius:3,boxShadow:"0 8px 16px rgba(0,0,0,0.4)"}})}),w.jsx(at,{item:!0,xs:12,md:8,children:w.jsx(je,{sx:{bgcolor:"rgba(255, 255, 255, 0.05)",borderRadius:4,p:3,boxShadow:"0 4px 8px rgba(0,0,0,0.2)"},children:w.jsxs(at,{container:!0,spacing:3,children:[w.jsxs(at,{item:!0,xs:12,children:[w.jsx(Ee,{variant:"subtitle1",sx:{color:"#e2e8f0",fontWeight:"bold"},children:"Description"}),w.jsx(Ee,{variant:"body1",sx:{mb:2,color:"#e2e8f0",opacity:.8},children:n.description})]}),w.jsxs(at,{item:!0,xs:6,children:[w.jsx(Ee,{variant:"subtitle1",sx:{color:"#e2e8f0",fontWeight:"bold"},children:"Director"}),w.jsx(Ee,{variant:"body1",sx:{color:"#e2e8f0",opacity:.8},children:n.director})]}),w.jsxs(at,{item:!0,xs:6,children:[w.jsx(Ee,{variant:"subtitle1",sx:{color:"#e2e8f0",fontWeight:"bold"},children:"Duration"}),w.jsxs(Ee,{variant:"body1",sx:{color:"#e2e8f0",opacity:.8},children:[n.duration," minutes"]})]}),w.jsxs(at,{item:!0,xs:6,children:[w.jsx(Ee,{variant:"subtitle1",sx:{color:"#e2e8f0",fontWeight:"bold"},children:"Release Date"}),w.jsx(Ee,{variant:"body1",sx:{color:"#e2e8f0",opacity:.8},children:bne(new Date(n.releaseDate),"MMMM dd, yyyy")})]}),w.jsxs(at,{item:!0,xs:6,children:[w.jsx(Ee,{variant:"subtitle1",sx:{color:"#e2e8f0",fontWeight:"bold"},children:"Rating"}),w.jsx(Ee,{variant:"body1",sx:{color:"#e2e8f0",opacity:.8},children:n.rating})]}),w.jsxs(at,{item:!0,xs:12,children:[w.jsx(Ee,{variant:"subtitle1",sx:{color:"#e2e8f0",fontWeight:"bold",mb:1},children:"Genre"}),w.jsx(je,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:n.genre.map((o,i)=>w.jsx(g5,{label:o,sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#e2e8f0","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)"}}},i))})]}),w.jsxs(at,{item:!0,xs:12,children:[w.jsx(Ee,{variant:"subtitle1",sx:{color:"#e2e8f0",fontWeight:"bold",mb:1},children:"Cast"}),w.jsx(je,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:n.cast.map((o,i)=>w.jsx(g5,{label:o,sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#e2e8f0","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)"}}},i))})]})]})})})]}),w.jsx(je,{sx:{mt:4,display:"flex",justifyContent:"center"},children:w.jsx(rn,{variant:"contained",onClick:r,sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#e2e8f0",padding:"10px 40px","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:"Continue to Book"})})]})})},vne=et(je)({width:"100%",height:"100%",overflow:"hidden",position:"relative",cursor:"grab"}),Gne=et(je)({display:"flex",transition:"transform 0.5s ease",height:"100%"}),Sne=et(je)({flex:"0 0 auto",height:"100%",aspectRatio:"2 / 3",margin:"0 10px",borderRadius:"8px",overflow:"hidden",transition:"transform 0.3s ease",cursor:"pointer","&:hover":{transform:"scale(1.05)"}}),Bne=et("img")({width:"100%",height:"100%",objectFit:"cover",display:"block"}),wne=()=>{const e=F.useRef(null),t=F.useRef(null),[n,r]=F.useState(!1),[o,i]=F.useState(0),[a,s]=F.useState(0),[l,c]=F.useState(!1),[u,g]=F.useState(null),{data:d}=C8();F.useEffect(()=>{e.current;const m=t.current;let p,Z;const v=k=>{if(!n){Z||(Z=k);const B=(k-Z)*.05;m&&(m.style.transform=`translateX(-${B}px)`,B>=m.offsetWidth/2&&(Z=k,m.appendChild(m.firstElementChild.cloneNode(!0)),m.removeChild(m.firstElementChild),m.style.transform="translateX(0)"))}p=requestAnimationFrame(v)};return p=requestAnimationFrame(v),()=>{cancelAnimationFrame(p)}},[n]);const I=m=>{r(!0),i(m.pageX-e.current.offsetLeft),s(e.current.scrollLeft)},C=m=>{if(Math.abs(m.pageX-(o+e.current.offsetLeft))<5){const p=m.target.closest(".card");if(p){const Z=parseInt(p.dataset.cardId),v=d.find(k=>k.id===Z);v&&A(v)}}r(!1)},h=m=>{if(!n)return;m.preventDefault();const Z=(m.pageX-e.current.offsetLeft-o)*2;e.current.scrollLeft=a-Z},f=Dr(m=>m.SetSelectedCard),A=m=>{console.log("Card clicked:",m),f(m),g(m),c(!0)};return w.jsxs(w.Fragment,{children:[w.jsx(vne,{ref:e,onMouseDown:I,onMouseUp:C,onMouseLeave:C,onMouseMove:h,children:w.jsx(Gne,{ref:t,children:d==null?void 0:d.map(m=>w.jsx(Sne,{className:"card","data-card-id":m.id,children:w.jsx(Bne,{onClick:()=>A(m),src:m.imageUrl,alt:`Card ${m.id}`})},m._id))})}),w.jsx(Zne,{open:l,onClose:()=>c(!1),event:u})]})},Wne=et(rn)(({theme:e})=>({width:"100%",padding:e.spacing(1.5),backgroundColor:e.palette.background.paper,color:e.palette.text.primary,borderRadius:e.shape.borderRadius,justifyContent:"space-between",border:`1px solid ${e.palette.divider}`,transition:"all 0.3s ease","&:hover":{backgroundColor:e.palette.action.hover,transform:"translateY(-2px)",boxShadow:e.shadows[2]}})),Rne=et(ip)(({theme:e})=>({"& .MuiPaper-root":{width:"400px",maxHeight:"500px",borderRadius:"20px",marginTop:e.spacing(1),padding:e.spacing(2),backgroundColor:"#002548",boxShadow:e.shadows[3]}})),kne=et(is)(({theme:e})=>({padding:e.spacing(1.5),borderRadius:e.shape.borderRadius,marginBottom:e.spacing(1),transition:"all 0.2s ease","&:hover":{backgroundColor:e.palette.action.hover,transform:"translateX(4px)"}})),WW=et("img")({width:"100%",height:"80px",objectFit:"cover",borderRadius:"8px",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}}),Vne=et(je)(({theme:e})=>({marginTop:e.spacing(2),width:"100%",height:"200px",borderRadius:e.shape.borderRadius,overflow:"hidden",transition:"all 0.3s ease",opacity:0,transform:"translateY(20px)","&.visible":{opacity:1,transform:"translateY(0)"}})),Xne=et(je)(({theme:e})=>({position:"absolute",bottom:0,left:0,right:0,padding:e.spacing(2),background:"linear-gradient(transparent, rgba(0,0,0,0.8))",color:"white"})),Jne=()=>{const[e,t]=F.useState(null),[n,r]=F.useState(null),o=Dr(c=>c.SetSelectedTheater),{data:i}=o0(),a=c=>{t(c.currentTarget)},s=()=>{t(null)},l=c=>{console.log("Selected theater:",c),r(c),o(c._id),s()};return w.jsxs(je,{sx:{width:"100%",backgroundColor:"#002548"},children:[w.jsx(Wne,{onClick:a,endIcon:w.jsx(s8,{}),variant:"contained",children:n?w.jsxs(je,{sx:{display:"flex",alignItems:"center",gap:1},children:[w.jsx(_b,{fontSize:"small"}),n.name]}):"Select Theater"}),w.jsx(Rne,{anchorEl:e,open:!!e,onClose:s,TransitionComponent:ZG,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:w.jsx(at,{container:!0,spacing:2,children:i==null?void 0:i.map(c=>w.jsx(at,{item:!0,xs:12,children:w.jsx(kne,{onClick:()=>l(c),children:w.jsxs(at,{container:!0,spacing:2,alignItems:"center",children:[w.jsx(at,{item:!0,xs:4,children:w.jsx(WW,{src:c.imageUrl,alt:c.name})}),w.jsxs(at,{item:!0,xs:8,children:[w.jsx(Ee,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:c.name}),w.jsxs(Ee,{variant:"body2",color:"text.secondary",children:[w.jsx(_b,{fontSize:"small",sx:{mr:.5,verticalAlign:"middle"}}),c.location]})]})]})})},c._id))})}),n&&w.jsxs(Vne,{className:"visible",sx:{position:"relative"},children:[w.jsx(WW,{src:n.imageUrl,alt:n.name,style:{height:"100%",width:"100%"}}),w.jsxs(Xne,{children:[w.jsx(Ee,{variant:"h6",gutterBottom:!0,children:n.name}),w.jsxs(Ee,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:.5},children:[w.jsx(_b,{fontSize:"small"}),n.location]}),w.jsx(Ee,{variant:"body2",sx:{mt:1},children:n.description})]})]})]})},xne=et(xa)(({theme:e})=>({width:"100%",maxWidth:"280px",backgroundColor:"#001529",borderRadius:"16px",padding:"15px",margin:"20px auto",border:"1px solid rgba(79, 158, 255, 0.15)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"})),Yne=et(je)(({theme:e})=>({width:"100%",height:"400px",backgroundColor:"#002548",borderRadius:"12px",overflow:"hidden",position:"relative"})),Nne=et(je)({height:"45px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",margin:"0 10px",borderRadius:"8px","&:hover":{backgroundColor:"rgba(79, 158, 255, 0.2)"}}),Hne=et(je)({position:"absolute",width:"calc(100% - 20px)",height:"45px",left:"10px",top:"67.5px",backgroundColor:"rgba(79, 158, 255, 0.15)",borderRadius:"8px",pointerEvents:"none",border:"1px solid rgba(79, 158, 255, 0.3)"});function Fne(e){const t=new Date(e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${n}-${r}-${o}`}const Kne=({onTimeSelect:e})=>{var h;const[t,n]=F.useState(null),[r,o]=F.useState([]),[i,a]=F.useState(null),[s,l]=F.useState(!1),c=Dr(f=>f.selectedTheater),u=Dr(f=>f.selectedDate),g=Dr(f=>f.SetSelectedTime),d=Dr(f=>f.SetaVailableTime),I=Fne(u),C=f=>{g(f),n(f),e&&e(f)};return F.useEffect(()=>{c&&(async()=>{l(!0);try{const A=await hn.get("https://azure-reservation-app.azurewebsites.net/api/showtimes",{params:{theater:c,date:I}});o(A.data),d(A.data)}catch(A){a(A)}finally{l(!1)}})()},[c,u]),w.jsxs(xne,{elevation:0,children:[w.jsx(Ee,{variant:"subtitle1",sx:{textAlign:"center",mb:2,color:"#4f9eff",fontWeight:600},children:"Available Times"}),w.jsxs(Yne,{children:[w.jsx(Hne,{}),w.jsxs(je,{sx:{height:"100%",overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{backgroundColor:"rgba(79, 158, 255, 0.05)",borderRadius:"3px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(79, 158, 255, 0.2)",borderRadius:"3px","&:hover":{backgroundColor:"rgba(79, 158, 255, 0.3)"}}},children:[w.jsx(je,{sx:{height:"67.5px"}}),(h=r[0])==null?void 0:h.times.map((f,A)=>w.jsx(Nne,{onClick:()=>C(f),sx:{backgroundColor:t===f?"rgba(79, 158, 255, 0.3)":"transparent",color:t===f?"#4f9eff":"rgba(255, 255, 255, 0.8)",fontWeight:t===f?600:400},children:w.jsx(Ee,{sx:{fontSize:"0.95rem",letterSpacing:"0.5px"},children:f})},A)),w.jsx(je,{sx:{height:"67.5px"}})]})]})]})},Lne=Pe(je)(({theme:e})=>({position:"relative",padding:"20px",borderRadius:"10px",backgroundColor:"#ffffff",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1,margin:"-5px",borderRadius:"inherit",background:"linear-gradient(45deg, #FF6B6B, #FFD93D, #6BCB77, #4D96FF)",backgroundSize:"200% 200%",animation:"gradient 5s ease infinite"},"@keyframes gradient":{"0%":{backgroundPosition:"0% 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0% 50%"}}})),Ene=yf({palette:{mode:"dark"},typography:{fontFamily:"Arial, sans-serif"}}),RW=()=>{F.useState("home");const e=Dr(i=>i.selectedCard),t=Dr(i=>i.selectedTheater),n=Dr(i=>i.selectedDate);Dr(i=>i.availableTime);const r=["09:00","09:30","10:00","10:30","11:00","11:30"],o=i=>{console.log("Selected time:",i)};return w.jsx(w.Fragment,{children:w.jsx(aM,{theme:Ene,children:w.jsx(je,{sx:{background:"linear-gradient(135deg, #001529 0%, #181818 100%)",minHeight:"100vh",overflow:"hidden",display:"flex",paddingTop:"80px"},children:w.jsxs(je,{sx:{flexGrow:1,p:3,position:"relative"},children:[w.jsx(Ee,{component:"div",sx:{color:"#e2e8f0",mb:4,fontSize:"2.6rem"},children:"ReserveNow"}),w.jsxs(at,{container:!0,spacing:2,sx:{mt:4},children:[w.jsx(at,{item:!0,xs:12,sm:6,md:12,children:w.jsx(Cte,{})}),w.jsx(Ee,{variant:"h3",component:"div",sx:{color:"#e2e8f0",mb:4,marginLeft:"14px",marginTop:"40px",fontSize:"2.6rem"},children:"Current Events"}),w.jsx(at,{item:!0,xs:12,sm:6,md:12,children:w.jsx(je,{sx:{height:340,bgcolor:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",overflow:"hidden",width:"193vh",overflowX:"hidden"},children:w.jsx(wne,{})})}),e&&w.jsx(hG,{in:!!e,timeout:300,classNames:"fade",unmountOnExit:!0,children:w.jsxs(w.Fragment,{children:[w.jsx(Ee,{variant:"h3",component:"div",sx:{color:"#e2e8f0",mb:4,marginLeft:"14px",marginTop:"40px",width:"100%",fontSize:"2.6rem"},children:"Add Reservation"}),w.jsx(at,{item:!0,xs:12,md:4,lg:4,children:w.jsxs(Lne,{elevation:0,sx:{p:2,height:"100%",backgroundColor:"#002548",borderRadius:6,color:"white"},children:[w.jsx(Ee,{variant:"h6",gutterBottom:!0,children:"Select Theater"}),w.jsx(Jne,{})]})}),w.jsx(at,{item:!0,xs:12,sm:8,md:8,children:w.jsx(rte,{})})]})}),n&&t&&w.jsxs(w.Fragment,{children:[w.jsx(Ee,{variant:"h3",component:"div",sx:{color:"#e2e8f0",mb:4,marginLeft:"14px",marginTop:"40px",width:"100%"},children:"Book Your Seats"}),w.jsx(at,{item:!0,xs:12,sm:8,md:9,children:w.jsx(DG,{})}),w.jsx(at,{item:!0,xs:12,sm:8,md:3,children:w.jsxs(je,{children:[w.jsx(Ee,{variant:"h5",sx:{textAlign:"center",mb:2},children:"Select Time"}),w.jsx(Kne,{availableTimes:r,onTimeSelect:o})]})})]})]})]})})})})},Mne=new Ni("/bookings"),Dne=e=>bc({queryKey:["bookings",e],queryFn:()=>Mne.getOne(e)}),zne=et(je)(({theme:e})=>({position:"relative",padding:"20px",borderRadius:"10px",backgroundColor:"rgba(255, 255, 255, 0.05)",overflow:"hidden",marginBottom:"20px",marginTop:"200px","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1,margin:"-5px",borderRadius:"inherit",background:"linear-gradient(45deg, #FF6B6B, #FFD93D, #6BCB77, #4D96FF)",backgroundSize:"200% 200%",animation:"gradient 5s ease infinite"}})),Tne=et(rn)({backgroundColor:"#003366",color:"#fff","&:hover":{backgroundColor:"#002244",transform:"translateY(-2px)"},transition:"all 0.3s ease"}),Une=()=>{const{bookingId:e}=IV(),{data:t,refetch:n}=Dne(e);console.log("scanned booking: ",t);const r=async o=>{console.log("bookingId: ",o);try{qo.fire({title:"Release Booking?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,background:"#1e2a38",color:"#e2e8f0",confirmButtonColor:"#dc2626",cancelButtonColor:"#5C2FC2",confirmButtonText:"Confirm"}).then(async i=>{if(i.isConfirmed){const a=await hn.delete(`https://azure-reservation-app.azurewebsites.net/api/bookings/${o}`);n(),console.log("Booking canceled:",a.data)}})}catch(i){console.error("Error canceling booking:",i)}};return w.jsx(zne,{children:w.jsxs(at,{container:!0,spacing:3,children:[w.jsxs(at,{item:!0,xs:12,md:6,children:[w.jsx(Ee,{variant:"h5",sx:{color:"black",mb:1,fontSize:"1.8rem",fontWeight:"bold"},children:t==null?void 0:t.theaterName}),w.jsxs(Ee,{sx:{color:"black",fontSize:"1.2rem",fontWeight:"500"},children:["Seats: ",t==null?void 0:t.seats.join(", ")]}),w.jsxs(Ee,{sx:{color:"black",fontSize:"1.2rem",fontWeight:"500"},children:["Amount: $",t==null?void 0:t.totalAmount]}),w.jsxs(Ee,{sx:{color:"black",fontSize:"1.2rem",fontWeight:"500"},children:["Date: ",t==null?void 0:t.bookingDate," | Time: ",t==null?void 0:t.bookingTime]})]}),w.jsx(at,{item:!0,xs:12,md:6,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:(t==null?void 0:t.state)==="booked"?w.jsx(Tne,{onClick:()=>r(t==null?void 0:t._id),children:"Release Booking"}):null})]})})},jne="/assets/react-CHdo91hT.svg",Qne=()=>{const[e,t]=F.useState(!0),[n,r]=F.useState(null),[o,i]=F.useState(""),[a,s]=F.useState(""),[l,c]=F.useState(""),{logout:u,getCurrentUser:g}=gi(),d=g()._id,{data:I}=pJ(d);console.log("My data: ",I);const C=async()=>{try{const p=localStorage.getItem("token"),Z=await fetch("/api/viewProfile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`}});if(!Z.ok)throw new Error("Failed to fetch profile");const v=await Z.json();console.log("Profile:",v)}catch(p){console.error(p)}};F.useEffect(()=>{C()},[]);const h=async p=>{const Z=localStorage.getItem("token");(await fetch("/api/updateProfile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Z}`},body:JSON.stringify(p)})).ok||console.error("Failed to update profile")},f=async()=>{if(window.confirm("Are you sure you want to delete your profile?"))try{const p=localStorage.getItem("token");if(!p){console.error("Token not found in localStorage"),alert("Authorization failed: No token found.");return}const Z=await fetch("/api/deleteProfile",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`}});if(Z.ok){const v=await Z.json();alert(v.message)}else{const v=await Z.json();console.error("Error deleting profile",v),alert("Failed to delete profile: "+(v.error||"Unknown error"))}}catch(p){console.error("Network error:",p),alert("Failed to delete profile due to network error.")}},A=p=>{p.preventDefault(),e||h(),t(!e)},m=p=>{r(p.target.files[0])};return w.jsx(je,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"linear-gradient(to right, #0d1a33, #001f4d)",marginTop:"40px",width:"203vh",overflowX:"hidden"},children:w.jsx(pX,{sx:{width:700,padding:3,boxShadow:6,borderRadius:4,backgroundColor:"#003161"},children:w.jsxs(fX,{children:[w.jsx(je,{sx:{textAlign:"center",mb:3},children:w.jsx("h1",{style:{color:"white",fontWeight:"bold",fontSize:"2rem",margin:"0"},children:"MY PROFILE"})}),w.jsx(je,{sx:{display:"flex",justifyContent:"center",mb:3},children:w.jsxs(je,{sx:{position:"relative"},children:[w.jsx(AX,{src:(I==null?void 0:I.picture)||jne,alt:"avatar",sx:{width:150,height:150,border:"4px solid #3f4348",boxShadow:"0px 8px 15px rgba(0, 0, 0, 0.1)"}}),w.jsxs(tg,{component:"label",sx:{position:"absolute",bottom:5,right:10,bgcolor:"#fff",border:"2px solid #3f4348","&:hover":{bgcolor:"#f0f0f0"}},children:[w.jsx(d8,{sx:{fontSize:"1.2rem"}}),w.jsx("input",{type:"file",hidden:!0,onChange:m})]})]})}),w.jsxs("form",{children:[e?w.jsxs(WG,{children:[w.jsx(kG,{children:w.jsxs(_g,{children:[w.jsx(ur,{sx:{fontWeight:"bold",color:"white"},children:"Field"}),w.jsx(ur,{sx:{fontWeight:"bold",color:"white"},children:"Information"})]})}),w.jsxs(RG,{children:[w.jsxs(_g,{children:[w.jsx(ur,{sx:{color:"white"},children:"Username"}),w.jsx(ur,{sx:{color:"white"},children:I==null?void 0:I.name})]}),w.jsxs(_g,{children:[w.jsx(ur,{sx:{color:"white"},children:"Email"}),w.jsx(ur,{sx:{color:"white"},children:I==null?void 0:I.email})]})]})]}):w.jsxs(w.Fragment,{children:[w.jsx(Vr,{label:"New Username",value:o,onChange:p=>i(p.target.value),fullWidth:!0,sx:{mb:2,color:"white"}}),w.jsx(Vr,{label:"New Email",value:a,onChange:p=>s(p.target.value),fullWidth:!0,sx:{mb:2,color:"white"}}),w.jsx(Vr,{label:"New Password",type:"password",value:l,onChange:p=>c(p.target.value),fullWidth:!0,sx:{mb:2,color:"white"}})]}),w.jsx(rn,{onClick:A,fullWidth:!0,variant:"contained",sx:{bgcolor:"#3A9679",color:"#ffffff",mt:3,"&:hover":{bgcolor:"#3A9679"}},children:e?"Edit Profile":"Save Changes"})]}),w.jsx(rn,{onClick:f,fullWidth:!0,variant:"contained",sx:{bgcolor:"#B31312",color:"#ffffff",mt:2,"&:hover":{bgcolor:"#B31312"}},children:"Delete Profile"})]})})})},Pne=u9([{path:"/",element:w.jsx(KP,{}),children:[{index:!0,element:w.jsx(Js,{children:w.jsx(RW,{})})},{path:"/moviedetails/:id",element:w.jsx(Js,{children:w.jsx(m8,{})})},{path:"/seatselection",element:w.jsx(Js,{children:w.jsx(DG,{})})},{path:"/bookingdetails",element:w.jsx(Js,{children:w.jsx(o$,{})})},{path:"/mybookings",element:w.jsx(Js,{children:w.jsx(l$,{})})},{path:"/scannedbooking/:bookingId",element:w.jsx(Js,{children:w.jsx(Une,{})})},{path:"/profile",element:w.jsx(Js,{children:w.jsx(Qne,{})})}]},{path:"/dashboard",element:w.jsx(g$,{children:w.jsx(_q,{})}),children:[{index:!0,element:w.jsx(nY,{})}]},{path:"/moviepostform",element:w.jsx(Js,{children:w.jsx(MJ,{})})},{path:"/showtimeform",element:w.jsx(Js,{children:w.jsx(h$,{})})},{path:"/signup",element:w.jsx(uO,{})},{path:"/signin",element:w.jsx(yO,{})},{path:"/login",element:w.jsx(DJ,{})},{path:"/slider",element:w.jsx(A$,{})},{path:"/newdashboard",element:w.jsx(RW,{})}]);function One(){return w.jsx(w.Fragment,{children:w.jsxs(KU,{children:[" ",w.jsx(Z9,{router:Pne})]})})}const _ne=new Rj;qk(document.getElementById("root")).render(w.jsx(qe.StrictMode,{children:w.jsx(xj,{client:_ne,children:w.jsx(One,{})})}));export{MU as _,Yl as c,qC as g};
